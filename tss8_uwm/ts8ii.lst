
      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 1


    1             /TSS-8.25 CONFIGURATION FOR UWM
    2             /CONFIGURATION PARAMETERS FOR THE TSS/8 MONITOR
    3             /COPYRIGHT 1971 - DIGITAL EQUIPMENT CORPORATION; MAYNARD, MASS.
    4             /
    5             /TSS-8 SYSTEM PARAMETERS AND OPTIONS.  FOR EACH PARAMETER,
    6             /THE COMMENT INIDCATES THE POSSIBLE RESPONSES.
    7             
    8       0000  DEBUG=  0       /SYSTEM DEBUGGING CONTROL:
    9                             / =0, PRODUCTION SYSTEM (AUTO-RESTARTS & ERROR FIXUP)
   10                             / =1, SYSTEM RELIABILITY (JUST AUTO-RESTARTS)
   11                             / =2, SYSTEM DEBUGGING (SYSTEM HALTS ON ERROR)
   12                             / =3, FULL CHECKING (THOROUGH 'RETB' CHECK)
   13                             /BITS 0-8, AVAILABLE FOR LOCAL SWITCHES:
   14                             / 4000 - ENABLE MQ MEMORY DISPLAY (IN TIMER)
   15             
   16       0002  CPU=    2       /0 IF CPU IS PDP-8/I; 1 IF PDP-8
   17                             / 2 IF PDP-8/E; 3 IF PDP-12; 4 IF PDP-8/A
   18             
   19       0000  EAE=    0       /20 IF CPU INCLUDES EAE; 0 IF NOT
   20             
   21       0070  CORMEM= 70      /HIGHEST DATA FIELD SELECT; FOR 12K SYS,
   22                             / RESPOND 20; FOR 16K, RESPOND 30; FOR 32K, 70
   23             
   24       0000  D680=   0       /2 IF TTY INTERFACING IS 680 OR DC08;
   25                             / 0 IF TTY INTERFACING IS PT08'S
   26             
   27       0000  PHONES= 0       /1 IF 680 OR DC08 INCLUDES 689 OR DC08F;
   28                             / 0 IF IT DOESN'T OR TTY INTERFACING IS PT08'S
   29             
   30       0000  RF08=   0       /40 IF SYSTEM DISC IS DF32; 0 IF RF08
   31             
   32       0001  RS08=   1       /# OF DISCS IN SYSTEM, WHETHER RF08 OR DF32
   33             
   34       0001  RK05=   1       /# OF NONSYSTEM RK05 DRIVES
   35             
   36       0000  RK8E=   0       /# OF RK8E DRIVES; ONLY FIRST IS USED FOR SYSTEM
   37                             / THE REMAINDER ARE TREATED AS PERIPHERALS
   38             
   39       0001  READER= 1       /1 IF SYSTEM INCLUDES HIGH-SPEED READER; 0 IF NOT
   40             
   41       0001  PUNCH=  1       /1 IF SYS HAS HSP, 0 IF NOT
   42             
   43       0001  TC01=   1       /1 IF SYS HAS DECTAPES; 0 IF NOT
   44             
   45             
   46       0000  TD8E=   0       /1 IF TD8E DECTAPES AVAILABLE FOR LOADING & DUMPING
   47                             / 0 IF NOT; NOTE THAT TD8E TAPES CANNOT BE USED UNDER
   48                             / TSS/8, THEY REQUIRE CONTINUOUS CPU ATTENTION
   49             
   50       0003  LPT=    3       /0 IF NO PRINTER ON SYS; 1 IF LP08; 2 IF LS8E; 3 IF NONSTANDARD
   51             
   52       0000  CDR=    0       /NO SYS CAN HAVE CARD READER
   53             /
   54             /MONITOR OPTIONS 
   55             /FILL IN THE FOLLOWING LINES TO INDICATE THE 
   56             /MONITOR CAPACITY FOR THIS SYSTEM
   57             

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 2


   58                     DECIMAL
   59       0024  JOBMAX= 20      /NUMBER OF SIMULTANEOUS USERS (.LE. 20)
   60             
   61       0001  CONTTY= 1       / (ALWAYS HAVE A CONSOLE)
   62             
   63       0000  DC08A=  0       /NUMBER OF TERMINALS VIA DC08A (PDP-8/I ONLY, 19 MAX)
   64             
   65       0000  DC08LO= 0       /LOWEST LINE-NUMBER USED ON DC08A
   66             
   67       0000  PT08=   0       /NUMBER OF TERMINALS VIA PT08 (PDP-8 & PDP-8/I ONLY)
   68             
   69       0017  KL8=    15      /NUMBER OF TERMINALS VIA KL8E (PDP-8/E ONLY, 19 MAX)
   70             
   71       0003  CDVIN=  3       /NONSTANDARD INPUT CHARACTER DEVICES (HIGHEST USED)
   72                             / 1 = R2; 2 = X0; 3 = X1; 4 = X2; 5 = X3
   73             
   74       0004  CDVOUT= 4       /NONSTANDARD OUTPUT CHARACTER DEVICES (HIGHEST USED)
   75                             / 1 = P2; 2 = L2; 3 = Y0; 4 = Y1; 5 = Y2; 6 = Y3
   76             
   77       0012  TRUKBD= 10      /NUMBER OF ACTUAL KEYBOARDS ON SYSTEM (NOT COUNTING
   78                             / CONSOLE TTY). THIS MUST BE .LE. NULINE; NULINE
   79                             / MAY INCLUDE DUMMY TERMINALS, THIS MAY NOT.
   80             
   81       0012  FRCMAX= TRUKBD  /THE HIGHEST KEYBOARD # A '00XX' ACCT # MAY FORCE
   82                             / NOTE THAT A '000X' ACCOUNT MAY FORCE UP TO 'NULINE'
   83             
   84       0012  TLKMAX= TRUKBD  /THE HIGHEST KEYBOARD # WHICH MAY BE 'TALK'ED TO
   85             
   86       0012  BRDMAX= TRUKBD  /THE HIGHEST KEYBOARD WHICH WILL RECEIVE BROADCASTS
   87                     OCTAL
   88             
   89       0002  DTAMIN= 2       /THE FIRST DECTAPE DRIVE WHICH WILL BE ASSIGNED
   90                             / FOR 'ASSIGN D' COMMAND; NORMALLY =0, BUT MAY
   91                             / VARY FOR SLIGHTLY RESTRICTED DRIVE USE.
   92             
   93       0007  BILLNG= 7       /THE ACCOUNT NUMBER OF THE BILLING SYSTEM
   94                             / 0, IF NO BILLING SYSTEM USED
   95             /
   96             /SYSTEM CONSTANTS
   97             
   98       0020  INFLD=  20      /FIELD SELECT THAT 'INIT' SHOULD BE BOOTED INTO
   99                             / MAKING IT 20 AVOIDS PROBLEMS SHOULD A
  100                             / FIELD NEED REPAIR & SYSTEM IS RUN ON 12K
  101       0001  TTYEVEN=1       /1 INDICATES PARITY TTY MAY BE USED WITH SYS
  102                             / 0 ALLOWS ONLY DEC MODIFIED TTYS
  103             
  104             ///     END OF SYSTEM CONFIGURATION PARAMETERS

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 3


  105             
  106             /PARAMETERS - UWM VERSION 25
  107             /
  108             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
  109             /                               MAYNARD, MASSACHUSETTS
  110             /
  111             /EXTENSIVELY MODIFIED AND CORRECTED BY
  112             /       RICHARD BARTLEIN, 1974, 1976
  113             /       UNIVERSITY OF WISCONSIN - MILWAUKEE
  114             /
  115       0031  VERNUM= 31      /SYSTEM VERSION NUMBER
  116             /
  117       0000          IFZERO DC08A    <D689=0>
  118                     IFNZRO DC08A    <
  119                             IFNZRO PHONES   <D689=4>
  120                             IFZERO PHONES   <D689=0>>
  121             
  122       0017  NULINE= DC08A+PT08+KL8  /NUMBER OF TERMINALS LESS CONSOLE
  123       37777777772  QUANT=  -6              /NUMBER OF SYSTEM TICKS PER TIME SLICE
  124       0000  PLT=    0
  125       0005  STOMIN= 5               /MINIMUM # FREE STORAGE BLOCKS FOR NEW JOB
  126       0005  SWDEX=  5               /DISC TRACK OF FIRST SWAP AREA
  127       0024  TICSPS= 24              /NUMBER OF SYSTEM TICKS PER SECOND
  128             
  129                     IFZERO RK8E <
  130                     IFZERO RF08-40 <
  131             DSKSIZ= RS08^10
  132                     >
  133                     IFZERO RF08 <
  134       0100  DSKSIZ= RS08^100        /# OF 4K DISC TRACKS
  135                     >>
  136                     IFNZRO RK8E <
  137             DSKSIZ= 400             /# OF 4K DISC TRACKS
  138                     >
  139       0062  CLOCKR= TICSPS%2+1750%TICSPS    /MILLISECONDS PER SYSTEM TICK
  140       0645  INCLK2= 0645            /1,728,000 TICKS PER DAY
  141       17000  INCLK1= 600^TICSPS      / (LOW 12 BITS OF 86,400 SECS/DAY * TICKS/SEC)
  142       2260  TICMIN= 74^TICSPS       /SYSTEM TICKS PER MINUTE
  143             
  144       0010  INIDEX= 10      /INIT DISC EXTENSION
  145       0030  TS8DEX= 30      /FIELD 0 DISC EXTENSION*2^3
  146       0000  ERPDEX= 0       /ERP DISC EXTENSION*4
  147       0000  ERPWC=  0       /ERP WORD COUNT
  148       0004  FIPDEX= 4       /FIP DISC EXTENSION*4
  149       0000  FIPWC=  0       /FIP WORD COUNT
  150       0000  SIDEX=  ERPDEX  /SI DISC EXTENSION*4
  151       0000  SIWC=   ERPWC   /SI WORD COUNT
  152       0002  LIBACT= 2       /LIBRARY ACCOUNT #
  153       4000  BRKINI= 4000    /INITIAL USER BREAK MASK
  154       0400  WRDSEG= 400     /#WORDS PER DISC SEGMENT
  155             
  156             /IOT DEFINITIONS
  157             
  158                     IFZERO D680-2 <
  159             TTINCR= 6401    /INCREMENT LINE REGISTER
  160             TTI=    6402    /TELETYPE INPUT COMMAND
  161             TTO=    6404    /TELETYPE OUTPUT COMMAND

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 4


  162             TTCL=   6411    /CLEAR LINE REGISTER
  163             TTSL=   6412    /SET LINE REGISTER, CLEAR AC
  164             TTRL=   6414    /READ LINE REGISTER
  165             T8SKP=  6421    /SKIP ON CLOCK FLAG
  166             T8OFF=  6422    /TURN CLOCK OFF
  167             TT8ON=  6424    /TURN CLOCK ON
  168             TTRINC= 6461    /INCREMENT THE R REG.
  169             TT8CLR= 6473    /CLEAR AND LOAD THE R REG.
  170                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 5


  171             /EXTENDED MEMORY
  172             
  173       6201  CDF=    6201    /CHANGE TO DATA FIELD 0
  174       6202  CIF=    6202    /CHANGE TO INSTRUCTION FIELD 0
  175       6203  CDI=    6203    /CHANGE DATA & INSTRUCTION FIELDS
  176       6204  CINT=   6204    /CLEAR USER IOT
  177             
  178       6214  RDF=    6214    /READ DATA FIELD
  179       6224  RIF=    6224    /READ INSTRUCTION FIELD
  180       6234  RIB=    6234    /READ INTERRUPT BUFFER
  181       6244  RMF=    6244    /RESTORE MEMORY FIELD
  182       6254  SINT=   6254    /SKIP ON USER IOT
  183       6264  CUF=    6264    /USER FLAG OFF
  184       6274  SUF=    6274    /USER FLAG ON
  185             
  186             /EAE
  187                     IFZERO EAE-20 <
  188             MUY=    7405    /MULTIPLY
  189             DVI=    7407    /DIVIDE
  190             NMI=    7411    /NORMALIZE
  191             SHL=    7413    /SHIFT ARITHMETIC LEFT
  192             ASR=    7415    /ARITHMETIC SHIFT RIGHT
  193             LSR=    7417    /LOGICAL SHIFT RIGHT
  194             MQL=    7421    /LOAD MQ
  195             SCL=    7403    /STEP COUNTER LOAD FROM MEMORY
  196             SCA=    7441    /STEP COUNTER TO AC
  197             MQA=    7501    /MQ TO AC
  198             
  199                     IFZERO CPU-2 <
  200             DPSZ=   7451    /SKIP IF AC=MQ=0 (MODE B ONLY)
  201             SAM=    7453    /SUBTRACT AC FROM MQ
  202             SKB=    7671    /SKIP IF MODE B (MESSES UP AC AND MQ)
  203             SWBA=   7447    /CHANGE MODE TO A
  204             SWAB=   7431    /CHANGE MODE TO B (ALSO DOES MQL)
  205             ACS=    7403    /AC(7:11) TO SC; AC CLEARED 
  206                     >>
  207                     IFZERO CPU-2 <
  208       6003  SRQ=    6003    /SKIP ON INTERRUPT REQUEST
  209       6004  GTF=    6004    /LINK TO AC0, GT FLAG TO AC1
  210       6005  RTF=    6005    /AC0 TO LINK, AC1 TO GT FLAG
  211       6006  SGT=    6006    /SKIP ON GT FLAG
  212       6007  CAF=    6007    /CLEAR ALL FLAGS
  213       6102  SPL=    6102    /SKIP ON POWER LOW
  214                     >
  215             
  216                     IFZERO CPU-4 <
  217             SPL=    6102    /SKIP ON POWER LOW
  218             CAL=    6133    /CLEAR POWER LOW FLAG
  219                     >
  220             
  221             /LINE PRINTER IOTS
  222       6661  LSF=    6661    /SKIP ON CHAR FLAG SET
  223       6662  LCF=    6662    /CLEAR CHAR FLAG
  224       6663  LSRP=   6663    /SKIP ON NOT READY OR ON ERROR
  225       6664  LLC=    6664    /TRANSMIT CHAR TO PRINTER
  226       6665  LIE=    6665    /AC11 TO INTERRUPT ENABLE (LS08/LS8E)
  227       6665  LSP=    6665    /SET PROGRAM INTERRUPT (LP08/LE8)

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 6


  228       6666  LPC=    6666    /TRANSMIT CHAR & CLEAR FLAG
  229       6667  LCP=    6667    /CLEAR PROGRAM INTERRUPT

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 7


  230             /CTY
  231             
  232       6044  TPC=    6044    /LOAD TELEPRINTER AND PRINT
  233             
  234             /DISC (DF32)
  235             
  236       6601  DCMA=   6601    /CLEAR
  237       6603  DMAR=   6603    /READ
  238       6605  DMAW=   6605    /WRITE
  239       6611  DCEA=   6611    /CLEAR DISC EXTENDED ADDRESS
  240       6615  DEAL=   6615    /LOAD EXTENDED ADDRESS
  241       6621  DFSE=   6621    /SKIP ON ERROR
  242       6622  DFSC=   6622    /SKIP ON COMPLETION
  243       6616  DEAC=   6616    /READ EXTENDED ADDRESS
  244             
  245             /DISC (RF08)
  246             
  247       6615  DIML=   6615
  248       6616  DIMA=   6616
  249       6643  DXAL=   6643
  250             
  251             /RK05 DISC IOTS
  252       6740          IFZERO PHONES   <RKDV=6740>
  253                     IFNZRO PHONES   <RKDV=6750>
  254       6741  DSKP=   RKDV+1  /SKIP IF DONE OR ERROR
  255       6742  DCLR=   RKDV+2  /CLEAR THE CONTROLLER
  256       6743  DLAG=   RKDV+3  /LOAD DISC ADDRESS & GO
  257       6744  DLCA=   RKDV+4  /LOAD CURRENT CORE ADDRESS
  258       6745  DRST=   RKDV+5  /READ THE STATUS
  259       6746  DLDC=   RKDV+6  /LOAD THE COMMAND REGISTER
  260       6747  DMAINT= RKDV+7  /MAINTENANCE ONLY
  261             
  262             /
  263             /TC08 DECTAPE CONTROLLER IOTS
  264       6761  DTRA=   6761    /READ A-REGISTER
  265       6762  DTCA=   6762    /CLEAR A-REGISTER
  266       6764  DTXA=   6764    /XOR INTO A-REGISTER
  267       6771  DTSF=   6771    /SKIP ON DECTAPE FLAG
  268       6772  DTRB=   6772    /READ STATUS-REGISTER (B)
  269       6774  DTLB=   6774    /LOAD STATUS-REGISTER (B)
  270             
  271             /CARD READER IOTS
  272       6631  RCSF=   6631    /SKIP ON DATA READY
  273       6632  RCRA=   6632    /READ ALPHANUMERIC
  274       6634  RCRB=   6634    /READ BINARY
  275       6635  RCNO=   6635    /READ CONDITIONS OUT TO CARD READER     (8/E ONLY)
  276       6636  RCRC=   6636    /READ COMPRESSED                        (8/E ONLY)
  277       6637  RCNI=   6637    /READ CONDITION IN FROM CARD READER     (8/E ONLY)
  278       6671  RCSD=   6671    /SKIP ON CARD DONE FLAG
  279       6672  RCSE=   6672    /SELECT CARD READER AND SKIP IF READY
  280       6674  RCRD=   6674    /CLEAR CARD DONE FLAG
  281       6675  RCSI=   6675    /SKIP IF INTERRUPT BEING GENERATED      (8/E ONLY)
  282       6677  RCTF=   6677    /CLEAR TRANSITION FLAGS                 (8/E ONLY)
  283             
  284                     IFZERO CPU <
  285             /KW8I           REAL TIME CLOCK
  286             

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 8


  287             CECI=   6137    /CLEAR AND ENABLE CLOCK AND INTERRUPT
  288             CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  289                     >
  290             
  291                     IFZERO CPU-1 <
  292             CECI=   6315    /CLOCK ENABLE
  293             CSCF=   6301    /SKIP ON CLOCK FLAG
  294             CCF=    6302    /CLEAR CLOCK FLAG, CLEAR ENABLE AND CLEAR BUFFER
  295             CLB=    6304    /LOAD BUFFER FROM AC
  296                     >
  297             
  298                     IFZERO CPU-2 <
  299       6131  CECI=   6131    /CLOCK ENABLE
  300       6133  CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  301                     >
  302             
  303                     IFZERO CPU-3 <
  304             CLAB=   6133
  305             CLLR=   6132
  306             CLEN=   6134
  307             CLSA=   6135
  308             CLSK=   6131
  309             
  310             MTPF=   6113
  311             MINT=   6115
  312             MTON=   6117
  313             MKTF=   6123
  314             MINS=   6125
  315             MTRS=   6127
  316             
  317             MKSF=   6111
  318             MKCC=   6112
  319             MKRS=   6114
  320             MKRB=   6116
  321             
  322             MTSF=   6121
  323             MTCF=   6122
  324             MTPC=   6124
  325             MTLS=   6126
  326                     >
  327             
  328                     IFZERO CPU-4 <
  329             CLLE=   6135    /AC11 TO CLOCK INTERRUPT ENABLE
  330             CLCL=   6136    /CLEAR CLOCK FLAG
  331             CLSK=   6137    /SKIP ON CLOCK FLAG
  332                     >
  333             
  334                     IFNZRO DC08A <
  335             /689AG
  336             
  337             SRF=    6701    /SKIP IF RING FLAG
  338             SCF=    6711    /SKIP IF CARRIER FLAG
  339             DFCRF=  6742    /CLEAR RING FLAG
  340             CTG=    6721    /CLEAR GROUP COUNTER
  341             RRS=    6702    /READ RING STATUS
  342             ITG=    6731    /INCREMENT GROUP COUNTER
  343             STR=    6722    /SET TERMINAL READY

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 9


  344             EDF=    6704    /ENABLE DATAPHONE FEATURES
  345             DDF=    6714    /DISABLE DATAPHONE FEATURES
  346             CTR=    6724    /CLEAR TERMINAL FLAG
  347             CCF=    6741    /CLEAR CARRIER FLAG
  348             RCS=    6712    /READ CARRIER STATUS
  349                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 10


  350             /FIP IOTS (AS USED INTERNALLY)
  351             
  352       0040  ASD=    0040    /ASSIGN DEVICE
  353       0042  REL=    0042    /RELEASE DEVICE
  354       0200  REN=    0200    /RENAME FILE
  355       6601  OPEN=   6601    /OPEN FILE
  356       0202  CLOS=   0202    /CLOSE
  357       6603  RFILE=  6603    /READ FILE
  358       0204  PROT=   0204    /PROTECT
  359       6605  WFILE=  6605    /WRITE FILE
  360       6606  XOPEN=  6606    /OPEN FILE WITH EXCLUSIVE USE
  361       0207  CPASS=  0207    /CHANGE A USER'S PASSWORD
  362       0210  CRF=    0210    /CREATE
  363       0211  EXT=    0211    /EXTEND
  364       0212  RED=    0212    /REDUCE
  365       6613  FINF=   6613    /FILE INFORMATION
  366       0214  LIN=    0214    /LOGIN
  367       0215  LOUT=   0215    /LOGOUT
  368       0220  BCLR=   0220    /CLEAR MFD BILLING INFORMATION
  369             
  370             
  371             /DEVICE DATA BLOCK
  372             
  373       0000  DDBSTS= 0               /WORD 1.  STATUS AND UNIT NUMBER
  374       2000          DXON=   2000    /XOFF SENT FLAG - SEND 'XON' WHEN NEEDED
  375       1000          DSI=    1000    /DESTINATION IS S.I. FLAG
  376       0400          DFULL=  400     /INDICATES BUFFER IS FULL
  377       0200          DUPL=   200     /CONSOLE IN DUPLEX MODE
  378       0100          SICOM=  100     /COMMAND WAITING
  379       0040          CTRLC=  40      /USER TYPED CTRL/C
  380       0020          DECHO=  20      /CAUSE 'SI' TO ECHO INPUT BUFFER
  381       0010          DHALF=  10      /KEYBOARD IS HALF-DUPLEX (HARDWARE)
  382       0004          DFORC=  4       /KEYBOARD WAS JUST FORCED
  383       0002          CTRLB=  2       /COMMAND PRECEDED BY EXPLICIT CTRL/B
  384             
  385             /OUTPUT SIDE:
  386             
  387       4000          CTRLS=  4000    /CTRL-S ENTERED (OUTPUT FROZEN)
  388       3000          DXOFF=  3000    /JAM 'XOFF' INTO OUTPUT
  389       1000          DBELL=  1000    /JAM 'BELL' INTO OUTPUT
  390       0001          DTALK=  1       /LOCK KEYBOARD AGAINST TALKS
  391             
  392             /OUTPUT REGISTER:
  393             
  394             /       4000 - BUFFER CHECKING REQUESTED
  395             /       2000 - DEVICE INTERRUPT EXPECTED
  396             /       1000 - 5-SECOND TIMEOUT FLAG
  397             /       400-2 - NEXT BUFFERED CHARACTER
  398             /       0001 - BUFFERED CHARACTER WAITING
  399             
  400       0001  DDBJN=  1       /WORD 2. JOB NUMBER IN 7-11; DEVICE NUMBER IN 0-6
  401       0002  DDBBRK= 2       /BREAK MASK
  402       0204  SIBRKM= 204     /SI BREAK MASK
  403       0003  DDBTIM= 3       /TIME THAT DEVICE WAS ASSIGNED
  404       0004  DDBINP= 4       /BUFFER FILL POINTER
  405       0005  DDBINC= 5       /BUFFER FILL COUNT
  406       0006  DDBOUC= 6       /BUFFER EMPTY COUNT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 11


  407       0007  DDBOUP= 7       /BUFFER EMPTY POINTER
  408             
  409             /FILE CONTROL BLOCK - POINTED TO BY JOBFX, X=0,1,2,3
  410             
  411       0000  FILWPT= 0       /POINTER TO FILE RETRIEVAL WINDOW
  412       0001  FILSCT= 1       /SEGMENT NUMBER OF FIRST WINDOW ENTRY
  413       0002  FILPRO= 2       /FILE READ-ONLY (BIT 9), FILE PRIVILEGED (BIT 11)
  414       0003  FILPAR= 3       /POINTER TO RFILE OR WFILE PARAMETER BLOCK
  415       0004  FILDA=  4       /DISC ADDRESS OF RFILE OR WFILE
  416       0006  FILWC=  6       /-WORD COUNT OF RFILE OR WFILE
  417       0007  FILRES= 7       /POINTER TO FILPIF IN USER AREA
  418             
  419             /FILE  RETRIEVAL WINDOW
  420             /WORD 0:        UFD LINK TO NEXT GROUP OF 7 SEGMENT POINTERS
  421             /WORDS 1-7:     SEVEN SEGMENT ADDRESSES
  422             
  423             /RFILE OR WFILE PARAMETER BLOCK - POINTED AT BY FILPAR
  424             
  425       0000  FILPFN= 0       /FUNCTION: 0603 OR 0605
  426       0001  FILPDX= 1       /DISC EXTENSION
  427       0002  FILPIF= 2       /INTERNAL FILE # (BITS 10-11) AND FIELD # (BITS 7-9)
  428       0003  FILPWC= 3       /-WORD COUNT FOR THIS TRANSFER
  429       0004  FILPCA= 4       /CORE ADDRESS FOR THIS TRANSFER
  430       0005  FILPDA= 5       /DISC ADDRESS
  431       0006  FILPRA= 6       /EXEC RETURN ADDRESS FOR THIS TRANSFER
  432       0007  FILPCT= 7       /POINTER TO FILE CONTROL BLOCK

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 12


  433             /JOB DATA AREA
  434             
  435       0000  JOBSTS= 0               /STATUS
  436                     /STR0
  437       4000          JSRUN=  4000    /RUN BIT
  438       2000          JSEREN= 2000    /USER ERROR ENABLE
  439       1000          JCOMBD= 1000    /LAST TIME THE JOB RAN AS COMPUTE BOUND
  440       0400          JSPRIV= 400     /LIBRARY PROGRAM (HAS PRIVILEGES)
  441       0200          JSHLT=  200     /PROGRAM EXECUTED 'HLT'
  442       0100          JSIOT=  100     /NON-RESIDENT IOT
  443       0040          JSIOTC= 40      /COPY IOT RESULT TO USER
  444       0020          JSRSEN= 20      /PROGRAMMATIC CTRL/C ENABLE
  445       0010          JSINER= 10      /INHIBIT SI ERROR UNTIL NEXT COMMAND
  446             
  447       0200          JSACC=  200
  448       0100          JSBAT=  100     /BATCH-MODE
  449             
  450                     /BITS 9-11 ARE SYSTEM ERROR CODE
  451             
  452       0001          UUOERF= 1       /IOT ERROR
  453       0002          SWPRER= 2       /SWAP READ ERROR
  454       0003          SWPWER= 3       /SWAP WRITE ERROR
  455       0005          DSKERR= 5       /DISC ERROR
  456       0006          HUNGDV= 6       /HUNG DEVICE
  457             
  458                     /STR1
  459       4000          JSTIME= 4000    /TIME IS UP
  460       2000          JSF0=   2000    /FILE 0 NOT BUSY
  461       1000          JSF1=   1000    /FILE 1 IS NOT BUSY
  462       0400          JSF2=   400     /FILE 2 IS NOT BUSY
  463       0200          JSF3=   200     /FILE 3 IS NOT BUSY
  464       0100          JSDEL=  100     /DELIMITER SEEN
  465       0040          JSLPT=  40      /LPT BUFFER IN USE BUT NOT FULL
  466       0020          JSTEL=  20      /OUTPUT BUFFER NOT FULL
  467       0010          JSPTR=  10      /CHARACTER IN READER BUFFER
  468       0004          JSPTP=  4       /PUNCH BUFFER IS NOT FULL
  469       0002          JSERR=  2       /SYSTEM ERROR DETECTED
  470       0001          JSWAIT= 1       /JOB NOT IN WAIT STATE
  471             
  472       0002  JOBSTB= 2               /DEVICE STATUS REGISTER (RK05, DECTAPE, & CARD READER)
  473       0003  JOBWMK= JOBSTB+1        /WAIT MASK
  474       0004  JOBDWT= JOBWMK+1        /JOB DEVICE-WAIT
  475       0005  JOBSRA= JOBDWT+1        /JOB RESTART ADDRESS
  476       0006  JOBERR= JOBSRA+1        /JOB ERROR RESTART ADDRESS
  477       0007  JOBLNK= JOBERR+1        /IOT LINKAGE
  478       0010  JOBSWR= JOBLNK+1        /SWITCH REGISTER
  479       0011  JOBREG= JOBSWR+1        /PC, AC, & LINK (W/MODE, GT, & SC)
  480       0014  JOBEAE= JOBREG+3        /MQ REGISTER
  481       0015  JOBACT= JOBEAE+1        /USER'S ACCOUNT #
  482       0016  JOBRTM= JOBACT+1        /LOW ORDER RUN TIME
  483       0017  JOBRTH= JOBRTM+1        /HIGH ORDER RUN TIME
  484       0020  JOBF0=  JOBRTH+1        /POINTER TO FILE 0 CONTROL
  485       0021  JOBF1=  JOBF0+1         /POINTER TO FILE 1 CONTROL
  486       0022  JOBF2=  JOBF1+1         /POINTER TO FILE 2 CONTROL
  487       0023  JOBF3=  JOBF2+1         /POINTER TO FILE 3 CONTROL
  488       0024  JOBSCH= JOBF3+1         /SCHEDULING CONTROL-WORD
  489             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 13


  490             
  491             /CORE TABLE CONTROL FLAGS
  492             
  493       4000  FSWP=   4000    /SWAP REQUEST
  494       2000  LOCK=   2000    /LOCK IN CORE
  495       1000  NOTRUN= 1000    /HAS NOT BEEN SCHEDULED TO RUN
  496       0400  FIP=    400     /FILE PHANTOM (NOTE: FIP HAS BEEN ASSUMED EQUAL TO WRDSEG)
  497       0200  SI=     200     /SYSTEM COMMAND INTERPRETER PHANTOM
  498       0140  NOHOLD= 140     /DISC COMPLETION PRIORITY (SKIPPED EVERY 4 TRANSFERS)
  499       0037  CJOB=   37      /MASK FOR JOB NUMBER

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 14


  500             /FIP TABLE DEFINITIONS
  501             
  502       0530  SATSIZ= 530
  503       5600  ENTABL= 5600
  504       6040  UTABLE= JOBMAX^10+ENTABL
  505       6160  RTABLE= JOBMAX^4+UTABLE         /*** CHANGE TO ^10 LATER ***
  506             
  507             /TS8 TABLE DEFINITIONS
  508             
  509       7001  CORTBL= 7001
  510       7010  L2QTB=  CORTBL+7
  511             
  512             /TS8II TABLE DEFINITIONS
  513       0003          IFNZRO CDVIN    <CDVGAP=3>      /ROOM FOR HSR, ?, AND CDR
  514                     IFZERO CDVIN    <CDVGAP=0>
  515       0000          IFZERO DC08A    <DCSIZE=0>
  516                     IFNZRO DC08A    <DCSIZE=400>    /DC08A & 689AG CODE
  517             
  518       0200  OUTREG= 200             /ACTIVE OUTPUT REGISTERS
  519       0226  SKPTBL= OUTREG+NULINE+CONTTY+CDVOUT+2   /START OF IOT SKIP TABLE
  520       0275  SKPTP=  SKPTBL+NULINE+NULINE+CONTTY+CONTTY+CDVIN+CDVGAP+1
  521       0304  RINGIN= SKPTP+CDVOUT+3  /INPUT RING BUFFER
  522       0400  ENDBUF= OUTREG+200      /END OF KEYBOARD INPUT BUFFER
  523       0036  INPUTS= ENDBUF-RINGIN%2 /NUMBER OF POSSIBLE RING-BUFFER ENTRIES
  524       6211  DATFLD= CDF 10          /DATA FIELD SELECT
  525             
  526       2400  DATA1=  2400+DCSIZE     /START OF DATA AREA (ALMOST)
  527       2600  DEVTBL= DATA1+200       /ACTUAL START OF DATA AREA
  528       2640  DEVTBE= DEVTBL+NULINE+NULINE+2
  529       2675  JOBTBL= DEVTBE+35
  530       2722  CLKTBL= JOBTBL+JOBMAX+1
  531       2747  TTYTBL= CLKTBL+JOBMAX+1
  532       2774  PRGTBL= TTYTBL+JOBMAX+1
  533       3061  DSUTBL= PRGTBL+JOBMAX+JOBMAX+JOBMAX-7
  534       2200  OUTDIF= -OUTREG^2+DEVTBL        /FOR LINKING BETWEEN OUTREG & DEVTBL
  535             
  536             IFZERO EAE-20   <MQREG=1>
  537       0001  IFZERO EAE      <IFZERO CPU-2 <MQREG=1>
  538                              IFNZRO CPU-2 <MQREG=0>>
  539             
  540             ///     END OF SELF-DEFINING PARAMETERS -- START OF MONITOR LINKAGES    ///
  541             
  542             /A VERY FEW SELDOM CHANGED POINTERS
  543             
  544       4201  AUTOST= 4201    /AUTOMATIC SYSTEM RESTART ENTRANCE TO 'INIT'
  545       7720  FIPBLK= 7720    /THE I/O TRANSFER BLOCK FOR 'FIP'
  546             
  547             /FREQUENTLY CHANGED POINTERS IN TS8 & TS8II; THESE ARE UPDATED
  548             /BY THE 'LINK.TE' TECO MACRO.  IN THE SOURCE, THEY ARE FLAGGED
  549             /FOR THE MACRO TO FIND BY '/*'.
  550             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 15


  551             
  552       5200  BLT0=   5200    /BLOCK TRANSFER
  553       0033  CLK1=   0033    /SYSTEM DAYCLOCK (LOW)
  554       0034  CLK2=   0034    / (HIGH)
  555       0030  CONDBA= 0030    /POINTER TO DEVTBL ENTRY IN USE
  556       0031  CONDDB= 0031    /POINTER TO DDB IN USE
  557       1317  CORSRC= 1317    /CORTBL SEARCH
  558       7001  CORTBL= 7001    /CORE ALLOCATION TABLE (FIXED)
  559       0035  DATE=   0035    
  560       7045  DEVCHK= 7045    /CHECK DEVICE OWNERSHIP
  561       0036  DSBUSY= 0036    /DISC BUSY COUNT
  562       0535  DTDEF0= 0535    /DECTAPE ERROR REGISTRATION
  563       0541  DTDSF0= 0541    /DECTAPE BUFFER TO SWAP AREA
  564       0527  DTDSK=  0527    /DECTAPE DISC COMPLETION
  565       0551  DTL20=  0551    /DECTAPE LEVEL-2 DISPATCH
  566       3671  DTRKHG= 3671    /ERROR SETTING FROM FIELD 1
  567       5333  ENDIOT= 5333    /JMP TO EXIT HANDLER
  568       0277  F1RTN=  0277    /RETURN FROM FIELD 1 INTERRUPT HANDLERS
  569       0057  FIPJOB= 0057    /JOB REQUESTING 'FIP'
  570       0040  FRECNT= 0040    /AVAILABLE FREE-CORE BLOCKS
  571       0037  FREE=   0037    /LINK TO FIRST FREE-CORE BLOCK
  572       1400  GETB=   1400    /GET A FREE-BLOCK
  573       1440  GETDB0= 1440    /GET DDB BLOCK
  574       7200  GETJTB= 7200    /GET ADDRESS OF LINKED ENTRY
  575       6200  GIR00=  6200    /GENERAL INPUT ROUTINE
  576       0062  JOB=    0062    /CURRENTLY ACTIVE JOB
  577       4051  L2EXIT= 4051    /LEVEL-2 EXIT ROUTINE
  578       0041  L2SF=   0041    /LEVEL 2: SAVED FIELD AND MODE
  579       0042  L2SV0=  0042    /LEVEL 2: SAVED PC
  580       2631  L2TIM3= 2631    /RETURN FROM 'TIMER' ROUTINE
  581       5533  NFSEGS= 5533    /NUMBER OF FREE DISC SEGMENTS
  582       2340  OUTIOT= 2340    /INCREMENT 'ACFLG' TO SIGNAL OUTPUT
  583       5764  OVERL1= 5764    
  584       2364  OVERLA= 2364    /DISC TERMINATION FOR OVERLAYS
  585       0572  OVRLA1= 0572    /SYSTEM OVERLAY COMPLETION DISPATCHER
  586       1203  PRINT0= 1203    /TYPE CHARACTER
  587       1473  QUEUE0= 1473    /REGISTER LEVEL-2 FOR FIELD 1
  588       3652  READFI= 3652    /SI FILE-LOADER
  589       4172  REDO0=  4172    /'REDO' AND IOT
  590       3600  RELOAD= 3600    /AUTO-RESTART STARTUP
  591       0600  RETB=   0600    /FREE A CORE-BLOCK
  592       3676  RKL20=  3676    /LEVEL-2 DISPATCH FOR RK05
  593       3640  SCHED0= 3640    /'RSCHED' ENTRY
  594       4400  SICLR=  4400    /BUFFER CLEAR ROUTINE
  595       0020  SIDATA= 0020    /SI CONTROL WORDS
  596       2357  SLEEP=  2357    /PUT THE JOB TO SLEEP
  597       2621  TIMCDR= 2621    /CARD READ TIMER
  598       0032  TTCHAR= 0032    /CHARACTER FOR FEED ROUTINES
  599       0172  UUDF=   0172    /USER FIELD SELECT
  600       4404  UUOERR= 4404    /USER IOT ERROR
  601       0336  UUOEX1= 0336    /IOT EXIT ROUTINE
  602       3006  WSCHED= 3006    /'WAIT' ENTRY
  603       1720  CDL11=  1720    /LEVEL-1 INTERRUPT FOR CARD READER
  604       1704  CDL21=  1704    /LEVEL-2 HANDLER FOR CARD READER
  605       0020  CJOBDA= 0020    /CURRENT JOB DATA POINTER
  606       0027  DTJOB=  0027    /JOB HOLDING DECTAPE CONTROLLER
  607       0601  DTL11=  0601    /LEVEL-1 INTERRUPT FOR DECTAPE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 16


  608       1004  DTL21=  1004    /DECTAPE LEVEL-2 COMPLETION
  609       0177  F1BUF=  0177    /DDB EMPTY BLOCK
  610       2512  F1DTST= 2512    /DECTAPE STOP ROUTINE
  611       0176  F1ECNT= 0176    /DDB EMPTY COUNT
  612       0036  F1OFFJ= 0036    /SYSTEM OFF/ON COMMAND FLAG
  613       0175  F1TCNT= 0175    /DDB CHARACTER COUNT
  614       0045  RKJOB=  0045    /JOB HOLDING RK05 CONTROLLER
  615       2000  RKL11=  2000    /LEVEL-1 INTERRUPT FOR RK05
  616       1615  RKL21=  1615    /LEVEL-2 HANDLER FOR RK05
  617       2200  TIMER0= 2200    /FIELD 1 TIMER ROUTINE
  618       2445  UPEEK1= 2445    /FIELD 1 PEEK IOT CODE
  619       0174  UPTIM1= 0174    /SYSTEM UPTIME
  620       0173  UPTIM2= 0173
  621       1735  UUCDR=  1735    /UUO ENTRY FOR CARD READER
  622       1415  UUDTRK= 1415    /UUO ENTRY FOR DECTAPE & RK05
  623       7730  WINBAS= 7730    /BASIC RETRIEVAL WINDOW

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 17


  624             
  625             /TS8II - UWM VERSION 25
  626             /
  627             /COPYRIGHT 1971, 1975           DIGITAL EQUIPMENT CORPORATION
  628             /                               MAYNARD, MASSACHUSETTS
  629             /
  630             /EXTENSIVELY MODIFIED AND CORRECTED BY
  631             /       RICHARD BARTLEIN, 1974, 1976
  632             /       UNIVERSITY OF WISCONSIN - MILWAUKEE
  633             /
  634             /*CJOBDA        /CURRENT JOB DATA POINTER
  635             /*DTJOB         /JOB HOLDING DECTAPE CONTROLLER
  636             /*F1OFFJ        /SYSTEM OFF/ON COMMAND FLAG
  637             /*RKJOB         /JOB HOLDING RK05 CONTROLLER
  638             
  639       0000          *0
  640 00000 0000          ZBLOCK 7        / (IN CASE ANYONE REFERENCES JOB 0
      00001 0000
      00002 0000
      00003 0000
      00004 0000
      00005 0000
      00006 0000
  641 00007 4463          REBOOT          / OR JUMPS TO LOC. ZERO)
  642             
  643       0010          *10
  644 00010 0030  K0030,  30
  645 00011 0500  K0500,  500
  646 00012 0614  K0614,  614
  647             
  648 00013 0000  IX3,    0
  649 00014 2675  IX4,    JOBTBL          /WAIT 2 - UNQUEUE POINTER
  650 00015 0000  A15,    0               /USER DDB POINTER FOR DT SERVICE
  651 00016 0000  A16,    0               /USER FIELD POINTER (BLT)
  652 00017 0000  A17,    0               /DATFLD POINTER (BLT)
  653             /
  654 00020 0000  CJOBDA, 0               /POINTER TO CURRENT JOB'S STATUS BLOCK
  655 00021 7000  CORTBA, CORTBL-1
  656 00022 2600  DEVTBA, DEVTBL
  657 00023 0000  DTBLK,  0
  658 00024 0000  DTBLKP, 0
  659 00025 0000  DTBUF,  0
  660 00026 0000  DTCOM,  0
  661 00027 0000  DTJOB,  0
  662 00030 0000  DTREMB, 0
  663 00031 0000  DTST,   0
  664 00032 0000  DTTIME, 0
  665 00033 0000  DTUCA,  0
  666 00034 0377  DTBUFA, ENDBUF-1
  667 00035 7755  DTCAP,  7755
  668 00036 0000  F1OFFJ, 0               /MASK FOR LOGIN - ON=0, OFF=7774
  669 00037 0000  F1SCH,  0
  670 00040 0062  JOBA,   JOB             /POINTER TO CURRENT JOB NUMBER
  671 00041 0000  RKBLKS, 0
  672 00042 0000  RKCOM,  0
  673 00043 0000  RKCORE, 0
  674 00044 0000  RKCNT,  0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 18


  675 00045 0000  RKJOB,  0
  676 00046 0000  RKSECT, 0
  677 00047 0000  RKTIME, 0
  678 00050 1544  AWAKEN, WAKEUP
  679 00051 1524  BLTF1A, BLTF1
  680 00052 7045  DTCHKA, DEVCHK
  681 00053 1021  DTERRA, DTERR
  682 00054 1200  DTGOA,  DTGO
  683 00055 3671  DTRKHA, DTRKHG
  684 00056 1467  DTRKJA, DTRKJB
  685 00057 7200  GETTB1, GETJTB
  686 00060 7754  JOBCNT, -JOBMAX
  687 00061 2675  JOBTAB, JOBTBL
  688 00062 1473  QUEUE1, QUEUE0
  689       4463  REBOOT= JMS I .
  690 00063 2503          RBOOT1  /AUTO-RESTART ENTRY
  691 00064 1637  RKERRA, RKERR
  692 00065 2357  SLEEPB, SLEEP
  693 00066 0172  UDFP,   UUDF
  694 00067 1651  WAIT2,  WAITS2
  695             
  696             /CONSTANTS
  697 00070 0002  K0002,  2
  698 00071 0003  K0003,  3
  699 00072 0004  K0004,  4
  700 00073 0005  K0005,  5
  701 00074 0006  K0006,  6
  702 00075 0007  K0007,  7
  703 00076 0010  K0010,  10
  704 00077 0020  K0020,  20
  705 00100 0037  K0037,  37
  706 00101 0040  K0040,  40
  707 00102 0070  K0070,  70
  708 00103 0200  K0200,  200
  709 00104 0204  K0204,  204
  710 00105 0214  K0214,  214
  711 00106 0377  K0377,  377
  712 00107 0400  K0400,  400
  713 00110 0600  K0600,  600
  714 00111 1000  K1000,  1000
  715 00112 6201  K6201,  6201
  716 00113 7000  K7000,  7000
  717 00114 7400  K7400,  7400
  718 00115 7700  K7700,  7700
  719 00116 7770  K7770,  7770
  720 00117 7774  K7774,  7774
  721 00120 7577  M201,   -201
  722 00121 5076  M2702,  -2702
  723             
  724 00122 0000  INTS1,  0               /INTERRUPT TEMP
  725 00123 0000  INTS2,  0
  726 00124 0000  TEMP0,  0
  727 00125 0000  TEMP1,  0
  728 00126 0000  TEMP2,  0
  729 00127 0000  TEMP3,  0
  730 00130 0000  TEMP4,  0
  731 00131 0044  L2SAP,  L2SV0+2         /USER'S SAVED AC

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 19


  732             
  733 00132 0000  UDF1,   0
  734 00133 7402          HLT             /SELECT USER FIELD
  735 00134 5532          JMP I .-2
  736             
  737       5135  EXITF1= JMP .
  738 00135 6203  K6203,  CIF CDF
  739 00136 1037          TAD F1SCH
  740 00137 7650          SNA CLA         /ANYTHING JUST OUT OF WAIT?
  741 00140 5544          JMP I .+4       /NO - TAKE NORE LEVEL-2 EXIT
  742 00141 3037          DCA F1SCH       /YES - CLEAR THE FLAG
  743 00142 5543          JMP I .+1       / AND RESCHEDULE
  744 00143 3640          SCHED0
  745 00144 4051          L2EXIT
  746             
  747       5145  INTRTN= JMP .
  748 00145 6203          CIF CDF
  749 00146 5547          JMP I .+1       /DISMISS INTERRUPT
  750 00147 0277          F1RTN
  751             
  752             /JOB TABLE ADDRESS TO TEMP0
  753             /CALL:  TAD JOB #
  754             /       JMS GETTBA
  755             /        TABLE ENTRY
  756             /       RETURN WITH ADDRESS IN TEMP0
  757             
  758 00150 0000  GETTBA, 0
  759 00151 6211          DATFLD
  760 00152 3124          DCA TEMP0       /SAVE THE JOB #
  761 00153 1550          TAD I GETTBA
  762 00154 3161          DCA .+5         /SET THE PARAMTER FOR F0 ROUTINE
  763 00155 1124          TAD TEMP0
  764 00156 1061          TAD JOBTAB      /CALL THE F0 ROUTINE WITH AC
  765 00157 6202  K6202,  CIF             / POINTING TO THE JOBTBL ENTRY
  766 00160 4457          JMS I GETTB1
  767 00161 0000           0
  768 00162 3124          DCA TEMP0
  769 00163 2150          ISZ GETTBA
  770 00164 5550          JMP I GETTBA    / AND RETURN
  771             
  772             
  773       5165  WAITF1= JMP .
  774 00165 6203          CIF CDF
  775 00166 5567          JMP I .+1
  776 00167 3006          WSCHED
  777             
  778             /SYSTEM POINTERS USED BY VARIOUS LIBRARY PROGRAMS
  779             
  780             /*UPTIM1        /SYSTEM UPTIME
  781             /*UPTIM2
  782       0170          *170
  783 00170 0017          NULINE          /NUMBER OF KEYBOARDS
  784 00171 0024          JOBMAX          /NUMBER OF JOBS
  785 00172 2600          DEVTBL          /POINTER TO DEVICE TABLE
  786 00173 0000  UPTIM2, 0
  787 00174 0000  UPTIM1, 0               /LOW ORDER
  788             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 20


  789             /DDB POINTERS FOR USE BY 'SI'
  790             /*F1TCNT        /DDB CHARACTER COUNT
  791             /*F1ECNT        /DDB EMPTY COUNT
  792             /*F1BUF         /DDB EMPTY BLOCK
  793 00175 0000  F1TCNT, 0               /DDB CHARACTER COUNT
  794 00176 0000  F1ECNT, 0               /DDB EMPTY COOUNT
  795 00177 0000  F1BUF,  0               /DDB EMPTY BLOCK

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 21


  796       0200          *OUTREG
  797 00200 0000          ZBLOCK SKPTBL-OUTREG
      00201 0000
      00202 0000
      00203 0000
      00204 0000
      00205 0000
      00206 0000
      00207 0000
      00210 0000
      00211 0000
      00212 0000
      00213 0000
      00214 0000
      00215 0000
      00216 0000
      00217 0000
      00220 0000
      00221 0000
      00222 0000
      00223 0000
      00224 0000
      00225 0000
  798             
  799       6001  KSKIP=  KSF-30
  800       6001  TSKIP=  TSF-40
  801             
  802       0226          *SKPTBL
  803 00226 6031          KSF             /K00    /SKIP IOT FOR CONSOLE KEYBOARD
  804             IFZERO DC08A <
  805 00227 6401          KSKIP+400       /K01    /KEYBOARD SKIP IOTS FOR PT08 AND KL8E
  806 00230 6421          KSKIP+420       /K02
  807 00231 6441          KSKIP+440       /K03
  808 00232 6461          KSKIP+460 >     /K04
  809 00233 6341          KSKIP+340       /K05; K01 IF DC08A WITH PT08'S
  810 00234 6111          KSKIP+110       /K06; K02 IF DC08A WITH PT08'S
  811             IFNZRO CPU-1 <
  812 00235 6301          KSKIP+300 >     /K07; K03 IF DC08A WITH PT08'S
  813 00236 6321          KSKIP+320       /K10; K04 IF DC08A WITH PT08'S
  814 00237 6501          KSKIP+500       /K11; K05 IF DC08A WITH PT08'S
  815 00240 6521          KSKIP+520       /K12; K06 IF DC08A WITH PT08'S
  816 00241 6541          KSKIP+540       /K13; K07 IF DC08A WITH PT08'S
  817 00242 6561          KSKIP+560       /K14; K10 IF DC08A WITH PT08'S
  818 00243 6701          KSKIP+700       /K15
  819 00244 6361          KSKIP+360       /K16
  820 00245 6721          KSKIP+720       /K17
  821 00246 6061          KSKIP+060       /K20
  822 00247 6141          KSKIP+140       /K21
  823 00250 6161          KSKIP+160       /K22
  824 00251 6051          KSKIP+050       /K23
  825             
  826       0246          IFNZRO CDVIN    <*SKPTBL+NULINE+CONTTY>
  827 00246 7000          IFNZRO CDVGAP   <NOP; NOP; NOP> /LEAVE ROOM FOR HSR, ?, AND CDR
      00247 7000
      00250 7000
  828 00251 7000          IFZERO CDVIN-1&4000     <NOP>   /R2 - 4006
  829 00252 7000          IFZERO CDVIN-2&4000     <NOP>   /X0 - 4010

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 22


  830 00253 7000          IFZERO CDVIN-3&4000     <NOP>   /X1 - 4012
  831                     IFZERO CDVIN-4&4000     <NOP>   /X2 - 4014
  832                     IFZERO CDVIN-5&4000     <NOP>   /X3 - 4016
  833             
  834             IFNZRO DC08A <
  835             *SKPTBL+PT08+KL8+CONTTY+CDVIN+CDVGAP
  836                     DC8REG
  837                     ZBLOCK DC08A >  /DC08A ACTIVE OUTPUT REGISTERS
  838             
  839       0254  IFZERO DC08A <*SKPTBL+NULINE+CONTTY+CDVIN+CDVGAP
  840 00254 2340          OUTIOT >        /SWITCH TO OUTPUT SIDE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 23


  841 00255 6041          TSF             /K00    /SKIP IOT FOR CONSOLE TELEPRINTER
  842             IFZERO DC08A <
  843 00256 6411          TSKIP+410       /K01    /TELEPRINTER SKIP IOTS FOR PT08 AND KL8E
  844 00257 6431          TSKIP+430       /K02
  845 00260 6451          TSKIP+450       /K03
  846 00261 6471          TSKIP+470 >     /K04
  847 00262 6351          TSKIP+350       /K05; K01 IF DC08A WITH PT08'S
  848 00263 6121          TSKIP+120       /K06; K02 IF DC08A WITH PT08'S
  849             IFNZRO CPU-1 <
  850 00264 6311          TSKIP+310 >     /K07; K03 IF DC08A WITH PT08'S
  851 00265 6331          TSKIP+330       /K10; K04 IF DC08A WITH PT08'S
  852 00266 6511          TSKIP+510       /K11; K05 IF DC08A WITH PT08'S
  853 00267 6531          TSKIP+530       /K12; K06 IF DC08A WITH PT08'S
  854 00270 6551          TSKIP+550       /K13; K07 IF DC08A WITH PT08'S
  855 00271 6571          TSKIP+570       /K14; K10 IF DC08A WITH PT08'S
  856 00272 6711          TSKIP+710       /K15
  857 00273 6371          TSKIP+370       /K16
  858 00274 6731          TSKIP+730       /K17
  859 00275 6071          TSKIP+070       /K20
  860 00276 6151          TSKIP+150       /K21
  861 00277 6171          TSKIP+170       /K22
  862 00300 6651          TSKIP+650       /K23
  863             
  864             IFNZRO DC08A <
  865             *SKPTBL+NULINE+PT08+KL8+CONTTY+CONTTY+CDVIN+CDVGAP+1
  866                     JMPDC8          /DC08A OUTPUT VECTOR
  867                     JMPDC8          /DC08A OUTPUT VECTOR
  868                     JMPDC8          /DC08A OUTPUT VECTOR
  869                     JMPDC8          /DC08A OUTPUT VECTOR
  870                     JMPDC8          /DC08A OUTPUT VECTOR
  871                     JMPDC8          /DC08A OUTPUT VECTOR
  872                     JMPDC8          /DC08A OUTPUT VECTOR
  873                     JMPDC8          /DC08A OUTPUT VECTOR
  874                     JMPDC8          /DC08A OUTPUT VECTOR
  875                     JMPDC8          /DC08A OUTPUT VECTOR
  876                     JMPDC8          /DC08A OUTPUT VECTOR
  877                     JMPDC8          /DC08A OUTPUT VECTOR
  878                     JMPDC8          /DC08A OUTPUT VECTOR
  879                     JMPDC8          /DC08A OUTPUT VECTOR
  880                     JMPDC8          /DC08A OUTPUT VECTOR
  881                     JMPDC8          /DC08A OUTPUT VECTOR
  882                     JMPDC8          /DC08A OUTPUT VECTOR
  883                     JMPDC8          /DC08A OUTPUT VECTOR
  884                     JMPDC8          /DC08A OUTPUT VECTOR
  885                     JMPDC8 >        /DC08A OUTPUT VECTOR
  886             
  887       0275  *SKPTP
  888 00275 6021  IFNZRO PUNCH <PSF>      /PUNCH
  889             IFZERO PUNCH <NOP>
  890 00276 6661  IFNZRO LPT <LSF>        /LINE PRINTER
  891             IFZERO LPT <NOP>
  892 00277 7000          IFZERO CDVOUT-1&4000    <NOP>   /P2 - 4005
  893 00300 7000          IFZERO CDVOUT-2&4000    <NOP>   /L2 - 4007
  894 00301 7000          IFZERO CDVOUT-3&4000    <NOP>   /Y0 - 4011
  895 00302 7000          IFZERO CDVOUT-4&4000    <NOP>   /Y1 - 4013
  896                     IFZERO CDVOUT-5&4000    <NOP>   /Y2 - 4015
  897                     IFZERO CDVOUT-6&4000    <NOP>   /Y3 - 4017

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 24


  898 00303 5333          ENDIOT          /TERMINATES LIST

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 25


  899       0304          *RINGIN
  900             /ADDITIONAL FREE CORE GENERATION TABLE; REFERENCED BY 'INIT'
  901             /       THE FOLLOWING AREAS WILL BECOME PART OF FREE CORE
  902             
  903             IFZERO TC01+RK05+CDR <
  904                     ENDBUF;FCE4     >
  905             
  906             IFNZRO TC01+RK05+CDR <
  907             IFZERO TC01 <
  908                     ENDBUF;FCE1     >
  909             IFZERO RK05 <
  910                     FCB2;FCE2
  911                     FCB4;FCE4       >
  912             IFZERO CDR <
  913 00304 1710          FCB3;FCE3       > >
      00305 2000
  914             IFNZRO DC08A <
  915             IFNZRO D689 <
  916                     FCB5;FCE5       >
  917             IFZERO D689 <
  918                     FCB5;DATA1      > >
  919             
  920                     IFZERO DEBUG&7-3&4000   <*RINGIN>
  921 00306 0000          0               /TO TERMINATE THE LIST
  922             
  923                     NOPUNCH
  924 00307 0000          ZBLOCK ENDBUF-. /KEYBOARD INPUT RING BUFFER
      00310 0000
      00311 0000
      00312 0000
      00313 0000
      00314 0000
      00315 0000
      00316 0000
      00317 0000
      00320 0000
      00321 0000
      00322 0000
      00323 0000
      00324 0000
      00325 0000
      00326 0000
      00327 0000
      00330 0000
      00331 0000
      00332 0000
      00333 0000
      00334 0000
      00335 0000
      00336 0000
      00337 0000
      00340 0000
      00341 0000
      00342 0000
      00343 0000
      00344 0000
      00345 0000

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 26


      00346 0000
      00347 0000
      00350 0000
      00351 0000
      00352 0000
      00353 0000
      00354 0000
      00355 0000
      00356 0000
      00357 0000
      00360 0000
      00361 0000
      00362 0000
      00363 0000
      00364 0000
      00365 0000
      00366 0000
      00367 0000
      00370 0000
      00371 0000
      00372 0000
      00373 0000
      00374 0000
      00375 0000
      00376 0000
      00377 0000
  925                     ENPUNCH
  926       0400          *ENDBUF
  927                     NOPUNCH
  928 00400 0000          ZBLOCK 201      /DECTAPE BUFFER
      00401 0000
      00402 0000
      00403 0000
      00404 0000
      00405 0000
      00406 0000
      00407 0000
      00410 0000
      00411 0000
      00412 0000
      00413 0000
      00414 0000
      00415 0000
      00416 0000
      00417 0000
      00420 0000
      00421 0000
      00422 0000
      00423 0000
      00424 0000
      00425 0000
      00426 0000
      00427 0000
      00430 0000
      00431 0000
      00432 0000
      00433 0000

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 27


      00434 0000
      00435 0000
      00436 0000
      00437 0000
      00440 0000
      00441 0000
      00442 0000
      00443 0000
      00444 0000
      00445 0000
      00446 0000
      00447 0000
      00450 0000
      00451 0000
      00452 0000
      00453 0000
      00454 0000
      00455 0000
      00456 0000
      00457 0000
      00460 0000
      00461 0000
      00462 0000
      00463 0000
      00464 0000
      00465 0000
      00466 0000
      00467 0000
      00470 0000
      00471 0000
      00472 0000
      00473 0000
      00474 0000
      00475 0000
      00476 0000
      00477 0000
      00500 0000
      00501 0000
      00502 0000
      00503 0000
      00504 0000
      00505 0000
      00506 0000
      00507 0000
      00510 0000
      00511 0000
      00512 0000
      00513 0000
      00514 0000
      00515 0000
      00516 0000
      00517 0000
      00520 0000
      00521 0000
      00522 0000
      00523 0000
      00524 0000

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 28


      00525 0000
      00526 0000
      00527 0000
      00530 0000
      00531 0000
      00532 0000
      00533 0000
      00534 0000
      00535 0000
      00536 0000
      00537 0000
      00540 0000
      00541 0000
      00542 0000
      00543 0000
      00544 0000
      00545 0000
      00546 0000
      00547 0000
      00550 0000
      00551 0000
      00552 0000
      00553 0000
      00554 0000
      00555 0000
      00556 0000
      00557 0000
      00560 0000
      00561 0000
      00562 0000
      00563 0000
      00564 0000
      00565 0000
      00566 0000
      00567 0000
      00570 0000
      00571 0000
      00572 0000
      00573 0000
      00574 0000
      00575 0000
      00576 0000
      00577 0000
      00600 0000
  929                     ENPUNCH
  930       0601          *.

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 29


  931             /DECTAPE LEVEL 1 ENTRY
  932             
  933             /*DTL11         /LEVEL-1 INTERRUPT FOR DECTAPE
  934 00601 1030  DTL11,  TAD DTREMB      /PREVIOUS ERRORS FROM THIS TRANSFER
  935 00602 6772          DTRB            /"OR'ED" WITH ANY NEW ERRORS
  936 00603 3030          DCA DTREMB
  937 00604 6772          DTRB            /WERE THERE ANY ERRORS?
  938 00605 7500          SMA
  939 00606 5770          JMP I DTXOR     /A-OK!
  940 00607 0011          AND K0500       /WHAT WAS IT?
  941 00610 7450          SNA             /SELECT ERROR OR TIMING ERROR?
  942 00611 5220          JMP DTSR0       /NO - MUST BE A MARK, END OR PARITY
  943 00612 0107          AND K0400
  944 00613 7640          SZA CLA         /TIMING ERROR?
  945 00614 5222          JMP DTSR1       /N0 - SELECT ERROR - DON'T RETRY
  946 00615 7144          CLL CMA RAL     /AC=-2
  947 00616 1453          TAD I DTERRA    /TIMING ERROR WAS OUR FAULT - INTERRUPT OFF TOO LONG
  948 00617 3453          DCA I DTERRA    /DON'T CHARGE HIM FOR THE TURN-AROUNDS
  949 00620 2453  DTSR0,  ISZ I DTERRA    /COUNT A TURN-AROUND
  950 00621 5226          JMP DTSR2       /OK - CONTINUE SEARCHING
  951 00622 1030  DTSR1,  TAD DTREMB      /ACCUMULATED ERROR STATUS
  952 00623 7004          RAL
  953 00624 7130          STL RAR         /MAKE SURE THE ERROR BIT IS SET
  954 00625 5323          JMP DTSTOP      /SHUT HIM DOWN
  955 00626 6201  DTSR2,  CDF
  956 00627 1024          TAD DTBLKP
  957 00630 3435          DCA I DTCAP     /RESTORE CA TO POINT INTO WORD 2 OF HIS DDB
  958 00631 6761          DTRA            /CURRENT STATUS
  959 00632 0106          AND K0377
  960 00633 6764          DTXA            /CLEAR GO, FUNCTION, AND INTERRUPT ENABLE
  961 00634 1012          TAD K0614       /SWITCH DIRECTIONS, GO, SEARCH AND ENABLE
  962 00635 4370  DTSRCH, JMS DTXOR       /CONTINUE SEARCHING
  963 00636 1026  DTSR3,  TAD DTCOM
  964 00637 7006          RTL
  965 00640 7006          RTL
  966 00641 7264          STA CML RAL     /AC=-1 IF FORWARDS R/W; AC=-2 IF REVERSE R/W
  967 00642 3370          DCA DTDIR
  968 00643 1424          TAD I DTBLKP
  969 00644 1121          TAD M2702
  970 00645 7620          SNL CLA         /ARE WE AT A REASONABLE BLOCK NUMBER?
  971 00646 5220          JMP DTSR0       /NO -- TURN AROUND
  972 00647 1023          TAD DTBLK
  973 00650 1121          TAD M2702
  974 00651 7620          SNL CLA         /DOES HE WANT A REASONABLE BLOCK?
  975 00652 5222          JMP DTSR1       /NO -- QUIT LOOKING FOR IT
  976 00653 6761          DTRA            /WHICH WAY ARE WE GOING
  977 00654 7006          RTL
  978 00655 7006          RTL
  979 00656 7200          CLA             /PRESENT DIRECTION IS IN THE LINK
  980 00657 1023          TAD DTBLK       /BLOCK WANTED
  981 00660 7041          CIA
  982 00661 1424          TAD I DTBLKP    /BLOCK FOUND
  983 00662 7450          SNA             /ARE WE THERE?
  984 00663 5304          JMP DTSR5       /YES - SEE IF WE ARE GOING THE RIGHT DIRECTION
  985 00664 2370          ISZ DTDIR       /NO
  986 00665 7041          CIA             /REVERSE R/W - NEGATE AC
  987 00666 7500          SMA

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 30


  988 00667 5276          JMP DTSR4       /SKIP SOME CODE - WE'RE ON THE WRONG SIDE OF THE BLOCK
  989 00670 7430          SZL             /L=1 MEANS WE'RE GOING THE WRONG WAY
  990 00671 1071          TAD K0003       /MAKE ROOM FOR TURN AROUND
  991 00672 7040          CMA
  992 00673 0116          AND K7770
  993 00674 7450          SNA             /ARE WE CLOSE
  994 00675 4361          JMS DTSR7       /YES - GO CHECK BUFFER STATUS
  995 00676 0115  DTSR4,  AND K7700       /ARE WE TOO FAR AWAY?
  996 00677 7560          SZA SNL SMA
  997 00700 5343          JMP DTSR6       /PUT HIM ON THE TIMER
  998 00701 7620          SNL CLA         /ARE WE GOING IN THE RIGHT DIRECTION?
  999 00702 5235          JMP DTSRCH      /CONTINUE THE SAME DIRECTION
 1000 00703 5220          JMP DTSR0       /GO TURN AROUND
 1001             
 1002 00704 4361  DTSR5,  JMS DTSR7       /CHECK ON BUFFER STATUS
 1003 00705 2370          ISZ DTDIR
 1004 00706 7020          CML             /CORRECT LINK FOR REVERSE R/W
 1005 00707 7420          SNL             /ARE WE GOING THE RIGHT DIRECTION
 1006 00710 5235          JMP DTSRCH      /NO - CAUSE OVER-SHOOT FOR TURN-AROUND
 1007 00711 1120          TAD M201
 1008 00712 6201          CDF
 1009 00713 3740          DCA I DTWCP     /SET-UP DECTAPE WORD COUNT
 1010 00714 1034          TAD DTBUFA
 1011 00715 3435          DCA I DTCAP     /SET-UP DECTAPE CURRENT ADDRESS
 1012 00716 1026          TAD DTCOM
 1013 00717 0101          AND K0040       /READ OR WRITE?
 1014 00720 7110          CLL RAR
 1015 00721 1010          TAD K0030
 1016 00722 4370          JMS DTXOR       /CHANGE FROM SEARCH TO READ OR WRITE
 1017 00723 2025  DTSTOP, ISZ DTBUF       /ASSIGN THE BUFFER - IF HE DOESN'T ALREADY HAVE IT
 1018 00724 0341          AND K7701
 1019 00725 3453          DCA I DTERRA    /SAVE STATUS B FOR HIM
 1020 00726 6761          DTRA
 1021 00727 0107          AND K0400
 1022 00730 7640          SZA CLA         /WHICH WAY ARE WE GOING
 1023 00731 1117          TAD K7774
 1024 00732 1070          TAD K0002
 1025 00733 1424          TAD I DTBLKP    /REMEMBER WHERE WE WILL FINALLY STOP
 1026 00734 3424          DCA I DTBLKP
 1027 00735 6761          DTRA
 1028 00736 0104          AND K0204       /CLEAR GO & INTERRUPT ENABLE
 1029 00737 5235          JMP DTSRCH      /TO STOP THE TAPE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 31


 1030 00740 7754  DTWCP,  7754
 1031 00741 7701  K7701,  7701
 1032 00742 0014  K0014,  14
 1033             
 1034 00743 7012  DTSR6,  RTR             /DIVIDE BY 100
 1035 00744 7012          RTR
 1036 00745 7012          RTR
 1037 00746 7041          CIA
 1038 00747 3025          DCA DTBUF       / -SECONDS TO WIND ON TIMER
 1039 00750 1071          TAD K0003
 1040 00751 1431          TAD I DTST
 1041 00752 3370          DCA DTDIR       /POINTS TO USER WORD 1
 1042 00753 6761          DTRA
 1043 00754 0107          AND K0400
 1044 00755 7640          SZA CLA         /WHICH WAY SHOULD WE SET THE BRAKES LATER
 1045 00756 2770          ISZ I DTDIR     /SET BIT 11 TO SHOW REVERSE
 1046 00757 1342          TAD K0014
 1047 00760 5235          JMP DTSRCH      /KEEP HIM MOVING WITH INIT, DISABLED
 1048             
 1049 00761 0000  DTSR7,  0
 1050 00762 1026          TAD DTCOM
 1051 00763 0077          AND K0020       /IS THIS A READ
 1052 00764 1025          TAD DTBUF       /OR - IS THE BUFFER LOADED FOR A WRITE
 1053 00765 7640          SZA CLA
 1054 00766 5761          JMP I DTSR7     /PROCEED
 1055 00767 5325          JMP DTSTOP+2    /STOP AND WAIT FOR THE BUFFER TO BE LOADED
 1056             
 1057             DTDIR,
 1058 00770 0723  DTXOR,  DTSTOP          /WHERE TO RETURN ON SUCCESSFUL INTERRUPT
 1059 00771 6764          DTXA            /ZAP IN THE NEW FUNCTION
 1060 00772 6761          DTRA
 1061 00773 7012          RTR
 1062 00774 7010          RAR
 1063 00775 7630          SZL CLA         /DID WE STOP?
 1064 00776 7066          CML CMA RTL
 1065 00777 3032          DCA DTTIME      /LOAD THE CONTROLLER TIMER
 1066 01000 7420          SNL
 1067 01001 1203          TAD DTL2        /WE'RE DONE - SCHEDULE LEVEL 2
 1068 01002 5145          INTRTN
 1069 01003 0551  DTL2,   DTL20

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 32


 1070             /*DTL21         /DECTAPE LEVEL-2 COMPLETION
 1071 01004 1025  DTL21,  TAD DTBUF       /WHAT KIND OF COMPLETION?
 1072 01005 7450          SNA
 1073 01006 5222          JMP DTEND4      /END OF A SEARCH - TAPE NOW IN POSITION FOR THE WRITE
 1074 01007 7710          SPA CLA
 1075 01010 5225          JMP DTEND6      /THIS DRIVE HAS BEEN PUT ON TIMER
 1076 01011 1026          TAD DTCOM
 1077 01012 0077          AND K0020
 1078 01013 7450          SNA             /WAS IT A READ OR WRITE?
 1079 01014 5217          JMP DTEND3      /WRITE - HE'S ALL DONE
 1080 01015 4231          JMS DTDATA      /READ -TRANSFER HIS DATA BACK TO HIM
 1081 01016 5135          EXITF1          /WAIT FOR DISC TO FINISH
 1082 01017 1027  DTEND3, TAD DTJOB
 1083 01020 4450          JMS I AWAKEN    /TAKE HIM OUT OF WAIT STATUS
 1084 01021 0000  DTERR,  0
 1085 01022 3027  DTEND4, DCA DTJOB       /CONTROLLER IS FREE
 1086 01023 4454  DTEND5, JMS I DTGOA     /TRY TO START A DECTAPE TRANSFER
 1087 01024 5135          EXITF1
 1088             
 1089 01025 1025  DTEND6, TAD DTBUF
 1090 01026 3415          DCA I A15       /SAVE -SECONDS TO WIND TAPE
 1091 01027 2431          ISZ I DTST      /CHANGE TO DECTAPE TIMER WAIT
 1092 01030 5222          JMP DTEND4      /FIND SOMETHING ELSE TO DO
 1093             
 1094             /MOVE 201 WORDS TO/FROM USER, FROM/TO DATFLD
 1095             /USER MAY BE IN CORE OR ON HIS SWAP TRACK
 1096 01031 0000  DTDATA, 0
 1097 01032 3125          DCA TEMP1       /SAVE READ/WRITE INDICATOR; 0=WRITE, 20=READ
 1098 01033 6202          CIF
 1099 01034 1027          TAD DTJOB
 1100 01035 4715          JMS I COREA     /NOW FIND OUT WHERE HE IS
 1101 01036 6637           FSWP LOCK FIP SI CJOB
 1102 01037 5256          JMP DTDA1       /HE'S IN HIS SWAP TRACK
 1103 01040 0102          AND K0070       /SAVE HIS FIELD
 1104 01041 1112          TAD K6201
 1105 01042 3133          DCA UDF1+1      /UDF1 IS FIXED FOR BLTF1
 1106 01043 1034          TAD DTBUFA
 1107 01044 3017          DCA A17         /POINTS TO DECTAPE BUFFER IN DATFLD
 1108 01045 1033          TAD DTUCA
 1109 01046 3016          DCA A16         /USER BUFFER POINTER
 1110 01047 1125          TAD TEMP1
 1111 01050 7152          CLL CMA RTR
 1112 01051 7012          RTR
 1113 01052 7010          RAR
 1114 01053 4451          JMS I BLTF1A    /L=0 FOR READ, L=1 FOR WRITE; AC=-201
 1115 01054 2231          ISZ DTDATA      /SKIP - DATA HAS ALREADY BEEN MOVED
 1116 01055 5631          JMP I DTDATA

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 33


 1117 01056 7001  DTDA1,  IAC
 1118 01057 1033          TAD DTUCA
 1119 01060 7101          CLL IAC
 1120 01061 1103          TAD K0200
 1121 01062 7420          SNL             /DO WE HAVE A WRAP AROUND SITUATION?
 1122 01063 7200          CLA             /NO - WE CAN DO THE WHOLE THING AT ONCE
 1123 01064 1120          TAD M201
 1124 01065 3310          DCA DTDWC       /WC FOR DISC TRANSFER
 1125 01066 1034          TAD DTBUFA
 1126 01067 3311          DCA DTDCA       /CA FOR DISC TRANSFER
 1127 01070 1027          TAD DTJOB
 1128 01071 1072          TAD K0004
 1129 01072 7106          CLL RTL
 1130 01073 3306          DCA DTDHI       /TRACK ADDRESS FOR DISC TRANSFER
 1131 01074 1125          TAD TEMP1
 1132 01075 7640          SZA CLA
 1133 01076 7126          STL RTL
 1134 01077 1316          TAD DTDMAR
 1135 01100 3305          DCA DTDIOT      /DMAR OR DMAW FOR DISC TRANSFER
 1136 01101 7001          IAC
 1137 01102 1033          TAD DTUCA
 1138 01103 4320          JMS DTDGO       /START THE DISC
 1139 01104 5631          JMP I DTDATA    /EXIT - NO SKIP - MUST WAIT FOR DISC
 1140             
 1141             /DISC PARAMETER BLOCK FOR DECTAPE HANDLER
 1142 01105 0000  DTDIOT, 0
 1143 01106 0000  DTDHI,  0
 1144 01107 0007          7
 1145 01110 0000  DTDWC,  0
 1146 01111 0000  DTDCA,  0
 1147 01112 0000  DTDLO,  0
 1148 01113 0527          DTDSK
 1149 01114 1105  DTDPAR, DTDIOT
 1150             
 1151 01115 1317  COREA,  CORSRC
 1152 01116 6603  DTDMAR, DMAR
 1153 01117 0541  DTDISK, DTDSF0
 1154             
 1155 01120 0000  DTDGO,  0
 1156 01121 3312          DCA DTDLO       /DISC ADDRESS TO START AT
 1157 01122 1314          TAD DTDPAR
 1158 01123 6202          CIF
 1159 01124 4717          JMS I DTDISK    /NOW GO TO TS8 TO START OUR REQUEST
 1160 01125 5720          JMP I DTDGO     /RETURN HERE AFTER STARTING THE DISC
 1161 01126 5335          JMP DTDCMP      /RETURN HERE AFTER A GOOD DISC TRANSFER
 1162 01127 7410          SKP             /RETURN HERE AFTER A BAD DISC TRANSFER
 1163 01130 5217          JMP DTEND3      /RETURN HERE AFTER REPORTING THE DISC ERROR
 1164 01131 1027          TAD DTJOB       /JOB IN TROUBLE
 1165 01132 6203          CIF CDF
 1166 01133 5734          JMP I .+1       /GO REPORT THE ERROR - MAKE IT SWPRER
 1167 01134 0535          DTDEF0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 34


 1168 01135 1310  DTDCMP, TAD DTDWC
 1169 01136 7041          CIA
 1170 01137 1120          TAD M201
 1171 01140 7450          SNA             /DO WE NEED A SECOND PASS
 1172 01141 5353          JMP DTDCM0      /NO - IT'S DONE
 1173 01142 3310          DCA DTDWC
 1174 01143 1312          TAD DTDLO       /YES - HAVE WE ALREADY DONE IT?
 1175 01144 7450          SNA
 1176 01145 5353          JMP DTDCM0      /ALL FINISHED!
 1177 01146 7041          CIA
 1178 01147 1311          TAD DTDCA       /UPDATE THE DISC'S C.A.
 1179 01150 3311          DCA DTDCA
 1180 01151 4320          JMS DTDGO       /START THE DISC AGAIN
 1181 01152 5135          EXITF1
 1182             
 1183 01153 1025  DTDCM0, TAD DTBUF       /WAS IT A READ OR WRITE?
 1184 01154 7640          SZA CLA
 1185 01155 5217          JMP DTEND3      /READ - WE'RE FINISHED
 1186 01156 2025          ISZ DTBUF       /ASSIGN THE BUFFER TO HIM NOW
 1187 01157 1015          TAD A15         /GO RESTART HIS WRITE
 1188 01160 5223          JMP DTEND5
 1189             
 1190 01161 0000  DTLOAD, 0
 1191 01162 3320          DCA DTDGO       /SAVE THE DESIRED STATUS A
 1192 01163 6761          DTRA
 1193 01164 3231          DCA DTDATA      /AND THE PRESENT STATUS A
 1194 01165 1320          TAD DTDGO
 1195 01166 0231          AND DTDATA      /WHERE WILL CARRIES BE GENERATED
 1196 01167 7041          CIA
 1197 01170 7104          CLL RAL         /WE WANT TO CANCEL THE CARRIES
 1198 01171 1320          TAD DTDGO       /NOW ADD THEM TOGETHER
 1199 01172 1231          TAD DTDATA      /NOW WE HAVE THE "XOR" OF THE "PRESENT" AND THE "DESIRED" STATUS A
 1200 01173 6764          DTXA            /"XOR" IT INTO THE CONTROLLER
 1201 01174 5761          JMP I DTLOAD    /THE RESULT WILL BE THE DESIRED STATUS A

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 35


 1202                     IFNZRO .&100    <PAGE>
 1203             /START OR RESTART A DECTAPE READ OR WRITE FOR THE USER
 1204             
 1205 01200 0000  DTGO,   0
 1206 01201 7440          SZA             /ARE WE RESTARTING AFTER A TIMER KILLED US
 1207 01202 5212          JMP DTGO1       /YES - SO WE DON'T NEED TO LOOK AT THE QUEUE
 1208 01203 1027          TAD DTJOB
 1209 01204 7640          SZA CLA         /IS THE CONTROLLER BUSY?
 1210 01205 5600          JMP I DTGO      /CONTROLLER IS ALREADY BUSY
 1211 01206 3025          DCA DTBUF       /BUFFER IS EMPTY
 1212 01207 4456          JMS I DTRKJA    /FIND SOMEONE WAITING FOR THE CONTROLLER
 1213 01210 7777           -1
 1214 01211 5600          JMP I DTGO      /NOTHING WAITING
 1215 01212 0116  DTGO1,  AND K7770
 1216 01213 3015          DCA A15
 1217 01214 1415          TAD I A15       /PULL JOB NUMBER FROM DDB
 1218 01215 3027          DCA DTJOB
 1219 01216 1027          TAD DTJOB
 1220 01217 4150          JMS GETTBA      /FIND WAIT 2
 1221 01220 0004           JOBWMK+1
 1222 01221 1124          TAD TEMP0
 1223 01222 3031          DCA DTST        /SAVE IT'S POINTER FOR LATER
 1224 01223 2015          ISZ A15
 1225 01224 1015          TAD A15         /ADDRESS TO DUMP BLOCK NUMBERS INTO
 1226 01225 3024          DCA DTBLKP
 1227 01226 2015          ISZ A15
 1228 01227 1415          TAD I A15       /USER WORD 1 -- UNIT,DIR,FUNC.
 1229 01230 3026          DCA DTCOM
 1230 01231 1415          TAD I A15       /USER WORD 2 -- BLOCK NUMBER WANTED
 1231 01232 3023          DCA DTBLK
 1232 01233 1415          TAD I A15       /USER WORD 3 -- USER'S C.A.
 1233 01234 3033          DCA DTUCA
 1234 01235 1026          TAD DTCOM       /DIRECTION FOR THIS OPERATION
 1235 01236 0107          AND K0400
 1236 01237 7740  K7740,  SZA SMA CLA
 1237 01240 1311          TAD DTREV
 1238 01241 1074          TAD K0006       /AC=-5 FOR REVERSE R/W; AC=+6 FOR FORWARD R/W
 1239 01242 1424          TAD I DTBLKP    /GET BLOCK FROM LAST TIME
 1240 01243 1077          TAD K0020       /BIAS BY 20 TO AVOID NEG. NUMBERS AND ZERO
 1241 01244 7161          STL CIA
 1242 01245 1077          TAD K0020
 1243 01246 1023          TAD DTBLK       /BLOCK WE WANT
 1244 01247 7430          SZL
 1245 01250 7041          CIA             /AC= ABSOLUTE VALUE OF DIFFERENCE
 1246 01251 0237          AND K7740
 1247 01252 3130          DCA TEMP4       /SAVE THAT RESULT FOR LATER
 1248 01253 1026          TAD DTCOM
 1249 01254 0113          AND K7000       /SAVE ONLY THE UNIT
 1250 01255 7430          SZL             /LINK = INITIAL SEARCH DIRECTION
 1251 01256 1107          TAD K0400       /SEARCH REVERSE INITIALLY
 1252 01257 4715          JMS I DTLOAA    /LOAD THE CONTROLLER
 1253 01260 1026          TAD DTCOM       /LOAD THE DECTAPE BUFFER IF:
 1254 01261 0077          AND K0020       / ******* HE'S DOING A WRITE
 1255 01262 1130          TAD TEMP4       / ******* THE DISIRED BLOCK IS FAIRLY CLOSE
 1256 01263 1025          TAD DTBUF       / ******* THE BUFFER IS EMPTY
 1257 01264 7640          SZA CLA
 1258 01265 5271          JMP DTGO2       /AT LEAST ONE OF THE ABOVE IS FALSE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 36


 1259 01266 4713          JMS I DTGETW    /MOVE 201 WORDS FROM USER (CORE OR SWAP TRACK) TO DATFLD
 1260 01267 5307          JMP DTGO3       /WAIT FOR THE DISC TO FINISH
 1261 01270 2025          ISZ DTBUF       /ASSIGN THE BUFFER TO HIM
 1262 01271 1312  DTGO2,  TAD DTSR3A
 1263 01272 3714          DCA I DTXORA    /SET-UP FOR SEARCH MODE
 1264 01273 3030          DCA DTREMB      /CLEAR ERROR ACCUMULATOR
 1265 01274 6201          CDF
 1266 01275 1024          TAD DTBLKP
 1267 01276 3435          DCA I DTCAP     /SET-UP CA FOR THE BLOCK NUMBERS
 1268 01277 6213          CIF DATFLD      /INHIBIT INTERRUPTS
 1269 01300 1076          TAD K0010       /ALL DATA BREAKS ARE TO DATFLD
 1270 01301 6774          DTLB
 1271 01302 1116          TAD K7770
 1272 01303 3453          DCA I DTERRA    /ALLOW 10 CHANGES OF DIRECTION
 1273 01304 1105          TAD K0214
 1274 01305 6764          DTXA            /GO SEARCH, INT, ENABLE
 1275 01306 7146          CLL CMA RTL     /SET CONTROLLER TIMER FOR 3 SECONDS
 1276 01307 3032  DTGO3,  DCA DTTIME
 1277 01310 5600          JMP I DTGO
 1278             
 1279 01311 7765  DTREV,  -13
 1280 01312 0636  DTSR3A, DTSR3
 1281 01313 1031  DTGETW, DTDATA
 1282 01314 0770  DTXORA, DTXOR
 1283 01315 1161  DTLOAA, DTLOAD

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 37


 1284 01316 0000  DTIMER, 0
 1285 01317 4456          JMS I DTRKJA    /FIND A JOB IN DECTAPE TIMER WAIT
 1286 01320 7776           -2
 1287 01321 5353          JMP DTIME3      /ALL DONE
 1288 01322 1073          TAD K0005
 1289 01323 3127          DCA TEMP3
 1290 01324 7146  DTIME1, CLL CMA RTL     /AC=-3
 1291 01325 2527          ISZ I TEMP3     /IS HIS TIMER UP?
 1292 01326 5317          JMP DTIMER+1
 1293 01327 1127          TAD TEMP3       /YES - JAM ON THE BRAKES
 1294 01330 3130          DCA TEMP4       /POINT TO USER WORD 1
 1295 01331 6213          CIF DATFLD      /INHIBIT INTERRUPTS
 1296 01332 6761          DTRA            /GET STATUS OF CURRENT UNIT
 1297 01333 0072          AND K0004       /SAVE ENABLE
 1298 01334 7440          SZA             /IS IT REALLY DOING SOMETHING?
 1299 01335 1103          TAD K0200       /YES - CLEAR GO AND ENABLE
 1300 01336 6764          DTXA
 1301 01337 1530          TAD I TEMP4
 1302 01340 0375          AND K7001       /SAVE UNIT AND CURRENT DIRECTION
 1303 01341 1106          TAD K0377       /MOVE THE DIRECTION BIT INTO POSITION
 1304 01342 0114          AND K7400
 1305 01343 4715          JMS I DTLOAA    /STOP HIM!!!
 1306 01344 1116          TAD K7770
 1307 01345 0530          AND I TEMP4
 1308 01346 3530          DCA I TEMP4     /CLEAR "BREAK" BIT
 1309 01347 1126          TAD TEMP2
 1310 01350 1524          TAD I TEMP0
 1311 01351 3524          DCA I TEMP0     /PUT HIM BACK IN DECTAPE WAIT
 1312 01352 5324          JMP DTIME1      /CHECK FOR OTHER DRIVES TO STOP
 1313 01353 1130  DTIME3, TAD TEMP4
 1314 01354 7650          SNA CLA
 1315 01355 5363          JMP DTIME4      /NOTHING STOPPED THIS TIME
 1316 01356 1032          TAD DTTIME      /WAS ANYTHING IMPORTANT GOING ON
 1317 01357 7640          SZA CLA
 1318 01360 1015          TAD A15         /YES - LET'S GET BACK TO IT
 1319 01361 4454          JMS I DTGOA     /START SOMETHING
 1320 01362 5716  DTIMEX, JMP I DTIMER
 1321 01363 6213  DTIME4, CIF DATFLD      /INHIBIT INTERRUPTS
 1322 01364 1032          TAD DTTIME      /IS THE CONTROLLER BUSY?
 1323 01365 7640          SZA CLA         /NO
 1324 01366 2032          ISZ DTTIME      /YES - BUMP CONTROLLER TIMER
 1325 01367 5716          JMP I DTIMER
 1326 01370 6761          DTRA            /IT'S HUNG
 1327 01371 0104          AND K0204
 1328 01372 6764          DTXA            /STOP THE TAPE (IF IT'S EVEN MOVING)
 1329 01373 7240          STA
 1330 01374 3453          DCA I DTERRA    /LET HIM KNOW THE TRANSFER PROBABLY DIDN'T HAPPEN
 1331 01375 7001  K7001,  IAC
 1332 01376 3025          DCA DTBUF
 1333 01377 3026          DCA DTCOM
 1334 01400 1027          TAD DTJOB
 1335 01401 4205          JMS DTRKER      /REPORT THE ERROR & SCHEDULE LEVEL 2
 1336 01402 0551          DTL20
 1337 01403 5604          JMP I .+1       /BACK THROUGH THE TIMER CODE
 1338 01404 1362          DTIMEX

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 38


 1339       1400  FCE1=   .+1&7770
 1340 01405 0000  DTRKER, 0
 1341 01406 6203          CIF CDF
 1342 01407 4455          JMS I DTRKHA    /REPORT THE HUNG DEVICE
 1343 01410 1605          TAD I DTRKER    /GET THE L2 DISPATCH ADDRESS
 1344 01411 2205          ISZ DTRKER      /BUMP PAST THE ARG.
 1345 01412 6203          CIF CDF
 1346 01413 4462          JMS I QUEUE1    /PUT IT ON LEVEL 2 QUEUE
 1347 01414 5605          JMP I DTRKER
 1348             
 1349             /*UUDTRK        /UUO ENTRY FOR DECTAPE & RK05
 1350 01415 3126  UUDTRK, DCA TEMP2
 1351 01416 1531          TAD I L2SAP     /GET USER AC
 1352 01417 3125          DCA TEMP1
 1353 01420 7420          SNL             /DON'T CLEAR THE AC IF ITS AN RK05 REQUEST
 1354 01421 3531          DCA I L2SAP     /CLEAR HIS AC
 1355 01422 1466          TAD I UDFP      /GET THE "CDF" FOR HIS FIELD
 1356 01423 3133          DCA UDF1+1
 1357 01424 4132          JMS UDF1        /CHANGE TO USER FIELD
 1358 01425 1525          TAD I TEMP1     /GET WORD 1 OF HIS PARAMETERS
 1359 01426 7430          SZL             /RK05?
 1360 01427 5262          JMP URK05       /YES
 1361 01430 7006          RTL
 1362 01431 7006          RTL
 1363 01432 0075          AND K0007       /AC=UNIT NUMBER
 1364 01433 1266  UDTXAD, TAD DTDEVA      /INDEX INTO THE DEVICE TABLE
 1365 01434 3240          DCA UDTDDB
 1366 01435 6211          DATFLD
 1367 01436 6202          CIF             /FIELD 0 ROUTINE
 1368 01437 4452          JMS I DTCHKA    /SEE IF HE OWNS THIS UNIT
 1369 01440 0000  UDTDDB, 0
 1370 01441 7240          STA
 1371 01442 1125          TAD TEMP1
 1372 01443 3016          DCA A16
 1373 01444 1640          TAD I UDTDDB
 1374 01445 1071          TAD K0003       /SET-UP TO MOVE PARAMETERS
 1375 01446 3017          DCA A17
 1376 01447 7146          CLL CMA RTL     /L=1; AC=-3
 1377 01450 4451          JMS I BLTF1A    /MOVE 3 WORDS FROM UDF TO DATFLD
 1378 01451 1640          TAD I UDTDDB
 1379 01452 1126          TAD TEMP2
 1380 01453 4467          JMS I WAIT2     /SET WAIT 2 CONDITION FOR DECTAPE OR RK05
 1381 01454 1126          TAD TEMP2
 1382 01455 7112          CLL RTR
 1383 01456 7630          SZL CLA         /RK05?
 1384 01457 5366          JMP RK05GO      /YES
 1385 01460 4454          JMS I DTGOA     /NO - TRY TO START THE DECTAPE
 1386 01461 5165          WAITF1
 1387             
 1388 01462 7110  URK05,  CLL RAR
 1389 01463 0071          AND K0003       /RK05 UNIT #
 1390 01464 1076          TAD K0010       /DISPLACE TO RK05 DDB'S
 1391 01465 5233          JMP UDTXAD
 1392 01466 2660  DTDEVA, DEVTBE+20

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 39


 1393             /SEARCH FOR A JOG WAITING FOR A "WAIT 2" CONDITION
 1394             /CALLING SEQUENCE:
 1395             /       AC=0 COMPLETE PASS; AC NON-ZERO FINISH CURRENT PASS
 1396             /       JMS DTRKJB
 1397             /       MINUS WAIT CONDITION NUMBER
 1398             /       RETURN - NO JOBS FOUND
 1399             /       RETURN - CONTENTS OF WAIT 2 IN AC
 1400             
 1401 01467 0000  DTRKJB, 0
 1402 01470 7640          SZA CLA         /DO WE WANT A FULL PASS?
 1403 01471 5317          JMP DTRK2       /NO - JUST COMPLETE FROM WHERE WE LEFT OFF
 1404 01472 1060          TAD JOBCNT
 1405 01473 3125          DCA TEMP1       /SET COUNT FOR JOBMAX
 1406 01474 1014  DTRK1,  TAD IX4         /CHECK POSITION OF RING POINTER
 1407 01475 1323          TAD DTRKEN
 1408 01476 7640          SZA CLA
 1409 01477 5302          JMP .+3
 1410 01500 1061          TAD JOBTAB      /RESET RING POINTER
 1411 01501 3014          DCA IX4
 1412 01502 1414          TAD I IX4
 1413 01503 7450          SNA             /IS THIS JOB DEFINED?
 1414 01504 5317          JMP DTRK2       /NO
 1415 01505 1073          TAD K0005       /POINT AT WAIT 2
 1416 01506 3124          DCA TEMP0
 1417 01507 1524          TAD I TEMP0
 1418 01510 0075          AND K0007
 1419 01511 1667          TAD I DTRKJB
 1420 01512 7640          SZA CLA         /IS HE WAITING FOR OUR CONDITION?
 1421 01513 5317          JMP DTRK2       /NOPE
 1422 01514 1524          TAD I TEMP0     /PUT THE CONTENTS OF WAIT 2 IN THE AC
 1423 01515 2267          ISZ DTRKJB      /CAUSE SKIP ON EXIT
 1424 01516 5321          JMP DTRK3
 1425 01517 2125  DTRK2,  ISZ TEMP1       /MORE?
 1426 01520 5274          JMP DTRK1
 1427 01521 2267  DTRK3,  ISZ DTRKJB      /INDEX PAST ARGUMENT ON RETURN
 1428 01522 5667          JMP I DTRKJB
 1429             
 1430 01523 5057  DTRKEN, -CLKTBL+1

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 40


 1431             /MOVE DATA TO/FROM DATFLD FROM/TO USER CORE
 1432             /       USER'S POINTER IN "A16"
 1433             /       DATFLD POINTER IN "A17"
 1434             /CALLING SEQUENCE:
 1435             /       AC=-NUMBER OR WORDS; LINK=0 FROM DATFLD TO USER, LINK=1 FROM USER TO DATFLD
 1436             /       JMS BLTF1
 1437             /       RETURN
 1438             
 1439 01524 0000  BLTF1,  0
 1440 01525 3125          DCA TEMP1       /SAVE NUMBER OF WORDS TO MOVE
 1441 01526 7420  BL0,    SNL             /WHICH DIRECTION?
 1442 01527 5335          JMP BL1
 1443 01530 4132          JMS UDF1        /FROM USER
 1444 01531 1416          TAD I A16
 1445 01532 6211          DATFLD          /TO DATFLD
 1446 01533 3417          DCA I A17
 1447 01534 5341          JMP BL2
 1448 01535 1417  BL1,    TAD I A17       /FROM DATFLD
 1449 01536 4132          JMS UDF1
 1450 01537 3416          DCA I A16       /TO USER
 1451 01540 6211          DATFLD
 1452 01541 2125  BL2,    ISZ TEMP1       /MORE?
 1453 01542 5326          JMP BL0         /YES
 1454 01543 5724          JMP I BLTF1
 1455             
 1456 01544 0000  WAKEUP, 0
 1457 01545 2037          ISZ F1SCH       /SET FLAG TO SCHEDULE THIS USER IMMEDIATELY IF POSSIBLE
 1458 01546 4150          JMS GETTBA      /FIND STR1
 1459 01547 0001           JOBSTS+1
 1460 01550 7344          CLL STA RAL     /AC=7776
 1461 01551 0524          AND I TEMP0     /CLEAR JSWAIT
 1462 01552 7001          IAC
 1463 01553 3524          DCA I TEMP0     /NOW WE CAN BE SURE THAT IT IS SET
 1464 01554 2124          ISZ TEMP0       /NOW UPDATE THE DEVICE STATUS REGISTER
 1465 01555 1744          TAD I WAKEUP
 1466 01556 3524          DCA I TEMP0     /THE NEW D.S.R.
 1467 01557 2124          ISZ TEMP0
 1468 01560 2524          ISZ I TEMP0     /TURN ON DUMMY WAIT BIT IN WAIT MASK 1
 1469 01561 2124          ISZ TEMP0
 1470 01562 3524          DCA I TEMP0     /TAKE HIM OUT OF WAIT
 1471 01563 2344          ISZ WAKEUP
 1472 01564 5744          JMP I WAKEUP

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 41


 1473       1570  FCB2=   .+7&7770
 1474 01565 4172  RKREDO, REDO0
 1475 01566 6203  RK05GO, CIF CDF
 1476 01567 1045          TAD RKJOB       /WHO OWNS THE CONTROLLER?
 1477 01570 7640          SZA CLA
 1478 01571 5765          JMP I RKREDO    /HE'LL HAVE TO WAIT
 1479 01572 1440          TAD I JOBA
 1480 01573 3045          DCA RKJOB       /HE OWNS THE CONTROLLER
 1481 01574 3531          DCA I L2SAP     /ZERO AC IN CASE TRANSFER DOESN'T START
 1482 01575 6213          CIF DATFLD
 1483 01576 1045          TAD RKJOB
 1484 01577 4150          JMS GETTBA      /GET WAIT 2
 1485 01600 0004           JOBWMK+1
 1486 01601 7146          CLL CMA RTL     /AC=-3
 1487 01602 3237          DCA RKERR       /3 TRIES ON ERROR
 1488 01603 3041          DCA RKBLKS      /CLEAR SUCCESSFULL TRANSFER COUNTER
 1489 01604 4264          JMS USRLOK      /LOCK HIM IN HIS FIELD
 1490 01605 3043          DCA RKCORE      /SAVE THE CORTBL POINTER
 1491 01606 1524          TAD I TEMP0     /POINTS TO DDB WORD 4 (-1)
 1492 01607 4650          JMS I RKGOA     /START UP THE RK05 DISC
 1493 01610 7640          SZA CLA
 1494 01611 5215          JMP RKL21       /DIDN'T EVEN GET OFF THE GROUND
 1495 01612 7344          CLL STA RAL
 1496 01613 3047          DCA RKTIME      /SET TIMER FOR 2 SECONDS
 1497 01614 5165          WAITF1
 1498             
 1499             /*RKL21         /LEVEL-2 HANDLER FOR RK05
 1500 01615 1043  RKL21,  TAD RKCORE
 1501 01616 7640          SZA CLA         /DO WE HAVE A LEGAL 'CORTBL' POINTER?
 1502 01617 1045          TAD RKJOB
 1503 01620 7650          SNA CLA         / AND A VALID JOB NUMBER HERE?
 1504                             IFNZRO DEBUG <
 1505                     REBOOT          /NO - ERROR *****
 1506                             >
 1507                             IFZERO DEBUG <
 1508 01621 5240          JMP RKEND3
 1509                             >
 1510 01622 6001          ION
 1511 01623 6201          CDF
 1512 01624 7352          CLA CLL CMA RTR
 1513 01625 0443          AND I RKCORE
 1514 01626 3443          DCA I RKCORE    /UNLOCK HIS FIELD
 1515 01627 3043          DCA RKCORE
 1516 01630 1045          TAD RKJOB
 1517 01631 4150          JMS GETTBA      /FIND HIS AC
 1518 01632 0013           JOBREG+2
 1519 01633 1041          TAD RKBLKS
 1520 01634 3524          DCA I TEMP0     /PASS NUMBER OF BLOCKS TRANSFERED BACK TO THE USER
 1521 01635 1045          TAD RKJOB
 1522 01636 4450  RKEND2, JMS I AWAKEN    /TAKE HIM OUT OF WAIT STATUS
 1523 01637 0000  RKERR,  0               / (USED AS ERROR COUNTER & STATUS TO RETURN TO USER)
 1524 01640 3045  RKEND3, DCA RKJOB       /FREE THE CONTROLLER
 1525 01641 4456          JMS I DTRKJA    /LOOK FOR OTHERS WAITING FOR THE CONTROLLER
 1526 01642 7775           -3
 1527 01643 5135          EXITF1          /NOBODY ELSE WANTS IT
 1528 01644 0116          AND K7770
 1529 01645 3013          DCA IX3

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 42


 1530 01646 1413          TAD I IX3       /EXTRACT THE JOB# FROM THE DDB
 1531 01647 5236          JMP RKEND2
 1532 01650 2070  RKGOA,  RKGO
 1533       1650  FCE2=   .+1&7770

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 43


 1534             /ROUTINE TO SET WAIT 2 CONDITION FOR THE CURRENT USER
 1535             /       (FOR DECTAPE,RK05 OR CARDREADER)
 1536             /       ENTER WITH DISIRED WAIT 2 STATUS IN THE AC
 1537             
 1538 01651 0000  WAITS2, 0
 1539 01652 3126          DCA TEMP2
 1540 01653 6201          CDF
 1541 01654 1440          TAD I JOBA      /GET USER JOB NUMBER
 1542 01655 4150          JMS GETTBA
 1543 01656 0003           JOBWMK
 1544 01657 3524          DCA I TEMP0     /CLEAR WAIT MASK 1
 1545 01660 2124          ISZ TEMP0
 1546 01661 1126          TAD TEMP2       /GET WAIT NUMBER
 1547 01662 3524          DCA I TEMP0     /NOW'S HE'S WAITING
 1548 01663 5651          JMP I WAITS2
 1549             
 1550             /ROUNTINE TO LOCK CURRENT USER IN HIS CORE FIELD
 1551             /       RETURNS WITH CORTBL POINTER IN AC
 1552 01664 0000  USRLOK, 0
 1553 01665 6201          CDF
 1554 01666 1700          TAD I L2SFP     /POINTER TO LEVEL 2 SAVE FIELD
 1555 01667 0075          AND K0007       /JUST THE FIELD
 1556 01670 1021          TAD CORTBA      /DISPLACEMENT INTO THE CORE TABLE
 1557 01671 3126          DCA TEMP2
 1558 01672 7132          STL RTR         /AC = 2000
 1559 01673 1526          TAD I TEMP2
 1560 01674 3526          DCA I TEMP2     /LOCK IN CORE
 1561 01675 6211          DATFLD
 1562 01676 1126          TAD TEMP2       /NOW RETURN WITH POINTER INTO CORE TAVLE
 1563 01677 5664          JMP I USRLOK
 1564 01700 0041  L2SFP,  L2SF
 1565             
 1566       1710  FCB3=   .+7&7770
 1567 01701 0000  CDCNT,  0
 1568 01702 0000  CDCORE, 0
 1569 01703 2621  CDTIMR, TIMCDR
 1570             
 1571             /*CDL21         /LEVEL-2 HANDLER FOR CARD READER
 1572 01704 7152  CDL21,  CLL CMA RTR     /AC=5777
 1573 01705 0702          AND I CDCORE
 1574 01706 3702          DCA I CDCORE    /UNLOCK THE CORE FIELD
 1575 01707 1325          TAD CDJOB
 1576 01710 4150          JMS GETTBA      /FIND HIS AC
 1577 01711 0013           JOBREG+2
 1578 01712 1301          TAD CDCNT
 1579 01713 3524          DCA I TEMP0     /PUT THE COLUMN COUNT IN HIS AC
 1580 01714 1325          TAD CDJOB
 1581 01715 4450          JMS I AWAKEN    /TAKE HIM OUT OF WAIT STATUS
 1582 01716 0000  CDBUF,  0
 1583 01717 5135          EXITF1

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 44


 1584             /*CDL11         /LEVEL-1 INTERRUPT FOR CARD READER
 1585 01720 1703  CDL11,  TAD I CDTIMR
 1586 01721 7650          SNA CLA         /WERE WE EXPECTING A INTERRUPT?
 1587 01722 5332          JMP CDIOT       /NO
 1588 01723 2301          ISZ CDCNT       /COUNT A COLUMN
 1589 01724 2316          ISZ CDBUF       /BUMP THE USER'S POINTER
 1590 01725 0000  CDJOB,  0               /JOB OWNING THE CARD READER - (COVERS THE "ISZ SKIP")
 1591 01726 0000  CDREAD, .-.             /THE PROPER READ IOT IS PLACED HERE
 1592 01727 0000  CDFLD,  .-.             /CDF TO THE USER'S FIELD
 1593 01730 3716          DCA I CDBUF     /STASH A COLUMN IN THE USER'S BUFFER
 1594 01731 5145          INTRTN
 1595 01732 6632  CDIOT,  RCRA            /CLEAR UNWANTED INTERRUPT
 1596 01733 7200          CLA
 1597 01734 5145          INTRTN
 1598             
 1599             /*UUCDR         /UUO ENTRY FOR CARD READER
 1600 01735 7104  UUCDR,  CLL RAL         /TIMES 2
 1601 01736 1332          TAD CDIOT       /CONSTRUCT READ IOT
 1602 01737 3326          DCA CDREAD      /EITHER ALPHA, BINARY, OR COMPRESSED (8E ONLY)
 1603 01740 1531          TAD I L2SAP
 1604 01741 3316          DCA CDBUF       /SAVE THE USER'S BUFFER POINTER
 1605 01742 3531          DCA I L2SAP     /CLEAR USER AC - IN CASE THE READER ISN'T READY
 1606 01743 1466          TAD I UDFP
 1607 01744 3327          DCA CDFLD       /SAVE CDF TO USER'S FIELD
 1608 01745 1440          TAD I JOBA
 1609 01746 3325          DCA CDJOB
 1610 01747 3301          DCA CDCNT       /ZERO COLUMN COUNT
 1611 01750 6002          IOF
 1612             IFZERO CPU&7776 < JMP .+4 >
 1613 01751 6677  IFNZRO CPU&7776 < RCTF >/CLEAR 8E TRANSITION FLAG
 1614 01752 7001          IAC
 1615 01753 6635          RCNO            /ENABLE CARD READER INTERRUPTS
 1616 01754 7200          CLA
 1617 01755 6672          RCSE            /START CARD READER
 1618 01756 5367          JMP UUCDRB      /NOT READY - PUT HIM TO SLEEP BEFORE CONTINUING
 1619 01757 4264          JMS USRLOK      /LOCK HIM IN HIS FIELD
 1620 01760 3302          DCA CDCORE      /SAVE POINTER TO CORTBL
 1621 01761 1072          TAD K0004
 1622 01762 4467          JMS I WAIT2     /MAKE HIM WAIT FOR THE CARD READER
 1623 01763 6203          CIF CDF
 1624 01764 7144          CLL CMA RAL     /AC=-2
 1625 01765 3703          DCA I CDTIMR    /SET CARD READER TIMER
 1626 01766 5165          WAITF1
 1627 01767 6203  UUCDRB, CIF CDF
 1628 01770 5465          JMP I SLEEPB    /PUT HIM TO SLEEP FOR A COUPLE SECONDS
 1629       2000  *2000
 1630       2000  FCE3=   .&7770

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 45


 1631       2000  FCB4=   .+7&7770
 1632             
 1633             /*RKL11         /LEVEL-1 INTERRUPT FOR RK05
 1634 02000 6745  RKL11,  DRST            /GET CONTROLLER STATUS
 1635 02001 7104          CLL RAL         /IGNORE THE DONE BIT
 1636 02002 7440          SZA
 1637 02003 5221          JMP RKSR1       /ERROR!!!!!
 1638 02004 2041          ISZ RKBLKS      /COUNT A SUCCESSFUL TRANSFER
 1639 02005 1352          TAD RKCMD
 1640 02006 7450          SNA             /ARE WE FINISHED?
 1641 02007 5224          JMP RKSR2       /YES
 1642 02010 6746          DLDC            /LOAD THE NEW COMMAND
 1643 02011 1046          TAD RKSECT
 1644 02012 6743          DLAG            /LOAD THE NEW SECTOR - WE'RE OFF AND RUNNING AGAIN
 1645 02013 4363          JMS RKNXT       /SET-UP FOR THE NEXT BLOCK (IF ANY)
 1646 02014 7344          CLL STA RAL
 1647 02015 3047          DCA RKTIME      /SET CONTROLLER TIMER FOR 2 MORE SECONDS
 1648 02016 7346          CLL STA RTL
 1649 02017 3464          DCA I RKERRA    /THREE ERRORS
 1650 02020 5145          INTRTN
 1651             
 1652 02021 2464  RKSR1,  ISZ I RKERRA
 1653 02022 5231          JMP RKSR4       /STILL OK TO RETRY
 1654 02023 6745          DRST
 1655 02024 3464  RKSR2,  DCA I RKERRA    /FINAL STATUS FOR THE USER
 1656 02025 6746          DLDC            /CLEAR CONTROLLER STATUS AND COMMAND REGISTERS
 1657 02026 3047          DCA RKTIME
 1658 02027 1266          TAD RKL2        /SCHEDULE LEVEL 2
 1659 02030 5145          INTRTN
 1660 02031 0265  RKSR4,  AND K1012       /SAVE SPECIAL CASE ERROR BITS
 1661 02032 7450          SNA
 1662 02033 5256  RKSRE,  JMP RKSR5+1     /DON'T RECALL, OR PUT CURRENT JOB TO SLEEP
 1663 02034 0076          AND K0010
 1664 02035 7640          SZA CLA
 1665 02036 5255          JMP RKSR5       /PUT CURRENT JOB TO SLEEP AND RE-TRY
 1666 02037 7001          IAC
 1667 02040 6742          DCLR            /INCASE WE HAVE SOMETHING REALLY IN TROUBLE
 1668 02041 1042          TAD RKCOM
 1669 02042 0074          AND K0006       /SAVE ONLY THE UNIT #
 1670 02043 1110          TAD K0600       /ENABLE INTERRUPT ON SEEK COMPLETION
 1671 02044 6746          DLDC
 1672 02045 7126          STL RTL
 1673 02046 6742          DCLR            /RE-CALIBRATE
 1674 02047 1233          TAD RKSRE
 1675 02050 3200          DCA RKL11       /CHANGE LEVEL 1
 1676 02051 7346          CLL STA RTL     /ALLOW 3 SECONDS FOR THE RE-CALIBRATE
 1677 02052 3047          DCA RKTIME
 1678 02053 6742          DCLR
 1679 02054 5145          INTRTN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 46


 1680 02055 1065  RKSR5,  TAD SLEEPB
 1681 02056 3123          DCA INTS2
 1682 02057 7146          CLL CMA RTL     /AC=-3
 1683 02060 1013          TAD IX3         /POINTER TO DDB WORD 4 (-1)
 1684 02061 4270          JMS RKGO        /RE-TRY
 1685 02062 7450          SNA             /ANYTHING BAD?
 1686 02063 1123          TAD INTS2       /NO - HOW ABOUT PUTTING SOMEONE TO SLEEP?
 1687 02064 5145          INTRTN
 1688 02065 1012  K1012,  1012
 1689 02066 3676  RKL2,   RKL20
 1690 02067 1050  RKFLD,  -CORTBL+51
 1691 02070 0000  RKGO,   0
 1692 02071 3013          DCA IX3         /SAVE THE DDB POINTER
 1693 02072 7001          IAC
 1694 02073 6742          DCLR            /CLEAR THE CONTROLLER
 1695 02074 1413          TAD I IX3       /USER WORD 1
 1696 02075 7112          CLL RTR
 1697 02076 7010          RAR
 1698 02077 3042          DCA RKCOM       /SAVE COMMAND DIVIDED BY 10
 1699 02100 1042          TAD RKCOM
 1700 02101 0100          AND K0037       /PAGE COUNT
 1701 02102 7450          SNA
 1702 02103 1101          TAD K0040       /FOR 0 OR 40 GIVE HIM 40
 1703 02104 7040          CMA
 1704 02105 1041          TAD RKBLKS
 1705 02106 1041          TAD RKBLKS      /ADD NUMBER OF PAGES ALREADY TRANSFERED
 1706 02107 3044          DCA RKCNT
 1707 02110 1042          TAD RKCOM
 1708 02111 0114          AND K7400       /SAVE FUNCTION, DRIVE AND HI ORDER SECTOR BIT
 1709 02112 1043          TAD RKCORE      /POINTER TO CORTBL ENTRY
 1710 02113 1267          TAD RKFLD       /EXTRACT FIELD NUMBER AND INSERT INTERRUPT ENABLE AND HALF BLOCK BITS
 1711 02114 7026          CML RTL         /"RKFLD" COMPLEMENTED THE LINK
 1712 02115 7004          RAL
 1713 02116 3042          DCA RKCOM       /SAVE THE CONSTRUCTED COMMAND REGISTER
 1714 02117 1041          TAD RKBLKS      /NUMBER OF SECTORS ALREADY TRANSFERED
 1715 02120 1413          TAD I IX3
 1716 02121 3046          DCA RKSECT      /STARTING SECTOR NUMBER FROM THE USER
 1717 02122 7430          SZL
 1718 02123 2042          ISZ RKCOM       /BUMP HI ORDER BIT
 1719 02124 1041          TAD RKBLKS      /NUMBER OF BLOCKS ALREADY TRANSFERED
 1720 02125 7112          CLL RTR         /TIMES 400
 1721 02126 7012          RTR
 1722 02127 7010          RAR
 1723 02130 1413          TAD I IX3
 1724 02131 7001          IAC             /WE ADD ONE SINCE THE CONTROLLER WANTS THE REAL ADDRESS
 1725 02132 6744          DLCA            /LOAD USER'S CA INTO THE CONTROLLER
 1726 02133 4352          JMS RKCMD       /GENERATE FIRST COMMAND
 1727 02134 6002          IOF
 1728 02135 6746          DLDC            /LOAD CONTROLLER COMMAND REGISTER
 1729 02136 1046          TAD RKSECT
 1730 02137 6743          DLAG            /LOAD IN THE DESIRED SECTOR - WE ARE OFF AND RUNNING
 1731 02140 4363          JMS RKNXT       /SET-UP FOR THE NEXT SECTOR (IF ANY)
 1732 02141 1345          TAD RKDRST
 1733 02142 3200          DCA RKL11       /FIX FIRST WORD OF INTERRUPT SERVICE
 1734 02143 6741          DSKP            /ARE WE TRYING TO DO SOMETHING BAD?

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 47


 1735 02144 5670          JMP I RKGO      /NO - EVERYTHING IS PEACHY
 1736 02145 6745  RKDRST, DRST
 1737 02146 3464          DCA I RKERRA    /SAVE ERROR STATUS - NO RE-TRIES WILL BE MADE
 1738 02147 6746          DLDC            /CLEAR CONTROLLER STATUS AND COMMAND REGISTERS
 1739 02150 1266          TAD RKL2        /RETURN WITH L2 DISPATCH
 1740 02151 5670          JMP I RKGO
 1741             
 1742 02152 0000  RKCMD,  0
 1743 02153 2044          ISZ RKCNT
 1744 02154 1044          TAD RKCNT
 1745 02155 7700          SMA CLA         /ANY MORE BLOCKS TO GO
 1746 02156 5376          JMP RKDONE      /NO - CLOSE IT OUT
 1747 02157 2044          ISZ RKCNT       /HALF BLOCK?
 1748 02160 1115          TAD K7700       /NO - REMOVE THE HALF BLOCK BIT FROM THE COMMAND
 1749 02161 1042          TAD RKCOM       /GET THE COMMAND
 1750 02162 5752          JMP I RKCMD
 1751             
 1752 02163 0000  RKNXT,  0
 1753 02164 2046          ISZ RKSECT      /BUMP SECTOR
 1754 02165 1046          TAD RKSECT
 1755 02166 7450          SNA
 1756 02167 2042          ISZ RKCOM       /BUMP HI-ORDER SECTOR BIT
 1757 02170 0100          AND K0037
 1758 02171 7640          SZA CLA         /WILL WE SEEK ON THIS ONE?
 1759 02172 1111          TAD K1000       /NO - DO A READ ALL OR WRITE ALL
 1760 02173 3122          DCA INTS1
 1761 02174 4352          JMS RKCMD       /CHECK FOR HALF BLOCK AND COMPLETION
 1762 02175 1122          TAD INTS1
 1763 02176 3352  RKDONE, DCA RKCMD       /SAVE THE NEW COMMAND REGISTER
 1764 02177 5763          JMP I RKNXT
 1765             PAGE
 1766       2200  FCE4=   .&7770

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 48


 1767             IFNZRO DC08A <
 1768             T8ASSM, 0
 1769                     AND T83770      /THE CHARACTER ONLY
 1770                     SNA
 1771                     JMP T8ASS1      /IGNORE NULL CHARACTERS
 1772                     CLL RTR         /BRING THE CHARACTER INTO POSTION
 1773                     RAR
 1774                     AND T80177
 1775                     TAD K0200       /FORCE ON THE PARITY BIT
 1776                     CIF 00          /STASH IT AWAY
 1777                     JMS I T8IN1A    /THAT'S DONE IN FIELD 0
 1778                     ION
 1779             T8ASS1, CLL STA RTL     /AC=-3
 1780                     TAD T8ASSM
 1781                     DCA T8T         /POINTS TO THE LSW
 1782                     TAD I T8T
 1783                     AND T83770      /SAVE ONLY THE LINE NUMBER
 1784                     DCA I T8T
 1785                     ISZ T8T         /POINTS TO THE CAW
 1786                     STL RTR         /AC=2000
 1787                     DCA I T8T       /RESET THE FLAG BIT
 1788                     TTIR            /BUMP THE "R" REGISTER
 1789                     JMP I T8ASSM
 1790             T80177, 177
 1791             T83770, 3770
 1792             T8IN1A, T8IN1
 1793             T8T,    0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 49


 1794             T8TTI,  TTI
 1795                     DC08LO^10+0     /LSW  LINE # PT08+DC08LO+1
 1796                     2000            /CAW
 1797                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1798                     TTI
 1799                     DC08LO^10+10    /LSW  LINE # PT08+DC08LO+2
 1800                     2000            /CAW
 1801                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1802                     TTI
 1803                     DC08LO^10+20    /LSW  LINE # PT08+DC08LO+3
 1804                     2000            /CAW
 1805                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1806                     TTI
 1807                     DC08LO^10+30    /LSW  LINE # PT08+DC08LO+4
 1808                     2000            /CAW
 1809                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1810                     TTI
 1811                     DC08LO^10+40    /LSW  LINE # PT08+DC08LO+5
 1812                     2000            /CAW
 1813                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1814                     TTI
 1815                     DC08LO^10+50    /LSW  LINE # PT08+DC08LO+6
 1816                     2000            /CAW
 1817                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1818                     TTI
 1819                     DC08LO^10+60    /LSW  LINE # PT08+DC08LO+7
 1820                     2000            /CAW
 1821                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1822                     TTI
 1823                     DC08LO^10+70    /LSW  LINE # PT08+DC08LO+10
 1824                     2000            /CAW
 1825                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1826                     TTI
 1827                     DC08LO^10+100   /LSW  LINE # PT08+DC08LO+11
 1828                     2000            /CAW
 1829                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1830                     TTI
 1831                     DC08LO^10+110   /LSW  LINE # PT08+DC08LO+12
 1832                     2000            /CAW
 1833                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1834                     TTI
 1835                     DC08LO^10+120   /LSW  LINE # PT08+DC08LO+13
 1836                     2000            /CAW
 1837                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1838                     TTI
 1839                     DC08LO^10+130   /LSW  LINE # PT08+DC08LO+14
 1840                     2000            /CAW
 1841                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1842                     TTI
 1843                     DC08LO^10+140   /LSW  LINE # PT08+DC08LO+15
 1844                     2000            /CAW
 1845                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1846                     TTI
 1847                     DC08LO^10+150   /LSW  LINE # PT08+DC08LO+16
 1848                     2000            /CAW

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 50


 1849                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1850                     TTI
 1851                     DC08LO^10+160   /LSW  LINE # PT08+DC08LO+17
 1852                     2000            /CAW
 1853                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1854                     TTI
 1855                     DC08LO^10+170   /LSW  LINE # PT08+DC08LO+20
 1856                     2000            /CAW
 1857                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1858                     TTI
 1859                     DC08LO^10+200   /LSW  LINE # PT08+DC08LO+21
 1860                     2000            /CAW
 1861                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1862                     TTI
 1863                     DC08LO^10+210   /LSW  LINE # PT08+DC08LO+22
 1864                     2000            /CAW
 1865                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1866                     TTI
 1867                     DC08LO^10+220   /LSW  LINE # PT08+DC08LO+23
 1868                     2000            /CAW
 1869                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1870                     TTI
 1871                     DC08LO^10+230   /LSW  LINE # PT08+DC08LO+24
 1872                     2000            /CAW
 1873                     JMS T8ASSM      /CHARACTER FULLY ASSEMBLED
 1874             *T8TTI+DC08A+DC08A+DC08A+DC08A
 1875                     CIF 00
 1876                     JMP I .+1       /BACK TO THE REST OF THE DC08A SERVICE
 1877                     T8OUT1
 1878             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 51


 1879             FCB5=   .+7&7770
 1880             *2360
 1881             
 1882             FCE5=   .&7770
 1883             
 1884             DFCLS0, ZBLOCK 4
 1885             DFCNO0, ZBLOCK 4
 1886             DFL2S0, ZBLOCK 4
 1887                     -1              /TO END TABLE
 1888             DFL2DL= .
 1889                     1-DC08LO+PT08+KL8;11-DC08LO+PT08+KL8
 1890                     21-DC08LO+PT08+KL8;31-DC08LO+PT08+KL8
 1891             
 1892             
 1893             DFRING, CTG             /CLEAR THE GROUP COUNTER
 1894                     TAD K7774
 1895                     DCA TEMP0       /COUNTER FOR GROUP SEARCH
 1896             DFRNG1, RRS             /READ RING STATUS
 1897                     SZA
 1898                     STR             /ACKNOWLEDGE RING(S)
 1899                     CLA
 1900                     ITG             /INCREMENT THE GROUP COUNTER
 1901                     ISZ TEMP0       /LOOKED AT ALL LINES?
 1902                     JMP DFRNG1      /NO, KEEP LOOKING
 1903                     STA
 1904                     IOF
 1905                     DCA I .+2       /DATA FLD=0 HERE, I HOPE, RESET COUNTER
 1906                     EXITF1
 1907                     D6FLAG
 1908             
 1909             DFCLSI, 0
 1910             DFCNWI, 0
 1911             DFCLST, DFCLS0
 1912             DFCNOW, DFCNO0
 1913             DFCNTR, 0
 1914             DFCSET, 0
 1915                     TAD DFCLST
 1916                     DCA DFCLSI      /POINTER TO STATUS AT LAST INTERRUPT
 1917                     TAD DFCNOW
 1918                     DCA DFCNWI      /POINTER TO STATUS AT THIS INTERRUPT
 1919                     TAD K7774
 1920                     DCA DFCNTR      /COUNTER FOR COMPARISONS
 1921                     CTG             /CLEAR GROUP COUNTER
 1922                     JMP I DFCSET

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 52


 1923             DFCARR, JMS DFCSET      /INITIALIZE STATUS
 1924             DFCAR1, RCS             /READ CARRIER STATUS
 1925                     DCA I DFCNWI    /PLACE ON TABLE
 1926                     ISZ DFCNWI
 1927                     ITG             /INCREMENT THE GROUP COUNTER
 1928                     ISZ DFCNTR      /READ ALL FOUR GROUPS?
 1929                     JMP DFCAR1      /NO, READ NEXT
 1930                     JMS DFCSET
 1931                     TAD DFL2ST
 1932                     DCA DFL2SI
 1933             DFCAR2, TAD I DFCNWI
 1934                     CMA
 1935                     AND I DFCLSI
 1936                     SZA             /ANY LINES CLEAR?
 1937                     JMP DFCAR3      /YES, ACKNOWLEDGE
 1938             DFCAR5, TAD I DFCLSI
 1939                     CMA
 1940                     AND I DFCNWI
 1941                     SZA
 1942                     JMS DFCAR6
 1943                     ISZ DFCLSI
 1944                     ISZ DFCNWI
 1945                     ISZ DFL2SI
 1946                     ITG             /INCREMENT THE GROUP COUNTER
 1947                     ISZ DFCNTR      /ALL LINES CHECKED?
 1948                     JMP DFCAR2      /NO
 1949                     JMS DFCSET
 1950             DFCAR4, TAD I DFCNWI    /TRANSFER THIS STATUS TABLE TO LAST
 1951                     DCA I DFCLSI
 1952                     ISZ DFCNWI
 1953                     ISZ DFCLSI
 1954                     ISZ DFCNTR
 1955                     JMP DFCAR4
 1956                     JMP DFL200
 1957             
 1958             DFCAR3, CTR             /CLEAR TERMINAL READY
 1959                     JMS DFCAR6
 1960                     JMP DFCAR5      /LOOK AT OTHER GROUPS
 1961             
 1962             DFCAR6, 0
 1963                     DCA TEMP4       /BIT TO SET
 1964                     TAD TEMP4
 1965                     CMA
 1966                     AND I DFL2SI
 1967                     TAD TEMP4
 1968                     DCA I DFL2SI
 1969                     JMP I DFCAR6

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 53


 1970             DFL200, TAD DFL2ST      /INITIALIZE PSEUDO GROUP CTR
 1971                     DCA DFL2SG
 1972             
 1973             DFL22,  TAD K7770       /EIGHT PHONES
 1974                     DCA TEMP0
 1975                     IAC
 1976                     DCA TEMP1       /SELECT EACH LINE I GROUP
 1977             
 1978             DFL21,  TAD I DFL2SG
 1979                     SNA
 1980                     JMP DFL23
 1981                     SPA
 1982                     EXITF1
 1983                     AND TEMP1
 1984                     SZA CLA
 1985                     JMP DFL25
 1986             
 1987             DFL26,  TAD TEMP1
 1988                     CLL RAL
 1989                     DCA TEMP1
 1990                     ISZ TEMP0
 1991                     JMP DFL21
 1992             DFL23,  DCA I DFL2SG
 1993                     ISZ DFL2SG
 1994                     JMP DFL22
 1995             
 1996             DFGBLK, GETB
 1997             DFL25,  TAD DFL2SG
 1998                     TAD DFL2C
 1999                     DCA TEMP2
 2000                     TAD I TEMP2
 2001                     TAD TEMP0
 2002                     TAD K0010
 2003                     CLL RAL
 2004                     TAD DFVTBA
 2005                     DCA TEMP3
 2006                     TAD I TEMP3
 2007                     SZA CLA
 2008                     JMP .+5         /YES
 2009                     TAD TEMP3
 2010                     CIF
 2011                     JMS I DFGBLK
 2012                     JMP DFL26
 2013                     TAD TEMP3
 2014                     CIF CDF
 2015                     JMS I DFUMES
 2016                     JMP DFL26
 2017             
 2018             DFL2SG, 0
 2019             DFL2C,  DFL2DL-DFL2S0
 2020             DFVTBA= DEVTBA
 2021             DFL2SI, 0
 2022             DFL2ST, DFL2S0
 2023             DFUMES, UHLTMS
 2024                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 54


 2025                     PAGE
 2026             
 2027             /*TIMER0        /FIELD 1 TIMER ROUTINE
 2028             /ROUTINE TO DECREMENT TIMERS
 2029             /THEY ARE BUMPED ONCE EACH SECOND
 2030             /THUS A USER CAN MEASURE UP TO 4096 SECONDS
 2031             
 2032 02200 0000  TIMER0, 0
 2033 02201 5323          JMP DISPLA
 2034                             IFZERO DEBUG&4000 <
 2035       2201          *.-1
 2036 02201 7000          NOP             /REPLACE THIS NOP WITH 'JMP DISPLA' TO ENABLE IT
 2037                             >
 2038 02202 2314  TIMER4, ISZ TIMBIG      /HAVE WE GONE THROUGH A SECOND YET?
 2039 02203 5300          JMP F0TIMT      /NO - FINISH ANY FIELD 0 TIMERS MISSED BEFORE
 2040 02204 1313          TAD TICSEC      /REFRESH SECOND TIMER
 2041 02205 3314          DCA TIMBIG
 2042 02206 1060          TAD JOBCNT
 2043 02207 3130          DCA TIMET1
 2044 02210 1321          TAD TIMTB1      /START OF CLKTBL
 2045 02211 3126          DCA TIMET2
 2046 02212 6211  TIMER1, DATFLD
 2047 02213 1526          TAD I TIMET2
 2048 02214 7640          SZA CLA         /IS THIS TIMER RUNNING?
 2049 02215 2526          ISZ I TIMET2    /YES - DECREMENT IT
 2050 02216 5232          JMP TIMER2
 2051 02217 1316          TAD TIMEJM      /IT RAN OUT - SET TIMER FLAG
 2052 02220 1130          TAD TIMET1
 2053 02221 4150          JMS GETTBA      /GET PTR TO STATUS 1
 2054 02222 0001           JOBSTS+1
 2055 02223 1124          TAD TEMP0
 2056 02224 7650          SNA CLA         /DOES THE JOB STILL EXIST?
 2057 02225 4463          REBOOT          /NO - 'CLKTBL' ENTRY NOT CLEARED, SO ERROR *****
 2058 02226 1524          TAD I TEMP0     /YES, SET JSTIME IN STR1
 2059 02227 7004          RAL
 2060 02230 7130          STL RAR
 2061 02231 3524          DCA I TEMP0
 2062 02232 2126  TIMER2, ISZ TIMET2
 2063 02233 2130          ISZ TIMET1
 2064 02234 5212          JMP TIMER1
 2065 02235 2174          ISZ UPTIM1      /INDEX LOW ORDER UPTIME
 2066 02236 7410          SKP
 2067 02237 2173          ISZ UPTIM2      /INDEX HI ORDER UPTIME
 2068 02240 7000          NOP
 2069             
 2070                     IFZERO TC01     <JMP .+3>
 2071 02241 7240          IFNZRO TC01     <CLA CMA>
 2072 02242 3126          DCA TEMP2       /ENABLE TRANSFER BACK TO DECTAPE CONTROLLER WAIT
 2073 02243 4715          JMS I TIMEDT    / AND RUN THE DECTAPE TIMERS
 2074             
 2075                     IFZERO RK05     <JMP TIMER3>
 2076 02244 6213          IFNZRO RK05     <CIF DATFLD>    /SUPPRESS INTERRUPTS MOMENTARILY
 2077 02245 1047          TAD RKTIME
 2078 02246 7640          SZA CLA         /ANYTHINGACTIVE THERE?
 2079 02247 2047          ISZ RKTIME      /YES - DECREMENT IT
 2080 02250 5260          JMP TIMER3      /NOTHING TO COMPLAIN ABOUT YET
 2081 02251 7201          CLA IAC

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 55


 2082 02252 6742          DCLR            /WHOOPS! STOP WHATEVER IS GOING ON
 2083 02253 7240          CLA CMA
 2084 02254 3464          DCA I RKERRA    / AND INDICATE THE RK05 TRANSFER FAILED
 2085 02255 1045          TAD RKJOB
 2086 02256 4712          JMS I RKHUNG    /THEN REPORT THE ERROR
 2087 02257 3676           RKL20
 2088             
 2089             TIMER3,
 2090                     IFZERO CPU-2 <
 2091 02260 4722          JMS I TIMKFX    /FIX ROUTINE FOR KL8E BUG
 2092                     >
 2093 02261 1200  F0TIMR, TAD TIMER0
 2094 02262 3320          DCA TIMIT       /SET THE FIELD 0 COUNTERS POINTER
 2095 02263 6201  F0TIMS, CDF
 2096 02264 6002          IOF
 2097 02265 1720          TAD I TIMIT
 2098 02266 7640          SZA CLA         /IS THIS TIMER ACTIVE?
 2099 02267 2720          ISZ I TIMIT     /YES - IS IT TIME YET?
 2100 02270 5300          JMP F0TIMT      /NO
 2101 02271 6001          ION
 2102 02272 2320          ISZ TIMIT
 2103 02273 1720          TAD I TIMIT     /YES - GET THE LEVEL-2 DISPATCH ADDRESS
 2104 02274 6203          CDI
 2105 02275 4462          JMS I QUEUE1    / AND QUEUE
 2106 02276 2320          ISZ TIMIT
 2107 02277 5310          JMP TIMOUT      /ONLY ONE FOR NOW (AVOID L2Q OVERFLOW)
 2108 02300 6001  F0TIMT, ION
 2109 02301 2320          ISZ TIMIT
 2110 02302 2320          ISZ TIMIT
 2111 02303 1320          TAD TIMIT
 2112 02304 7041          CIA
 2113 02305 1317          TAD TIME3A
 2114 02306 7740          SMA SZA CLA     /REACHED END OF LIST?
 2115 02307 5263          JMP F0TIMS      /NO - KEEP CHECKING
 2116 02310 6203  TIMOUT, CIF CDF         /BACK TO FIELD 0
 2117 02311 5717          JMP I TIME3A    /RETURN
 2118             
 2119 02312 1405  RKHUNG, DTRKER
 2120 02313 7754  TICSEC, -TICSPS         /STARTING VALUE OF TIMEBIG
 2121 02314 7754  TIMBIG, -TICSPS         /ACTIVE COUNTER
 2122 02315 1316  TIMEDT, DTIMER
 2123 02316 0025  TIMEJM, JOBMAX+1
 2124 02317 2631  TIME3A, L2TIM3
 2125       0130  TIMET1= TEMP4
 2126       0126  TIMET2= TEMP2
 2127 02320 2631  TIMIT,  L2TIM3
 2128 02321 2723  TIMTB1, CLKTBL+1
 2129                     IFZERO CPU-2 <
 2130 02322 2345  TIMKFX, FXPT08
 2131                     >
 2132             
 2133             /ROUTINE TO DUMP VALUE OF ONE CORE CELL INTO MQ 
 2134             /RUNS AT EACH SYSTEM TICK
 2135             /TO USE, SET THE DESIRED CORE ADDRESS IN THE SWITCH REGISTER
 2136             /TO SELECT FIELDS, CLEAR TO SR TO 0, AND SET THE DESIRED
 2137             /FIELD IN THE LOW ORDER BITS OF THE SR.
 2138             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 56


 2139             /THIS MEANS THAT YOU CANNOT ADDRESS LOCATIONS 0,1,2,OR 3
 2140             /BY THE SR.  WHEN DOING A FIELD SELECT, LOCATION 1
 2141             /OF THE SELECTED FIELD IS AUTOMATICALLY CHOSEN
 2142             
 2143             /IF THIS ROUTINE IS RUNNING, THE EAE IS NOT MUCH USE
 2144             /TO USER PROGRAMS.  SORRY ABOUT THAT.
 2145             
 2146 02323 7604  DISPLA, LAS             /GET ADDRESS FROM SR
 2147 02324 0344          AND C7774       /TRYING A FIELD SELECT?
 2148 02325 7450          SNA
 2149 02326 5335          JMP DISPL1      /YES, GO CHANGE THE FIELD
 2150 02327 7604          LAS             /NO; WHAT WAS THAT ADDRESS AGAIN
 2151 02330 3124          DCA TEMP0
 2152 02331 6201  DISFLD, CDF             /ASSUME FIELD 0 TO START
 2153 02332 1524          TAD I TEMP0     /PICK UP CONTENTS OF SPECIFIED ADDRESS
 2154 02333 7421          MQL             /DUMP IT IN THE MQ
 2155 02334 5202          JMP TIMER4      /BACK TO MORE IMPORTANT THINGS
 2156             
 2157 02335 7604  DISPL1, LAS             /WHAT WAS THAT FIELD AGAIN?
 2158 02336 7104          CLL RAL
 2159 02337 7006          RTL
 2160 02340 1112          TAD K6201       /BUILD THE FIELD SELECT
 2161 02341 3331          DCA DISFLD
 2162 02342 7001          IAC             /LOOK AT LOCATION 1 OF CHOSEN FIELD
 2163 02343 5330          JMP DISFLD-1    /NOW GO LOOK
 2164             
 2165 02344 7774  C7774,  7774

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 57


 2166             
 2167                     IFZERO CPU-2 <
 2168             /
 2169             /ROUTINE TO FIX LOCK-OUT PROBLEM OF KL8E BOARDS.
 2170             /WE JUST RE-ENABLE THE INTERRUPT FOR EACH TERMINAL
 2171             /ONCE A SECOND.
 2172             /
 2173       6005  KE=     6005    /'KIE' - KEYBOARD INTERRUPT ENABLE
 2174             
 2175 02345 0000  FXPT08, 0
 2176 02346 7301          CLA CLL IAC     /SET BIT 11 FOR THE KIE
 2177 02347 6035  FXP1,   KE+030          /RE-ENABLE K00
 2178 02350 6405          KE+400
 2179 02351 6425          KE+420          /K02
 2180 02352 6445          KE+440
 2181 02353 6465          KE+460          /K04
 2182 02354 6345          KE+340
 2183 02355 6115          KE+110          /K06
 2184 02356 6305          KE+300
 2185 02357 6325          KE+320          /K10
 2186 02360 6505          KE+500
 2187 02361 6525          KE+520          /K12
 2188 02362 6545          KE+540
 2189 02363 6565          KE+560          /K14
 2190 02364 6705          KE+700
 2191 02365 6365          KE+360          /K16
 2192 02366 6725          KE+720
 2193 02367 6065          KE+060          /K20
 2194 02370 6145          KE+140
 2195 02371 6165          KE+160          /K22
 2196 02372 6055          KE+050          /K23
 2197       2367          *FXP1+KL8+1
 2198 02367 7200          CLA
 2199 02370 5745          JMP I FXPT08    / AND RETURN
 2200                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 58


 2201                     PAGE
 2202                     IFNZRO D689-4 < IFNZRO CPU-3 <
 2203                     IFZERO TC01-1 < IFZERO TD8E <
 2204             ///     TSS/8 CRASH-DUMP BOOTSTRAP LOADER
 2205             /IT SAVES THE FIRST 1000 WORDS OF TS8II IN THE
 2206             /DISC COPY OF TS8II, STARTING AT DISC LOCATION
 2207             /47000; IT THEN READS THE MAIN PART OF THE CRASH-
 2208             /DUMP PROGRAM FROM DISC LOCATION 46000 (IN TS8II)
 2209             /INTO CORE, STARTING AT LOCATION 0.
 2210             /
 2211 02400 7300  CBOOT,  CLA CLL
 2212 02401 6002          IOF             /JUST TO BE SURE
 2213 02402 6201          CDF             /FOR DISC CTRL
 2214 02403 1236          TAD CRFLD
 2215             
 2216                     IFZERO RF08 <
 2217 02404 6615          DIML            /SET THE CORE FIELD
 2218 02405 7307          CLA CLL IAC RTL
 2219 02406 6643          DXAL            /DISC EXT = 4
 2220                     >
 2221                     IFZERO RF08-40 <
 2222                     DEAL            /SET THE TRACK & THE FIELD
 2223                     CLA
 2224                     >
 2225 02407 1240          TAD CR6605
 2226 02410 4216          JMS CRDISC      /SAVE PART OF TS8II
 2227 02411 1237          TAD CR6603      / (LINK=1 HERE)
 2228 02412 4216          JMS CRDISC      /GET REST OF CRASHDUMP
 2229 02413 6212          CIF+10          /GET TO TS8II FIELD
 2230 02414 5615          JMP I .+1       / & START THE DUMP
 2231 02415 0200          CDUMP
 2232             /
 2233             /SUBROUTINE TO DO THE DISC I/O
 2234 02416 0000  CRDISC, 0
 2235 02417 3226          DCA CRIOT       /SET THE IOT
 2236 02420 7240          CLA CMA
 2237 02421 3643          DCA I CR7751    /SET ADDR-1
 2238 02422 1241          TAD CR7000
 2239 02423 3642          DCA I CR7750    /SET -(WORD-COUNT)
 2240 02424 7033          CML IAC RTR     /AC=7000 OR 6000,
 2241 02425 7031          CML IAC RAR     / DEPENDING ON LINK
 2242 02426 7402  CRIOT,  HLT             / (ACTUAL IOT)
 2243             
 2244                     IFZERO RF08 <
 2245 02427 6623          DFSC DFSE       /NOW WAIT FOR A SIGN
 2246                     >
 2247                     IFZERO RF08-40 <
 2248                     DFSC            /WAIT FOR ANY DF32 INTERRUPTS
 2249                     >
 2250 02430 5227          JMP .-1
 2251 02431 6621          DFSE            /ANY ERRORS?
 2252             
 2253                     IFZERO RF08-40 <
 2254                     SKP             / (SENSE OF DF32 CHECK IS REVERSED)
 2255                     >
 2256 02432 5616          JMP I CRDISC    /NO - RETURN
 2257 02433 1226          TAD CRIOT       /YES - RESET THE LINK

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 59


 2258 02434 7012          RTR             / (FUDGE)
 2259 02435 5220          JMP CRDISC+2    / & TRY IT AGAIN
 2260             /
 2261                     IFZERO RF08 <
 2262 02436 0010  CRFLD,  10      /FIELD OF TS8II
 2263                     >
 2264                     IFZERO RF08-40 <
 2265             CRFLD,  410     /TRACK & RESIDENT FIELD OF TS8II
 2266                     >
 2267 02437 6603  CR6603, 6603
 2268 02440 6605  CR6605, 6605
 2269 02441 7000  CR7000, 7000
 2270 02442 7750  CR7750, 7750
 2271 02443 7751  CR7751, 7751
 2272                     >>>>
 2273 02444 7402          IFNZRO .&177    <HLT>

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 60


 2274             
 2275             /*UPEEK1        /FIELD 1 PEEK IOT CODE
 2276             /
 2277 02445 7240  UPEEK1, CLA CMA
 2278 02446 1531          TAD I L2SAP     /GET THE USER'S PACKET
 2279 02447 3016          DCA A16
 2280 02450 1466          TAD I UDFP
 2281 02451 3133          DCA UDF1+1      /SET THE USER-FIELD SELECT
 2282 02452 4132          JMS UDF1
 2283 02453 1416          TAD I A16
 2284 02454 0102          AND K0070       /MAYBE CHANGE TO 'K0010'
 2285 02455 1112          TAD K6201
 2286 02456 3271          DCA UPEEK2      /SET DESIRED FIELD SELECT
 2287 02457 7240          CLA CMA
 2288 02460 1416          TAD I A16       /GET MONITOR ADDRESS
 2289 02461 3017          DCA A17
 2290 02462 7240          CLA CMA
 2291 02463 1416          TAD I A16       / AND THE USER BUFFER ADDRESS
 2292 02464 3126          DCA UPEEKP
 2293 02465 1416          TAD I A16       / AND THE WORD-COUNT
 2294 02466 3125          DCA UPEEKC
 2295 02467 1126          TAD UPEEKP
 2296 02470 3016          DCA A16
 2297 02471 7402  UPEEK2,  HLT            /CDF TO MONITOR FIELD
 2298 02472 1417          TAD I A17
 2299 02473 4132          JMS UDF1
 2300 02474 3416          DCA I A16       /STORE WORD IN USER'S BUFFER
 2301 02475 2125          ISZ UPEEKC
 2302 02476 5271          JMP .-5
 2303 02477 6203          CIF CDF
 2304 02500 3531          DCA I L2SAP     /ZERO HIS AC
 2305 02501 5702          JMP I .+1       / AND EXIT
 2306 02502 0336          UUOEX1
 2307             
 2308       0125  UPEEKC= TEMP1
 2309       0126  UPEEKP= TEMP2
 2310             
 2311             
 2312             /FIELD 1 ROUTINE TO HANDLE THE AUTO-RESTART CRASH.
 2313             
 2314 02503 0000  RBOOT1, 0
 2315 02504 6002          IOF
 2316 02505 7200          CLA
 2317 02506 1303          TAD RBOOT1
 2318 02507 6202          CIF
 2319 02510 5711          JMP I .+1       /OFF TO THE AUTO-RESTART CODE
 2320 02511 3600          RELOAD

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 61


 2321             /
 2322             /*F1DTST        /DECTAPE STOP ROUTINE
 2323             /ROUTINE TO STOP ANY DECTAPE ACTIVITY FOR A JOB FOR ^C OR ^BS.
 2324             /CALL:  TAD JOB #
 2325             /       CDF CURRENT
 2326             /       CIF 10
 2327             /       JMS F1DTST
 2328             /       ..RETURN IS WITH 'DATFLD' SET
 2329             
 2330 02512 0000  F1DTST, 0
 2331 02513 3364          DCA DTSJOB
 2332 02514 6214          RDF
 2333 02515 1157          TAD K6202
 2334 02516 3362          DCA DTSEXT      /SET THE RETURN FIELD
 2335 02517 1364          TAD DTSJOB
 2336 02520 4150          JMS GETTBA      /GET THE DEVICE-WAIT STATUS
 2337 02521 0004           JOBDWT
 2338 02522 1524          TAD I TEMP0
 2339 02523 0075          AND K0007
 2340 02524 1366          TAD K7776
 2341 02525 7450          SNA             /IS HE ON DECTAPE TIMER?
 2342 02526 5340          JMP DTSTP1      /YES
 2343 02527 7001          IAC
 2344 02530 7640          SZA CLA         /NO - IS HE USING THE DRIVE AT ALL?
 2345 02531 5362          JMP DTSEXT      /NO - JUST RETURN
 2346 02532 1364          TAD DTSJOB
 2347 02533 7041          CIA
 2348 02534 1027          TAD DTJOB
 2349 02535 7650          SNA CLA         /IS THE JOB ON THE CONTROLLER NOW?
 2350 02536 5362          JMP DTSEXT      /YES - DON'T TRY ANYTHING
 2351 02537 5356          JMP DTSTP2      /NO - CLEAR HIS REGISTERS
 2352 02540 1524  DTSTP1, TAD I TEMP0
 2353 02541 1073          TAD K0005
 2354 02542 3124          DCA TEMP0       /SET POINTER TO THE TIMER WORD
 2355 02543 7240          CLA CMA
 2356 02544 3524          DCA I TEMP0     /SET THE TIMER TO EXPIRE IMMEDIATELY
 2357 02545 7240          CLA CMA
 2358 02546 1364          TAD DTSJOB
 2359 02547 1061          TAD JOBTAB
 2360 02550 3014          DCA IX4         /SET THE POINTER FOR 'DTIMER'
 2361 02551 7344          CLA CLL CMA RAL
 2362 02552 3125          DCA TEMP1       /STOP ONLY ONE JOB'S TIMER
 2363 02553 3126          DCA TEMP2       / AND PREVENT HIM FROM GOING BACK ON WAIT
 2364 02554 7201          CLA IAC
 2365 02555 4765          JMS I DTSTIM    /STOP THE DRIVE
 2366 02556 1364  DTSTP2, TAD DTSJOB
 2367 02557 4450          JMS I AWAKEN    /CLEAR HIS DEVICE-WAIT AND SET THE STATUS
 2368 02560 7777           -1
 2369 02561 3037          DCA F1SCH       / (DON'T NEED THE SCHEDULING FLAG)
 2370 02562 0000  DTSEXT,  .-.
 2371 02563 5712          JMP I F1DTST
 2372             /
 2373 02564 0000  DTSJOB, 0
 2374 02565 1316  DTSTIM, DTIMER
 2375 02566 7776  K7776,  -2

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 62


 2376       2673  DEVDMB= JOBTBL-2                /DUMMY POINTER FOR NONEXISTENT DEVICES
 2377             
 2378                     IFNZRO DEVTBL-1-.&4000  <GLITCH>
 2379       2577          *DEVTBL-1
 2380 02577 2673          DEVDMB                  /DUMMY ENTRY USED BY FIP RELEASE
 2381 02600 0000  DEVTBL, ZBLOCK DEVTBE-DEVTBL    /CLEAR ALL THE TERMINAL ENTRIES
      02601 0000
      02602 0000
      02603 0000
      02604 0000
      02605 0000
      02606 0000
      02607 0000
      02610 0000
      02611 0000
      02612 0000
      02613 0000
      02614 0000
      02615 0000
      02616 0000
      02617 0000
      02620 0000
      02621 0000
      02622 0000
      02623 0000
      02624 0000
      02625 0000
      02626 0000
      02627 0000
      02630 0000
      02631 0000
      02632 0000
      02633 0000
      02634 0000
      02635 0000
      02636 0000
      02637 0000
 2382 02640 0000          0                       /FIELD SERVICES NEEDS H.S.R. FOR THEIR PMK01
 2383                     IFZERO PUNCH    <DEVDMB>
 2384 02641 0000          IFNZRO PUNCH    <0>
 2385 02642 2673                          DEVDMB  /DEVICE 2 NOT USED FOR NOW
 2386                     IFZERO LPT      <DEVDMB>
 2387 02643 0000          IFNZRO LPT      <0>
 2388 02644 2673          IFZERO CDR      <DEVDMB>
 2389                     IFNZRO CDR      <0>
 2390 02645 2673                          DEVDMB  /P2 - 4005
 2391 02646 2673                          DEVDMB  /R2 - 4006
 2392 02647 2673                          DEVDMB  /L2 - 4007
 2393 02650 2673                          DEVDMB  /X0 - 4010
 2394 02651 2673                          DEVDMB  /Y0 - 4011
 2395 02652 2673                          DEVDMB  /X1 - 4012
 2396 02653 2673                          DEVDMB  /Y1 - 4013
 2397 02654 2673                          DEVDMB  /X2 - 4014
 2398 02655 2673                          DEVDMB  /Y2 - 4015
 2399 02656 2673                          DEVDMB  /X3 - 4016
 2400 02657 2673                          DEVDMB  /Y3 - 4017
 2401                     IFZERO TC01     <DEVDMB

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 63


 2402                                     DEVDMB
 2403                                     DEVDMB
 2404                                     DEVDMB
 2405                                     DEVDMB
 2406                                     DEVDMB
 2407                                     DEVDMB
 2408                                     DEVDMB>
 2409 02660 0000          IFNZRO TC01     <ZBLOCK 10>     /4020 - 4027
      02661 0000
      02662 0000
      02663 0000
      02664 0000
      02665 0000
      02666 0000
      02667 0000
 2410 02670 0000          IFNZRO RK05     <ZBLOCK RK05>   /4030 - 4033
 2411 02671 2673          IFNZRO .-JOBTBL+1 <DEVDMB>
 2412 02672 2673          IFNZRO .-JOBTBL+1 <DEVDMB>
 2413 02673 2673          IFNZRO .-JOBTBL+1 <DEVDMB>
 2414                     IFNZRO .-JOBTBL+1 <DEVDMB>
 2415 02674 7777          -1                      /TERMINATOR
 2416 02675 0000  JOBTBL, 0
 2417             
 2418             /THE REMAINING CONTROL TABLES ARE CLEARED DURING START-UP.

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 64


 2419                             IFZERO DEBUG&7-3&4000 <
 2420                             IFZERO CDR <
 2421                     *1710
 2422             /*RETCHK        /RETB CHECKER
 2423             RETCHK, 0
 2424                     DCA RCBLK
 2425                     TAD RCBLK
 2426                     AND K0007
 2427                     SZA CLA         /GOOD ADDRESS?
 2428                     REBOOT          /NO
 2429                     TAD RCBLK
 2430                     AND K7400
 2431                     SNA CLA
 2432                     REBOOT          /NO
 2433                     CDF
 2434                     TAD I RCFREE
 2435                     DATFLD
 2436             RETC1,  DCA RCPTR
 2437                     TAD RCPTR
 2438                     CIA
 2439                     TAD RCBLK
 2440                     SNA CLA         /WAS THE BLOCK RELEASED PREVIOUSLY?
 2441                     REBOOT          /YES ******
 2442                     TAD I RCPTR
 2443                     SZA             /END OF FREE LIST?
 2444                     JMP RETC1       /NOT YET
 2445                     ISZ RETCHK      /YES - SKIP THE CALL ADDRESS
 2446                     CLA IAC
 2447                     TAD RCSAVE
 2448                     AND K0017
 2449                     TAD RCBASE
 2450                     DCA RCSAVE      /NOW POINTS TO NEW RING ELEMENT
 2451                     CDF
 2452                     TAD I RETBA     /GET THE RETURN ADDRESS OF THE RELEASE
 2453                     DATFLD
 2454                     DCA I RCSAVE    /SAVE IT IN THE RING BUFFER
 2455                     ISZ RCSAVE
 2456                     TAD RCBLK
 2457                     DCA I RCSAVE    / ALONG WITH THE BLOCK ADDRESS
 2458                     CIF
 2459                     JMP I RETCHK    /THEN RETURN
 2460             /
 2461             K0017,  17
 2462             RCFREE, FREE
 2463             RCBLK,  0
 2464             RCPTR,  0
 2465             RCBASE, 2360    /BE SURE THIS PART OF FIELD 1 IS FREE
 2466             RCSAVE, 2361
 2467             RETBA,  RETB
 2468                             >>

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 65


 2469                     IFNZRO D689-4 <
 2470                     IFZERO TC01-1 <
 2471                     IFZERO TD8E <
 2472                     IFNZRO CPU-3 <
 2473             ///     TSS/8 DECTAPE CRASH-DUMP
 2474             /THIS IS LOADED FROM DISC BY THE CRASH-DUMP
 2475             /BOOTSTRAP LOADER. IT ASSUMES A FORMATTED
 2476             /DECTAPE IS MOUNTED ON UNIT 0. WHEN THE DUMP
 2477             /IS FINISHED, TSS/8 INIT IS LOADED & STARTED.
 2478             /
 2479       6000          *6000
 2480                     NOPUNCH
 2481       0000          *0
 2482                     ENPUNCH
 2483             /
 2484       0010  QAX0=   10
 2485       0020  QWS0=   20      /SCRATCH STORAGE
 2486       0021  QWS1=   21
 2487       0022  QWS2=   22
 2488       0023  QWS3=   23
 2489       0024  QWS4=   24
 2490       0025  QWS5=   25
 2491       0026  QWS6=   26
 2492       0027  QWS7=   27
 2493       0030  QWBLK=  30
 2494       0031  QWFLD=  31
 2495       0032  QRTRK=  32      /EXTENDED DISC ADDRESS
 2496       0033  QRADR=  33      /DISC ADDRESS
 2497             /
 2498       6034          *6000+QRADR+1
 2499                     NOPUNCH
 2500       0034          *QRADR+1
 2501                     ENPUNCH
 2502       4434  WTAPE=  JMS I .         /DECTAPE WRITE
 2503 00034 0400          WTENT
 2504       4435  RDISC=  JMS I .         /DISC READ
 2505 00035 0515          RDENT
 2506       4436  SPEAK=  JMS I .         /MESSAGE TYPING
 2507 00036 0600          SPENT
 2508             /
 2509                     IFDEF CBOOTA <
 2510                     *6000+CBOOTA
 2511                     NOPUNCH
 2512                     *CBOOTA
 2513                     ENPUNCH
 2514             CBOOTA, CDUMP   /TO OVERLAY IN CASE RESTARTED AT 'CRASH'
 2515                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 66


 2516       6200          *6200
 2517                     NOPUNCH
 2518       0200          *200
 2519                     ENPUNCH
 2520             
 2521             ///     BEGIN CRASH-DUMP
 2522 00200 7300  CDUMP,  CLA CLL
 2523 00201 6002          IOF
 2524 00202 1322          TAD QK600
 2525 00203 6766          DTCA DTXA       /REWIND THE DECTAPE
 2526 00204 3030          DCA QWBLK       /FIRST DT BLOCK IS ZERO
 2527 00205 7240          CLA CMA
 2528 00206 3022          DCA QWS2        /SET CORE-1
 2529 00207 1320          TAD QK10        /SET MEMORY FIELD
 2530 00210 3031          DCA QWFLD
 2531 00211 7240          CLA CMA
 2532 00212 3023          DCA QWS3        /SET -(# BLOCKS)
 2533 00213 4434          WTAPE           /WRITE OUT BLOCK ZERO
 2534 00214 1326          TAD QM40        
 2535 00215 3023          DCA QWS3        /SET BLK COUNT FOR 1 FLD
 2536 00216 3031          DCA QWFLD       /SET MEM FLD TO ZERO
 2537 00217 7240          CLA CMA
 2538 00220 3022          DCA QWS2        / & CORE ADDR - 1
 2539 00221 4434          WTAPE           / AND WRITE OUT FIELD ZERO
 2540 00222 1315          TAD QDADR
 2541 00223 3033          DCA QRADR       /SET SAVED DATA ADDRESS
 2542 00224 1316          TAD QDTRK
 2543 00225 3032          DCA QRTRK
 2544 00226 4435          RDISC           /GET THE SAVED TS8II PIECE
 2545 00227 1317          TAD QF1
 2546 00230 3030          DCA QWBLK       /SET TS8II BLOCK NUMBER
 2547 00231 1323          TAD QM4
 2548 00232 3023          DCA QWS3        /SET -(# BLOCKS TO WRITE)
 2549 00233 4434          WTAPE           /WRITE OUT THE SAVED DATA
 2550 00234 1320          TAD QK10
 2551 00235 3031          DCA QWFLD       /SET MEMORY FIELD
 2552 00236 1324          TAD QM34
 2553 00237 3023          DCA QWS3        /# BLOCKS FOR REST OF TS8II
 2554             /
 2555             /NOW WRITE OUT EACH REMAINING MEMORY FIELD.
 2556 00240 4434  QMEMD,  WTAPE
 2557 00241 1031          TAD QWFLD
 2558 00242 1320          TAD QK10        /UPDATE THE FIELD
 2559 00243 3031          DCA QWFLD       / NUMBER
 2560 00244 1326          TAD QM40
 2561 00245 3023          DCA QWS3        /RESET BLOCK COUNT
 2562 00246 1031          TAD QWFLD
 2563 00247 1330          TAD QXFLD       /ARE WE PAST THE END
 2564 00250 7710          SPA CLA         / OF THE REQUIRED CORE?
 2565 00251 5240          JMP QMEMD       /NO - CONTINUE
 2566             /
 2567             /NOW, USING FLD 2 FOR SCRATCH, READ A 4K BLOCK FROM
 2568             /DISC AND WRITE IT TO DECTAPE.
 2569 00252 1321          TAD QK20
 2570 00253 3031          DCA QWFLD       /SET THE FIELD
 2571 00254 1325          TAD QM37
 2572 00255 1030          TAD QWBLK       /SET QWS6 TO THE FIRST

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 67


 2573 00256 3026          DCA QWS6        / BLOCK OF THE LAST FLD
 2574 00257 3033          DCA QRADR       /CLEAR DISC ADDRESS
 2575 00260 3032          DCA QRTRK
 2576 00261 1331          TAD QXTBK
 2577 00262 3027          DCA QWS7        /SET 4K BLOCK-COUNTER
 2578             /
 2579 00263 4302  QDSCD,  JMS QADVB       /LEAVE ROOM BETWEEN BLOCKS
 2580 00264 4435          RDISC           /GET A 4K BLOCK
 2581 00265 4434          WTAPE           / & WRITE IT OUT
 2582 00266 2032          ISZ QRTRK       /INCRE. THE TRACK ADDR.
 2583 00267 2027          ISZ QWS7        /ARE WE DONE?
 2584 00270 5263          JMP QDSCD       /NO - CONTINUE
 2585 00271 6766          DTCA DTXA       /STOP THE TAPE
 2586 00272 7326          CLA CLL CML RTL
 2587 00273 3032          DCA QRTRK       /SET FOR TRACK 2
 2588 00274 1314          TAD QCORM
 2589 00275 3031          DCA QWFLD       / & PROPER FIELD
 2590 00276 4435          RDISC           /THEN READ 'INIT'
 2591 00277 6223          CIF CDF INFLD
 2592 00300 5701          JMP I .+1       / & START UP TSS/8
 2593 00301 4200          4200
 2594             /
 2595             /SUBROUTINE TO ADJUST THE BLOCK ADDRESS TO ALLOW
 2596             /ROOM FOR THE TAPE TO STOP & START.
 2597 00302 0000  QADVB,  0
 2598 00303 7200          CLA
 2599 00304 1026          TAD QWS6        /GET LAST STARTING BLOCK
 2600 00305 1327          TAD QSKIP       / ADD THE SKIP COUNT
 2601 00306 3030          DCA QWBLK       / & SAVE IT
 2602 00307 1030          TAD QWBLK
 2603 00310 3026          DCA QWS6
 2604 00311 1326          TAD QM40        /ALSO, RESET THE BLOCK
 2605 00312 3023          DCA QWS3        / COUNT
 2606 00313 5702          JMP I QADVB     /THEN RETURN
 2607             /
 2608 00314 0020  QCORM,  INFLD
 2609 00315 7000  QDADR,  7000    /DISC ADDR. OF TS8II PIECE
 2610 00316 0004  QDTRK,  4
 2611 00317 0044  QF1,    44      /BLOCK NUMBER FOR TS8II
 2612 00320 0010  QK10,   10
 2613 00321 0020  QK20,   20
 2614 00322 0600  QK600,  600
 2615 00323 7774  QM4,    -4
 2616 00324 7744  QM34,   -34
 2617 00325 7741  QM37,   -37
 2618 00326 7740  QM40,   -40
 2619 00327 0050  QSKIP,  50      /INTER-BLOCK GAP + BLOCK-SIZE
 2620 00330 7740  QXFLD,  -40     /DUMP FIELDS 0 - 3
 2621 00331 7747  QXTBK,  -SWDEX-JOBMAX   / -(# OF DISC TRACKS TO DUMP)

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 68


 2622       6400          *6400
 2623                     NOPUNCH
 2624       0400          *400
 2625                     ENPUNCH
 2626             /
 2627             /DECTAPE WRITE SUBROUTINE - DUMPS ALL OR PART OF
 2628             /A MEMORY FIELD ONTO DECTAPE
 2629 00400 0000  WTENT,  0
 2630 00401 6201          CDF             /FOR DT CTRL/WORDS
 2631 00402 7346  WTX1,   CLA CLL CMA RTL
 2632 00403 3020          DCA QWS0        /SET -(ERROR LIMIT)
 2633 00404 7346          CLA CLL CMA RTL
 2634 00405 3314          DCA WX          /SET -(MAX REVERSALS)
 2635 00406 6761          DTRA
 2636 00407 0354          AND QK7174
 2637 00410 6764          DTXA            /CLEAR STATUS REG 'A'
 2638 00411 6774          DTLB            / & CLEAR FIELD BITS
 2639 00412 1312          TAD WTWC
 2640 00413 3713          DCA I WTCA
 2641 00414 6761          DTRA
 2642 00415 1352          TAD QK210       /ESTABLISH SEARCH GO MODE
 2643 00416 0352          AND QK210
 2644 00417 5222          JMP WTX4
 2645 00420 7420  WTX3,   SNL             /CHANGE DIRECTION?
 2646 00421 5260          JMP WTX5        /YES
 2647 00422 4264  WTX4,   JMS WTOPR
 2648 00423 6761          DTRA
 2649 00424 7006          RTL
 2650 00425 7006          RTL
 2651 00426 7630          SZL CLA         /GOING FORWARD?
 2652 00427 1346          TAD QK2         /NO - ALLOW FOR SLIP
 2653 00430 1712          TAD I WTWC      /GET THE LAST BLOCK SEEN
 2654 00431 7040          CMA
 2655 00432 1030          TAD QWBLK       / & COMPARE TO THE BLK WE WANT
 2656 00433 7040          CMA
 2657 00434 7640          SZA CLA         /ARE WE THERE?
 2658 00435 5220          JMP WTX3        /NO - CONTINUE SEARCH
 2659 00436 7430          SZL             /GOING FORWARD?
 2660 00437 5260          JMP WTX5        /NO - CHANGE TO FORWARD
 2661 00440 1031          TAD QWFLD       /SET THE FIELD BITS
 2662 00441 6774          DTLB
 2663 00442 1355          TAD QM200
 2664 00443 3712          DCA I WTWC      / & SET FOR 200 WORDS
 2665 00444 1022          TAD QWS2
 2666 00445 3713          DCA I WTCA      / & SET CORE ADDR - 1
 2667 00446 1350          TAD QK50
 2668 00447 4264          JMS WTOPR       /THEN DO THE TRANSFER
 2669 00450 1347          TAD QK40
 2670 00451 6764          DTXA
 2671 00452 1713          TAD I WTCA      /GET THE UPDATED CORE ADDR.
 2672 00453 3022          DCA QWS2
 2673 00454 2030          ISZ QWBLK       /UPDATE THE BLOCK-COUNT
 2674 00455 2023          ISZ QWS3        /ARE WE DONE?
 2675 00456 5202          JMP WTX1        /NO - DO ANOTHER BLOCK
 2676 00457 5600          JMP I WTENT     /YES - RETURN
 2677             /
 2678             /HERE WE REVERSE THE TAPE DIRECTION AND CHECK TO

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 69


 2679             /SEE IF WE HAVE DONE MORE THAN A REASONABLE NUMBER
 2680             /OF REVERSES.
 2681 00460 1353  WTX5,   TAD QK400
 2682 00461 2314          ISZ WX          /INCRE. THE COUNT
 2683 00462 5222          JMP WTX4        /OK - CONTINUE
 2684 00463 5304          JMP WT01        /BAD - PRINT ERROR
 2685             /
 2686             /SUBROUTINE TO PERFORM A 'DTXA' AND WAIT FOR
 2687             /COMPLETION OF THE OPERATION.
 2688 00464 0000  WTOPR,  0
 2689 00465 6764          DTXA
 2690 00466 6773          DTSF DTRB
 2691 00467 5266          JMP .-1
 2692 00470 7700          SMA CLA         /ANY ERRORS?
 2693 00471 5664          JMP I WTOPR     /NO - RETURN
 2694 00472 6772          DTRB            /GET THE STATUS AGAIN
 2695 00473 7006          RTL
 2696 00474 7004          RAL
 2697 00475 7710          SPA CLA         /SELECT ERROR?
 2698 00476 5307          JMP WTSELC      /YES
 2699 00477 7430          SZL             /END-ZONE ERROR?
 2700 00500 1353          TAD QK400       /YES - CHANGE TAPE DIRECTION
 2701 00501 6764          DTXA
 2702 00502 2020          ISZ QWS0        /INCRE. ERROR LIMIT
 2703 00503 5204          JMP WTX1+2      / & TRY IT AGAIN
 2704 00504 4436  WT01,   SPEAK; WTHELP   /PUSH THE PANIC BUTTON
      00505 0665
 2705 00506 5751          JMP I QK200     /RESTART (MAYBE EVEN SUCCEED)
 2706 00507 4436  WTSELC, SPEAK; WTSMS    /SELECT ERROR
      00510 0702
 2707 00511 5202          JMP WTX1        /TRY AGAIN
 2708             /
 2709 00512 7754  WTWC,   7754    /DT WORD COUNT
 2710 00513 7755  WTCA,   7755    /DT BUFFER ADDRESS
 2711 00514 7777  WX,     -1      /REVERSAL COUNTER
 2712             /
 2713             /SUBROUTINE TO READ ALL OR PART OF A 4K DISC TRACK.
 2714 00515 0000  RDENT,  0
 2715 00516 7346          CLA CLL CMA RTL
 2716 00517 3020          DCA QWS0        /SET -(ERROR LIMIT)
 2717 00520 6201          CDF
 2718 00521 7240  RDX1,   CLA CMA
 2719 00522 3745          DCA I RDCA      /SET CORE ADDR - 1
 2720 00523 1033          TAD QRADR
 2721 00524 3744          DCA I RDWC      /USE DISC ADDR. AS COUNT
 2722             
 2723                     IFZERO RF08 <
 2724 00525 1032          TAD QRTRK
 2725 00526 6643          DXAL            /SET DISC EXTENSION
 2726 00527 1031          TAD QWFLD
 2727 00530 6615          DIML            /SET MEMORY FIELD
 2728                     >
 2729                     IFZERO RF08-40 <
 2730                     TAD QRTRK       /GET THE DISC EXTENSION
 2731                     CLL RTL; RTL; RTL
 2732                     TAD QWFLD       / & ADD IN THE FIELD SELECT
 2733                     DEAL

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 70


 2734                     CLA
 2735                     >
 2736 00531 1033          TAD QRADR
 2737 00532 6603          DMAR            /SET THE ADDR. & READ
 2738 00533 6623          DFSC DFSE       / & WAIT FOR A FLAG
 2739 00534 5333          JMP .-1
 2740 00535 6621          DFSE            /ANY ERRORS?
 2741 00536 5715          JMP I RDENT     /NOPE - RETURN
 2742 00537 2020          ISZ QWS0        /TOO MANY ERRORS?
 2743 00540 5321          JMP RDX1        /NOPE - TRY AGAIN
 2744 00541 4436          SPEAK; RDHELP   /YES - PRINT A MSG
      00542 0650
 2745 00543 5751          JMP I QK200     /THEN TRY A RESTART
 2746             /
 2747 00544 7750  RDWC,   7750    /DISC WORD COUNT
 2748 00545 7751  RDCA,   7751    /DISC BUFFER ADDRESS
 2749             /
 2750 00546 0002  QK2,    2
 2751 00547 0040  QK40,   40
 2752 00550 0050  QK50,   50
 2753 00551 0200  QK200,  200
 2754 00552 0210  QK210,  210
 2755 00553 0400  QK400,  400
 2756 00554 7174  QK7174, 7174
 2757 00555 7600  QM200,  -200

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 71


 2758       6600          *6600
 2759                     NOPUNCH
 2760       0600          *600
 2761                     ENPUNCH
 2762             /
 2763             /SUBROUTINE TO PRINT A MESSAGE AND WAIT FOR A RESPONSE.
 2764 00600 0000  SPENT,  0
 2765 00601 7300          CLA CLL
 2766 00602 6211          DATFLD          /GET TO OUR DATA FIELD
 2767 00603 1246          TAD QK215
 2768 00604 4237          JMS QTOUT       /TYPE <CR>
 2769 00605 1245          TAD QK212
 2770 00606 4237          JMS QTOUT       / & <LF>
 2771 00607 7240          CLA CMA
 2772 00610 1600          TAD I SPENT     /GET THE MESSAGE ADDR.
 2773 00611 2200          ISZ SPENT
 2774 00612 3010          DCA QAX0
 2775 00613 1410  SPRNT,  TAD I QAX0      /GET A CHARACTER
 2776 00614 7450          SNA             /DONE?
 2777 00615 5220          JMP QTX         /YES
 2778 00616 4237          JMS QTOUT       /NO - TYPE THE CHARACTER
 2779 00617 5213          JMP SPRNT       / & DO IT AGAIN
 2780 00620 6032  QTX,    KCC             /CLEAR THE KEYBOARD
 2781 00621 6031          KSF
 2782 00622 5221          JMP .-1
 2783 00623 6036          KRB
 2784 00624 3021          DCA QWS1        /SAVE THE CHAR
 2785 00625 1021          TAD QWS1
 2786 00626 4237          JMS QTOUT       / & ECHO IT
 2787 00627 1021          TAD QWS1
 2788 00630 1247          TAD QM215
 2789 00631 7640          SZA CLA         /CARRIAGE RETURN?
 2790 00632 5220          JMP QTX         /NO - TRY AGAIN
 2791 00633 1245          TAD QK212
 2792 00634 4237          JMS QTOUT       /YES - TYPE <LF>
 2793 00635 6201          CDF
 2794 00636 5600          JMP I SPENT     /THEN RETURN
 2795             /
 2796             /SUBROUTINE TO TYPE ONE CHARACTER.
 2797 00637 0000  QTOUT,  0
 2798 00640 6046          TLS             /TYPE THE CHAR
 2799 00641 7200          CLA             / & CLEAR THE AC
 2800 00642 6041          TSF
 2801 00643 5242          JMP .-1
 2802 00644 5637          JMP I QTOUT     /RETURN
 2803             /
 2804 00645 0212  QK212,  212
 2805 00646 0215  QK215,  215
 2806 00647 7563  QM215,  -215
 2807             /
 2808             /CRASH-DUMP ERROR MESSAGES.
 2809 00650 0304  RDHELP, "D;"I;"S;"C;" ;"F;"A;"I;"L;"U;"R;"E;0
      00651 0311
      00652 0323
      00653 0303
      00654 0240
      00655 0306

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 72


      00656 0301
      00657 0311
      00660 0314
      00661 0325
      00662 0322
      00663 0305
      00664 0000
 2810 00665 0302  WTHELP, "B;"A;"D;" ;"D;"E;"C;"T;"A;"P;"E;"?;0
      00666 0301
      00667 0304
      00670 0240
      00671 0304
      00672 0305
      00673 0303
      00674 0324
      00675 0301
      00676 0320
      00677 0305
      00700 0277
      00701 0000
 2811 00702 0304  WTSMS,  "D;"E;"C;"T;"A;"P;"E;" ;"S;"E;"L;"E;"C;"T;" ;"E;"R;"R;"O;"R;0
      00703 0305
      00704 0303
      00705 0324
      00706 0301
      00707 0320
      00710 0305
      00711 0240
      00712 0323
      00713 0305
      00714 0314
      00715 0305
      00716 0303
      00717 0324
      00720 0240
      00721 0305
      00722 0322
      00723 0322
      00724 0317
      00725 0322
      00726 0000
 2812                     >>>>

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 73


 2813             /*WINBAS        /BASIC RETRIEVAL WINDOW
 2814       7720          *FIPBLK
 2815 07720 0000  FIPBLK, ZBLOCK 10       /FIP I/O PARAMETER BLOCK
      07721 0000
      07722 0000
      07723 0000
      07724 0000
      07725 0000
      07726 0000
      07727 0000
 2816 07730 0000  WINBAS, ZBLOCK -.       /SPECIAL BASIC WINDOW (TO END OF FIELD)
      07731 0000
      07732 0000
      07733 0000
      07734 0000
      07735 0000
      07736 0000
      07737 0000
      07740 0000
      07741 0000
      07742 0000
      07743 0000
      07744 0000
      07745 0000
      07746 0000
      07747 0000
      07750 0000
      07751 0000
      07752 0000
      07753 0000
      07754 0000
      07755 0000
      07756 0000
      07757 0000
      07760 0000
      07761 0000
      07762 0000
      07763 0000
      07764 0000
      07765 0000
      07766 0000
      07767 0000
      07770 0000
      07771 0000
      07772 0000
      07773 0000
      07774 0000
      07775 0000
      07776 0000
      07777 0000
 2817             /////   $$$$$

      No detected errors

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 74
                                                                    Symbol Table

    1  A15    00015   CR7751 02443   DTBUFA 00034   DTSEXT 02562   FILPIF  0002 
    2  A16    00016   CRDISC 02416   DTCAP  00035   DTSJOB 02564   FILPRA  0006 
    3  A17    00017   CRF     0210   DTCHKA 00052   DTSR0  00620   FILPRO  0002 
    4  ASD     0040   CRFLD  02436   DTCOM  00026   DTSR1  00622   FILPWC  0003 
    5  AUTOST  4201   CRIOT  02426   DTDA1  01056   DTSR2  00626   FILRES  0007 
    6  AWAKEN 00050   CSCF    6133   DTDATA 01031   DTSR3  00636   FILSCT  0001 
    7  BCLR    0220   CTRLB   0002   DTDCA  01111   DTSR3A 01312   FILWC   0006 
    8  BILLNG  0007   CTRLC   0040   DTDCM0 01153   DTSR4  00676   FILWPT  0000 
    9  BL0    01526   CTRLS   4000   DTDCMP 01135   DTSR5  00704   FINF    6613 
   10  BL1    01535   CUF     6264   DTDEF0  0535   DTSR6  00743   FIP     0400 
   11  BL2    01541   D680    0000   DTDEVA 01466   DTSR7  00761   FIPBLK 07720 
   12  BLT0    5200   D689    0000   DTDGO  01120   DTSRCH 00635   FIPDEX  0004 
   13  BLTF1  01524   DATA1   2400   DTDHI  01106   DTST   00031   FIPJOB  0057 
   14  BLTF1A 00051   DATE    0035   DTDIOT 01105   DTSTIM 02565   FIPWC   0000 
   15  BRDMAX  0012   DATFLD  6211   DTDIR  00770   DTSTOP 00723   FRCMAX  0012 
   16  BRKINI  4000   DBELL   1000   DTDISK 01117   DTSTP1 02540   FRECNT  0040 
   17  C7774  02344   DC08A   0000   DTDLO  01112   DTSTP2 02556   FREE    0037 
   18  CBOOT  02400   DC08LO  0000   DTDMAR 01116   DTTIME 00032   FSWP    4000 
   19 ?CBOOTA  0000   DCLR    6742   DTDPAR 01114   DTUCA  00033   FXP1   02347 
   20  CDBUF  01716   DCSIZE  0000   DTDSF0  0541   DTWCP  00740   FXPT08 02345 
   21  CDCNT  01701   DDBBRK  0002   DTDSK   0527   DTXOR  00770   GETB    1400 
   22  CDCORE 01702   DDBINC  0005   DTDWC  01110   DTXORA 01314   GETDB0  1440 
   23  CDFLD  01727   DDBINP  0004   DTEND3 01017   DUPL    0200   GETJTB  7200 
   24  CDIOT  01732   DDBJN   0001   DTEND4 01022   DXOFF   3000   GETTB1 00057 
   25  CDJOB  01725   DDBOUC  0006   DTEND5 01023   DXON    2000   GETTBA 00150 
   26  CDL11  01720   DDBOUP  0007   DTEND6 01025   EAE     0000   GIR00   6200 
   27  CDL21  01704   DDBSTS  0000   DTERR  01021   ENDBUF  0400   HUNGDV  0006 
   28  CDR     0000   DDBTIM  0003   DTERRA 00053   ENDIOT  5333   INCLK1  7000 
   29  CDREAD 01726   DEBUG   0000   DTGETW 01313   ENTABL  5600   INCLK2  0645 
   30  CDTIMR 01703   DECHO   0020   DTGO   01200   ERPDEX  0000   INFLD   0020 
   31  CDUMP  00200   DEVCHK  7045   DTGO1  01212   ERPWC   0000   INIDEX  0010 
   32  CDVGAP  0003   DEVDMB  2673   DTGO2  01271   EXITF1  5135   INPUTS  0036 
   33  CDVIN   0003   DEVTBA 00022   DTGO3  01307   EXT     0211   INTRTN  5145 
   34  CDVOUT  0004   DEVTBE  2640   DTGOA  00054   F0TIMR 02261   INTS1  00122 
   35  CECI    6131   DEVTBL 02600   DTIME1 01324   F0TIMS 02263   INTS2  00123 
   36  CINT    6204   DFORC   0004   DTIME3 01353   F0TIMT 02300   IX3    00013 
   37  CJOB    0037   DFULL   0400   DTIME4 01363   F1BUF  00177   IX4    00014 
   38  CJOBDA 00020   DHALF   0010   DTIMER 01316   F1DTST 02512   JCOMBD  1000 
   39  CLK1    0033   DISFLD 02331   DTIMEX 01362   F1ECNT 00176   JOB     0062 
   40  CLK2    0034   DISPL1 02335   DTJOB  00027   F1OFFJ 00036   JOBA   00040 
   41  CLKTBL  2722   DISPLA 02323   DTL11  00601   F1RTN   0277   JOBACT  0015 
   42  CLOCKR  0062   DLAG    6743   DTL2   01003   F1SCH  00037   JOBCNT 00060 
   43  CLOS    0202   DLCA    6744   DTL20   0551   F1TCNT 00175   JOBDWT  0004 
   44  CONDBA  0030   DLDC    6746   DTL21  01004   FCB2    1570   JOBEAE  0014 
   45  CONDDB  0031   DMAINT  6747   DTLOAA 01315   FCB3    1710   JOBERR  0006 
   46  CONTTY  0001   DRST    6745   DTLOAD 01161   FCB4    2000   JOBF0   0020 
   47  COREA  01115   DSBUSY  0036   DTREMB 00030   FCE1    1400   JOBF1   0021 
   48  CORMEM  0070   DSI     1000   DTREV  01311   FCE2    1650   JOBF2   0022 
   49  CORSRC  1317   DSKERR  0005   DTRK1  01474   FCE3    2000   JOBF3   0023 
   50  CORTBA 00021   DSKP    6741   DTRK2  01517   FCE4    2200   JOBLNK  0007 
   51  CORTBL  7001   DSKSIZ  0100   DTRK3  01521   FILDA   0004   JOBMAX  0024 
   52  CPASS   0207   DSUTBL  3061   DTRKEN 01523   FILPAR  0003   JOBREG  0011 
   53  CPU     0002   DTALK   0001   DTRKER 01405   FILPCA  0004   JOBRTH  0017 
   54  CR6603 02437   DTAMIN  0002   DTRKHA 00055   FILPCT  0007   JOBRTM  0016 
   55  CR6605 02440   DTBLK  00023   DTRKHG  3671   FILPDA  0005   JOBSCH  0024 
   56  CR7000 02441   DTBLKP 00024   DTRKJA 00056   FILPDX  0001   JOBSRA  0005 
   57  CR7750 02442   DTBUF  00025   DTRKJB 01467   FILPFN  0000   JOBSTB  0002 

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 75
                                                                    Symbol Table

   58  JOBSTS  0000   K7701  00741   QK2    00546   READFI  3652   SKPTP   0275 
   59  JOBSWR  0010   K7740  01237   QK20   00321   REBOOT  4463   SLEEP   2357 
   60  JOBTAB 00061   K7770  00116   QK200  00551   RED     0212   SLEEPB 00065 
   61  JOBTBL 02675   K7774  00117   QK210  00552   REDO0   4172   SPEAK   4436 
   62  JOBWMK  0003   K7776  02566   QK212  00645   REL     0042   SPENT  00600 
   63  JSACC   0200   KE      6005   QK215  00646   RELOAD  3600   SPL     6102 
   64  JSBAT   0100   KL8     0017   QK40   00547   REN     0200   SPRNT  00613 
   65  JSDEL   0100   KSKIP   6001   QK400  00553   RETB    0600   STOMIN  0005 
   66  JSEREN  2000   L2EXIT  4051   QK50   00550   RF08    0000   SUF     6274 
   67  JSERR   0002   L2QTB   7010   QK600  00322   RFILE   6603   SWDEX   0005 
   68  JSF0    2000   L2SAP  00131   QK7174 00554   RINGIN  0304   SWPRER  0002 
   69  JSF1    1000   L2SF    0041   QM200  00555   RK05    0001   SWPWER  0003 
   70  JSF2    0400   L2SFP  01700   QM215  00647   RK05GO 01566   TC01    0001 
   71  JSF3    0200   L2SV0   0042   QM34   00324   RK8E    0000   TD8E    0000 
   72  JSHLT   0200   L2TIM3  2631   QM37   00325   RKBLKS 00041   TEMP0  00124 
   73  JSINER  0010   LCF     6662   QM4    00323   RKCMD  02152   TEMP1  00125 
   74  JSIOT   0100   LCP     6667   QM40   00326   RKCNT  00044   TEMP2  00126 
   75  JSIOTC  0040   LIBACT  0002   QMEMD  00240   RKCOM  00042   TEMP3  00127 
   76  JSLPT   0040   LIE     6665   QRADR   0033   RKCORE 00043   TEMP4  00130 
   77  JSPRIV  0400   LIN     0214   QRTRK   0032   RKDONE 02176   TICMIN  2260 
   78  JSPTP   0004   LLC     6664   QSKIP  00327   RKDRST 02145   TICSEC 02313 
   79  JSPTR   0010   LOCK    2000   QTOUT  00637   RKDV    6740   TICSPS  0024 
   80  JSRSEN  0020   LOUT    0215   QTX    00620   RKEND2 01636   TIMBIG 02314 
   81  JSRUN   4000   LPC     6666   QUANT   7772   RKEND3 01640   TIMCDR  2621 
   82  JSTEL   0020   LPT     0003   QUEUE0  1473   RKERR  01637   TIME3A 02317 
   83  JSTIME  4000   LSF     6661   QUEUE1 00062   RKERRA 00064   TIMEDT 02315 
   84  JSWAIT  0001   LSP     6665   QWBLK   0030   RKFLD  02067   TIMEJM 02316 
   85  K0002  00070   LSRP    6663   QWFLD   0031   RKGO   02070   TIMER0 02200 
   86  K0003  00071   M201   00120   QWS0    0020   RKGOA  01650   TIMER1 02212 
   87  K0004  00072   M2702  00121   QWS1    0021   RKHUNG 02312   TIMER2 02232 
   88  K0005  00073   MQREG   0001   QWS2    0022   RKJOB  00045   TIMER3 02260 
   89  K0006  00074   NFSEGS  5533   QWS3    0023   RKL11  02000   TIMER4 02202 
   90  K0007  00075   NOHOLD  0140   QWS4    0024   RKL2   02066   TIMET1  0130 
   91  K0010  00076   NOTRUN  1000   QWS5    0025   RKL20   3676   TIMET2  0126 
   92  K0014  00742   NULINE  0017   QWS6    0026   RKL21  01615   TIMIT  02320 
   93  K0020  00077   OPEN    6601   QWS7    0027   RKNXT  02163   TIMKFX 02322 
   94  K0030  00010   OUTDIF  2200   QXFLD  00330   RKREDO 01565   TIMOUT 02310 
   95  K0037  00100   OUTIOT  2340   QXTBK  00331   RKSECT 00046   TIMTB1 02321 
   96  K0040  00101   OUTREG  0200   RBOOT1 02503   RKSR1  02021   TLKMAX  0012 
   97  K0070  00102   OVERL1  5764   RCNI    6637   RKSR2  02024   TRUKBD  0012 
   98  K0200  00103   OVERLA  2364   RCNO    6635   RKSR4  02031   TS8DEX  0030 
   99  K0204  00104   OVRLA1  0572   RCRA    6632   RKSR5  02055   TSKIP   6001 
  100  K0214  00105   PHONES  0000   RCRB    6634   RKSRE  02033   TTCHAR  0032 
  101  K0377  00106   PLT     0000   RCRC    6636   RKTIME 00047   TTYEVE  0001 
  102  K0400  00107   PRGTBL  2774   RCRD    6674   RS08    0001   TTYTBL  2747 
  103  K0500  00011   PRINT0  1203   RCSD    6671   RTABLE  6160   UDF1   00132 
  104  K0600  00110   PROT    0204   RCSE    6672   SATSIZ  0530   UDFP   00066 
  105  K0614  00012   PT08    0000   RCSF    6631   SCHED0  3640   UDTDDB 01440 
  106  K1000  00111   PUNCH   0001   RCSI    6675   SI      0200   UDTXAD 01433 
  107  K1012  02065   QADVB  00302   RCTF    6677   SIBRKM  0204   UPEEK1 02445 
  108  K6201  00112   QAX0    0010   RDCA   00545   SICLR   4400   UPEEK2 02471 
  109  K6202  00157   QCORM  00314   RDENT  00515   SICOM   0100   UPEEKC  0125 
  110  K6203  00135   QDADR  00315   RDHELP 00650   SIDATA  0020   UPEEKP  0126 
  111  K7000  00113   QDSCD  00263   RDISC   4435   SIDEX   0000   UPTIM1 00174 
  112  K7001  01375   QDTRK  00316   RDWC   00544   SINT    6254   UPTIM2 00173 
  113  K7400  00114   QF1    00317   RDX1   00521   SIWC    0000   URK05  01462 
  114  K7700  00115   QK10   00320   READER  0001   SKPTBL  0226   USRLOK 01664 

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 76
                                                                    Symbol Table

  115  UTABLE  6040 
  116  UUCDR  01735 
  117  UUCDRB 01767 
  118  UUDF    0172 
  119  UUDTRK 01415 
  120  UUOERF  0001 
  121  UUOERR  4404 
  122  UUOEX1  0336 
  123  VERNUM  0031 
  124  WAIT2  00067 
  125  WAITF1  5165 
  126  WAITS2 01651 
  127  WAKEUP 01544 
  128  WFILE   6605 
  129  WINBAS 07730 
  130  WRDSEG  0400 
  131  WSCHED  3006 
  132  WT01   00504 
  133  WTAPE   4434 
  134  WTCA   00513 
  135  WTENT  00400 
  136  WTHELP 00665 
  137  WTOPR  00464 
  138  WTSELC 00507 
  139  WTSMS  00702 
  140  WTWC   00512 
  141  WTX1   00402 
  142  WTX3   00420 
  143  WTX4   00422 
  144  WTX5   00460 
  145  WX     00514 
  146  XOPEN   6606 
