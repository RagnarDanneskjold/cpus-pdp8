
      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 1


    1             /TSS-8.25 CONFIGURATION FOR UWM
    2             /CONFIGURATION PARAMETERS FOR THE TSS/8 MONITOR
    3             /COPYRIGHT 1971 - DIGITAL EQUIPMENT CORPORATION; MAYNARD, MASS.
    4             /
    5             /TSS-8 SYSTEM PARAMETERS AND OPTIONS.  FOR EACH PARAMETER,
    6             /THE COMMENT INIDCATES THE POSSIBLE RESPONSES.
    7             
    8       0000  DEBUG=  0       /SYSTEM DEBUGGING CONTROL:
    9                             / =0, PRODUCTION SYSTEM (AUTO-RESTARTS & ERROR FIXUP)
   10                             / =1, SYSTEM RELIABILITY (JUST AUTO-RESTARTS)
   11                             / =2, SYSTEM DEBUGGING (SYSTEM HALTS ON ERROR)
   12                             / =3, FULL CHECKING (THOROUGH 'RETB' CHECK)
   13                             /BITS 0-8, AVAILABLE FOR LOCAL SWITCHES:
   14                             / 4000 - ENABLE MQ MEMORY DISPLAY (IN TIMER)
   15             
   16       0002  CPU=    2       /0 IF CPU IS PDP-8/I; 1 IF PDP-8
   17                             / 2 IF PDP-8/E; 3 IF PDP-12; 4 IF PDP-8/A
   18             
   19       0000  EAE=    0       /20 IF CPU INCLUDES EAE; 0 IF NOT
   20             
   21       0070  CORMEM= 70      /HIGHEST DATA FIELD SELECT; FOR 12K SYS,
   22                             / RESPOND 20; FOR 16K, RESPOND 30; FOR 32K, 70
   23             
   24       0000  D680=   0       /2 IF TTY INTERFACING IS 680 OR DC08;
   25                             / 0 IF TTY INTERFACING IS PT08'S
   26             
   27       0000  PHONES= 0       /1 IF 680 OR DC08 INCLUDES 689 OR DC08F;
   28                             / 0 IF IT DOESN'T OR TTY INTERFACING IS PT08'S
   29             
   30       0000  RF08=   0       /40 IF SYSTEM DISC IS DF32; 0 IF RF08
   31             
   32       0001  RS08=   1       /# OF DISCS IN SYSTEM, WHETHER RF08 OR DF32
   33             
   34       0001  RK05=   1       /# OF NONSYSTEM RK05 DRIVES
   35             
   36       0000  RK8E=   0       /# OF RK8E DRIVES; ONLY FIRST IS USED FOR SYSTEM
   37                             / THE REMAINDER ARE TREATED AS PERIPHERALS
   38             
   39       0001  READER= 1       /1 IF SYSTEM INCLUDES HIGH-SPEED READER; 0 IF NOT
   40             
   41       0001  PUNCH=  1       /1 IF SYS HAS HSP, 0 IF NOT
   42             
   43       0001  TC01=   1       /1 IF SYS HAS DECTAPES; 0 IF NOT
   44             
   45             
   46       0000  TD8E=   0       /1 IF TD8E DECTAPES AVAILABLE FOR LOADING & DUMPING
   47                             / 0 IF NOT; NOTE THAT TD8E TAPES CANNOT BE USED UNDER
   48                             / TSS/8, THEY REQUIRE CONTINUOUS CPU ATTENTION
   49             
   50       0003  LPT=    3       /0 IF NO PRINTER ON SYS; 1 IF LP08; 2 IF LS8E; 3 IF NONSTANDARD
   51             
   52       0000  CDR=    0       /NO SYS CAN HAVE CARD READER
   53             /
   54             /MONITOR OPTIONS 
   55             /FILL IN THE FOLLOWING LINES TO INDICATE THE 
   56             /MONITOR CAPACITY FOR THIS SYSTEM
   57             

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 2


   58                     DECIMAL
   59       0024  JOBMAX= 20      /NUMBER OF SIMULTANEOUS USERS (.LE. 20)
   60             
   61       0001  CONTTY= 1       / (ALWAYS HAVE A CONSOLE)
   62             
   63       0000  DC08A=  0       /NUMBER OF TERMINALS VIA DC08A (PDP-8/I ONLY, 19 MAX)
   64             
   65       0000  DC08LO= 0       /LOWEST LINE-NUMBER USED ON DC08A
   66             
   67       0000  PT08=   0       /NUMBER OF TERMINALS VIA PT08 (PDP-8 & PDP-8/I ONLY)
   68             
   69       0017  KL8=    15      /NUMBER OF TERMINALS VIA KL8E (PDP-8/E ONLY, 19 MAX)
   70             
   71       0003  CDVIN=  3       /NONSTANDARD INPUT CHARACTER DEVICES (HIGHEST USED)
   72                             / 1 = R2; 2 = X0; 3 = X1; 4 = X2; 5 = X3
   73             
   74       0004  CDVOUT= 4       /NONSTANDARD OUTPUT CHARACTER DEVICES (HIGHEST USED)
   75                             / 1 = P2; 2 = L2; 3 = Y0; 4 = Y1; 5 = Y2; 6 = Y3
   76             
   77       0012  TRUKBD= 10      /NUMBER OF ACTUAL KEYBOARDS ON SYSTEM (NOT COUNTING
   78                             / CONSOLE TTY). THIS MUST BE .LE. NULINE; NULINE
   79                             / MAY INCLUDE DUMMY TERMINALS, THIS MAY NOT.
   80             
   81       0012  FRCMAX= TRUKBD  /THE HIGHEST KEYBOARD # A '00XX' ACCT # MAY FORCE
   82                             / NOTE THAT A '000X' ACCOUNT MAY FORCE UP TO 'NULINE'
   83             
   84       0012  TLKMAX= TRUKBD  /THE HIGHEST KEYBOARD # WHICH MAY BE 'TALK'ED TO
   85             
   86       0012  BRDMAX= TRUKBD  /THE HIGHEST KEYBOARD WHICH WILL RECEIVE BROADCASTS
   87                     OCTAL
   88             
   89       0002  DTAMIN= 2       /THE FIRST DECTAPE DRIVE WHICH WILL BE ASSIGNED
   90                             / FOR 'ASSIGN D' COMMAND; NORMALLY =0, BUT MAY
   91                             / VARY FOR SLIGHTLY RESTRICTED DRIVE USE.
   92             
   93       0007  BILLNG= 7       /THE ACCOUNT NUMBER OF THE BILLING SYSTEM
   94                             / 0, IF NO BILLING SYSTEM USED
   95             /
   96             /SYSTEM CONSTANTS
   97             
   98       0020  INFLD=  20      /FIELD SELECT THAT 'INIT' SHOULD BE BOOTED INTO
   99                             / MAKING IT 20 AVOIDS PROBLEMS SHOULD A
  100                             / FIELD NEED REPAIR & SYSTEM IS RUN ON 12K
  101       0001  TTYEVEN=1       /1 INDICATES PARITY TTY MAY BE USED WITH SYS
  102                             / 0 ALLOWS ONLY DEC MODIFIED TTYS
  103             
  104             ///     END OF SYSTEM CONFIGURATION PARAMETERS

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 3


  105             
  106             /PARAMETERS - UWM VERSION 25
  107             /
  108             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
  109             /                               MAYNARD, MASSACHUSETTS
  110             /
  111             /EXTENSIVELY MODIFIED AND CORRECTED BY
  112             /       RICHARD BARTLEIN, 1974, 1976
  113             /       UNIVERSITY OF WISCONSIN - MILWAUKEE
  114             /
  115       0031  VERNUM= 31      /SYSTEM VERSION NUMBER
  116             /
  117       0000          IFZERO DC08A    <D689=0>
  118                     IFNZRO DC08A    <
  119                             IFNZRO PHONES   <D689=4>
  120                             IFZERO PHONES   <D689=0>>
  121             
  122       0017  NULINE= DC08A+PT08+KL8  /NUMBER OF TERMINALS LESS CONSOLE
  123       37777777772  QUANT=  -6              /NUMBER OF SYSTEM TICKS PER TIME SLICE
  124       0000  PLT=    0
  125       0005  STOMIN= 5               /MINIMUM # FREE STORAGE BLOCKS FOR NEW JOB
  126       0005  SWDEX=  5               /DISC TRACK OF FIRST SWAP AREA
  127       0024  TICSPS= 24              /NUMBER OF SYSTEM TICKS PER SECOND
  128             
  129                     IFZERO RK8E <
  130                     IFZERO RF08-40 <
  131             DSKSIZ= RS08^10
  132                     >
  133                     IFZERO RF08 <
  134       0100  DSKSIZ= RS08^100        /# OF 4K DISC TRACKS
  135                     >>
  136                     IFNZRO RK8E <
  137             DSKSIZ= 400             /# OF 4K DISC TRACKS
  138                     >
  139       0062  CLOCKR= TICSPS%2+1750%TICSPS    /MILLISECONDS PER SYSTEM TICK
  140       0645  INCLK2= 0645            /1,728,000 TICKS PER DAY
  141       17000  INCLK1= 600^TICSPS      / (LOW 12 BITS OF 86,400 SECS/DAY * TICKS/SEC)
  142       2260  TICMIN= 74^TICSPS       /SYSTEM TICKS PER MINUTE
  143             
  144       0010  INIDEX= 10      /INIT DISC EXTENSION
  145       0030  TS8DEX= 30      /FIELD 0 DISC EXTENSION*2^3
  146       0000  ERPDEX= 0       /ERP DISC EXTENSION*4
  147       0000  ERPWC=  0       /ERP WORD COUNT
  148       0004  FIPDEX= 4       /FIP DISC EXTENSION*4
  149       0000  FIPWC=  0       /FIP WORD COUNT
  150       0000  SIDEX=  ERPDEX  /SI DISC EXTENSION*4
  151       0000  SIWC=   ERPWC   /SI WORD COUNT
  152       0002  LIBACT= 2       /LIBRARY ACCOUNT #
  153       4000  BRKINI= 4000    /INITIAL USER BREAK MASK
  154       0400  WRDSEG= 400     /#WORDS PER DISC SEGMENT
  155             
  156             /IOT DEFINITIONS
  157             
  158                     IFZERO D680-2 <
  159             TTINCR= 6401    /INCREMENT LINE REGISTER
  160             TTI=    6402    /TELETYPE INPUT COMMAND
  161             TTO=    6404    /TELETYPE OUTPUT COMMAND

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 4


  162             TTCL=   6411    /CLEAR LINE REGISTER
  163             TTSL=   6412    /SET LINE REGISTER, CLEAR AC
  164             TTRL=   6414    /READ LINE REGISTER
  165             T8SKP=  6421    /SKIP ON CLOCK FLAG
  166             T8OFF=  6422    /TURN CLOCK OFF
  167             TT8ON=  6424    /TURN CLOCK ON
  168             TTRINC= 6461    /INCREMENT THE R REG.
  169             TT8CLR= 6473    /CLEAR AND LOAD THE R REG.
  170                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 5


  171             /EXTENDED MEMORY
  172             
  173       6201  CDF=    6201    /CHANGE TO DATA FIELD 0
  174       6202  CIF=    6202    /CHANGE TO INSTRUCTION FIELD 0
  175       6203  CDI=    6203    /CHANGE DATA & INSTRUCTION FIELDS
  176       6204  CINT=   6204    /CLEAR USER IOT
  177             
  178       6214  RDF=    6214    /READ DATA FIELD
  179       6224  RIF=    6224    /READ INSTRUCTION FIELD
  180       6234  RIB=    6234    /READ INTERRUPT BUFFER
  181       6244  RMF=    6244    /RESTORE MEMORY FIELD
  182       6254  SINT=   6254    /SKIP ON USER IOT
  183       6264  CUF=    6264    /USER FLAG OFF
  184       6274  SUF=    6274    /USER FLAG ON
  185             
  186             /EAE
  187                     IFZERO EAE-20 <
  188             MUY=    7405    /MULTIPLY
  189             DVI=    7407    /DIVIDE
  190             NMI=    7411    /NORMALIZE
  191             SHL=    7413    /SHIFT ARITHMETIC LEFT
  192             ASR=    7415    /ARITHMETIC SHIFT RIGHT
  193             LSR=    7417    /LOGICAL SHIFT RIGHT
  194             MQL=    7421    /LOAD MQ
  195             SCL=    7403    /STEP COUNTER LOAD FROM MEMORY
  196             SCA=    7441    /STEP COUNTER TO AC
  197             MQA=    7501    /MQ TO AC
  198             
  199                     IFZERO CPU-2 <
  200             DPSZ=   7451    /SKIP IF AC=MQ=0 (MODE B ONLY)
  201             SAM=    7453    /SUBTRACT AC FROM MQ
  202             SKB=    7671    /SKIP IF MODE B (MESSES UP AC AND MQ)
  203             SWBA=   7447    /CHANGE MODE TO A
  204             SWAB=   7431    /CHANGE MODE TO B (ALSO DOES MQL)
  205             ACS=    7403    /AC(7:11) TO SC; AC CLEARED 
  206                     >>
  207                     IFZERO CPU-2 <
  208       6003  SRQ=    6003    /SKIP ON INTERRUPT REQUEST
  209       6004  GTF=    6004    /LINK TO AC0, GT FLAG TO AC1
  210       6005  RTF=    6005    /AC0 TO LINK, AC1 TO GT FLAG
  211       6006  SGT=    6006    /SKIP ON GT FLAG
  212       6007  CAF=    6007    /CLEAR ALL FLAGS
  213       6102  SPL=    6102    /SKIP ON POWER LOW
  214                     >
  215             
  216                     IFZERO CPU-4 <
  217             SPL=    6102    /SKIP ON POWER LOW
  218             CAL=    6133    /CLEAR POWER LOW FLAG
  219                     >
  220             
  221             /LINE PRINTER IOTS
  222       6661  LSF=    6661    /SKIP ON CHAR FLAG SET
  223       6662  LCF=    6662    /CLEAR CHAR FLAG
  224       6663  LSRP=   6663    /SKIP ON NOT READY OR ON ERROR
  225       6664  LLC=    6664    /TRANSMIT CHAR TO PRINTER
  226       6665  LIE=    6665    /AC11 TO INTERRUPT ENABLE (LS08/LS8E)
  227       6665  LSP=    6665    /SET PROGRAM INTERRUPT (LP08/LE8)

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 6


  228       6666  LPC=    6666    /TRANSMIT CHAR & CLEAR FLAG
  229       6667  LCP=    6667    /CLEAR PROGRAM INTERRUPT

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 7


  230             /CTY
  231             
  232       6044  TPC=    6044    /LOAD TELEPRINTER AND PRINT
  233             
  234             /DISC (DF32)
  235             
  236       6601  DCMA=   6601    /CLEAR
  237       6603  DMAR=   6603    /READ
  238       6605  DMAW=   6605    /WRITE
  239       6611  DCEA=   6611    /CLEAR DISC EXTENDED ADDRESS
  240       6615  DEAL=   6615    /LOAD EXTENDED ADDRESS
  241       6621  DFSE=   6621    /SKIP ON ERROR
  242       6622  DFSC=   6622    /SKIP ON COMPLETION
  243       6616  DEAC=   6616    /READ EXTENDED ADDRESS
  244             
  245             /DISC (RF08)
  246             
  247       6615  DIML=   6615
  248       6616  DIMA=   6616
  249       6643  DXAL=   6643
  250             
  251             /RK05 DISC IOTS
  252       6740          IFZERO PHONES   <RKDV=6740>
  253                     IFNZRO PHONES   <RKDV=6750>
  254       6741  DSKP=   RKDV+1  /SKIP IF DONE OR ERROR
  255       6742  DCLR=   RKDV+2  /CLEAR THE CONTROLLER
  256       6743  DLAG=   RKDV+3  /LOAD DISC ADDRESS & GO
  257       6744  DLCA=   RKDV+4  /LOAD CURRENT CORE ADDRESS
  258       6745  DRST=   RKDV+5  /READ THE STATUS
  259       6746  DLDC=   RKDV+6  /LOAD THE COMMAND REGISTER
  260       6747  DMAINT= RKDV+7  /MAINTENANCE ONLY
  261             
  262             /
  263             /TC08 DECTAPE CONTROLLER IOTS
  264       6761  DTRA=   6761    /READ A-REGISTER
  265       6762  DTCA=   6762    /CLEAR A-REGISTER
  266       6764  DTXA=   6764    /XOR INTO A-REGISTER
  267       6771  DTSF=   6771    /SKIP ON DECTAPE FLAG
  268       6772  DTRB=   6772    /READ STATUS-REGISTER (B)
  269       6774  DTLB=   6774    /LOAD STATUS-REGISTER (B)
  270             
  271             /CARD READER IOTS
  272       6631  RCSF=   6631    /SKIP ON DATA READY
  273       6632  RCRA=   6632    /READ ALPHANUMERIC
  274       6634  RCRB=   6634    /READ BINARY
  275       6635  RCNO=   6635    /READ CONDITIONS OUT TO CARD READER     (8/E ONLY)
  276       6636  RCRC=   6636    /READ COMPRESSED                        (8/E ONLY)
  277       6637  RCNI=   6637    /READ CONDITION IN FROM CARD READER     (8/E ONLY)
  278       6671  RCSD=   6671    /SKIP ON CARD DONE FLAG
  279       6672  RCSE=   6672    /SELECT CARD READER AND SKIP IF READY
  280       6674  RCRD=   6674    /CLEAR CARD DONE FLAG
  281       6675  RCSI=   6675    /SKIP IF INTERRUPT BEING GENERATED      (8/E ONLY)
  282       6677  RCTF=   6677    /CLEAR TRANSITION FLAGS                 (8/E ONLY)
  283             
  284                     IFZERO CPU <
  285             /KW8I           REAL TIME CLOCK
  286             

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 8


  287             CECI=   6137    /CLEAR AND ENABLE CLOCK AND INTERRUPT
  288             CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  289                     >
  290             
  291                     IFZERO CPU-1 <
  292             CECI=   6315    /CLOCK ENABLE
  293             CSCF=   6301    /SKIP ON CLOCK FLAG
  294             CCF=    6302    /CLEAR CLOCK FLAG, CLEAR ENABLE AND CLEAR BUFFER
  295             CLB=    6304    /LOAD BUFFER FROM AC
  296                     >
  297             
  298                     IFZERO CPU-2 <
  299       6131  CECI=   6131    /CLOCK ENABLE
  300       6133  CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  301                     >
  302             
  303                     IFZERO CPU-3 <
  304             CLAB=   6133
  305             CLLR=   6132
  306             CLEN=   6134
  307             CLSA=   6135
  308             CLSK=   6131
  309             
  310             MTPF=   6113
  311             MINT=   6115
  312             MTON=   6117
  313             MKTF=   6123
  314             MINS=   6125
  315             MTRS=   6127
  316             
  317             MKSF=   6111
  318             MKCC=   6112
  319             MKRS=   6114
  320             MKRB=   6116
  321             
  322             MTSF=   6121
  323             MTCF=   6122
  324             MTPC=   6124
  325             MTLS=   6126
  326                     >
  327             
  328                     IFZERO CPU-4 <
  329             CLLE=   6135    /AC11 TO CLOCK INTERRUPT ENABLE
  330             CLCL=   6136    /CLEAR CLOCK FLAG
  331             CLSK=   6137    /SKIP ON CLOCK FLAG
  332                     >
  333             
  334                     IFNZRO DC08A <
  335             /689AG
  336             
  337             SRF=    6701    /SKIP IF RING FLAG
  338             SCF=    6711    /SKIP IF CARRIER FLAG
  339             DFCRF=  6742    /CLEAR RING FLAG
  340             CTG=    6721    /CLEAR GROUP COUNTER
  341             RRS=    6702    /READ RING STATUS
  342             ITG=    6731    /INCREMENT GROUP COUNTER
  343             STR=    6722    /SET TERMINAL READY

      /TSS-8.25 CONFIGURATION FOR UWM                                     Page 9


  344             EDF=    6704    /ENABLE DATAPHONE FEATURES
  345             DDF=    6714    /DISABLE DATAPHONE FEATURES
  346             CTR=    6724    /CLEAR TERMINAL FLAG
  347             CCF=    6741    /CLEAR CARRIER FLAG
  348             RCS=    6712    /READ CARRIER STATUS
  349                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 10


  350             /FIP IOTS (AS USED INTERNALLY)
  351             
  352       0040  ASD=    0040    /ASSIGN DEVICE
  353       0042  REL=    0042    /RELEASE DEVICE
  354       0200  REN=    0200    /RENAME FILE
  355       6601  OPEN=   6601    /OPEN FILE
  356       0202  CLOS=   0202    /CLOSE
  357       6603  RFILE=  6603    /READ FILE
  358       0204  PROT=   0204    /PROTECT
  359       6605  WFILE=  6605    /WRITE FILE
  360       6606  XOPEN=  6606    /OPEN FILE WITH EXCLUSIVE USE
  361       0207  CPASS=  0207    /CHANGE A USER'S PASSWORD
  362       0210  CRF=    0210    /CREATE
  363       0211  EXT=    0211    /EXTEND
  364       0212  RED=    0212    /REDUCE
  365       6613  FINF=   6613    /FILE INFORMATION
  366       0214  LIN=    0214    /LOGIN
  367       0215  LOUT=   0215    /LOGOUT
  368       0220  BCLR=   0220    /CLEAR MFD BILLING INFORMATION
  369             
  370             
  371             /DEVICE DATA BLOCK
  372             
  373       0000  DDBSTS= 0               /WORD 1.  STATUS AND UNIT NUMBER
  374       2000          DXON=   2000    /XOFF SENT FLAG - SEND 'XON' WHEN NEEDED
  375       1000          DSI=    1000    /DESTINATION IS S.I. FLAG
  376       0400          DFULL=  400     /INDICATES BUFFER IS FULL
  377       0200          DUPL=   200     /CONSOLE IN DUPLEX MODE
  378       0100          SICOM=  100     /COMMAND WAITING
  379       0040          CTRLC=  40      /USER TYPED CTRL/C
  380       0020          DECHO=  20      /CAUSE 'SI' TO ECHO INPUT BUFFER
  381       0010          DHALF=  10      /KEYBOARD IS HALF-DUPLEX (HARDWARE)
  382       0004          DFORC=  4       /KEYBOARD WAS JUST FORCED
  383       0002          CTRLB=  2       /COMMAND PRECEDED BY EXPLICIT CTRL/B
  384             
  385             /OUTPUT SIDE:
  386             
  387       4000          CTRLS=  4000    /CTRL-S ENTERED (OUTPUT FROZEN)
  388       3000          DXOFF=  3000    /JAM 'XOFF' INTO OUTPUT
  389       1000          DBELL=  1000    /JAM 'BELL' INTO OUTPUT
  390       0001          DTALK=  1       /LOCK KEYBOARD AGAINST TALKS
  391             
  392             /OUTPUT REGISTER:
  393             
  394             /       4000 - BUFFER CHECKING REQUESTED
  395             /       2000 - DEVICE INTERRUPT EXPECTED
  396             /       1000 - 5-SECOND TIMEOUT FLAG
  397             /       400-2 - NEXT BUFFERED CHARACTER
  398             /       0001 - BUFFERED CHARACTER WAITING
  399             
  400       0001  DDBJN=  1       /WORD 2. JOB NUMBER IN 7-11; DEVICE NUMBER IN 0-6
  401       0002  DDBBRK= 2       /BREAK MASK
  402       0204  SIBRKM= 204     /SI BREAK MASK
  403       0003  DDBTIM= 3       /TIME THAT DEVICE WAS ASSIGNED
  404       0004  DDBINP= 4       /BUFFER FILL POINTER
  405       0005  DDBINC= 5       /BUFFER FILL COUNT
  406       0006  DDBOUC= 6       /BUFFER EMPTY COUNT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 11


  407       0007  DDBOUP= 7       /BUFFER EMPTY POINTER
  408             
  409             /FILE CONTROL BLOCK - POINTED TO BY JOBFX, X=0,1,2,3
  410             
  411       0000  FILWPT= 0       /POINTER TO FILE RETRIEVAL WINDOW
  412       0001  FILSCT= 1       /SEGMENT NUMBER OF FIRST WINDOW ENTRY
  413       0002  FILPRO= 2       /FILE READ-ONLY (BIT 9), FILE PRIVILEGED (BIT 11)
  414       0003  FILPAR= 3       /POINTER TO RFILE OR WFILE PARAMETER BLOCK
  415       0004  FILDA=  4       /DISC ADDRESS OF RFILE OR WFILE
  416       0006  FILWC=  6       /-WORD COUNT OF RFILE OR WFILE
  417       0007  FILRES= 7       /POINTER TO FILPIF IN USER AREA
  418             
  419             /FILE  RETRIEVAL WINDOW
  420             /WORD 0:        UFD LINK TO NEXT GROUP OF 7 SEGMENT POINTERS
  421             /WORDS 1-7:     SEVEN SEGMENT ADDRESSES
  422             
  423             /RFILE OR WFILE PARAMETER BLOCK - POINTED AT BY FILPAR
  424             
  425       0000  FILPFN= 0       /FUNCTION: 0603 OR 0605
  426       0001  FILPDX= 1       /DISC EXTENSION
  427       0002  FILPIF= 2       /INTERNAL FILE # (BITS 10-11) AND FIELD # (BITS 7-9)
  428       0003  FILPWC= 3       /-WORD COUNT FOR THIS TRANSFER
  429       0004  FILPCA= 4       /CORE ADDRESS FOR THIS TRANSFER
  430       0005  FILPDA= 5       /DISC ADDRESS
  431       0006  FILPRA= 6       /EXEC RETURN ADDRESS FOR THIS TRANSFER
  432       0007  FILPCT= 7       /POINTER TO FILE CONTROL BLOCK

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 12


  433             /JOB DATA AREA
  434             
  435       0000  JOBSTS= 0               /STATUS
  436                     /STR0
  437       4000          JSRUN=  4000    /RUN BIT
  438       2000          JSEREN= 2000    /USER ERROR ENABLE
  439       1000          JCOMBD= 1000    /LAST TIME THE JOB RAN AS COMPUTE BOUND
  440       0400          JSPRIV= 400     /LIBRARY PROGRAM (HAS PRIVILEGES)
  441       0200          JSHLT=  200     /PROGRAM EXECUTED 'HLT'
  442       0100          JSIOT=  100     /NON-RESIDENT IOT
  443       0040          JSIOTC= 40      /COPY IOT RESULT TO USER
  444       0020          JSRSEN= 20      /PROGRAMMATIC CTRL/C ENABLE
  445       0010          JSINER= 10      /INHIBIT SI ERROR UNTIL NEXT COMMAND
  446             
  447       0200          JSACC=  200
  448       0100          JSBAT=  100     /BATCH-MODE
  449             
  450                     /BITS 9-11 ARE SYSTEM ERROR CODE
  451             
  452       0001          UUOERF= 1       /IOT ERROR
  453       0002          SWPRER= 2       /SWAP READ ERROR
  454       0003          SWPWER= 3       /SWAP WRITE ERROR
  455       0005          DSKERR= 5       /DISC ERROR
  456       0006          HUNGDV= 6       /HUNG DEVICE
  457             
  458                     /STR1
  459       4000          JSTIME= 4000    /TIME IS UP
  460       2000          JSF0=   2000    /FILE 0 NOT BUSY
  461       1000          JSF1=   1000    /FILE 1 IS NOT BUSY
  462       0400          JSF2=   400     /FILE 2 IS NOT BUSY
  463       0200          JSF3=   200     /FILE 3 IS NOT BUSY
  464       0100          JSDEL=  100     /DELIMITER SEEN
  465       0040          JSLPT=  40      /LPT BUFFER IN USE BUT NOT FULL
  466       0020          JSTEL=  20      /OUTPUT BUFFER NOT FULL
  467       0010          JSPTR=  10      /CHARACTER IN READER BUFFER
  468       0004          JSPTP=  4       /PUNCH BUFFER IS NOT FULL
  469       0002          JSERR=  2       /SYSTEM ERROR DETECTED
  470       0001          JSWAIT= 1       /JOB NOT IN WAIT STATE
  471             
  472       0002  JOBSTB= 2               /DEVICE STATUS REGISTER (RK05, DECTAPE, & CARD READER)
  473       0003  JOBWMK= JOBSTB+1        /WAIT MASK
  474       0004  JOBDWT= JOBWMK+1        /JOB DEVICE-WAIT
  475       0005  JOBSRA= JOBDWT+1        /JOB RESTART ADDRESS
  476       0006  JOBERR= JOBSRA+1        /JOB ERROR RESTART ADDRESS
  477       0007  JOBLNK= JOBERR+1        /IOT LINKAGE
  478       0010  JOBSWR= JOBLNK+1        /SWITCH REGISTER
  479       0011  JOBREG= JOBSWR+1        /PC, AC, & LINK (W/MODE, GT, & SC)
  480       0014  JOBEAE= JOBREG+3        /MQ REGISTER
  481       0015  JOBACT= JOBEAE+1        /USER'S ACCOUNT #
  482       0016  JOBRTM= JOBACT+1        /LOW ORDER RUN TIME
  483       0017  JOBRTH= JOBRTM+1        /HIGH ORDER RUN TIME
  484       0020  JOBF0=  JOBRTH+1        /POINTER TO FILE 0 CONTROL
  485       0021  JOBF1=  JOBF0+1         /POINTER TO FILE 1 CONTROL
  486       0022  JOBF2=  JOBF1+1         /POINTER TO FILE 2 CONTROL
  487       0023  JOBF3=  JOBF2+1         /POINTER TO FILE 3 CONTROL
  488       0024  JOBSCH= JOBF3+1         /SCHEDULING CONTROL-WORD
  489             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 13


  490             
  491             /CORE TABLE CONTROL FLAGS
  492             
  493       4000  FSWP=   4000    /SWAP REQUEST
  494       2000  LOCK=   2000    /LOCK IN CORE
  495       1000  NOTRUN= 1000    /HAS NOT BEEN SCHEDULED TO RUN
  496       0400  FIP=    400     /FILE PHANTOM (NOTE: FIP HAS BEEN ASSUMED EQUAL TO WRDSEG)
  497       0200  SI=     200     /SYSTEM COMMAND INTERPRETER PHANTOM
  498       0140  NOHOLD= 140     /DISC COMPLETION PRIORITY (SKIPPED EVERY 4 TRANSFERS)
  499       0037  CJOB=   37      /MASK FOR JOB NUMBER

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 14


  500             /FIP TABLE DEFINITIONS
  501             
  502       0530  SATSIZ= 530
  503       5600  ENTABL= 5600
  504       6040  UTABLE= JOBMAX^10+ENTABL
  505       6160  RTABLE= JOBMAX^4+UTABLE         /*** CHANGE TO ^10 LATER ***
  506             
  507             /TS8 TABLE DEFINITIONS
  508             
  509       7001  CORTBL= 7001
  510       7010  L2QTB=  CORTBL+7
  511             
  512             /TS8II TABLE DEFINITIONS
  513       0003          IFNZRO CDVIN    <CDVGAP=3>      /ROOM FOR HSR, ?, AND CDR
  514                     IFZERO CDVIN    <CDVGAP=0>
  515       0000          IFZERO DC08A    <DCSIZE=0>
  516                     IFNZRO DC08A    <DCSIZE=400>    /DC08A & 689AG CODE
  517             
  518       0200  OUTREG= 200             /ACTIVE OUTPUT REGISTERS
  519       0226  SKPTBL= OUTREG+NULINE+CONTTY+CDVOUT+2   /START OF IOT SKIP TABLE
  520       0275  SKPTP=  SKPTBL+NULINE+NULINE+CONTTY+CONTTY+CDVIN+CDVGAP+1
  521       0304  RINGIN= SKPTP+CDVOUT+3  /INPUT RING BUFFER
  522       0400  ENDBUF= OUTREG+200      /END OF KEYBOARD INPUT BUFFER
  523       0036  INPUTS= ENDBUF-RINGIN%2 /NUMBER OF POSSIBLE RING-BUFFER ENTRIES
  524       6211  DATFLD= CDF 10          /DATA FIELD SELECT
  525             
  526       2400  DATA1=  2400+DCSIZE     /START OF DATA AREA (ALMOST)
  527       2600  DEVTBL= DATA1+200       /ACTUAL START OF DATA AREA
  528       2640  DEVTBE= DEVTBL+NULINE+NULINE+2
  529       2675  JOBTBL= DEVTBE+35
  530       2722  CLKTBL= JOBTBL+JOBMAX+1
  531       2747  TTYTBL= CLKTBL+JOBMAX+1
  532       2774  PRGTBL= TTYTBL+JOBMAX+1
  533       3061  DSUTBL= PRGTBL+JOBMAX+JOBMAX+JOBMAX-7
  534       2200  OUTDIF= -OUTREG^2+DEVTBL        /FOR LINKING BETWEEN OUTREG & DEVTBL
  535             
  536             IFZERO EAE-20   <MQREG=1>
  537       0001  IFZERO EAE      <IFZERO CPU-2 <MQREG=1>
  538                              IFNZRO CPU-2 <MQREG=0>>
  539             
  540             ///     END OF SELF-DEFINING PARAMETERS -- START OF MONITOR LINKAGES    ///
  541             
  542             /A VERY FEW SELDOM CHANGED POINTERS
  543             
  544       4201  AUTOST= 4201    /AUTOMATIC SYSTEM RESTART ENTRANCE TO 'INIT'
  545       7720  FIPBLK= 7720    /THE I/O TRANSFER BLOCK FOR 'FIP'
  546             
  547             /FREQUENTLY CHANGED POINTERS IN TS8 & TS8II; THESE ARE UPDATED
  548             /BY THE 'LINK.TE' TECO MACRO.  IN THE SOURCE, THEY ARE FLAGGED
  549             /FOR THE MACRO TO FIND BY '/*'.
  550             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 15


  551             
  552       5200  BLT0=   5200    /BLOCK TRANSFER
  553       0033  CLK1=   0033    /SYSTEM DAYCLOCK (LOW)
  554       0034  CLK2=   0034    / (HIGH)
  555       0030  CONDBA= 0030    /POINTER TO DEVTBL ENTRY IN USE
  556       0031  CONDDB= 0031    /POINTER TO DDB IN USE
  557       1317  CORSRC= 1317    /CORTBL SEARCH
  558       7001  CORTBL= 7001    /CORE ALLOCATION TABLE (FIXED)
  559       0035  DATE=   0035    
  560       7045  DEVCHK= 7045    /CHECK DEVICE OWNERSHIP
  561       0036  DSBUSY= 0036    /DISC BUSY COUNT
  562       0535  DTDEF0= 0535    /DECTAPE ERROR REGISTRATION
  563       0541  DTDSF0= 0541    /DECTAPE BUFFER TO SWAP AREA
  564       0527  DTDSK=  0527    /DECTAPE DISC COMPLETION
  565       0551  DTL20=  0551    /DECTAPE LEVEL-2 DISPATCH
  566       3671  DTRKHG= 3671    /ERROR SETTING FROM FIELD 1
  567       5333  ENDIOT= 5333    /JMP TO EXIT HANDLER
  568       0277  F1RTN=  0277    /RETURN FROM FIELD 1 INTERRUPT HANDLERS
  569       0057  FIPJOB= 0057    /JOB REQUESTING 'FIP'
  570       0040  FRECNT= 0040    /AVAILABLE FREE-CORE BLOCKS
  571       0037  FREE=   0037    /LINK TO FIRST FREE-CORE BLOCK
  572       1400  GETB=   1400    /GET A FREE-BLOCK
  573       1440  GETDB0= 1440    /GET DDB BLOCK
  574       7200  GETJTB= 7200    /GET ADDRESS OF LINKED ENTRY
  575       6200  GIR00=  6200    /GENERAL INPUT ROUTINE
  576       0062  JOB=    0062    /CURRENTLY ACTIVE JOB
  577       4051  L2EXIT= 4051    /LEVEL-2 EXIT ROUTINE
  578       0041  L2SF=   0041    /LEVEL 2: SAVED FIELD AND MODE
  579       0042  L2SV0=  0042    /LEVEL 2: SAVED PC
  580       2631  L2TIM3= 2631    /RETURN FROM 'TIMER' ROUTINE
  581       5533  NFSEGS= 5533    /NUMBER OF FREE DISC SEGMENTS
  582       2340  OUTIOT= 2340    /INCREMENT 'ACFLG' TO SIGNAL OUTPUT
  583       5764  OVERL1= 5764    
  584       2364  OVERLA= 2364    /DISC TERMINATION FOR OVERLAYS
  585       0572  OVRLA1= 0572    /SYSTEM OVERLAY COMPLETION DISPATCHER
  586       1203  PRINT0= 1203    /TYPE CHARACTER
  587       1473  QUEUE0= 1473    /REGISTER LEVEL-2 FOR FIELD 1
  588       3652  READFI= 3652    /SI FILE-LOADER
  589       4172  REDO0=  4172    /'REDO' AND IOT
  590       3600  RELOAD= 3600    /AUTO-RESTART STARTUP
  591       0600  RETB=   0600    /FREE A CORE-BLOCK
  592       3676  RKL20=  3676    /LEVEL-2 DISPATCH FOR RK05
  593       3640  SCHED0= 3640    /'RSCHED' ENTRY
  594       4400  SICLR=  4400    /BUFFER CLEAR ROUTINE
  595       0020  SIDATA= 0020    /SI CONTROL WORDS
  596       2357  SLEEP=  2357    /PUT THE JOB TO SLEEP
  597       2621  TIMCDR= 2621    /CARD READ TIMER
  598       0032  TTCHAR= 0032    /CHARACTER FOR FEED ROUTINES
  599       0172  UUDF=   0172    /USER FIELD SELECT
  600       4404  UUOERR= 4404    /USER IOT ERROR
  601       0336  UUOEX1= 0336    /IOT EXIT ROUTINE
  602       3006  WSCHED= 3006    /'WAIT' ENTRY
  603       1720  CDL11=  1720    /LEVEL-1 INTERRUPT FOR CARD READER
  604       1704  CDL21=  1704    /LEVEL-2 HANDLER FOR CARD READER
  605       0020  CJOBDA= 0020    /CURRENT JOB DATA POINTER
  606       0027  DTJOB=  0027    /JOB HOLDING DECTAPE CONTROLLER
  607       0601  DTL11=  0601    /LEVEL-1 INTERRUPT FOR DECTAPE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 16


  608       1004  DTL21=  1004    /DECTAPE LEVEL-2 COMPLETION
  609       0177  F1BUF=  0177    /DDB EMPTY BLOCK
  610       2512  F1DTST= 2512    /DECTAPE STOP ROUTINE
  611       0176  F1ECNT= 0176    /DDB EMPTY COUNT
  612       0036  F1OFFJ= 0036    /SYSTEM OFF/ON COMMAND FLAG
  613       0175  F1TCNT= 0175    /DDB CHARACTER COUNT
  614       0045  RKJOB=  0045    /JOB HOLDING RK05 CONTROLLER
  615       2000  RKL11=  2000    /LEVEL-1 INTERRUPT FOR RK05
  616       1615  RKL21=  1615    /LEVEL-2 HANDLER FOR RK05
  617       2200  TIMER0= 2200    /FIELD 1 TIMER ROUTINE
  618       2445  UPEEK1= 2445    /FIELD 1 PEEK IOT CODE
  619       0174  UPTIM1= 0174    /SYSTEM UPTIME
  620       0173  UPTIM2= 0173
  621       1735  UUCDR=  1735    /UUO ENTRY FOR CARD READER
  622       1415  UUDTRK= 1415    /UUO ENTRY FOR DECTAPE & RK05
  623       7730  WINBAS= 7730    /BASIC RETRIEVAL WINDOW

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 17


  624             
  625             /TS8 - UWM VERSION 25
  626             /
  627             /COPYRIGHT 1971, 1975           DIGITAL EQUIPMENT CORPORATION
  628             /                               MAYNARD, MASSACHUSETTS
  629             /
  630             /EXTENSIVELY MODIFIED AND CORRECTED BY
  631             /       RICHARD BARTLEIN, 1974, 1976
  632             /       UNIVERSITY OF WISCONSIN - MILWAUKEE
  633             
  634       0001          *1
  635 00001 5402          JMP I .+1
  636                     IFNZRO INT-200  <GLITCH; *.-1>
  637 00002 0200  C0200,  INT
  638 00003 0000  WS0,    0       /WORKING STORAGE FOR MAIN FLOW
  639             EMPTY,          /BUFFER EMPTY POINTER
  640 00004 0000  WS1,    0
  641 00005 0000  JOBSWA, 0       /POINTER TO JOB STATUS WORDS
  642             
  643       0010          *10
  644 00010 0000  ACX10,  0               /INTERRUPT SERVICE
  645 00011 0303  ACX11,  RINGIN-1        /LEVEL 1 - INPUT RING-BUFFER POINTER
  646 00012 0000  DSPAR,  0               /DISC HANDLER
  647 00013 7007  L2Q,    L2QTB-1         /LEVEL-2 REQUEST QUEUE POINTERS
  648 00014 7007  L2QE,   L2QTB-1 
  649 00015 0000  AXS1,   0               /LEVEL-2 AUTO-INDEX REGISTERS
  650 00016 0000  AXS2,   0       
  651 00017 3067  DSKPTR, DSUTBL+6        /DISC REQUEST QUEUE POINTER
  652             
  653             /*CONDBA        /POINTER TO DEVTBL ENTRY IN USE
  654             /*CONDDB        /POINTER TO DDB IN USE
  655             /*SIDATA        /SI CONTROL WORDS
  656             /*TTCHAR        /CHARACTER FOR FEED ROUTINES
  657             SIDATA,
  658 00020 0000  COMCNT, 0       /NUMBER OF COMMANDS WAITING
  659 00021 0000  COMDSP, 0       /FIP RETURN DISPATCH
  660 00022 2600  COMPTR, DEVTBL  /POINTER TO LAST DDB CHECKED
  661 00023 0000  SICHAR, 0       /LAST CHARACTER SCANNED
  662 00024 0000  SIFLG,  0       /CURRENT COMMAND STATUS-BITS
  663 00025 0000  SIREG,  0       /SAVED USER PC
  664 00026 0000          0       /  "   AC
  665 00027 0000          0       /  "   LINK-WORD (WITH EAE STATUS)
  666 00030 0000  CONDBA, 0       /DEVTBL ENTRY POINTER
  667 00031 0000  CONDDB, 0       /CURRENT DDB POINTER
  668 00032 0000  TTCHAR, 0       /CHARACTER INPUT FOR 'GIR'
  669             /
  670             /*CLK1          /SYSTEM DAYCLOCK (LOW)
  671             /*CLK2          / (HIGH)
  672             /*DATE
  673             /*DSBUSY        /DISC BUSY COUNT
  674             /*FRECNT        /AVAILABLE FREE-CORE BLOCKS
  675             /*FREE          /LINK TO FIRST FREE-CORE BLOCK
  676 00033 0000  CLK1,   0       /LOW-ORDER SYSTEM CLOCK
  677 00034 0000  CLK2,   0       / AND HIGH-ORDER
  678 00035 0000  DATE,   0       / DATE = [(YEAR-1974)*12 + MONTH-1]*31 + DAY-1
  679 00036 7777  DSBUSY, -1      /DISC ACTIVITY COUNT
  680 00037 0000  FREE,   0       /LINK TO FIRST FREE-CORE BLOCK

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 18


  681 00040 0000  FRECNT, 0       /NUMBER OF FREE-CORE BLOCKS AVAILABLE
  682             
  683             /*L2SF          /LEVEL 2: SAVED FIELD AND MODE
  684             /*L2SV0         /LEVEL 2: SAVED PC
  685 00041 0100  L2SF,   100     /IF, DF, AND MODE (USER FLAG)
  686 00042 2000  L2SV0,  NULJOB  /SAVED PC
  687 00043 0000  L2SVLK, 0       /SAVED LINK
  688 00044 0000  L2SA,   0       /SAVED ACCUMULATOR
  689             
  690             /*FIPJOB        /JOB REQUESTING 'FIP'
  691             /*JOB           /CURRENTLY ACTIVE JOB
  692 00045 0000  BONUS,  0               /JOB # JUST BROKEN OUT OF I/O WAIT
  693 00046 7777  CLOCK,  -1              /NUMBER OF SYSTEM TICKS PENDING (-1)
  694 00047 6777  CNOTR,  -1-NOTRUN
  695 00050 7000  CORTBA, CORTBL-1        /CORE ALLOCATION TABLE
  696 00051 0000  CURJOB, 0               /JOB INTERRUPTED BY I/O COMPLETION
  697 00052 0000  DEAD,   0               /POSSIBLE DEAD-WOOD JOB
  698 00053 2600  DEVTBA, DEVTBL          /DEVICE DDB TABLE
  699 00054 3061  DSUTBA, DSUTBL          /USER DISC REQUEST QUEUE
  700 00055 7002  FANCOR, CORTBL+1        /FIELD OF PHANTOM (2)
  701 00056 0000  FINISH, 0               /+(IN) OR -(OUT) FIELD OF JOB BEING SWAPPED
  702 00057 0000  FIPJOB, 0               /JOB NOW RUNNING FIP
  703 00060 0000  FIT,    0               /JOB # SCHEDULED
  704 00061 0000  FORCE,  0               /FIELD TO BE SWAPPED OUT
  705 00062 0000  JOB,    0               /NUMBER OF CURRENT JOB
  706 00063 2675  JOBTBA, JOBTBL          /START OF JOBTBL
  707 00064 0000  JOBTIM, 0               /NUMBER OF TICKS JOB HAS RUN
  708 00065 0000  SCHNEW, 0               / (-1) TO INDICATE FULL TIME SLICE
  709 00066 0000  SQREQ,  0               /SWAP-REQUEST FLAG
  710             
  711 00067 0047  BASWIN, -WINBAS-1
  712 00070 0000  HSRCNT, 0               /NUMBER OF HSR CHARACTERS TO READ
  713 00071 0000  INTRC,  0               /TRAC # TO BE SWAPPED IN (DF32 0X00 ) ( RF08 000X)
  714 00072 0020  JOBDAT, CJOBDA          /POINTER TO CURRENT JOB STATUS (F1)
  715 00073 0000  OUTTRC, 0               /TRAC # TO BE SWAPPED OUT
  716 00074 6012  SWPGD2, SWGOOD
  717 00075 7600  SWPIOA, SWPIO
  718             /
  719             /CONSTANTS
  720 00076 0002  C0002,  2
  721 00077 0003  C0003,  3
  722 00100 0004  C0004,  4
  723 00101 0005  C0005,  5
  724 00102 0006  C0006,  6
  725 00103 0007  C0007,  7
  726 00104 0010  C0010,  10
  727 00105 0014  C0014,  14
  728 00106 0020  C0020,  20
  729 00107 0037  C0037,  37
  730 00110 0070  C0070,  70
  731 00111 0100  C0100,  100
  732 00112 0177  C0177,  177
  733                     IFNZRO WRDSEG-1-377     <GLITCH; *.-1>
  734             SEGSM1,         /WRDSEG-1
  735 00113 0377  C0377,  377
  736                     IFNZRO WRDSEG-400       <GLITCH; *.-1>
  737             SEGSIZ,         /WRDSEG

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 19


  738 00114 0400  C0400,  400
  739 00115 0600  C0600,  600
  740 00116 0770  C0770,  770
  741 00117 0777  C0777,  777
  742 00120 1000  C1000,  1000
  743 00121 3777  C3777,  3777
  744 00122 6203  C6203,  CIF CDF
  745 00123 7377  C7377,  7377
  746                     IFNZRO WRDSEG-400       <GLITCH; *.-1>
  747             SEGLMK,         /-WRDSEG
  748 00124 7400  C7400,  7400
  749 00125 7600  C7600,  7600
  750 00126 7770  C7770,  7770
  751 00127 7776  C7776,  7776

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 20


  752             /SUBROUTINE DISPATCHES
  753       4530  BLT=    JMS I .
  754 00130 5200          BLT0    /BLOCK TRANSFER
  755       4531  BREAK=  JMS I .
  756 00131 7112          BRKTST  /TEST IF CHARACTER IS A DELIMITER
  757       4532  CLRBUF= JMS I .
  758 00132 2151          CLRBF0  /CLEAR A CHARACTER BUFFER
  759       4533  CORE=   JMS I .
  760 00133 1317          CORSRC  /CORTBL SEARCH
  761       5534  DISMIS= JMP I .
  762 00134 0300          DISMI0  /DISMIS INTERRUPTS
  763       4535  DSGO=   JMS I .
  764 00135 7702          DSGO0   /START DISC REQUEST
  765       4536  ERROR=  JMS I .
  766 00136 5301          SYSERR  /SYSTEM ERROR
  767       5537  EXIT=   JMP I .
  768 00137 4051  EXITA,  L2EXIT  /LEAVE LEVEL 2
  769       4540  FETCH=  JMS I .
  770 00140 6661          TOF     /FETCH A BUFFERED CHARACTER
  771 00141 3507  FIUSER, DSUSER  /QUEUE FILE REQUEST IN DSUTBL
  772       4542  GETBLK= JMS I .
  773 00142 1400          GETB    /FETCH A FREE-CORE BLOCK
  774       4543  GETDDB= JMS I .
  775 00143 1440          GETDB0  /FETCH A DDB
  776       4544  GETJTA= JMS I .
  777 00144 7200          GETJTB  /GET JOB STATUS WORD ADDRESS
  778       4545  GETJTI= JMS I .
  779 00145 0355          GETJI0  /GET CONTENT OF JOB STATUS WORD (ANY JOB)
  780       4546  GETJTW= JMS I .
  781 00146 4030          GETJW0  /GET CONTENT OF JOB STATUS WORD (CURRENT JOB)
  782       4547  GIR=    JMS I .
  783 00147 6200          GIR00   /ROUTE CHARACTERS TO JOBS AND TELETYPES
  784       4550  IOR=    JMS I .
  785 00150 3722          IOR0    /INCLUSIVE OR
  786       4551  PRINT=  JMS I .
  787 00151 1203          PRINT0  /TYPE OUT A CHARACTER
  788       4552  REBOOT= JMS I .
  789 00152 3602          RBOOT   /INITIATE AUTOMATIC SYSTEM RESTART
  790       5553  REDO=   JMP I .
  791 00153 4172          REDO0   /REPEAT IOT LATER TO (HOPEFULLY) COMPLETE IT
  792       4554  RESJOB= JMS I .
  793 00154 7247          RESJO0  /RESTORE THE PREVIOUSLY SAVED STATUS
  794       4555  RETBLK= JMS I .
  795 00155 0600          RETB    /RELEASE A FREE-CORE BLOCK
  796       5556  RSCHED= JMP I .
  797 00156 3640  RSCHEA, SCHED0  /FIND NEXT JOB TO BE RUN
  798       4557  RUNABL= JMS I .
  799 00157 5236          RUNTST  /TEST IF SPECIFIED JOB IS RUNABLE
  800       4560  SAVJOB= JMS I .
  801 00160 6050          SAVJO0  /SAVE THE STATUS OF THE CURRENT JOB
  802       5561  SCHED=  JMP I .
  803 00161 2646          SCHEDI  /SCHEDULE NEXT JOB NOW CORE RESIDENT
  804 00162 4204  SETFLG, PTSTAR  /SET FLAGS IN JOB'S STR1
  805       5563  START=  JMP I .
  806 00163 0634          SUJ     /START USER JOB
  807       4564  STORE=  JMS I .
  808 00164 0400          GIRSC   /STORE A CHARACTER IN BUFFER

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 21


  809       4565  TTYUSE= JMS I .
  810 00165 7354          TTYSRC  /FIND USER TTY
  811 00166 4404  UUOERA, UUOERR
  812       5567  UUOEXT= JMP I .
  813 00167 0336          UUOEX1  /UUO EXIT
  814       5570  WAIT=   JMP I .
  815 00170 3006          WSCHED  /SAVE CURRENT JOB AND RESCHEDULE
  816             
  817             /*UUDF          /USER FIELD SELECT
  818       4171  UDF=    JMS .   /SELECT FIELD OF CURRENT JOB
  819 00171 0000  WS2,    0
  820 00172 0000  UUDF,   0       /DATA FIELD SELECT FOR FIELD OF CURRENT JOB
  821 00173 5571          JMP I .-2
  822             /
  823 00174 6555  CONGEA, CONGET
  824 00175 6426  CONO1A, CONOU1
  825 00176 0556  CONSEA, CONSET

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 22


  826                     PAGE
  827             /PRIORITY LEVEL 0 (HIGHEST PRIORITY)
  828             /KEEPS TRACK OF REAL TIME
  829             /ALWAYS ENTERED BY CLOCK FLAG
  830             /DISMISSES TO LEVEL 1 IF INTERRUPT WAS NOT FROM LEVEL 1
  831             /OTHERWISE, DISMISSES TO INTERRUPTED LOCATION.
  832             /
  833 00200 6254  INT,    SINT            /USER IOT? (HAS TO BE CHECKED FIRST!!!)
  834             
  835                     IFZERO DC08A <
  836 00201 5206          JMP INT0        /NO - GO CHECK THE REST
  837                     >
  838                     IFZERO D680-2 <
  839                     SKP             /NO - CHECK THE DC08
  840                     >
  841 00202 5605          JMP I UUOA      /YES, GO SAVE LEVEL 2 STUFF
  842             
  843                     IFZERO D680-2 <
  844                     T8SKP           /CLOCK TICK?
  845                     JMP INT0        /NO - KEEP LOOKING
  846                     ISZ CLKCNT      /YES - IS A SYSTEM TICK UP YET?
  847                     JMP I T8DISA    /NO - RUN DC08 INTERRUPT SERVICE
  848                     DCA CLKIT       /YES - SAVE THE AC
  849                     TAD L2TIMA
  850                     DCA I L2Q       / AND SCHEDULE 'L2TIME'
  851                     TAD CLKIN1
  852                     DCA CLKCNT      /RESET THE TICK COUNTER
  853                     TAD CLKIN2
  854                     DCA CLKIN1      /THEN SWAP COUNTERS SO SYSTEM CLOCK RATE
  855                     TAD CLKCNT      / IS THE SAME FOR ALL HARDWARE
  856                     DCA CLKIN2
  857                     TAD CLKIT       /GET AC AT INTERRUPT
  858                     JMP I .+1       /RUN DC08 SERVICE
  859             T8DISA, T8DIS
  860             CLKCNT, -34
  861             CLKIN1, -33     /DIVIDE CLOCK RATE BY 27 & 28 SO THE
  862             CLKIN2, -34     / EFFECTIVE RATE IS 550/27.5 = 20 TICKS/SEC
  863                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 23


  864             /INTERRUPTS OTHER THAN 680 (LEVEL 1)
  865             /DISMISSES TO LEVEL 2 IF NOT FROM LEVEL 1 OR 2.
  866             
  867 00203 0000  INTAC,  0               /AC AT LEVEL 1
  868 00204 0000  INTLK,  0               /LINK AT LEVEL 1
  869 00205 2367  UUOA,   UUO0
  870             
  871 00206 3203  INT0,   DCA INTAC       /SAVE AC AND LINK
  872 00207 7012          RTR
  873 00210 3204          DCA INTLK
  874                     IFZERO DC08A <
  875 00211 6133          IFNZRO CPU-4    <CSCF>  /SKIP AND CLEAR CLOCK FLAG
  876                     IFZERO CPU-4    <CLSK>  /SKIP ON CLOCK FLAG
  877 00212 5225          JMP DTINT0
  878                     IFZERO CPU-4    <CLCL>  /CLEAR THE FLAG
  879                             IFZERO CPU-1 <
  880                     CLA CMA         /RESET KW08 CLOCK
  881                     CCF CLB         /CLEAR FLAG AND LOAD BUFFER
  882                     CECI            / & ENABLE
  883                             >
  884                             IFNZRO CPU-3 <
  885 00213 2223          ISZ CLKCNT      /IT WAS CLOCK - WAS IT A SYSTEM TIC?
  886 00214 5240          JMP CLKCHK      /NO - CHECK TO SEE IF WE'RE STILL UP
  887 00215 1224          TAD CLKINI      /YES - SET FOR NEXT SYSTEM TIC
  888 00216 3223          DCA CLKCNT
  889                             >
  890 00217 2046          ISZ CLOCK       /ALREADY HAVE LEVEL-2 SCHEDULED?
  891 00220 5240          JMP CLKCHK      /YES
  892 00221 1236          TAD L2TIMA      /SCHEDULE L2TIME ON L2QUE
  893 00222 5300          JMP DISMI0
  894             
  895                     IFZERO CPU-2 <
  896 00223 7772  CLKCNT, -6      /NUMBER OF CLOCK TICKS/SYSTEM TICK = 6
  897 00224 7772  CLKINI, -6
  898                     >
  899                     IFNZRO CPU-2&4000 <
  900             CLKCNT, -3      /# OF CLOCK TICKS/SYSTEM TICK = 3
  901             CLKINI, -3
  902                     >>
  903             
  904 00225 4251  DTINT0, JMS DTCHK       /CHECK & DISPATCH IF HIGH-SPEED STUFF
  905 00226 5534          DISMIS          / (RETURNS HERE IF FLAG FOUND)
  906                     IFZERO RF08-40 <
  907                     DFSE            /DF32 ERROR?
  908                     JMP I DSWAIT    /YES
  909                     DFSC            /DISC COMPLETION?
  910                     JMP I INT2      /NO
  911                     >
  912                     IFZERO RF08 <
  913 00227 6623          DFSC DFSE       /DISC INTERRUPT?
  914 00230 5635          JMP I INT2      /NO
  915 00231 6621          DFSE            /RF08 ERROR?
  916                     >
  917 00232 2234          ISZ DSWAIT      /NO - EXIT TO HANDLER+1
  918 00233 5634          JMP I DSWAIT
  919 00234 0000  DSWAIT, 0               /SET BY DISC SERVICE
  920                     IFNZRO CDR <

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 24


  921             INT2,   INTCDR
  922                     >
  923                     IFZERO CDR <
  924 00235 7410  INT2,   RINT
  925                     >
  926 00236 2602  L2TIMA, L2TIME
  927 00237 0000  CLKIT,  0       /TEMPORARY FOR AC
  928             
  929             /HUNG-SYSTEM CRASH DETECTOR -- IT'S HIGHLY UNLIKELY THAT
  930             /WE'D HANG WITH INTERRUPT OFF AND THE CLOCK DISABLED;
  931             /SO THIS THING COUNTS DOWN TICKS SINCE THE LEVEL-2
  932             /CODE LAST RAN AND RESTARTS US IF IT'S BEEN TOO LONG.
  933             
  934                     IFZERO 240-.&4000 <
  935 00240 7604  CLKCHK, LAS
  936 00241 1250          TAD OPCHK
  937 00242 7650          SNA CLA         /OPERATOR FORCED RESTART?
  938 00243 4552          REBOOT          /YES
  939 00244 2247          ISZ CLKMIS      /MISSED TOO MANY TICKS?
  940 00245 5325          JMP DISMI2
  941 00246 4552          REBOOT          /YES - RESTART THE SYSTEM
  942 00247 7400  CLKMIS, -400
  943 00250 3457  OPCHK,  -4321   /TOP SECRET RESTART CODE (SHH!)
  944                     >
  945             
  946             /ROUTINE TO CHECK OUR SUNDRY HIGH-SPEED DEVICES
  947             /BY MAKING IT A SUBROUTINE, WE CAN CALL IT SEVERAL TIMES
  948             /IN OUR INTERRUPT CHECKING, THEREBY MAKING IT HIGHLY
  949             /UNLIKELY THAT WE WOULD MISS AN INTERRUPT & GET A 'TIM' ERROR.
  950 00251 0000  DTCHK,  0
  951                     IFNZRO CDR      <RCSF>  /CARD READER?
  952 00252 5260          IFZERO CDR      <JMP .+6>
  953 00253 5260          JMP .+5         /NOPE
  954 00254 6213          CIF DATFLD
  955 00255 6201          CDF
  956 00256 5657          JMP I .+1       /YES - OFF TO THE HANDLER IN FIELD 1
  957 00257 1720           CDL11
  958             /
  959 00260 6741          IFNZRO RK05     <DSKP>  /RK05?
  960                     IFZERO RK05     <JMP .+5>
  961 00261 5265          JMP .+4         /NO
  962 00262 6213          CIF DATFLD
  963 00263 5664          JMP I .+1       /YES - OFF TO ITS HANDLER
  964 00264 2000           RKL11
  965             /
  966 00265 6771          IFNZRO TC01     <DTSF>  /DECTAPE?
  967                     IFZERO TC01     <JMP DTCK1>
  968 00266 5276          JMP DTCK1       /NO
  969 00267 6761          DTRA
  970 00270 0100          AND C0004
  971 00271 7650          SNA CLA         /YES - IS IT INTERRUPT ENABLED?
  972 00272 5276          JMP DTCK1       /NO - JUST IGNORE THE FLAG
  973 00273 6213          CIF DATFLD
  974 00274 5675          JMP I .+1       /YES - OFF TO FIELD 1
  975 00275 0601           DTL11
  976 00276 2251  DTCK1,  ISZ DTCHK       /ELSEWISE, WE SKIP TO INDICATE NO FLAGS FOUND
  977 00277 5651  F1RTN,  JMP I DTCHK     / (DEVICE HANDLERS RETURN HERE)

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 25


  978             
  979             /*F1RTN         /RETURN FROM FIELD 1 INTERRUPT HANDLERS

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 26


  980             /DISMIS ROUTINE
  981             /ENTERED FROM INTERRUPT HANDLER TO ENTER LEVEL 2 FROM LEVEL 1
  982             /AC = ADDRESS OF LEVEL 2 SERVICE ROUTINE
  983             /OR 0 IF NO LEVEL 2 SERVICE REQUIRED
  984             
  985 00300 6201  DISMI0, CDF
  986 00301 7450          SNA             /DISMIS INTERRUPTS
  987 00302 5325          JMP DISMI2      /NO-BACK TO WHATEVER WAS GOING ON BEFORE
  988 00303 3237          DCA CLKIT       /SAVE DISPATCH
  989 00304 6234          RIB             /MODE BIT = 100
  990 00305 0111          AND C0100
  991 00306 7650          SNA CLA         /FROM USER MODE?
  992 00307 5323          JMP DISMI1      /NO - QUEUE REQUEST UNTIL LATER
  993 00310 1203          TAD INTAC       /MOVE THE AC TO LEVEL 2
  994 00311 3044          DCA L2SA
  995 00312 1204          TAD INTLK       /MOVE LINK TO LEVEL 2
  996 00313 3043          DCA L2SVLK
  997 00314 1000          TAD 0           /MOVE PC TO LEVEL 2
  998 00315 3042          DCA L2SV0
  999 00316 6234          RIB
 1000 00317 3041          DCA L2SF        /FIELDS AND MODE TO LEVEL 2
 1001 00320 7300          CLA CLL         /AC & LINK = 0 UPON ENTRANCE TO LEVEL-2 CODE
 1002 00321 6001          ION
 1003 00322 5637          JMP I CLKIT     /DISMISS TO EXEC MODE, FIELD 0, LEVEL-2
 1004             
 1005 00323 1237  DISMI1, TAD CLKIT
 1006 00324 3413          DCA I L2Q       /QUEUE THE LEVEL-2 REQUEST
 1007 00325 1204  DISMI2, TAD INTLK       /RESTORE LINK AND AC
 1008 00326 7106          CLL RTL
 1009 00327 1203          TAD INTAC
 1010 00330 6244          RMF             /RESTORE IF, DF & MODE
 1011 00331 6001          ION
 1012 00332 5400          JMP I 0         /BACK TO INTERRUPTED PROGRAM
 1013             
 1014                     IFNDEF CLKMIS <
 1015             CLKCHK= DISMI2
 1016                     >
 1017 00333 1477  UUOWAT, DEVWAT
 1018             
 1019             /ROUTINE TO CAUSE AN EFFECTIVE SKIP BEFORE ENTERING UUOEXT.
 1020 00334 2042  UUOEX2, ISZ L2SV0       /POSITIVE FLAG TEST EXIT
 1021 00335 7000          NOP
 1022             /
 1023             /*UUOEX1        /IOT EXIT ROUTINE
 1024             /'UUOEXT' - EXIT ROUTINE FOR RESIDENT IOT HANDLERS.
 1025             /ENTERED WITH AC = WAIT-BITS TO CLEAR IN STR1 & SET IN WAIT-MASK 1
 1026 00336 7450  UUOEX1, SNA             /ANY WAIT CONDITIONS?
 1027 00337 5350          JMP UUOEX3      /NO - JUST CLEAN UP
 1028 00340 3003          DCA WS0         /YES - SAVE BITS TO CLEAR
 1029 00341 4546          GETJTW          /YES - SET UP THE WAIT-MASK
 1030 00342 0003           JOBWMK
 1031 00343 7201          CLA IAC
 1032 00344 1003          TAD WS0         /WAIT ON THIS FLAG+JSWAIT
 1033 00345 6211          DATFLD
 1034 00346 3405          DCA I JOBSWA    /SET WAIT MASK 1
 1035 00347 1003          TAD WS0         /BITS TO CLEAR
 1036 00350 4733  UUOEX3, JMS I UUOWAT    /CHECK FOR WAIT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 27


 1037 00351 1062          TAD JOB
 1038 00352 4557          RUNABL          /JOB STILL RUNNABLE?
 1039 00353 5570          WAIT            /NO - RESCHEDULE
 1040 00354 5537          EXIT            /YES - EXIT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 28


 1041             /
 1042             /RETURN CONTENT OF STATUS WORD IN AC
 1043             /CALL:  TAD POINTER TO JOB-STATUS BLOCK
 1044             /       GETJTI
 1045             /        RELATIVE ADDRESS OF WORD
 1046             /       RETURN (ADDRESS OF WORD IN JOBSWA)
 1047             
 1048 00355 0000  GETJI0, 0
 1049 00356 6201          CDF
 1050 00357 3005          DCA JOBSWA      /SAVE POINTER TO JOB STATUS
 1051 00360 1755          TAD I GETJI0    /GET THE POSITION IN THE LIST
 1052 00361 3364          DCA .+3
 1053 00362 1005          TAD JOBSWA
 1054 00363 4544          GETJTA          /NOW GET THE ADDRESS OF THIS ENTRY
 1055 00364 0000           0
 1056 00365 3005          DCA JOBSWA      /SAVE IT
 1057 00366 6211          DATFLD
 1058 00367 1405          TAD I JOBSWA    /GET THE CONTENTS OF THAT ADDRESS
 1059 00370 6201          CDF
 1060 00371 2355          ISZ GETJI0
 1061 00372 5755          JMP I GETJI0    / AND RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 29


 1062                     IFNZRO .-400&4000       <PAGE>
 1063             /STORE  CHARACTER  (ENTER AND EXIT WITH 'DATFLD' SET)
 1064             /CALL WITH ADDRESS OF DDB IN AC, CHARACTER IN TTCHAR
 1065             /       STORE
 1066             /        ADDRESS OF SIZE-CHECKER
 1067             /       WON'T FIT
 1068             /       OK
 1069             
 1070 00400 0000  GIRSC,  0
 1071 00401 1100          TAD DBINPA
 1072 00402 3323          DCA GIRSB       /POINTS TO ADDRESS OF BUFFER (FILL-POINTER)
 1073 00403 6201          CDF
 1074 00404 1600          TAD I GIRSC
 1075 00405 3326          DCA GIRST       /SAVE THE SIZE-CHECK ROUTINE ADDRESS
 1076 00406 6211          DATFLD
 1077 00407 1723          TAD I GIRSB
 1078 00410 7450          SNA             /IS THE FILL-BUFFER SET UP?
 1079 00411 5300          JMP GIRSC8      /NO - GO GET A BUFFER
 1080 00412 3324          DCA GIRSCT      /ADDRESS OF FILL COUNT IN DDB
 1081 00413 2724          ISZ I GIRSCT    /ANY ROOM LEFT?
 1082 00414 5240          JMP GIRSC4      /YES
 1083 00415 7201          CLA IAC
 1084 00416 1323          TAD GIRSB       /POINTS TO CHARACTER COUNT
 1085 00417 4726          JMS I GIRST     / AND CHECK THE BUFFER SIZE
 1086 00420 5317          JMP GIRSCX      /YES - NO MORE BUFFERS; MAYBE RING BELLS NOW
 1087 00421 7346          CLL CLA CMA RTL /IS THERE ENOUGH (I.E. 3 BLOCKS) OF FREE CORE LEFT?
 1088 00422 1040          TAD FRECNT
 1089 00423 7750          SPA SNA CLA
 1090 00424 5317          JMP GIRSCX      /NO-DON'T GIVE HIM ANOTHER BUFFER NOW
 1091 00425 1324          TAD GIRSCT      /OK - AC=POINTER TO THE LINK-WORD
 1092 00426 6201          CDF
 1093 00427 4542          GETBLK          /GET (AND CLEAR) A BLOCK
 1094 00430 5317          JMP GIRSCX      /NONE AVAILABLE
 1095 00431 6211          DATFLD
 1096 00432 1724          TAD I GIRSCT
 1097 00433 3723          DCA I GIRSB     /LINK THE NEW BLOCK TO THE PREVIOUS ONE
 1098 00434 1723  GIRSC3, TAD I GIRSB
 1099 00435 3324          DCA GIRSCT
 1100 00436 1325          TAD GIRSIZ      /INITIALIZE CHAR COUNT TO -12
 1101 00437 3724          DCA I GIRSCT    /AND SAVE IN DDB
 1102 00440 1724  GIRSC4, TAD I GIRSCT
 1103 00441 1077          TAD C0003
 1104 00442 7500          SMA             /ARE WE DOING THE LAST 3 CHARACTERS IN THE BLOCK?
 1105 00443 7124          CLL CML RAL     /YES - WORD POINTER IS (COUNT-3)*2+1
 1106 00444 7510          SPA
 1107 00445 7161          STL CIA         /NO - WORD POINTER IS JUST -(COUNT)
 1108 00446 1723          TAD I GIRSB     /START OF BUFFER
 1109 00447 3324          DCA GIRSCT      /ADDRESS TO STORE CHARACTER
 1110 00450 1032          TAD TTCHAR
 1111 00451 7420          SNL             /DOES IT GET SPLIT?
 1112 00452 5263          JMP GIRSC6      /YES
 1113 00453 0113          AND C0377
 1114 00454 3724  GIRSC5, DCA I GIRSCT    /STORE CHARACTER
 1115 00455 2323          ISZ GIRSB
 1116 00456 2723          ISZ I GIRSB     /COUNT THE CHARACTER
 1117 00457 2200          ISZ GIRSC       /INDICATE SUCCESS
 1118 00460 7300  GIRFLD, CLA CLL

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 30


 1119 00461 2200          ISZ GIRSC       /SKIP THE PARAMETER
 1120 00462 5600          JMP I GIRSC
 1121 00463 7106  GIRSC6, CLL RTL; RTL
      00464 7006
 1122 00465 0124          AND C7400       /MASK OFF THE HIGH 4 BITS
 1123 00466 1724          TAD I GIRSCT    / ADD THE REST OF THE WORD
 1124 00467 3724          DCA I GIRSCT    / AND STORE IT
 1125 00470 2324          ISZ GIRSCT
 1126 00471 1032          TAD TTCHAR
 1127 00472 7112          CLL RTR; RTR; RAR
      00473 7012
      00474 7010
 1128 00475 0124          AND C7400       /NOW THE LOW 4 BITS
 1129 00476 1724          TAD I GIRSCT    /INCLUDE THE REST OF THE WORD
 1130 00477 5254          JMP GIRSC5      / AND COUNT THE CHARACTER
 1131             
 1132 00500 6201  GIRSC8, CDF             /ATTACH A BUFFER TO FILL POINTER
 1133 00501 1323          TAD GIRSB       /LINK ADDRESS
 1134 00502 4542          GETBLK
 1135 00503 5260          JMP GIRFLD      /CAN'T GET ONE - TOO BAD
 1136 00504 6211          DATFLD          /OK - SET UP POINTERS
 1137 00505 7326          CLA CLL CML RTL
 1138 00506 1323          TAD GIRSB
 1139 00507 3004          DCA EMPTY       /POINTS TO THE EMPTY COUNT
 1140 00510 7240          CLA CMA
 1141 00511 1325          TAD GIRSIZ
 1142 00512 3404          DCA I EMPTY     /SET IT TO -13 INITIALLY
 1143 00513 2004          ISZ EMPTY       /NOW POINTS TO EMPTY POINTER
 1144 00514 1723          TAD I GIRSB
 1145 00515 3404          DCA I EMPTY     /AIM IT AT OUR BUFFER
 1146 00516 5234          JMP GIRSC3
 1147             
 1148 00517 6211  GIRSCX, DATFLD          /COULDN'T SQUEEZE CHARACTER IN
 1149 00520 7240          STA             /BUT WE ALREADY BUMPED FILL COUNT
 1150 00521 3724          DCA I GIRSCT    / SO JUST RESET THE COUNT
 1151 00522 5260          JMP GIRFLD      / AND EXIT WITHOUT SKIPPING
 1152             
 1153                     IFNZRO DDBINP-4 <GLITCH; *.-1>
 1154       0100  DBINPA= C0004   /DDBINP
 1155 00523 0000  GIRSB,  0
 1156 00524 0000  GIRSCT, 0
 1157 00525 7766  GIRSIZ, -12     /10 (DECIMAL) CHARACTERS/BLOCK
 1158 00526 0000  GIRST,  0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 31


 1159             /DECTAPE HANDLER CODE
 1160             /FOR DISC TRANSFERS TO OR FROM USER SWAP AREA
 1161             /AND FOR ALL LEVEL-2 COMPLETION.
 1162             
 1163             /*DTDSK         /DECTAPE DISC COMPLETION
 1164 00527 2341  DTDSK,  ISZ DTDSF0      /INCREMENT THE RETURN
 1165 00530 6211          DATFLD
 1166 00531 3755          DCA I DTDQUE    /CLEAR THE QUEUE ENTRY
 1167 00532 6201          CDF
 1168 00533 4754          JMS I DTDCON    /START UP ANYTHING WAITING
 1169 00534 5337          JMP DTDCF0      / AND RETAKE THE EXIT
 1170             
 1171             /*DTDEF0        /DECTAPE ERROR REGISTRATION
 1172 00535 4536  DTDEF0, ERROR           /RECORD THE DISC ERROR
 1173 00536 0002           SWPRER
 1174 00537 2341  DTDCF0, ISZ DTDSF0      /INCREMENT THE RETURN
 1175 00540 5347          JMP DTDXF0      / AND BACK TO FIELD 1 (AGAIN)
 1176             
 1177             /*DTDSF0        /DECTAPE BUFFER TO SWAP AREA
 1178 00541 0000  DTDSF0, 0               /MAY RETURN UP TO 4 TIMES - EACH +1 FROM THE LAST
 1179 00542 3755          DCA I DTDQUE    /QUEUE THE DECTAPE'S DISC REQUEST
 1180 00543 6201          CDF
 1181 00544 2036          ISZ DSBUSY      /IS THE DISC ALREADY BUSY?
 1182 00545 7410          SKP
 1183 00546 4541          JMS I FIUSER    /NO - START IT UP
 1184 00547 6213  DTDXF0, CIF DATFLD
 1185 00550 5741          JMP I DTDSF0    /BACK TO FIELD 1
 1186             
 1187             /*DTL20         /DECTAPE LEVEL-2 DISPATCH
 1188 00551 6213  DTL20,  CIF DATFLD
 1189 00552 5753          JMP I .+1
 1190 00553 1004          DTL21
 1191             
 1192 00554 3561  DTDCON, DSKCON
 1193 00555 3070  DTDQUE, DSUTBL+7
 1194             
 1195             
 1196             /ROUTINE TO SET FLAGS IN STR1 FOR TTY, LPT, OR PTP
 1197             
 1198                     IFNZRO JSPTP-4  <GLITCH; *.-1>
 1199                     IFNZRO JSTEL-20 <GLITCH; *.-1>
 1200                     IFNZRO JSLPT-40 <GLITCH; *.-1>
 1201             
 1202 00556 0000  CONSET, 0
 1203 00557 1371          TAD CONPTC
 1204 00560 1004          TAD WS1
 1205 00561 7450          SNA             /IS IT THE PTP 'OUTREG' POSITION?
 1206 00562 5366          JMP .+4         /YES
 1207 00563 7700          SMA CLA         /NO - SKIP IF A TTY
 1208 00564 1106          TAD C0020       /NO - IT MUST BE THE LPT
 1209 00565 1105          TAD C0014
 1210 00566 1100          TAD C0004
 1211 00567 4562          JMS I SETFLG    /NOW SET THE BIT IN STR1
 1212 00570 5756          JMP I CONSET
 1213             /
 1214 00571 0006  CONPTC, CDVOUT+2
 1215             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 32


 1216             
 1217             /*OVRLA1        /SYSTEM OVERLAY COMPLETION DISPATCHER
 1218             /
 1219             /DISC COMPLETION DISPATCHER FOR SYSTEMIC OVERLAYS.
 1220 00572 4541  OVRLA1, JMS I FIUSER
 1221 00573 5570          WAIT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 33


 1222                     PAGE
 1223             
 1224             /RETURN TTY BUFFER TO FREE LIST
 1225             /CALL   TAD BUFFER ADDRESS
 1226             /       RETBLK
 1227             /       RETURN WITH LINK IN AC
 1228             
 1229             /*RETB          /FREE A CORE-BLOCK
 1230 00600 0000  RETB,   0
 1231 00601 7450          SNA             /LEGAL RELEASE?
 1232                             IFNZRO DEBUG <
 1233                     REBOOT          /NO - ERROR *****
 1234                             >
 1235                             IFZERO DEBUG <
 1236 00602 7201          CLA IAC         /FORCE A NORMAL RETURN
 1237                             >
 1238 00603 3312          DCA RETB1
 1239 00604 6214          RDF
 1240 00605 1122          TAD C6203
 1241 00606 3231          DCA RETF        /FOR RETURNING TO CALLER
 1242 00607 7300          CLA CLL
 1243 00610 1312          TAD RETB1
 1244 00611 1233          TAD RETFIP
 1245 00612 7630          SZL CLA         /FIP'S I/O BLOCK OR A FILL-COUNT?
 1246 00613 5231          JMP RETF        /YES - THEY DON'T GET RELEASED
 1247 00614 1312          TAD RETB1
 1248                             IFNZRO DEBUG&7-3&4000+CDR <
 1249 00615 0103          AND C0007
 1250 00616 7640          SZA CLA         /IS IT A GOOD FREE-CORE ADDRESS?
 1251                             IFNZRO DEBUG <
 1252                     REBOOT          /NO - ERROR *****
 1253                             >
 1254                             IFZERO DEBUG <
 1255 00617 5231          JMP RETF        /NO - JUST RETURN IN A PRODUCTION SYSTEM
 1256                             >>
 1257                             IFZERO DEBUG&7-3&4000 <
 1258                             IFZERO CDR <
 1259                     CIF DATFLD
 1260                     JMS I .+1
 1261                     RETCHK          /OFF TO CHECK THE RELEASE VALIDITY
 1262                             >>
 1263 00620 6211          DATFLD
 1264 00621 1712          TAD I RETB1     /YES - GET THE LINK FROM THE BLOCK
 1265 00622 3311          DCA RETBL
 1266 00623 1037          TAD FREE        /GET OLD START OF FREE LIST
 1267 00624 3712          DCA I RETB1     /PUT IT IN LINK
 1268 00625 1312          TAD RETB1       /PUT ADDRESS OF THIS BLOCK
 1269 00626 3037          DCA FREE        / AS START OF FREE LIST
 1270 00627 2040          ISZ FRECNT      /INCREMENT THE FREE-COUNT
 1271 00630 1311          TAD RETBL
 1272 00631 0000  RETF,   0               /RETURN WITH LINK
 1273 00632 5600          JMP I RETB
 1274             
 1275 00633 0060  RETFIP, -FIPBLK

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 34


 1276             
 1277             /START USER JOB
 1278             
 1279 00634 1041  SUJ,    TAD L2SF        /CLEAR NOTRUN FLAG SO JOB CAN BE SWAPPED
 1280 00635 0103          AND C0007       /GET CORTBL INDEX
 1281 00636 1050          TAD CORTBA
 1282 00637 3310          DCA SUJSRC      /POINTS TO ENTRY IN CORTBL FOR THIS JOB
 1283 00640 1710          TAD I SUJSRC    /GET CORTBL ENTRY
 1284 00641 0047          AND CNOTR       /CLEAR NOT RUN BIT
 1285 00642 3710          DCA I SUJSRC    /SAVE ENTRY
 1286 00643 1062          TAD JOB
 1287 00644 0115          AND C0600
 1288 00645 7640          SZA CLA         /IS THIS A PHANTOM?
 1289 00646 5537          EXIT            /YES - WE'RE ALL SET
 1290 00647 4752          JMS I SUJUDF    /SET UUDF
 1291 00650 4546  SUJ1,   GETJTW          /NO. IOT RESULTS TO USER?
 1292 00651 0000           JOBSTS
 1293 00652 6211          DATFLD
 1294 00653 0351          AND SJIOTC      /IOTC BIT IN STR0
 1295 00654 7450          SNA
 1296 00655 5327          JMP SUJ4        /NO - WAS THERE A SYSTEM ERROR?
 1297 00656 7040          CMA             /CLEAR THE BIT
 1298 00657 0405          AND I JOBSWA    /JSIOTC:=0
 1299 00660 3405          DCA I JOBSWA    /SAVE NEW STR0
 1300 00661 4546          GETJTW          /GET # ARGUMENTS TO RETURN
 1301 00662 0007           JOBLNK
 1302 00663 3310          DCA SUJSRC      /POINTS TO WORD 1 OF PARAMETER BLOCK
 1303 00664 1043          TAD L2SVLK      /GET THE LINK SAVE-WORD
 1304 00665 7112          CLL RTR
 1305 00666 7012          RTR
 1306 00667 7010          RAR
 1307 00670 0103          AND C0007       /GET THE PARM COPY-COUNT
 1308 00671 6211          DATFLD
 1309 00672 7450          SNA             /IS IT A ZERO?
 1310 00673 5324          JMP SUJ3        /YES - JUST BACK FROM WINDOW-TURN
 1311 00674 7041          CIA
 1312 00675 3313          DCA SUJCNT      /SAVE COUNT
 1313 00676 1044          TAD L2SA
 1314 00677 3312          DCA SUJDES      /SET THE USER'S PACKET ADDRESS
 1315 00700 1710          TAD I SUJSRC    /THEN GET THE VALUE
 1316 00701 3044          DCA L2SA        / TO RETURN IN HIS AC
 1317 00702 2310          ISZ SUJSRC      /POINTS TO WORD 2 OF BLOCK
 1318 00703 1172          TAD UUDF        /TRANSFER RESULTS TO USER'S FIELD
 1319 00704 3311          DCA SUJDFS
 1320 00705 6201          CDF
 1321 00706 4530          BLT             /MOVE RESULTS TO USER
 1322 00707 6211           DATFLD         /FROM FIELD 1
 1323 00710 0000  SUJSRC,  0              /SOURCE ADDRESS
 1324             RETBL,
 1325 00711 0000  SUJDFS,  0              /TO USER FIELD
 1326             RETB1,
 1327 00712 0000  SUJDES,  0              /AT THIS ADDRESS
 1328 00713 0000  SUJCNT,  0              /-WORD COUNT
 1329 00714 7240          CLA CMA
 1330 00715 1310          TAD SUJSRC      /GET THE BLOCK ADDRESS
 1331 00716 4555          RETBLK          / AND RELEASE THE BLOCK
 1332 00717 7600  CM200,  -200            / (ALSO ACTS AS 'CLA')

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 35


 1333 00720 1062          TAD JOB
 1334 00721 4557          RUNABL          /IS HE STILL RUNNABLE?
 1335 00722 5570          WAIT            /NO - HE JUST NEEDED HIS FIP RESULTS
 1336 00723 5250          JMP SUJ1        /YES - RUN THROUGH THE CHECKS AGAIN
 1337             
 1338 00724 1310  SUJ3,   TAD SUJSRC      /UFILE RETURN
 1339 00725 5726          JMP I .+1
 1340 00726 4731          SIFILE
 1341             
 1342 00727 2005  SUJ4,   ISZ JOBSWA
 1343 00730 1405          TAD I JOBSWA    /GET STR1
 1344 00731 0076          AND SUJERR
 1345 00732 7450          SNA             /SYSTEM ERROR OCCUR?
 1346 00733 5537          EXIT            /NO - OFF TO THE USER
 1347 00734 7040          CMA
 1348 00735 0405          AND I JOBSWA    /YES - CLEAR THE ERROR-BIT
 1349 00736 3405          DCA I JOBSWA
 1350             /
 1351             /THE USER HAS AN ERROR CODE SET. SINCE WE GOT HERE, HE
 1352             /MUST BE ENABLED TO HANDLE IT; WE DO AN EFFECTIVE
 1353             /'JMS' TO HIS ERROR-HANDLING ROUTINE.
 1354 00737 4546          GETJTW          /GET HIS ERROR-ADDRESS
 1355 00740 0006           JOBERR
 1356 00741 3003          DCA WS0         /POINTS TO HIS ROUTINE
 1357 00742 1042          TAD L2SV0
 1358 00743 4171          UDF
 1359 00744 3403          DCA I WS0       /SAVE THE ERROR-ADDRESS IN HIS ROUTINE
 1360 00745 1003          TAD WS0
 1361 00746 7001          IAC
 1362 00747 3042          DCA L2SV0       / AND SET THE NEXT LOCATION AS HIS PC
 1363 00750 5537          EXIT            /THEN JUST EXIT
 1364             
 1365 00751 0040  SJIOTC, JSIOTC
 1366                     IFNZRO JSERR-2  <GLITCH; *.-1>
 1367       0076  SUJERR= C0002   /JSERR
 1368 00752 3771  SUJUDF, UDFSET

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 36


 1369             /IF THE USER EXECUTES A FLAG TEST IOT (EG KSF, TSF, ETC.)
 1370             /THEN IT IS USEFUL TO KNOW IF HE IS IN A "WAIT LOOP"
 1371             /(I.E. KSF; JMP .-1) OR IF HE IS JUST CHECKING TO SEE
 1372             /IF THERE IS ANYTHING WORTH LOOKING AT.  IN THE FORMER
 1373             /CASE, WE WILL DISMIS THE USER UNTIL THE FLAG TEST IS
 1374             /SATISFIED; IN THE LATTER, THE USER IS ALLOWED TO
 1375             /PROCEED, REGARDLESS OF THIS FLAG'S STATUS.
 1376 00753 0000  IOWAIT, 0               /DETERMINE IF USER'S INSTRUCTION IS JMP .-1
 1377 00754 7240          STA
 1378 00755 1042          TAD L2SV0       /COMPUTE .-1
 1379 00756 0376          AND CP0177      /SAVE LOW ORDER 7 BITS
 1380 00757 1377          TAD C5200       /JMP DIRECT CURRENT PAGE
 1381 00760 7041          CIA
 1382 00761 4171          UDF
 1383 00762 1442          TAD I L2SV0     / MINUS THE INSTRUCTION FOLLOWING THE IOT
 1384 00763 7450          SNA             /JMP .-1 ON CURRENT PAGE?
 1385 00764 5374          JMP IOWAT2      /YES
 1386 00765 1002          TAD C0200
 1387 00766 7640          SZA CLA         /NO - PAGE 0?
 1388 00767 5375          JMP IOWAT1      /NO-- NOT A JMP .-1
 1389 00770 7240          CLA CMA
 1390 00771 1042          TAD L2SV0       /ADDRESS OF USER INSTRUCTION
 1391 00772 1317          TAD CM200
 1392 00773 7710          SPA CLA         /WOULD A JMP .-1 LAND ON PAGE 0?
 1393 00774 2353  IOWAT2, ISZ IOWAIT      /YES - INCREMENT RETURN FOR JMP .-1
 1394 00775 5753  IOWAT1, JMP I IOWAIT
 1395             
 1396 00776 0177  CP0177, 177
 1397 00777 5200  C5200,  5200

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 37


 1398                     PAGE
 1399             /
 1400             /PAPER TAPE READER SERVICE FOR TSS/8
 1401             
 1402 01000 4737  UPTR,   JMS I PTRCHK    /DOES HE OWN DEVICE
 1403 01001 2640  PTRDEV,  DEVTBE         /POINTS TO READER ENTRY IN DEVTBL
 1404 01002 1343          TAD URCBI
 1405 01003 1004          TAD UUOCAL
 1406 01004 7650          SNA CLA         /IS THIS THE NEW 'RCB' IOT?
 1407 01005 5236          JMP URCB        /YES - CLEAR THE READER BUFFER
 1408 01006 3003          DCA WS0         /FAKE A BREAK-MASK OF ZERO
 1409 01007 4740          JMS I PTRIOT    /ANALYZE IOT
 1410 01010 5230           JMP URRS       /READ A STRING
 1411 01011 0010  PTRFL,   JSPTR          /FEADER FLAG
 1412 01012 5627           JMP I PTRSKP   /WE ALWAYS SKIP
 1413 01013 7620          SNL CLA         /RRB?
 1414 01014 5567          UUOEXT          /NO - MUST HAVE BEEN RFC - SO WHAT!
 1415 01015 6211          DATFLD
 1416 01016 1601          TAD I PTRDEV    /ADDRESS OF DDB
 1417 01017 4540          FETCH           /FETCH A CHARACTER FROM READER BUFFER
 1418 01020 5242           JMP PSTWT0     /NONE AVAILABLE - START READER
 1419 01021 3225          DCA PTRCH       /SAVE FOR NEXT RRB
 1420 01022 6201          CDF
 1421 01023 1346          TAD PTRACA      /POINTS TO L2SA
 1422 01024 4550          IOR             /OR THE CHARACTER INTO HIS AC
 1423 01025 0000  PTRCH,   0
 1424 01026 5567          UUOEXT          /EXIT TO USER
 1425 01027 0334  PTRSKP, UUOEX2
 1426             
 1427 01030 6211  URRS,   DATFLD
 1428 01031 1601          TAD I PTRDEV    /GET THE DDB ADDRESS
 1429 01032 3031          DCA CONDDB
 1430 01033 4741          JMS I PSTRIN    /TRANSFER STRING TO USER
 1431 01034 5242           JMP PSTWT0     /INSUFFICIENT NUMBER OF CHARACTERS IN BUFFER
 1432 01035 5567          UUOEXT
 1433             
 1434             /SPECIAL 'RCB' IOT CLEARS THE READER BUFFER
 1435 01036 6211  URCB,   DATFLD
 1436 01037 1601          TAD I PTRDEV    /CLEAR THE ENTIRE READER BUFFER
 1437 01040 4532          CLRBUF
 1438 01041 5567          UUOEXT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 38


 1439 01042 7240  PSTWT0, STA
 1440 01043 3330  L2PTR1, DCA PTRSET      /REMEMBER WHY WE ARE HERE
 1441 01044 6203          CDF CIF         /SELECT F0 AND INHIBIT IMTERRUPTS
 1442 01045 1742          TAD I PTRTIM    /IS THE READER BUSY
 1443 01046 7650          SNA CLA
 1444 01047 6014          RFC             /START THE READER
 1445 01050 7344          CLL STA RAL     /AC=-2
 1446 01051 3742          DCA I PTRTIM    /SET THE READER TIMER
 1447 01052 3070          DCA HSRCNT      /NO LIMIT UNTIL IT'S READ AT LEAST ONE BLOCK WORTH
 1448 01053 2330          ISZ PTRSET      /FROM UUO OR LEVEL 2?
 1449 01054 5537          EXIT            /LEVEL 2 - FINISHED
 1450 01055 7240          STA
 1451 01056 1042          TAD L2SV0       /BACK UP HIS PC FOR A REDO
 1452 01057 3042          DCA L2SV0
 1453 01060 1211          TAD PTRFL
 1454 01061 5567          UUOEXT          /NOW WAIT FOR THE READER
 1455             
 1456 01062 0000  PTRSIZ, 0
 1457 01063 3330          DCA PTRSET      /SAVE POINTER TO CHARACTER COUNT
 1458 01064 2262          ISZ PTRSIZ      /WE ALWAYS SUCCEED
 1459 01065 6203          CDF CIF         /NO INTERRUPTS WHILE WE CHECK THE READER'S STATUS
 1460 01066 1742          TAD I PTRTIM
 1461 01067 7700          SMA CLA         /IS IT STILL RUNNING?
 1462 01070 5306          JMP PTRSI2      /NO - JUST MAKE SURE THE FLAG IS SET
 1463 01071 1040          TAD FRECNT      /HOW'S THE SUPPLY OF FREE CORE
 1464 01072 1126          TAD C7770
 1465 01073 7740          SMA SZA CLA
 1466 01074 1344          TAD PTRFUL      /MINUS NUMBER ALLOWED
 1467 01075 6211          DATFLD
 1468 01076 1730          TAD I PTRSET    /PLUS CURRENT COUNT
 1469 01077 6201          CDF
 1470 01100 7500          SMA
 1471 01101 7240          STA             /SHUT DOWN THE READER AFTER THE NEXT CHARACTER
 1472 01102 3070          DCA HSRCNT
 1473 01103 1070          TAD HSRCNT
 1474 01104 1111          TAD C0100
 1475 01105 7700          SMA CLA
 1476 01106 4330  PTRSI2, JMS PTRSET      /SET THE READER FLAG IN STR1
 1477 01107 5662          JMP I PTRSIZ

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 39


 1478 01110 4330  L2PTR,  JMS PTRSET      /WAKE HIM UP - HE'S HUNG
 1479 01111 1601          TAD I PTRDEV
 1480 01112 7450          SNA             /STILL HAVE A DDB?
 1481 01113 5537          EXIT            /NO
 1482 01114 3016          DCA AXS2        /YES - SAVE IT WE'LL NEED THE JOB NUMBER FROM IT
 1483 01115 1016          TAD AXS2
 1484 01116 1100          TAD C0004
 1485 01117 3003          DCA WS0
 1486 01120 1403          TAD I WS0       /IS IS EMPTY?
 1487 01121 7640          SZA CLA
 1488 01122 5537          EXIT            /NO - SO IT ISN'T OFFICIALLY HUNG YET
 1489 01123 1416          TAD I AXS2      /JOB OWNING PTR
 1490 01124 6201          CDF
 1491 01125 4536          ERROR           /REPORT THE HUNG READER TO HIM
 1492 01126 0006           HUNGDV
 1493 01127 5537          EXIT
 1494             
 1495 01130 0000  PTRSET, 0
 1496 01131 6211          DATFLD
 1497 01132 1201          TAD PTRDEV      /READER'S POSITION IN DEVTBL
 1498 01133 3030          DCA CONDBA
 1499 01134 1211          TAD PTRFL
 1500 01135 4562          JMS I SETFLG    /SET JSPTR IN STR1
 1501 01136 5730          JMP I PTRSET
 1502             
 1503 01137 7045  PTRCHK, DEVCHK
 1504 01140 2324  PTRIOT, UKT1
 1505 01141 1717  PSTRIN, UKREAD
 1506 01142 2617  PTRTIM, TIMPTR
 1507 01143 1761  URCBI,  -6017
 1508 01144 7540  PTRFUL, -240

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 40


 1509             
 1510             /ROUTINE TO HANDLE EASY DECTAPE STUFF
 1511             /LIKE DTSF AND DTRB
 1512             /DTSF ALWAYS SKIPS
 1513             
 1514 01145 2042  UDTRBS, ISZ L2SV0       /BUMP HIS PC
 1515 01146 0044  PTRACA, L2SA            /TRICKY, TRICKY
 1516 01147 4546  UDTRB,  GETJTW          /GET HIS LAST VALUE OF STATUS B
 1517 01150 0002           JOBSTB
 1518 01151 3044          DCA L2SA        /GIVE IT TO USER
 1519 01152 5567          UUOEXT
 1520             
 1521 01153 4000  C4000,  4000
 1522 01154 3734  MCSCQ,  -4044           /COVERS BOTH ^Q AND ^S
 1523             
 1524                     IFNZRO CTRLS-4000       <GLITCH; *.-1>
 1525       1157          IFNZRO .+21&100         <*.+177&7600-21>
 1526             
 1527 01157 0000  CONSQ,  0
 1528 01160 2030          ISZ CONDBA      /POINT TO OUTPUT SIDE IN DEVTBL
 1529 01161 1032          TAD TTCHAR
 1530 01162 7112          CLL RTR
 1531 01163 1354          TAD MCSCQ       /CHECK FOR ^Q AND ^S
 1532 01164 7640          SZA CLA
 1533 01165 5757          JMP I CONSQ     /NEITHER
 1534 01166 1430          TAD I CONDBA
 1535 01167 7450          SNA
 1536 01170 5757          JMP I CONSQ     /DOESNT HAVE AN OUTPUT DDB - SO ^S/^Q MEANS NOTHING
 1537 01171 3171          DCA WS2         /ADDRESS OF OUTPUT DDB
 1538 01172 1571          TAD I WS2
 1539 01173 0121          AND C3777       /CLEAR THE BIT FIRST
 1540 01174 7420          SNL             /NOW WHICH WAS IT?
 1541 01175 1353          TAD C4000       /^S - SET THE BIT TO INHIBIT HIS TTY FROM PRINTING
 1542 01176 3571          DCA I WS2       /SAVE UPDATED STATUS
 1543 01177 7430          SZL             /WHICH WAS IT AGAIN?
 1544 01200 4235          JMS TYPE        /^Q - START HIM TYPING IF HE HAS ANYTHING TO TYPE
 1545 01201 5602          JMP I .+1       /TAKE SUCESSFUL EXIT THROUGH "KEY"
 1546 01202 6325          GIREXT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 41


 1547             
 1548             /*PRINT0        /TYPE CHARACTER
 1549             /MULTI-FIELD ROUTINE TO OUTPUT TO A TTY, PTP, OR LPT
 1550             /CALL:  CONDBA CONTAINS POINTER TO POSITION IN DEVTBL
 1551             /       AC OR TTCHAR CONTINS CHARACTER TO BE OUTPUT
 1552             /       PRINT
 1553             /       NO ROOM IN OUTPUT BUFFER
 1554             /       OK
 1555             
 1556 01203 0000  PRINT0, 0
 1557 01204 7440          SZA             /CHARACTER IN THE AC?
 1558 01205 3032          DCA TTCHAR      /YES - JUST STORE IT FOR NOW
 1559 01206 6214          RDF
 1560 01207 1122          TAD C6203
 1561 01210 3225          DCA PRINTX      /REMEMBER FROM WHENCE WE CAME
 1562 01211 3004          DCA EMPTY       /CLEAR EMPTY BUFFER INDICATOR
 1563 01212 6211  PRINT1, DATFLD
 1564 01213 1430          TAD I CONDBA    /GET ADDRESS OF DDB
 1565 01214 7450          SNA
 1566 01215 5227          JMP PRINT2
 1567 01216 4564          STORE           /STASH THE CHARACTER IN HIS BUFFER
 1568 01217 1255           OUTSIZ         /ADDRESS OF SIZE ROUTINE FOR OUTPUT
 1569 01220 5225          JMP PRINTX      /WOULDN'T FIT
 1570 01221 2203          ISZ PRINT0      /OK - SKIP ON RETURN
 1571 01222 1004          TAD EMPTY       /WAS THE BUFFER EMPTY?
 1572 01223 7640          SZA CLA
 1573 01224 4235          JMS TYPE        /YES - BETTER START THE HARDWARE
 1574 01225 0000  PRINTX,  .-.            /FIELD SELECT
 1575 01226 5603          JMP I PRINT0    /AND BACK
 1576 01227 1030  PRINT2, TAD CONDBA      /NO BUFFER SETUP YET
 1577 01230 6201          CDF
 1578 01231 4542          GETBLK          /CREATE A PSUEDO DDB
 1579 01232 5225           JMP PRINTX     /NO BLOCKS AVAILABLE
 1580 01233 5212          JMP PRINT1
 1581 01234 7566  TTOFLB, TTOFLG
 1582             
 1583 01235 0000  TYPE,   0
 1584 01236 1030          TAD CONDBA      /DEVTBL POINTER
 1585 01237 1314          TAD OUTOFF      /MINUS DIF.
 1586 01240 7110          CLL RAR         /DIVIDE BY 2
 1587 01241 3255          DCA OUTSIZ      /= OUTREG POINTER
 1588 01242 6202          CIF             /NO INTERRUPTS
 1589 01243 1655          TAD I OUTSIZ
 1590 01244 0311          AND C4001
 1591 01245 7640          SZA CLA         /CHECK SERVICE AND CHARACTER FLAGS
 1592 01246 5635          JMP I TYPE      /CHARACTER WILL BE TAKEN BY AN INTERRUPT
 1593 01247 7130          STL RAR
 1594 01250 1655          TAD I OUTSIZ    /SET THE SERVICE FLAG
 1595 01251 3655          DCA I OUTSIZ
 1596 01252 6201          CDF
 1597 01253 3634          DCA I TTOFLB    /SCHEDULE LEVEL 2 TO PRINT IT
 1598 01254 5635          JMP I TYPE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 42


 1599             
 1600 01255 0000  OUTSIZ, 0
 1601 01256 3235          DCA TYPE        /SAVE POINTER TO CHARACTER COUNT
 1602 01257 1635          TAD I TYPE      /CURRENT COUNT
 1603 01260 7510          SPA             /DOES IT INCLUDE A FILLER CHARACTER COUNT?
 1604 01261 0113          AND C0377       /YES - DISREGARD IT
 1605 01262 3235          DCA TYPE        /THE ACTUAL COUNT TO COMPARE WITH
 1606 01263 1040          TAD FRECNT
 1607 01264 0114          AND C0400
 1608 01265 7450          SNA             /OVER 400 BLOCKS OF FREE-CORE?
 1609 01266 1040          TAD FRECNT      /NO - USE THE WHOLE COUNT
 1610 01267 3317          DCA OUTFRE
 1611 01270 1032          TAD TTCHAR
 1612 01271 7700          SMA CLA         /ARE WE COMING FROM THE USER?
 1613 01272 5301          JMP OUTSI1      /NO - THIS IS THE SYSTEM (OR NONSTANDARD INPUT)
 1614 01273 1030          TAD CONDBA
 1615 01274 1313          TAD LPTSIZ
 1616 01275 7640          SZA CLA         /IS THIS TO THE LINE-PRINTER?
 1617 01276 5302          JMP OUTSI2      /NO - MUST BE A NORMAL TTY OR PTP CHARACTER
 1618 01277 1317          TAD OUTFRE      /YES - LPT GETS ROUGHLY 40% OF FREE-SPACE
 1619 01300 1317          TAD OUTFRE
 1620 01301 1317  OUTSI1, TAD OUTFRE
 1621 01302 1317  OUTSI2, TAD OUTFRE
 1622 01303 7041          CIA
 1623 01304 1235          TAD TYPE
 1624 01305 1312          TAD OUTLIM      /FORCE A MARGIN FOR THE FREE-LIST
 1625 01306 7710          SPA CLA         /STILL WITHIN REASONABLE LIMITS?
 1626 01307 2255          ISZ OUTSIZ      /YES - SKIP ON RETURN
 1627 01310 5655          JMP I OUTSIZ
 1628             
 1629 01311 4001  C4001,  4001
 1630 01312 0025  OUTLIM, 25
 1631 01313 5135  LPTSIZ, -DEVTBE-3
 1632 01314 5600  OUTOFF, -OUTDIF

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 43


 1633             /SEARCH FOR JOB IN CORE
 1634             /CALL   TAD JOB #
 1635             /       CORE
 1636             /        MASK
 1637             /       NOT THERE, AC:=0
 1638             /       THERE, SAVE FIELD IN AC
 1639             
 1640             
 1641             /THESE TWO WORDS MUST IMMEDIATELY PRECEDE CORSRC
 1642             /THEY MUST ALSO BE ORIGINED AT CORSRC-2 OR NOTHING WILL WORK
 1643             
 1644             /*CORSRC        /CORTBL SEARCH
 1645             
 1646 01315 0000  CORCNT, 0       /INIT TO (-) THE NUMBER OF USER FIELDS
 1647 01316 0000  CORTBE, 0       /INIT TO (-) THE FIRST LOCKED 'CORTBL' ENTRY
 1648             
 1649             OUTFRE,
 1650 01317 0000  CORSRC, 0               /ENTER WITH BIT PATTERN TO MATCH
 1651 01320 0717          AND I CORSRC    /MASK AS SPECIFIED
 1652 01321 3373          DCA CORSR4      /SAVE THE PATTERN TO FIND
 1653 01322 6214          RDF             /FIGURE OUT WHENCE WE CAME
 1654 01323 1122          TAD C6203
 1655 01324 3352          DCA CORSR3      /SO WE CAN RETURN
 1656 01325 1717          TAD I CORSRC    /GET THE MASK
 1657 01326 3372          DCA CORSR2      /SAVE IT
 1658 01327 2317          ISZ CORSRC      /SKIP PAST MASK IN CALL
 1659 01330 6201          CDF
 1660 01331 1315          TAD CORCNT      /-# ENTRIES TO CHECK
 1661 01332 3015          DCA AXS1        /USED AS COUNTER
 1662 01333 2374  CORSR1, ISZ CORTBP      /INCREMENT TABLE POINTER
 1663 01334 1374          TAD CORTBP
 1664 01335 1316          TAD CORTBE
 1665 01336 7640          SZA CLA         /ARE WE PAST THE END OF 'CORTBL'?
 1666 01337 5342          JMP CORSR5      /NO
 1667 01340 1055          TAD FANCOR
 1668 01341 3374          DCA CORTBP      /YES - REINITIALIZE THE POINTER
 1669 01342 1774  CORSR5, TAD I CORTBP    /GET TABLE ENTRY
 1670 01343 0372          AND CORSR2      /MASK IT
 1671 01344 7041          CIA
 1672 01345 1373          TAD CORSR4      /COMPARE WITH DESIRED ENTRY
 1673 01346 7650          SNA CLA
 1674 01347 5354          JMP CORSR6      /FOUND IT!
 1675 01350 2015          ISZ AXS1        /NOT YET
 1676 01351 5333          JMP CORSR1      /KEEP GOING
 1677 01352 0000  CORSR3, 0               /RETURN WITH AC=0
 1678 01353 5717          JMP I CORSRC
 1679 01354 1050  CORSR6, TAD CORTBA      /WE HAVE IT; GET CORTBL INDEX
 1680 01355 7041          CIA
 1681 01356 1374          TAD CORTBP
 1682 01357 3015          DCA AXS1        /FIELD #
 1683 01360 1373          TAD CORSR4      /WE HAVE TO SET MODE BIT APPROPRIATELY
 1684 01361 0115          AND C0600
 1685 01362 7650          SNA CLA         /IS THIS A PHANTOM?
 1686 01363 1104          TAD C0010       /NO - SET USER-MODE BIT
 1687 01364 1015          TAD AXS1        /SET UP SAVE FIELD
 1688 01365 7106          CLL RTL         /SHIFT AND ADD DATA FIELD
 1689 01366 7004          RAL

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 44


 1690 01367 1015          TAD AXS1
 1691 01370 2317          ISZ CORSRC      /SKIP TO INDICATE SUCCESS
 1692 01371 5352          JMP CORSR3      /BACK
 1693 01372 0000  CORSR2, 0
 1694 01373 0000  CORSR4, 0
 1695 01374 7001  CORTBP, CORTBL  /PERMANENT "ROUND-ROBIN" POINTER

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 45


 1696                     PAGE
 1697             /*GETB          /GET A FREE-BLOCK
 1698             /GET A BUFFER FROM FREE LIST
 1699             /CALL   TAD (ADDRESS TO STORE LINK)
 1700             /       GETBLK
 1701             /       NONE AVAILABLE
 1702             /       OK WITH LINK STORED
 1703             
 1704             CLST0,
 1705             GETDB2,
 1706 01400 0000  GETB,   0
 1707 01401 3277          DCA GETBT       /SAVE ADDRESS TO SAVE PTR
 1708 01402 6214          RDF             /SAVE CALLING FIELD
 1709 01403 1122          TAD C6203
 1710 01404 3236          DCA GETB2       /SO WE CAN GET BACK
 1711 01405 6211          DATFLD
 1712 01406 7240          CLA CMA
 1713 01407 1040          TAD FRECNT
 1714 01410 7510          SPA             /ANY BLOCKS LEFT?
 1715 01411 5235          JMP GETB1       /NO - TAKE ERROR RETURN
 1716 01412 3040          DCA FRECNT      /YES - SAVE THE NEW COUNT
 1717 01413 1037          TAD FREE
 1718 01414 3677          DCA I GETBT     /STORE LINK IN ADDRESS SPECIFIED
 1719 01415 1040          TAD FRECNT
 1720 01416 7650          SNA CLA         /IS THIS THE END?
 1721 01417 5224          JMP .+5         /YES (WE SHOULD REALLY ZERO 'FREE')
 1722 01420 1437          TAD I FREE      /NO - GET THE FORWARD LINK
 1723 01421 7450          SNA             /ZERO?
 1724 01422 4552          REBOOT          /YES - ERROR *****
 1725 01423 3037          DCA FREE        /NO - SET NEW FREE-LIST START
 1726 01424 2200          ISZ GETB        / AND INDICATE SUCCESS
 1727 01425 7240          STA             /NOW WE'LL BE GOOD GUYS
 1728 01426 1677          TAD I GETBT     / AND CLEAR THE BUFFER
 1729 01427 3015          DCA AXS1
 1730 01430 1126          TAD C7770       /8 WORDS TO ZERO
 1731 01431 3277          DCA GETBT
 1732 01432 3415          DCA I AXS1
 1733 01433 2277          ISZ GETBT       /DONE?
 1734 01434 5232          JMP .-2         /NO
 1735 01435 7300  GETB1,  CLA CLL
 1736 01436 0000  GETB2,  0               /YES - RESET THE FIELD
 1737 01437 5600          JMP I GETB      / AND RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 46


 1738             /GET A DATA BLOCK
 1739             /CALL   TAD LINK
 1740             /       GETDDB
 1741             /       NONE AVAILABLE
 1742             /       OK
 1743             
 1744                     IFNZRO DDBTIM-3 <GLITCH; *.-1>
 1745             
 1746             DEVWT0,
 1747             /*GETDB0        /GET DDB BLOCK
 1748 01440 0000  GETDB0, 0
 1749 01441 3311          DCA GETDB1      /ADDRESS OF DDB POINTER (USUALLY IN DEVTBL)
 1750 01442 6214          RDF
 1751 01443 1122          TAD C6203
 1752 01444 3271          DCA GETDB5      /SAVE CALLING FIELD SO WE CAN GET OUT
 1753 01445 6201          CDF
 1754 01446 1311          TAD GETDB1
 1755 01447 4542          GETBLK          /GET A BUFFER FROM FREE-CORE
 1756 01450 5271          JMP GETDB5      /BOO! HISS! THEY'RE FRESH OUT
 1757 01451 6211          DATFLD
 1758 01452 2240          ISZ GETDB0      /SUCCESSFUL RETURN
 1759 01453 7326          CLA CLL CML RTL
 1760 01454 1711          TAD I GETDB1
 1761 01455 3015          DCA AXS1        /SET POINTER TO ASSIGN-TIME
 1762 01456 1033          TAD CLK1        /GET LOW ORDER CLOCK
 1763 01457 7006          RTL             /AND SHIFT BITS 0-2 INTO AC 9-11
 1764 01460 7006          RTL
 1765 01461 0103          AND C0007       /GET MOST SIGNIFCANT BITS FROM LOW ORDER
 1766 01462 3200          DCA GETDB2      /SAVE THEM
 1767 01463 1034          TAD CLK2        /GET HIGH ORDER TIME
 1768 01464 7006          RTL             /SHIFT LEFT 3 PLACES
 1769 01465 7004          RAL
 1770 01466 0126          AND C7770       /KEEP BITS 0-8
 1771 01467 1200          TAD GETDB2      /ADD COMPONENT DERIVED FROM CLK1
 1772 01470 3415          DCA I AXS1      /SAVE IN DDB
 1773 01471 0000  GETDB5, 0               /RETURN
 1774 01472 5640          JMP I GETDB0
 1775             
 1776             
 1777             /*QUEUE0        /REGISTER LEVEL-2 FOR FIELD 1
 1778             /REGISTER LEVEL-2 REQUESTS FOR FIELD 1
 1779             
 1780 01473 0000  QUEUE0, 0
 1781 01474 3413          DCA I L2Q       /STORE THE REQUEST
 1782 01475 6213          CIF DATFLD
 1783 01476 5673          JMP I QUEUE0    / AND RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 47


 1784             
 1785             /AFTER EXECUTING AN IOT FOR A USER PROGRAM,
 1786             /UUOEXT IS CALLED WITH THE AC BITS SET TO
 1787             /INDICATE WHICH STATUS BITS (IF ANY)
 1788             /HAVE BEEN CHANGED (I.E. CLEARED).
 1789             /
 1790             /THIS ROUTINE DOES THE ACTUAL CLEARING OF BITS
 1791             /IF ANY BITS ARE CLEARED, INDICATING A WAIT CONDITION,
 1792             /THEN THE DUMMY WAIT BIT (BIT 11 OF STR1) IS ALSO
 1793             /CLEARED
 1794             
 1795             /CALL:  TAD <WAIT-BIT>
 1796             /       JMS DEVWAT
 1797             /       RETURN
 1798             
 1799             GETBT,
 1800 01477 0000  DEVWAT, 0
 1801 01500 3240          DCA DEVWT0      /STR1 BITS TO CLEAR
 1802 01501 1240          TAD DEVWT0
 1803 01502 7001          IAC             /CLEAR JSWAIT ALSO
 1804 01503 4311          JMS CLSTR1
 1805 01504 1240          TAD DEVWT0      /DID WE CLEAR ANYTHING
 1806 01505 7650          SNA CLA
 1807 01506 2405          ISZ I JOBSWA    /NO, TURN JSWAIT BACK ON
 1808 01507 6201          CDF
 1809 01510 5677          JMP I DEVWAT    /GO AWAY
 1810             
 1811             GETDB1,
 1812 01511 0000  CLSTR1, 0               /ROUTINE TO CLEAR BITS IN STR1
 1813 01512 7040          CMA             /ENTER WITH BITS TO CLEAR IN AC
 1814 01513 3200          DCA CLST0       /SAVE MASK OF BITS TO SAVE
 1815 01514 4546          GETJTW          /GET CURRENT SETTING OF STR1
 1816 01515 0001           JOBSTS+1
 1817 01516 0200          AND CLST0       /CLEAR SELECTED BITS
 1818 01517 6211          DATFLD
 1819 01520 3405          DCA I JOBSWA    /SAVE CLEARED STATUS REGISTER
 1820 01521 5711          JMP I CLSTR1    /RETURN
 1821             
 1822             /WE COME HERE EVERY 5 SECONDS TO FUDGE UP THE TERMINAL
 1823             /HANDLER TO CHECK FOR NON-DRAINING TERMINAL BUFFERS
 1824             
 1825 01522 1331  L2OUT,  TAD CTIMER
 1826 01523 3732          DCA I TIMCOA    /RESET THE TIMER
 1827 01524 1330          TAD CONJMS
 1828 01525 3733          DCA I TTIMEB    / AND FUDGE THE 'CONOUT' CODE
 1829 01526 3734          DCA I TTOFLC    /THEN SCHEDULE 'CONOUT' ON LEVEL-2
 1830 01527 5537          EXIT
 1831             
 1832 01530 4603  CONJMS, JMSTIM
 1833 01531 7773  CTIMER, -5
 1834 01532 2615  TIMCOA, TIMCON
 1835 01533 6424  TTIMEB, TTIMER
 1836 01534 7566  TTOFLC, TTOFLG

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 48


 1837             /SET KEYBOARD BREAK-MASK OR RETURN CURRENT MASK
 1838             
 1839                     IFNZRO DDBBRK-2 <GLITCH; *.-1>
 1840       0076  UKSBRK= C0002   /DDBBRK
 1841             
 1842 01535 1062  UKSB,   TAD JOB
 1843 01536 4565          TTYUSE          /FIND USER'S INPUT TTY DDB
 1844 01537 1076          TAD UKSBRK
 1845 01540 3005          DCA JOBSWA      /POINTS TO BREAK-MASK IN DDB
 1846 01541 1044          TAD L2SA
 1847 01542 6211          DATFLD
 1848 01543 7440          SZA             /IS THIS A NEW MASK?
 1849 01544 5373          JMP UKSB1       /YES - SET IT IN THE DDB
 1850 01545 1405          TAD I JOBSWA    /NO - RETURN THE CURRENT MASK
 1851 01546 5374          JMP UKSB2
 1852             
 1853             /ENABLE THE PROGRAMMATIC CTRL/C AND SET THE RESTART ADDRESS.
 1854             
 1855 01547 6211  USRA,   DATFLD
 1856 01550 1472          TAD I JOBDAT
 1857 01551 7001          IAC
 1858 01552 4550          IOR             /SET THE RESTART ENABLE BIT IN STR0
 1859 01553 0020           JSRSEN
 1860 01554 5364          JMP USRA1
 1861             
 1862             /ENABLE THE USER'S ERROR HANDLING ABILITY:
 1863             /       1) SET THE ERROR ENABLE BIT IN STR0
 1864             /       2) SAVE THE USER'S ERROR ROUTINE ADDRESS
 1865             /
 1866             /JSEREN MAY BE CLEARED BY .RUN, START, OR
 1867             /A USER EXECUTING A "CLEAR STATUS" IOT.
 1868             
 1869 01555 6211  USEA,   DATFLD          /SET JSEREN WHEN USER EXECUTES SEA
 1870 01556 1472          TAD I JOBDAT    /POINTS TO WORD 0 OF JOB DATA AREA
 1871 01557 7001          IAC             /POINTS TO STR0
 1872 01560 4550          IOR             /OR IN JSEREN
 1873 01561 2000           JSEREN
 1874 01562 7344          CLA CLL CMA RAL /AC = -2, TO GET JOB DATA POINTER
 1875             
 1876             /ROUTINE TO SET SWITCH REGISTER, RESTART ADDR., OR ERROR
 1877             /ADDR.  THIS ROUTINE IS VERY SENSITIVE TO THE POSITION
 1878             /OF THESE CELLS IN THE JOB DATA AREA.  USE CAUTION.
 1879             
 1880                     IFNZRO JOBSRA-5 <GLITCH; *.-1>
 1881                     IFNZRO JOBERR-6 <GLITCH; *.-1>
 1882                     IFNZRO JOBSWR-10<GLITCH; *.-1>
 1883 01563 1077  USSW,   TAD C0003       /AC = 3 (SWITCH REGISTER)
 1884 01564 1101  USRA1,  TAD C0005       /AC = AC+5 (RESTART ADDRESS)
 1885 01565 3367          DCA .+2
 1886 01566 4546          GETJTW          /GET THE APPROPRIATE POINTER
 1887 01567 0000           0
 1888 01570 7200          CLA
 1889 01571 1044          TAD L2SA        /GET THE PASSED PARAMETER
 1890 01572 6211          DATFLD
 1891 01573 3405  UKSB1,  DCA I JOBSWA    / AND SAVE IN THE JOB DATA AREA
 1892 01574 3044  UKSB2,  DCA L2SA        /THEN CLEAR HIS AC
 1893 01575 5567          UUOEXT          / AND EXIT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 49


 1894                     PAGE
 1895             
 1896             /HANDLER FOR THE NONSTANDARD CHARACTER INPUT DEVICES.
 1897             
 1898 01600 1076  UNSCI2, TAD C0002
 1899 01601 1225  UNSCI1, TAD UNSCDV
 1900 01602 3204          DCA .+2         /SET THE DEVTBL ENTRY POINTER
 1901 01603 4626          JMS I UNSCHK    / AND CHECK FOR THE DEVICE OWNERSHIP
 1902 01604 0000           .-.
 1903 01605 1204          TAD .-1
 1904 01606 3030          DCA CONDBA      /SET THE POINTER FOR THE FETCH ROUTINE
 1905 01607 1230          TAD UNSCWT
 1906 01610 4627          JMS I UNSCLR    /CLEAR THE NONSTANDARD-DEVICE FLAG
 1907 01611 1430          TAD I CONDBA
 1908 01612 3031          DCA CONDDB
 1909 01613 1031          TAD CONDDB
 1910 01614 1101          TAD UNSCNT
 1911 01615 3263          DCA UKEYC       /NOW POINTS TO FILL-COUNT
 1912 01616 1663          TAD I UKEYC
 1913 01617 7640          SZA CLA         /ANY CHARACTERS IN THE BUFFER?
 1914 01620 1230          TAD UNSCWT      /YES - SET HIS STR1 FLAG
 1915 01621 1405          TAD I JOBSWA
 1916 01622 3405          DCA I JOBSWA
 1917 01623 1230          TAD UNSCWT      /NOW SET THE WAIT-FLAG WE USE
 1918 01624 5233          JMP UKEY1       / AND SHARE THE 'UKEY' CODE
 1919             
 1920 01625 2650  UNSCDV, DEVTBE+10       /DEVTBL ENTRY FOR 'X0'
 1921 01626 7045  UNSCHK, DEVCHK
 1922 01627 1511  UNSCLR, CLSTR1
 1923                     IFNZRO DDBINC-5 <GLITCH; *.-1>
 1924       0101  UNSCNT= C0005   /DDBINC
 1925 01630 0010  UNSCWT, JSPTR           / (FOR LACK OF OUR OWN FLAG)
 1926             
 1927             /KEYBOARD IOTS
 1928             
 1929 01631 4753  UKEY,   JMS I UKEY0A    /CHECK FOR 'SI' MODE & GET HIS DDB
 1930 01632 1350          TAD UKEYWT
 1931 01633 3244  UKEY1,  DCA UKEYFL
 1932 01634 6211          DATFLD
 1933 01635 1031          TAD CONDDB
 1934 01636 1076          TAD UKEYBA
 1935 01637 3003          DCA WS0         /POINTS TO THE BREAK-MASK
 1936 01640 1403          TAD I WS0
 1937 01641 3003          DCA WS0         /SET THE BREAK-MASK FOR 'FETCH'
 1938 01642 4752          JMS I UKEY1A    /WHAT DOES HE WANT TO DO?
 1939 01643 5265           JMP UKEYRS     /READ STRING
 1940 01644 0102  UKEYFL,  JSDEL+JSERR    /DELIMITER FLAG
 1941 01645 5274           JMP UKWAT1     /KSF AND NO CHARACTERS AROUND...
 1942 01646 7010          RAR             /NOW BIT 0 = 2-BIT AND L = 4-BIT
 1943 01647 7710          SPA CLA         /IS BIT SET FOR 6032 (KCC)?
 1944 01650 3044          DCA L2SA        /YES - JUST CLEAR HIS AC
 1945             
 1946             /EVENT TIME 3
 1947 01651 7620          SNL CLA         /IS BIT SET FOR 6034?
 1948 01652 5567          UUOEXT          /NO - JUST EXIT
 1949 01653 6211          DATFLD
 1950 01654 1031          TAD CONDDB

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 50


 1951 01655 4540          FETCH           /YES - GET A CHARACTER
 1952 01656 5270           JMP UKWAIT     /NONE AVAILABLE-RESET PC AND WAIT
 1953 01657 3263          DCA UKEYC       /SAVE CHARACTER
 1954 01660 1351          TAD UKL2SA      /OR INTO USER'S AC
 1955 01661 6201          CDF
 1956 01662 4550          IOR             /IT WOULD PROBABLY BE ADEQUATE TO JAM IT INTO AC.
 1957 01663 0000  UKEYC,   0
 1958 01664 5567          UUOEXT          /AND BACK TO USER
 1959             
 1960             /STRING READ
 1961 01665 4317  UKEYRS, JMS UKREAD      /CALL THE STRING-MOVER
 1962 01666 5270           JMP UKWAIT     /WAIT FOR MORE INPUT
 1963 01667 5567          UUOEXT
 1964             
 1965 01670 7240  UKWAIT, STA             /BACK UP HIS PC
 1966 01671 1042          TAD L2SV0
 1967 01672 3042          DCA L2SV0
 1968 01673 5276          JMP UKWAT2
 1969             
 1970 01674 4754  UKWAT1, JMS I UKLOOP    /CHECK FOR 'JMP .-1' LOOP
 1971 01675 7610          SKP CLA         /NOPE
 1972 01676 1244  UKWAT2, TAD UKEYFL      /YES - SET FLAGS TO WAIT ON
 1973 01677 3263          DCA UKEYC
 1974 01700 7332          CLA CLL CML RTR /AC=2000
 1975 01701 6211          DATFLD
 1976 01702 0431          AND I CONDDB    / AND OFF THE STATUS-BITS
 1977 01703 7450          SNA             /WAS AN 'XOFF' SENT?
 1978 01704 5315          JMP UKWAT3      /NO, JUST WAIT FOR KEYBOARD
 1979 01705 7040          CMA             /CLEAR XON BIT IN DDB
 1980 01706 0431          AND I CONDDB
 1981 01707 3431          DCA I CONDDB
 1982 01710 2030          ISZ CONDBA      /NOW POINTS TO OUTPUT SIDE
 1983 01711 1355          TAD UKXON
 1984 01712 6201          CDF
 1985 01713 4551          PRINT           /SEND OUT A 'XON' TO RESTART THE READER
 1986 01714 5570           WAIT           /NO ROOM - TRY LATER
 1987 01715 1263  UKWAT3, TAD UKEYC       /CLEAR BIT IN STR1
 1988 01716 5567          UUOEXT
 1989             
 1990             /ROUTINE TO READ CHARACTERS & TRANSFER TO THE USER'S STRING
 1991             /BREAK-MASK IS ASSUMED TO BE IN 'WS0'.
 1992 01717 0000  UKREAD, 0
 1993 01720 1044          TAD L2SA
 1994 01721 7001          IAC
 1995 01722 3004          DCA WS1         /POINTER TO USER'S BUFFER ADDRESS
 1996 01723 4171          UDF
 1997 01724 1404          TAD I WS1
 1998 01725 3016          DCA AXS2        /POINTER TO THE BUFFER
 1999 01726 6211  UKRD1,  DATFLD
 2000 01727 1031          TAD CONDDB
 2001 01730 4540          FETCH           /FETCH A WORD FOR HIM
 2002 01731 5717           JMP I UKREAD   /FRESH OUT - JUST RETURN
 2003 01732 4171          UDF
 2004 01733 3032          DCA TTCHAR
 2005 01734 1032          TAD TTCHAR
 2006 01735 3416          DCA I AXS2      /PASS IT BACK TO HIS BUFFER
 2007 01736 2404          ISZ I WS1       / AND UPDATE HIS BUFFER POINTER

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 51


 2008 01737 7000          NOP
 2009 01740 1003          TAD WS0
 2010 01741 2444          ISZ I L2SA      /DONE?
 2011 01742 4531          BREAK           / OR IS THIS A BREAK CHARACTER?
 2012 01743 7610           SKP CLA        /YES
 2013 01744 5326          JMP UKRD1       /NO - BACK FOR MORE
 2014 01745 3044          DCA L2SA        /YES - CLEAR HIS AC
 2015 01746 2317          ISZ UKREAD
 2016 01747 5717          JMP I UKREAD    / AND SKIP ON RETURN
 2017             
 2018                     IFNZRO DDBBRK-2 <GLITCH; *.-1>
 2019       0076  UKEYBA= C0002   /DDBBRK
 2020 01750 0102  UKEYWT, JSDEL+JSERR
 2021 01751 0044  UKL2SA, L2SA
 2022 01752 2324  UKEY1A, UKT1
 2023 01753 2304  UKEY0A, UKT0
 2024 01754 0753  UKLOOP, IOWAIT
 2025 01755 0221  UKXON,  221     /XON

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 52


 2026             
 2027             /FIELD 0 DISPATCH FOR THE RK05 & DECTAPE HANDLERS IN FIELD 1.
 2028             
 2029 01756 1101  URK050, TAD C0005
 2030 01757 1076  UDTXA0, TAD C0002
 2031 01760 7110          CLL RAR         /AC=1, L=0 FOR DT; AC=3, L=1 FOR RK
 2032 01761 6212          CIF DATFLD-1
 2033 01762 5763          JMP I .+1       /OFF TO FIELD 1 UUO SERVICE
 2034 01763 1415           UUDTRK
 2035             
 2036             
 2037             /HANDLER FOR THE 'DUP' AND 'UND' IOTS.
 2038             
 2039                     IFNZRO DUPL-200 <GLITCH; *.-1>
 2040             
 2041 01764 1002  UUND,   TAD C0200
 2042 01765 3003  UDUP,   DCA WS0         /SAVE THE BIT TO SET
 2043 01766 1062          TAD JOB
 2044 01767 4565          TTYUSE
 2045 01770 3004          DCA WS1         /SET POINTER TO INPUT DDB
 2046 01771 6211          DATFLD
 2047 01772 1404          TAD I WS1
 2048 01773 0377          AND CMDUPL      /CLEAR THE DUPLEX BIT
 2049 01774 1003          TAD WS0         / AND SET IT AS CALLED FOR
 2050 01775 3404          DCA I WS1
 2051 01776 5567          UUOEXT
 2052             
 2053 01777 7577  CMDUPL, -DUPL-1

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 53


 2054                     PAGE
 2055             /
 2056             /SINGLE INSTRUCTION NULL-JOB - AC INCREMENTED WHEN SCHEDULED.
 2057 02000 5200  NULJOB, JMP .
 2058             
 2059             /KEYBOARD SERVICE
 2060             /ENTERED WHENEVER CHARACTER IS RECEIVED --- HIGHEST PRIORTY ON LEVEL 2
 2061             
 2062 02001 0000  KLOST,  0       /NUMBER OF CHARACTERS LOST BECAUSE OF OVERFLOW SINCE THE SYSTEM WAS LAST STARTED
 2063 02002 5140  CONDVE, -DEVTBE
 2064 02003 4010  CONNSF, JSTIME+JSPTR    /USED FOR NONSTANDARD DEVICES
 2065 02004 7572  KEYA,   KEYC
 2066 02005 0304  KEYB,   RINGIN          /POINTER TO INPUT RING BUFFER
 2067 02006 7742  KEYCNT, -INPUTS
 2068 02007 7742  KEYSIZ, -INPUTS         /SIZE OF KEYBOARD INPUT RING BUFFER
 2069 02010 1235  TYPEA,  TYPE
 2070             
 2071 02011 3562  CONIN,  DCA I SETFLG    /CLEAR THE SCHEDULER REQUEST FLAG
 2072 02012 7240  CONIN3, STA
 2073 02013 6201          CDF
 2074 02014 6002          IOF
 2075 02015 1604          TAD I KEYA
 2076 02016 7500          SMA             /ARE WE FINISHED
 2077 02017 5225          JMP CONIN4      /NO
 2078 02020 6201  CONEXT, CDF
 2079 02021 0562          AND I SETFLG    /DID WE AROUSE ANYONE?
 2080 02022 7640          SZA CLA
 2081 02023 5556          RSCHED          /IF NULL JOB IS RUNNING WE MAY TERMINATE IT
 2082 02024 5537          EXIT
 2083             
 2084 02025 3604  CONIN4, DCA I KEYA      /DECREMENT COUNT
 2085 02026 1604          TAD I KEYA      /CHECK FOR OVERFLOW
 2086 02027 1207          TAD KEYSIZ
 2087 02030 7740          SMA SZA CLA
 2088 02031 5277          JMP CONIN0      /OVERFLOW  - SKIP AROUND TO THE FIRST ENTRY
 2089 02032 6211          DATFLD
 2090 02033 1605          TAD I KEYB      /GRAB A CHARACTER FROM THE RING BUFFER
 2091 02034 3032          DCA TTCHAR
 2092 02035 2205          ISZ KEYB
 2093 02036 6001          ION
 2094 02037 1605          TAD I KEYB      /LINE NUMBER
 2095 02040 7104          CLL RAL         /TIMES 2
 2096 02041 1053          TAD DEVTBA
 2097 02042 3264          DCA CONINA      /POSITION IN DEVICE TABLE
 2098 02043 1264          TAD CONINA
 2099 02044 1202          TAD CONDVE
 2100 02045 7500          SMA             /IS THIS A KEYBOARD?
 2101 02046 5312          JMP CONASD      /NO - AN ASSIGNABLE DEVICE (HSR, R2, X0, ETC)
 2102 02047 0664          AND I CONINA
 2103 02050 7640          SZA CLA         /ANY INPUT DDB HERE?
 2104 02051 5262          JMP CONIN1
 2105 02052 1264          TAD CONINA      /NO DDB SETUP YET
 2106 02053 6201          CDF
 2107 02054 4542          GETBLK          /ESTABLISH A PSUEDO DDB FOR THE TIME BEING
 2108 02055 5302           JMP CONIN2     /NONE AVAILABLE - DON'T BOTHER WITH BELLS
 2109 02056 6211          DATFLD
 2110 02057 1664          TAD I CONINA

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 54


 2111 02060 4550          IOR
 2112 02061 1000           DSI            /SET NEW CONSOLE IN SI MODE
 2113             
 2114 02062 6201  CONIN1, CDF
 2115 02063 4547          GIR             /PROCESS THIS CHARACTER
 2116 02064 0000  CONINA,  .-.
 2117 02065 7410          SKP             /NO ROOM - RING THE BELL
 2118 02066 5302          JMP CONIN2
 2119 02067 6211          DATFLD
 2120 02070 1430          TAD I CONDBA    /POINTS TO THE OUTPUT SIDE
 2121 02071 7450          SNA
 2122 02072 5302          JMP CONIN2      /NO DDB DON'T BOTHER WITH BELLS
 2123 02073 4550          IOR
 2124 02074 1000           DBELL          /RING-A-DING TOO BAD!!
 2125 02075 4610          JMS I TYPEA     /REMEMBER WE WANT TO RING HIS CHIME
 2126 02076 5302          JMP CONIN2
 2127 02077 2201  CONIN0, ISZ KLOST       /COUNT A LOST CHARACTER
 2128 02100 0304  KEYBA,  RINGIN          /NOP
 2129 02101 2205          ISZ KEYB
 2130 02102 2205  CONIN2, ISZ KEYB
 2131 02103 2206          ISZ KEYCNT      /END OF RING BUFFER?
 2132 02104 5212          JMP CONIN3      /NO
 2133 02105 1300          TAD KEYBA
 2134 02106 3205          DCA KEYB        /RESET POINTER
 2135 02107 1207          TAD KEYSIZ
 2136 02110 3206          DCA KEYCNT      /AND THE COUNT
 2137 02111 5212          JMP CONIN3
 2138             
 2139 02112 7640  CONASD, SZA CLA         /IS THIS THE HSR?
 2140 02113 5336          JMP CONAS2      /NO
 2141 02114 1664          TAD I CONINA
 2142 02115 7450          SNA
 2143 02116 5333          JMP CONAS1      /OOPS - HE RELEASED IT
 2144 02117 4564          STORE           /STASH IT'S CHARACTER AWAY
 2145 02120 1062           PTRSIZ         /SIZE CHECK ROUTINE
 2146 02121 7410          SKP
 2147 02122 5302          JMP CONIN2      /ALL IS WELL
 2148 02123 6201          CDF             /OOPS  - RAN OUT OF FREE CORE
 2149 02124 6002          IOF
 2150 02125 2604          ISZ I KEYA      /UN-COUNT THE CHARACTER
 2151 02126 7240          CLA CMA
 2152 02127 1205          TAD KEYB
 2153 02130 3205          DCA KEYB        /BACK UP THE RING BUFFER POINTER
 2154 02131 5732          JMP I .+1       /AND BACK TO THE REMAINDER OF L2 SERVICE
 2155 02132 4057          L2EX0           /JUST PAST THE HI-PRIORITY CHECK POINT
 2156             
 2157 02133 7240  CONAS1, CLA CMA
 2158 02134 3070          DCA HSRCNT      /STOP THE READER
 2159 02135 5302          JMP CONIN2
 2160             
 2161 02136 1264  CONAS2, TAD CONINA
 2162 02137 3030          DCA CONDBA      /SET 'CONDBA' FOR 'OUTSIZ' & 'SETFLG'
 2163 02140 1664          TAD I CONINA
 2164 02141 7450          SNA             /ANY INPUT DDB?
 2165 02142 5302          JMP CONIN2      /NO - IT MUST NOT BE ASSIGNED - JUST IGNORE IT
 2166 02143 4564          STORE           /YES - STORE THE CHARACTER
 2167 02144 1255           OUTSIZ

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 55


 2168 02145 5302          JMP CONIN2      /NO ROOM - JUST FORGET IT
 2169 02146 1203          TAD CONNSF
 2170 02147 4562          JMS I SETFLG    / AND SET THE 'STR1' FLAG
 2171 02150 5302          JMP CONIN2

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 56


 2172             /CLEAR BUFFER
 2173             /CALL   TAD DDB ADDRESS
 2174             /       CLRBUF
 2175             /       RETURN  ('DATFLD' SET)
 2176             
 2177                     IFNZRO DDBINP-4 <GLITCH; *.-1>
 2178       0100  CLRINP= C0004   /DDBINP
 2179                     IFNZRO DDBOUP-7 <GLITCH; *.-1>
 2180             
 2181 02151 0000  CLRBF0, 0               /ENTER WITH DDB ADDRESS
 2182 02152 7450          SNA             /LEGAL ADDRESS?
 2183 02153 5751          JMP I CLRBF0    /NO - JUST RETURN
 2184 02154 1100          TAD CLRINP      /...+4
 2185 02155 3377          DCA CLRBU1      /POINTS TO FILL POINTER
 2186 02156 6211          DATFLD
 2187 02157 1777          TAD I CLRBU1
 2188 02160 7650          SNA CLA         /BUFFER ALREADY EMPTY?
 2189 02161 5751          JMP I CLRBF0    /YES
 2190 02162 3777          DCA I CLRBU1    /FILL POINTER = 0
 2191 02163 2377          ISZ CLRBU1
 2192 02164 3777          DCA I CLRBU1    /CLEAR THE CHARACTER COUNT
 2193 02165 2377          ISZ CLRBU1
 2194 02166 2377          ISZ CLRBU1
 2195 02167 1777          TAD I CLRBU1
 2196 02170 6201          CDF
 2197 02171 4555          RETBLK          /NO - RETURN THE BUFFER
 2198 02172 7440          SZA             /AT THE END OF THE CHAIN?
 2199 02173 5371          JMP .-2         /NO
 2200 02174 6211          DATFLD
 2201 02175 3777          DCA I CLRBU1    /CLEAR EMPTY POINTER
 2202 02176 5751          JMP I CLRBF0    / AND RETURN
 2203             
 2204 02177 0000  CLRBU1, 0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 57


 2205                     PAGE
 2206             
 2207             /HANDLER FOR NONSTANDARD CHARACTER OUTPUT DEVICES.
 2208             /FOR LACK OF ANY OTHER CONTROL BIT, THESE SHARE THE
 2209             /LINE PRINTER SCHEDULING BIT.
 2210             
 2211 02200 1076  UNSCO2, TAD C0002       /REFERENCE DEVICE 4013
 2212 02201 1102  UNSCO1, TAD C0006       / AND DEVICE 4011
 2213             
 2214             /LINE PRINTER 'UUO' HANDLER
 2215             
 2216 02202 1212  ULPT,   TAD ULPTDV
 2217 02203 3205          DCA .+2         /SET THE DEVTBL ENTRY POINTER
 2218 02204 4653          JMS I UPTLPA    /CHECK FOR HIS OWNERSHIP
 2219 02205 2643           DEVTBE+3
 2220 02206 1205          TAD .-1
 2221 02207 3030          DCA CONDBA      /HE OWNS IT - SET THE DEVTBL POINTER
 2222 02210 1252          TAD UJSTEL
 2223 02211 5223          JMP ULPT1       /JSLPT = 40 = 20 + 20 (JSTEL)
 2224             
 2225 02212 2643  ULPTDV, DEVTBE+3
 2226             
 2227             /HANDLER FOR THE PAPERTAPE PUNCH
 2228             
 2229 02213 4653  UPTP,   JMS I UPTLPA    /CHECK FOR OWNERSHIP
 2230 02214 2641           DEVTBE+1
 2231 02215 1214          TAD .-1
 2232 02216 3030          DCA CONDBA      /HE OWNS IT - SET THE DEVTBL POINTER
 2233 02217 1100          TAD UJSPTP
 2234 02220 5224          JMP UPTP1       /SHARE THE 'UTEL' CODE
 2235             
 2236             /TELEPRINTER IOTS
 2237             
 2238 02221 4304  UTEL,   JMS UKT0        /CHECK FOR 'SI' & GET THE DDB
 2239 02222 2030          ISZ CONDBA      / (NOW POINTS TO OUTPUT SIDE)
 2240 02223 1252  ULPT1,  TAD UJSTEL
 2241 02224 3227  UPTP1,  DCA UTELFL      /SET THE FLAG-BIT
 2242 02225 4324          JMS UKT1        /WHAT IS REQUESTED BY USER?
 2243 02226 5254           JMP UTELS      /SEND A STRING (6XX0)
 2244 02227 0020  UTELFL,  JSTEL          /DELIMITER FLAG
 2245 02230 5703           JMP I UTELSK   /FLAG TEST & NO ROOM - JUST SKIP FOR NOW
 2246 02231 7650          SNA CLA         /IS IT A 6044?
 2247 02232 5567          UUOEXT          /NO - IGNORE 6XX2 IOTS
 2248 02233 1044          TAD L2SA        /6044 (POSSIBLY MICRO CODED)
 2249 02234 7104          CLL RAL
 2250 02235 7130          CLL CML RAR     /FORCE THE CHARACTER (-) NONZERO
 2251 02236 4551          PRINT           /BUFFER UP THE CHARACTER
 2252 02237 7410           SKP            /NO ROOM
 2253 02240 5567          UUOEXT
 2254 02241 7240          CLA CMA
 2255 02242 1042          TAD L2SV0
 2256 02243 3042          DCA L2SV0       /BACK UP THE PC TO TRY LATER
 2257 02244 5250          JMP UTEL2
 2258             
 2259 02245 3044  UTEL1,  DCA L2SA        /CLEAR HIS AC
 2260 02246 1304          TAD UTELSW
 2261 02247 7650          SNA CLA         /COULD WE FEED HIM ANYTHING AT ALL?

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 58


 2262 02250 1227  UTEL2,  TAD UTELFL      /NO - PUT HIM TO SLEEP
 2263 02251 5567          UUOEXT
 2264             
 2265                     IFNZRO JSPTP-4          <GLITCH; *.-1>
 2266       0100  UJSPTP= C0004
 2267                     IFNZRO JSTEL^2-JSLPT    <GLITCH; *.-1>
 2268 02252 0020  UJSTEL, JSTEL
 2269 02253 7045  UPTLPA, DEVCHK
 2270       0003  UTELC=  WS0
 2271             
 2272             /STRING-OUTPUT HANDLER
 2273             
 2274 02254 4171  UTELS,  UDF
 2275 02255 1444          TAD I L2SA
 2276 02256 7650          SNA CLA         /ANY WORD-COUNT LEFT?
 2277 02257 5301          JMP UTELS2      /NO - JUST EXIT
 2278 02260 3304          DCA UTELSW      /CLEAR THE "SOMETHING FED" SWITCH
 2279 02261 1044          TAD L2SA
 2280 02262 7001          IAC
 2281 02263 3003          DCA UTELC       /POINTS TO ADDRESS OF STRING IN USER AREA
 2282 02264 1403          TAD I UTELC     /GET ADDRESS-1 OF STRING
 2283 02265 3016          DCA AXS2        /SAVE POINTER TO STRING
 2284 02266 1416  UTELS1, TAD I AXS2      /GET CHARACTER FROM USER
 2285 02267 7104          CLL RAL
 2286 02270 7130          CLL CML RAR     / FORCE IT (-) NONZERO
 2287 02271 6201          CDF
 2288 02272 4551          PRINT           /BUFFER THE CHARACTER
 2289 02273 5245           JMP UTEL1      /NO ROOM - TRY AGAIN LATER
 2290 02274 4171          UDF
 2291 02275 2403          ISZ I UTELC     /INCREMENT THE USER'S BUFFER ADDRESS
 2292 02276 2304          ISZ UTELSW      / AND SET THE 'FED' SWITCH (MAY GET SKIPPED)
 2293 02277 2444          ISZ I L2SA      /BUMP USER'S WORD COUNT
 2294 02300 5266          JMP UTELS1      /KEEP GOING
 2295 02301 3044  UTELS2, DCA L2SA        /ALL DONE - CLEAR HIS AC
 2296 02302 5703          JMP I .+1       / AND SKIP ON EXIT
 2297 02303 0334  UTELSK, UUOEX2
 2298             
 2299             /ROUTINE TO CHECK FOR 'SI' AND GET THE DDB POINTER
 2300             
 2301                     IFNZRO DSI-1000 <GLITCH; *.-1>
 2302       0120  UKTSI=  C1000   /DSI
 2303             UTELSW,
 2304 02304 0000  UKT0,   0
 2305 02305 1062          TAD JOB
 2306 02306 4565          TTYUSE          /GET THE INPUT DDB POINTER
 2307 02307 3031          DCA CONDDB
 2308 02310 6211          DATFLD
 2309 02311 1431          TAD I CONDDB
 2310 02312 6201          CDF
 2311 02313 0120          AND UKTSI
 2312 02314 7650          SNA CLA         /IS HE IN 'SI' INPUT MODE?
 2313 02315 5704          JMP I UKT0      /NO - JUST CONTINUE
 2314 02316 4546          GETJTW          /YES - GET HIS WAIT-MASK
 2315 02317 0003           JOBWMK
 2316 02320 7200          CLA
 2317 02321 6211          DATFLD
 2318 02322 3405          DCA I JOBSWA    / AND PUT HIM TO SLEEP; SI WILL WAKE HIM LATER

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 59


 2319 02323 5553          REDO
 2320             
 2321             /ROUTINE TO ANALYZE IOT'S
 2322             /CALLING SEQUENCE
 2323             /       IOT IN UUOCAL
 2324             /       JMS UKT1
 2325             /       RETURN FOR STRING IOT
 2326             /       FLAG TO CHECK IN STR1
 2327             /       RETURN FOR NON SKIPPING FLAG TESTS
 2328             /       RETURN FOR SKIPPING FLAG TEST OR EVENT TIMESS 2 AND 4
 2329             /               (AC=BIT 9 OF IOT; LINK=BIT 10)
 2330 02324 0000  UKT1,   0
 2331 02325 1004          TAD UUOCAL
 2332 02326 0103          AND C0007
 2333 02327 7450          SNA             /STRING?
 2334 02330 5724          JMP I UKT1      /YES
 2335 02331 2324          ISZ UKT1
 2336 02332 7110          CLL RAR         /NO
 2337 02333 7420          SNL             /SKIP TEST?
 2338 02334 5347          JMP UKT12       /NO
 2339 02335 7640          SZA CLA         /YES - ANYTHING ELSE SET?
 2340 02336 5567          UUOEXT          /YES - BAD MICRO-CODING (TREAT AS NOP)
 2341 02337 4546          GETJTW          /YES, IS IT POSITIVE OR NEGATIVE
 2342 02340 0001           JOBSTS+1
 2343 02341 0724          AND I UKT1      /FLAG TO CHECK
 2344 02342 7112          CLL RTR         / (IGNORE THE 'JSERR' FLAG)
 2345 02343 2324          ISZ UKT1        /INDEX PAST ARGUMENT
 2346 02344 7650          SNA CLA         /FLAG SET?
 2347 02345 5724          JMP I UKT1      /NO - DON'T SKIP
 2348 02346 5703          JMP I UTELSK    /YES - SKIP ON RETURN
 2349 02347 2324  UKT12,  ISZ UKT1
 2350 02350 2324          ISZ UKT1
 2351 02351 7110          CLL RAR
 2352 02352 5724          JMP I UKT1      /INDEX RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 60


 2353             /*SLEEP         /PUT THE JOB TO SLEEP
 2354             /WE GOT A 'DRL' ERROR ON THE DISC - ASSUME IT WAS THE
 2355             /ACTIVE JOB DOING 'EAE' STUFF AND PUT IT TO SLEEP.
 2356             
 2357 02353 7240  SLEEP1, STA
 2358 02354 1017          TAD DSKPTR      /BACK UP DSKPTR
 2359 02355 3017          DCA DSKPTR
 2360 02356 4541  SLEEP2, JMS I FIUSER    /NOW START UP THE I/O AGAIN
 2361 02357 1062  SLEEP,  TAD JOB
 2362 02360 7650          SNA CLA         /WAS ANY JOB ACTIVE?
 2363 02361 5537          EXIT            /NO - JUST EXIT & HOPE IT WORKS
 2364 02362 5763          JMP I .+1       /YES - GO PUT IT TO SLEEP FOR 2 SECONDS
 2365 02363 4424          DOXSTM
 2366             
 2367             /*OVERLA        /DISC TERMINATION FOR OVERLAYS
 2368 02364 5353  OVERLA, JMP SLEEP1      /PUT EAE TO SLEEP
 2369 02365 5766          JMP I .+1       /OK, FINISH IT UP
 2370 02366 5764          OVERL1

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 61


 2371             
 2372                     IFNZRO .+16&100 <*.+177&7600-16>        /MAGIC!
 2373             
 2374             /LEVEL-1 INTERRUPT CODE TO HANDLE USER IOT INTERRUPTS.
 2375             /WE MUST CHECK THE USER IOT FLAG BEFORE ANYTHING ELSE,
 2376             /EVEN THE CLOCK FLAG.  OTHERWISE, WE COULD TRIP ON
 2377             /SOMETHING ELSE FIRST AND LOSE THE USER'S IOT LOCATION.
 2378             
 2379       0004  UUOCAL= WS1
 2380             
 2381 02367 3044  UUO0,   DCA L2SA        /SAVE USER'S AC
 2382 02370 7012          RTR
 2383 02371 3043          DCA L2SVLK      / AND LINK
 2384 02372 1000          TAD 0
 2385 02373 3042          DCA L2SV0       / AND THE PC
 2386 02374 6234          RIB
 2387 02375 3041          DCA L2SF        / AND FIELDS & MODE
 2388 02376 6204          CINT            /CLEAR THE USER-INTERRUPT FLAG
 2389 02377 6001          ION             / AND ENABLE INTERRUPT - ZAP!! WE'RE IN LEVEL-2
 2390 02400 7240          STA
 2391 02401 1042          TAD L2SV0       /BACK UP USER PC TO POINT TO IOT IN QUESTION
 2392 02402 3004          DCA UUOCAL
 2393 02403 7240          STA             /GET POINTER TO USER PARAMETERS-1
 2394 02404 1044          TAD L2SA
 2395 02405 3367          DCA UUSRC       /SAVE FOR POSSIBLE BLT CALL
 2396 02406 4735          JMS I UUOUDF    /SET USER DATA FIELD SELECT
 2397 02407 4171          UDF             /SELECT USER DATA FIELD
 2398 02410 1404          TAD I UUOCAL    /GET THE IOT THAT CAUSED ENTRY HERE
 2399 02411 6201          CDF
 2400 02412 3004          DCA UUOCAL      /SAVE IT
 2401 02413 1004          TAD UUOCAL      /IS IT AN IOT OR A GROUP 2 OPERATE
 2402 02414 0120          AND C1000
 2403 02415 7640          SZA CLA
 2404 02416 5730          JMP I UHALTA    /IT'S A HLT, OSR, OR SOME COMBINATION
 2405 02417 1331          TAD UUOTBA      /IT'S AN IOT; NOW FIGURE OUT WHICH ONE
 2406 02420 3366          DCA UUOSRL      /SET LOW END OF TABLE
 2407 02421 1333          TAD UUOT1A
 2408 02422 3336          DCA UUOSRH      / AND THE ENTRY-LIMIT
 2409             
 2410             /FIRST SEARCH FOR COMBINED RESIDENT IOTS (I.E. DEVICES)
 2411 02423 1004          TAD UUOCAL      /FIRST SEE IF IT MIGHT BE MICRO-CODED
 2412 02424 0116          AND C0770       /ZAP OFF THE MICRO PART AND THE 6000
 2413 02425 4272          JMS UUOSR       /SEARCH FOR THE IOT
 2414 02426 5263          JMP UUO3        /NOT FOUND
 2415 02427 1772  UUO1,   TAD I UUOPTR
 2416 02430 7104          CLL RAL
 2417 02431 7710          SPA CLA         /IS THIS A 'LONG' FIP IOT
 2418 02432 5236          JMP .+4         /YES
 2419 02433 1004          TAD UUOCAL
 2420 02434 0113          AND C0377       /NO - ZAP BITS 0-3 SO FIP FREES PARAMETER BLOCK
 2421 02435 3004          DCA UUOCAL
 2422 02436 7620          SNL CLA         /IS 'PRIVILEGE' REQUIRED FOR THIS?
 2423 02437 5245          JMP UUO2        /NO
 2424 02440 4546          GETJTW          /YES - GET HIS STATUS WORD
 2425 02441 0000           JOBSTS
 2426 02442 0114          AND UUOPRV
 2427 02443 7650          SNA CLA         /DOES THIS USER HAVE PRIVILEGE NOW?

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 62


 2428 02444 5566          JMP I UUOERA    /NO - "ILLEGAL IOT"
 2429 02445 1372  UUO2,   TAD UUOPTR
 2430 02446 1332          TAD UUOTLL
 2431 02447 3372          DCA UUOPTR      /NOW POINTS TO DISPATCH ADDRESS OR PARAMETER COUNT
 2432 02450 1772          TAD I UUOPTR
 2433 02451 3371          DCA UUOLNK
 2434 02452 1371          TAD UUOLNK
 2435 02453 1111          TAD C0100
 2436 02454 0326          AND UU7600
 2437 02455 7640          SZA CLA         /IS THIS ZERO OR A PARAMETER COUNT?
 2438 02456 5771          JMP I UUOLNK    /NO - MUST BE RESIDENT ADDRESS; DISPATCH TO IT
 2439 02457 1372          TAD UUOPTR
 2440 02460 4336          JMS GETUSP      /YES - BUILD THE PARAMETER BLOCK FOR 'FIP'
 2441 02461 5662          JMP I .+1       /THEN SHARE SOME 'UFILE' CODE TO CALL 'FIP'
 2442 02462 4751          UUOFIP
 2443             
 2444 02463 1334  UUO3,   TAD UUOT2A
 2445 02464 3336          DCA UUOSRH      /SET THE ENTRY LIMIT
 2446 02465 1004          TAD UUOCAL
 2447 02466 0117          AND C0777
 2448 02467 4272          JMS UUOSR       /SEARCH FOR THE WHOLE THING
 2449             /       JMP I UUOERA    /NOT FOUND - "ILLEGAL IOT"
 2450 02470 5567          UUOEXT          /NO - IGNORE UNKNOWN IOTS
 2451 02471 5227          JMP UUO1        /YES - FIND THE DISPATCH ADDRESS
 2452             
 2453             /ROUTINE TO PEFORM A BINARY SEARCH ON THE TABLE OF IOTS.
 2454             
 2455 02472 0000  UUOSR,  0
 2456 02473 7041          CIA
 2457 02474 3371          DCA UUOLNK
 2458 02475 1366  UUOSR1, TAD UUOSRL
 2459 02476 7041          CIA
 2460 02477 7001          IAC
 2461 02500 1336          TAD UUOSRH
 2462 02501 7550          SNA SPA         /HAVE THE LIMITS BEEN REVERSED?
 2463 02502 5326          JMP UUOSR4      /YES - ENTRY NOT FOUND
 2464 02503 7110          CLL RAR
 2465 02504 1366          TAD UUOSRL
 2466 02505 3372          DCA UUOPTR      /NO - SET NEW BISECTING POINTER
 2467 02506 1772          TAD I UUOPTR
 2468 02507 0117          AND C0777
 2469 02510 1371          TAD UUOLNK
 2470 02511 7450          SNA             /IS THIS THE ONE WE WANT?
 2471 02512 5325          JMP UUOSR3      /YES
 2472 02513 7710          SPA CLA         /NO - ARE WE TOO HIGH?
 2473 02514 5321          JMP UUOSR2      /NO - MUST BE TOO LOW
 2474 02515 7240          CLA CMA
 2475 02516 1372          TAD UUOPTR
 2476 02517 3336          DCA UUOSRH      /YES - BACK DOWN THE TOP LIMIT
 2477 02520 5275          JMP UUOSR1
 2478 02521 7201  UUOSR2, CLA IAC
 2479 02522 1372          TAD UUOPTR
 2480 02523 3366          DCA UUOSRL      /BRING UP THE BOTTOM LIMIT
 2481 02524 5275          JMP UUOSR1
 2482 02525 2272  UUOSR3, ISZ UUOSR       /FOUND THE ENTRY - SKIP ON RETURN
 2483             UU7600,
 2484 02526 7600  UUOSR4, 7600            /'CLA' AND -200

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 63


 2485 02527 5672          JMP I UUOSR
 2486             
 2487 02530 4245  UHALTA, UHALT
 2488                     IFNZRO JSPRIV-400       <GLITCH; *.-1>
 2489       0114  UUOPRV= C0400   /JSPRIV
 2490 02531 3327  UUOTBA, UUOTBL
 2491 02532 0070  UUOTLL, UUODTB-UUOTBL
 2492 02533 3340  UUOT1A, UUOT1E
 2493 02534 3416  UUOT2A, UUOT2E
 2494 02535 3771  UUOUDF, UDFSET

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 64


 2495             /THIS ROUTINE COPIES THE PARAMETERS SUPPLIED BY THE
 2496             /USER PROGRAM INTO *BLOCK IN FREE CORE, WHICH IS POINTED
 2497             /TO BY JOBLNK.
 2498             /THE IOT ITSELF IS SAVED IN THE FIRST WORD OF THE PARAMETER BLOCK
 2499             /IF NO ARGUMENTS ARE REQUIRED, JOBLNK CONTAINS THE IOT,
 2500             /RATHER THAN A POINTER TO THE IOT PARAMETER BLOCK.
 2501             /FIP CAN TELL BY EXAMING BITS 0-3 OF JOBLNK: IF THEY ARE
 2502             /NON-ZERO; JOBLNK IS AN ADDRESS. IF ZERO; JOBLNK IS THE IOT ITSELF
 2503             /NOW YOU KNOW WHY THE START OF THE  FREE CORE LIST MUST ALWAYS BE
 2504             /ON OR AFTER 400 OCTAL IN FIELD ONE?
 2505             
 2506             
 2507             UUOSRH,
 2508 02536 0000  GETUSP, 0               /ENTER WITH PTR -# ARGUMENTS TO GET
 2509 02537 3372          DCA UUOPTR      /SAVE IT
 2510 02540 7344          CLL CLA CMA RAL
 2511 02541 1040          TAD FRECNT
 2512 02542 7750          SPA SNA CLA     /CAN WE GET PARAMETER BLOCKS?
 2513 02543 5553          REDO            /NO-TRY LATER
 2514 02544 1072          TAD JOBDAT      /OK-NOW  GET PTR TO JOBLNK
 2515 02545 4544          GETJTA
 2516 02546 0007           JOBLNK
 2517 02547 3371          DCA UUOLNK      /AND SAVE IT
 2518 02550 1772          TAD I UUOPTR
 2519 02551 7450          SNA             /ANY ARGUMENTS?
 2520 02552 5373          JMP GETUS1      /NO-JUST SAVE IOT IN JOBLNK
 2521 02553 3372          DCA UUOPTR      /YES. SAVE # ARGUMENTS
 2522 02554 1371          TAD UUOLNK      /PUT ADDRESS OF LINKAGE BLOCK IN UUOLNK
 2523 02555 4542          GETBLK          /GET A FREE BLOCK
 2524 02556 5553          REDO            /NONE AVAILABLE. TRY AGAIN LATER
 2525 02557 6211          DATFLD
 2526 02560 1771          TAD I UUOLNK    /GET ADDRESS OF PARAMETER BLOCK
 2527 02561 6201          CDF
 2528 02562 3371          DCA UUOLNK      /SAVE IT IN BLT CALLING SEQUENCE
 2529 02563 1172          TAD UUDF        /MOVE USER PARAMETERS TO LINKAGE AREA IN DATFLD
 2530 02564 3366          DCA .+2
 2531 02565 4530          BLT
 2532 02566 0000  UUOSRL,  0              /SOURCE FIELD SELECT
 2533 02567 0000  UUSRC,   0              /SOURCE ADDRESS
 2534 02570 6211           DATFLD         /DESTINATION FIELD SELECT
 2535 02571 0000  UUOLNK,  0              /DESTINATION ADDRESS
 2536 02572 0000  UUOPTR,  0              /-# WORDS
 2537 02573 1004  GETUS1, TAD UUOCAL      /NOW GET IOT
 2538 02574 6211          DATFLD
 2539 02575 3771          DCA I UUOLNK    /AND SAVE IT IN APPROPRIATE PLACE
 2540 02576 6201          CDF
 2541 02577 5736          JMP I GETUSP    /RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 65


 2542                     PAGE
 2543             
 2544             /LEVEL-2 CLOCK HANDLER:
 2545             /       INCREMENT OUR DAY-CLOCK
 2546             /       RUN THE JOB WAIT-TIMERS
 2547             /       CHECK FOR HUNG DEVICES
 2548             /       DECREMENT JOB'S QUANTUM & RESCHEDULE IF NECESSARY
 2549             /
 2550             /*L2TIM3        /RETURN FROM 'TIMER' ROUTINE
 2551             /*TIMCDR        /CARD READ TIMER
 2552             /
 2553       0003  SCHNJN= WS0
 2554 02600 7132  ICLK2,  -INCLK2-1
 2555 02601 1000  ICLK1,  -INCLK1
 2556             
 2557 02602 2033  L2TIME, ISZ CLK1        /UPDATE LOW ORDER DAY CLOCK
 2558 02603 5213          JMP L2TIM1
 2559 02604 2034          ISZ CLK2        /UPDATE HIGH ORDER TIME. WOW!
 2560 02605 5213          JMP L2TIM1
 2561 02606 2035          ISZ DATE        /MIDNIGHT - INCREMENT THE DATE
 2562 02607 1200          TAD ICLK2       /REINITIALIZE THE CLOCK FOR ANOTHER
 2563 02610 3034          DCA CLK2        / 24 HOURS WORTH OF TICKS
 2564 02611 1201          TAD ICLK1
 2565 02612 3033          DCA CLK1
 2566             
 2567             /NOW WE DECREMENT ALL THE JOB WAIT-TIMERS (FROM 'STM').
 2568 02613 6213  L2TIM1, CIF DATFLD
 2569 02614 4645          JMS I TIMERA    /FIELD 1 ROUTINE TO RUN TIMERS
 2570 02615 7773  TIMCON,  -5
 2571 02616 1522           L2OUT          /BUFFER-DRAIN CHECK
 2572 02617 0000  TIMPTR,  0
 2573 02620 1110           L2PTR          /HUNG PTR CODE
 2574 02621 0000  TIMCDR,  0
 2575 02622 7101           L2CDR          /HUNG CDR CODE
 2576 02623 0000  TIMSI,   0
 2577 02624 4051           L2SI           /'SI' TIMEOUT CODE
 2578 02625 0000  TIMFIP,  0
 2579 02626 4051           L2FIP          /'FIP' TIMEOUT CODE
 2580 02627 0000  TIM689,  0              /CARRIER STATUS CHECK
 2581 02630 4051           L2689
 2582 02631 2064  L2TIM3, ISZ JOBTIM      /BUMP THE USER'S QUANTUM
 2583 02632 7000          NOP
 2584 02633 6202          CIF             /DISABLE INTERRUPTS MOMENTARILY
 2585 02634 7340          CLA CLL CMA
 2586 02635 1046          TAD CLOCK
 2587 02636 3046          DCA CLOCK
 2588 02637 7430          SZL             /ANY MORE SYSTEM TICKS WAITING?
 2589 02640 5202          JMP L2TIME      /YES - RUN THROUGH AGAIN
 2590             
 2591                     IFDEF CLKMIS <
 2592 02641 1124          TAD C7400
 2593 02642 3644          DCA I CLKTMR    /RESET OUR CRASH-DETECTOR
 2594                     >
 2595 02643 5556          RSCHED          /NOW RESCHEDULE
 2596             
 2597       4051  L2SI=   L2EXIT  /*****  TEMPORARY (MAYBE)  *****
 2598       4051  L2FIP=  L2EXIT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 66


 2599       4051  L2689=  L2EXIT
 2600             
 2601                     IFDEF CLKMIS <
 2602 02644 0247  CLKTMR, CLKMIS
 2603                     >
 2604 02645 2200  TIMERA, TIMER0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 67


 2605             /SCHEDULE NEXT RESIDENT JOB
 2606             /THIS IS THE ENTRY FOR "SCHED"
 2607             /WE ONLY COME HERE AFTER FINDING THE JOB WE REALLY
 2608             /WANT TO RUN IS CURRENTLY INDISPOSED TO RUNNING. SCHED
 2609             /WILL FIND SOME RESIDENT JOB TO RUN. IF NO JOB IS
 2610             /RUNNABLE OR RESIDENT, JOB 0 (THE NULL JOB) IS RUN.
 2611             
 2612 02646 1764  SCHEDI, TAD I SCHMUC
 2613 02647 7104          CLL RAL         / *2  (WE MIGHT FIND A COMPUT-BOUND JOB)
 2614 02650 3365          DCA NXTCNT      /NUMBER OF FIELDS *2
 2615 02651 1055          TAD FANCOR
 2616 02652 3003          DCA WS0         /START SEARCH WITH THE PHANTOM-FIELD
 2617 02653 1764          TAD I SCHMUC
 2618 02654 3004          DCA WS1
 2619 02655 1403  SCHEI1, TAD I WS0
 2620 02656 0120          AND SCHNTR
 2621 02657 7440          SZA             /IS "NOTRUN" SET?
 2622 02660 5265          JMP SCHEI3      /YES
 2623 02661 2003  SCHEI2, ISZ WS0         /NO - INCREMENT THE POINTER
 2624 02662 2004          ISZ WS1
 2625 02663 5255          JMP SCHEI1      / AND TRY AGAIN
 2626 02664 5315          JMP SCHEI8      /SEARCH FOR RUNNABLE JOB
 2627             
 2628 02665 7040  SCHEI3, CMA
 2629 02666 0403          AND I WS0       /CLEAR "NOTRUN"
 2630 02667 3403          DCA I WS0
 2631 02670 1403          TAD I WS0
 2632 02671 0115          AND C0600
 2633 02672 7640          SZA CLA         /IS IT A PHANTOM?
 2634 02673 5277          JMP SCHEI4      /YES - THEN IT MUST BE READY TO RUN
 2635 02674 1403          TAD I WS0
 2636 02675 4557          RUNABL          /NO - IS THE JOB RUNNABLE?
 2637 02676 5261          JMP SCHEI2      /NO
 2638 02677 1403  SCHEI4, TAD I WS0       /YES
 2639 02700 3003  SCHEI5, DCA SCHNJN
 2640 02701 1003  SCHEI6, TAD SCHNJN
 2641 02702 0121          AND C3777       /CAN'T ALLOW ANYTHING IF HE'S SWAPPING
 2642 02703 4533          CORE            /SEARCH 'CORTBL' FOR HIM
 2643 02704 6637           FSWP+LOCK+FIP+SI+37
 2644 02705 5561          SCHED           /NOT THERE - TRY IT ALL AGAIN
 2645 02706 3041          DCA L2SF        /SET UP THE SAVE-FIELD
 2646 02707 1003          TAD SCHNJN
 2647 02710 4554          RESJOB          /RESTORE THE REST OF LEVEL-2 STUFF
 2648 02711 5563          START           / AND START HIM UP
 2649             
 2650 02712 3003  SCHEI7, DCA SCHNJN      /SET THE JOB NUMBER
 2651 02713 3051          DCA CURJOB      / AND CLEAR THE "REMEMBRANCE"
 2652 02714 5301          JMP SCHEI6
 2653             
 2654             /NO SIMPLE 'NOTRUN' FLAG FOUND - SEARCH FOR ANY RUNNABLE JOB.
 2655 02715 3065  SCHEI8, DCA SCHNEW      /ANY JOB STARTED HERE CAN BE INTERRUPTED
 2656 02716 2365  NXTCOR, ISZ NXTCNT
 2657 02717 7410          SKP
 2658 02720 5763          JMP I SCHNUA    /NOTHING TO RUN - JUST NULL-JOB AVAILABLE
 2659 02721 2366  NXTCO2, ISZ NXTCOP      /BUMP THE CORTBL POINTER
 2660 02722 1366          TAD NXTCOP
 2661 02723 1770          TAD I NXTEND

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 68


 2662 02724 7640          SZA CLA         /HIT THE END OF THE TABLE?
 2663 02725 5330          JMP .+3         /NO
 2664 02726 1055          TAD FANCOR
 2665 02727 3366          DCA NXTCOP      /YES - RESET TO THE START
 2666 02730 1766          TAD I NXTCOP    /GET THE NEXT ENTRY
 2667 02731 7450          SNA             /IS THERE ANYONE THERE?
 2668 02732 5361          JMP NXTCO4      /NO - CLEAR THE 'DEAD' FLAG
 2669 02733 0373          AND NXTMSK
 2670 02734 7640          SZA CLA         /IS IT FREE TO RUN NOW?
 2671 02735 5316          JMP NXTCOR      /NO - IT'S SWAPPING OR SOMETHING
 2672 02736 1766          TAD I NXTCOP
 2673 02737 4557          RUNABL          /YES - IS IT ACTUALLY RUNNABLE?
 2674 02740 5353          JMP NXTCO3      /NO, BUT IT WAS A GOOD TRY
 2675 02741 1766          TAD I NXTCOP
 2676 02742 0107          AND C0037
 2677 02743 1063          TAD JOBTBA      /YES - GET THE 'JOBTBL' POINTER
 2678 02744 4545          GETJTI          / AND PICK UP 'STR0'
 2679 02745 0000           JOBSTS
 2680 02746 0371          AND NXTFAN
 2681 02747 7640          SZA CLA         /IS HE IN NEED OF A PHANTOM?
 2682 02750 5316          JMP NXTCOR      /YES - CAN'T GO NO FURTHER
 2683 02751 1766          TAD I NXTCOP    /NO - REGET THE JOB NUMBER
 2684 02752 5300          JMP SCHEI5      / AND LET HIM FLY
 2685             /
 2686 02753 7240  NXTCO3, CLA CMA
 2687 02754 1366          TAD NXTCOP      /SAVE THE POINTER-1 BECAUSE
 2688 02755 3052          DCA DEAD        / IT POINTS TO A DEAD JOB
 2689 02756 1366          TAD NXTCOP
 2690 02757 1372          TAD NXTFLD      /FIGURE THE FIELD NUMBER
 2691 02760 4767          JMS I NXTDSK    /IS THE DISC ACTIVE THERE?
 2692 02761 3052  NXTCO4, DCA DEAD        /YES - SO IT'S NOT DEAD AFTERALL
 2693 02762 5316          JMP NXTCOR
 2694             /
 2695 02763 3630  SCHNUA, SCHNUL
 2696 02764 1315  SCHMUC, CORCNT  /POINTER TO NUMBER OF USER FIELDS
 2697                     IFNZRO NOTRUN-1000      <GLITCH; *.-1>
 2698       0120  SCHNTR= C1000   /NOTRUN
 2699                     IFNZRO SI-200   <GLITCH; *.-1>
 2700       0002  SCHSI=  C0200   /SI
 2701 02765 0000  NXTCNT, 0               /NUMBER OF FIELDS TO CHECK
 2702 02766 7002  NXTCOP, CORTBL+1        /ROUND-ROBIN CORTBL POINTER
 2703 02767 4361  NXTDSK, DSKACT
 2704 02770 1316  NXTEND, CORTBE          /END OF CORTBL
 2705 02771 0107  NXTFAN, JSIOT+7
 2706 02772 1000  NXTFLD, -CORTBL+1
 2707 02773 6600  NXTMSK, FSWP+LOCK+FIP+SI

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 69


 2708                     PAGE
 2709             
 2710                     IFNZRO JSIOT-100        <GLITCH; *.-1>
 2711       0111  SCJIOT= C0100   /JSIOT
 2712                     IFNZRO FIP-400  <GLITCH; *.-1>
 2713       0114  SCFIP=  C0400   /FIP
 2714                     IFNZRO SI-200   <GLITCH; *.-1>
 2715       0002  SCSI=   C0200   /SI
 2716                     IFNZRO LOCK-2000        <GLITCH; *.-1>
 2717       7332  SCLOCK= CLA CLL CML RTR /LOCK BIT  AC = 2000
 2718                     IFNZRO JSEREN-2000      <GLITCH; *.-1>
 2719       7332  SCHERN= CLA CLL CML RTR /JSEREN BIT    AC = 2000
 2720       0076  FANFLD= C0002           /PHANTOMS ALWAYS RUN IN FIELD 2
 2721             
 2722                     IFNZRO FSWP-4000        <GLITCH; *.-1>
 2723 03000 4037  C4037,  4037    /FSWP + JOB # MASK
 2724 03001 4361  SCDACT, DSKACT
 2725 03002 2712  SCHE7A, SCHEI7
 2726 03003 7727  SCHMAX, -JOBMAX-JOBMAX-1
 2727 03004 5000  SCHNCT, NXTJCT
 2728 03005 5003  SCHNXA, NXTJOB
 2729             /
 2730             /*WSCHED        /'WAIT' ENTRY
 2731 03006 6001  WSCHED, ION
 2732 03007 4560          SAVJOB          /SAVE IT'S STATE. JOB:=0 ('WAIT' ENTRY)
 2733 03010 7240          CLA CMA
 2734 03011 3065          DCA SCHNEW      /SET FLAG FOR FULL TIME-SLICE
 2735 03012 1051          TAD CURJOB
 2736 03013 7440          SZA             /DID WE INTERRUPT SOMETHING BEFORE?
 2737 03014 5602          JMP I SCHE7A    /YES - RESTART IT
 2738 03015 1066          TAD SQREQ
 2739 03016 7640          SZA CLA         /SWAP REQUEST IN PROGRESS?
 2740 03017 5561          SCHED           /YES - NO POINT IN TRYING; TRY A RESIDENT JOB
 2741 03020 1203          TAD SCHMAX
 2742 03021 3604          DCA I SCHNCT    /SET THE COUNTER IN THE 'NEXT JOB' ROUTINE
 2743 03022 1060          TAD FIT
 2744 03023 7440          SZA             /HAVE WE ALREADY DECIDED ON THE NEXT JOB?
 2745 03024 5264          JMP SCHED3      /YES, SO SKIP AS MUCH CODE AS POSSIBLE
 2746 03025 1020          TAD COMCNT      /NO. S.I. REQUEST?
 2747 03026 7640          SZA CLA
 2748 03027 5255          JMP SCHED6      /YES, SCHEDULE SI
 2749 03030 1057          TAD FIPJOB
 2750 03031 7440          SZA             /ANYTHING WAITING FOR 'FIP'?
 2751 03032 5257          JMP SCHED7      /YES
 2752 03033 4605  SCHED1, JMS I SCHNXA    /NO - GET NEXT RUNABLE JOB
 2753 03034 3060          DCA FIT         /SAVE JOB #
 2754 03035 3045          DCA BONUS       /BONUS JOB ALREADY PICKED UP
 2755 03036 1060          TAD FIT
 2756 03037 1063          TAD JOBTBA
 2757 03040 4545          GETJTI          /GET CONTENTS OF STR0
 2758 03041 0000           JOBSTS
 2759 03042 6211          DATFLD
 2760 03043 0111          AND SCJIOT
 2761 03044 7640          SZA CLA         /FIP REQUIRED?
 2762 03045 5257          JMP SCHED7      /YES
 2763 03046 1405          TAD I JOBSWA    /NO
 2764 03047 0103          AND C0007

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 70


 2765 03050 7650          SNA CLA         /ANY ERROR BITS SET?
 2766 03051 5262          JMP SCHED9      /NO
 2767 03052 7332          SCHERN          /YES
 2768 03053 0405          AND I JOBSWA
 2769 03054 7650          SNA CLA         /CAN HE HANDLE THE ERROR?
 2770 03055 1002  SCHED6, TAD SCSI        /NO - CALL FOR SI
 2771 03056 7410          SKP
 2772 03057 1114  SCHED7, TAD SCFIP
 2773 03060 1060          TAD FIT
 2774 03061 3060          DCA FIT
 2775 03062 6201  SCHED9, CDF
 2776 03063 1060          TAD FIT
 2777 03064 0115  SCHED3, AND C0600
 2778 03065 7450          SNA             /IS THE 'FIT' JOB FIP OR SI?
 2779 03066 5313          JMP SCHE11      /NO
 2780 03067 0455          AND I FANCOR
 2781 03070 7650          SNA CLA         /IS IT THE PROPER PHANTOM?
 2782 03071 5325          JMP SCHE15      /NO- SCHEDULE THEIR SWAP IN
 2783 03072 1455          TAD I FANCOR    /YES-IS THE PHANTOM ABOUT TO BE SWAPPED OR IN USE?
 2784 03073 0200          AND C4037       /SWAP + JOB #
 2785 03074 7640          SZA CLA
 2786 03075 5301          JMP .+4         /YES-NOT MUCH TO DO NOW
 2787 03076 7332          SCLOCK          /LOCK PHANTOM FOR THIS JOB
 2788 03077 1060          TAD FIT         /NO-LOCK PHANTOM FOR THIS USER
 2789 03100 3455          DCA I FANCOR    /INDICATE THAT THIS FIELD IS NOW LOCKED
 2790 03101 3060          DCA FIT         /CLEAR FIT
 2791 03102 1455          TAD I FANCOR    /IS THE SWAP COMPLETE?
 2792 03103 7710          SPA CLA
 2793 03104 5561          SCHED           /NO-FIND SOMETHING ELSE TO DO
 2794 03105 1076          TAD FANFLD      /YES-DISC ACTIVITY HERE?
 2795 03106 4601          JMS I SCDACT
 2796 03107 5233          JMP SCHED1      /YES-FORGET ABOUT PHANTOM FOR NOW
 2797 03110 1455          TAD I FANCOR    /NO
 2798 03111 5712          JMP I .+1       /NOW GO FINISH BOOKKEEPING
 2799 03112 2700          SCHEI5
 2800             
 2801 03113 1060  SCHE11, TAD FIT         /IS FIT JOB IN CORE?
 2802 03114 4533          CORE
 2803 03115 6637           FSWP+LOCK+FIP+SI+37
 2804 03116 5346          JMP SCHE10      /NO-HE HAS TO BE SWAPPED IN
 2805 03117 3041          DCA L2SF        /SAVE FIELD
 2806 03120 1060          TAD FIT         /RESTORE LEVEL 2 REGISTERS
 2807 03121 4554          RESJOB
 2808 03122 3060          DCA FIT         /CLEAR FIT
 2809 03123 5563          START           /START JOB
 2810             
 2811 03124 6000  SCHBSY, FSWP+LOCK       /CAN'T CHECK 'NOTRUN' UNLESS NXTJOB CLEARS IT
 2812             
 2813 03125 1455  SCHE15, TAD I FANCOR    /FANFLD LOCKED, SWAPPED, OR NOTRUN?
 2814 03126 0324          AND SCHBSY
 2815 03127 7640          SZA CLA
 2816 03130 5233          JMP SCHED1      /YES- GO FIND SOMETHING ELSE TO DO NOW
 2817 03131 1455          TAD I FANCOR    /IS THERE CURRENTLY A USER JOB IN FANFLD?
 2818 03132 0107          AND C0037
 2819 03133 7640          SZA CLA
 2820 03134 5337          JMP SCHE16      /YES, FORCE IT OUT
 2821 03135 1076          TAD FANFLD      /NO; FINISH:=FANFLD

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 71


 2822 03136 5352          JMP SCHE14
 2823             
 2824 03137 1455  SCHE16, TAD I FANCOR    /IS A PHANTOM IN HERE?
 2825 03140 0115          AND C0600
 2826 03141 7640          SZA CLA
 2827 03142 5233          JMP SCHED1      /YES, GO FIND ANOTHER JOB TO RUN
 2828 03143 1076          TAD FANFLD      /FORCE JOB OUT OF FANFLD
 2829 03144 3061          DCA FORCE
 2830 03145 5362          JMP SCHFR1
 2831             
 2832 03146 4533  SCHE10, CORE            /HAVE A TOTALLY EMPTY FIELD?
 2833 03147 7777           7777
 2834 03150 5362          JMP SCHFR1      /NO - SOMETHING HAS TO GO
 2835 03151 0103  SCHE12, AND C0007       /YES - GET THE FIELD NUMBER
 2836 03152 3056  SCHE14, DCA FINISH      /FINISH:=FIELD #
 2837 03153 1056          TAD FINISH      /SET SWAP BIT IN CORTBL ENTRY
 2838 03154 1050          TAD CORTBA
 2839 03155 3003          DCA SUJT2       /POINTS TO CORTBL ENTRY
 2840 03156 7330          SCHSWP
 2841 03157 1060          TAD FIT         /SET 'FSWP' BIT AND THE JOB NUMBER
 2842 03160 3403          DCA I SUJT2     / AND SAVE IT IN CORTBL
 2843 03161 5775          JMP I SCSWAP    /SWAP IN
 2844 03162 1061  SCHFR1, TAD FORCE
 2845 03163 7450          SNA             /DO WE ALREADY KNOW WHAT TO SWAP?
 2846 03164 5774          JMP I SCHSCN    /NO - SCAN EVERYTHING FOR THE BEST FIELD TO GO
 2847 03165 4601          JMS I SCDACT    /YES - BUT IS DISC I/O ACTIVE THERE?
 2848 03166 5561          SCHED           /YES - CAN'T FORCE IT OUT OR TRANSFER WILL BE MESSED UP
 2849 03167 1061          TAD FORCE
 2850 03170 1050          TAD CORTBA
 2851 03171 3003          DCA SUJT2       /CORTBL POINTER TO FORCED FIELD
 2852 03172 5773          JMP I .+1       /NOW GO SET UP THE OUTSWAP
 2853 03173 6134          SWPOUT
 2854             
 2855 03174 7311  SCHSCN, SCNSWP
 2856                     IFNZRO FSWP-4000        <GLITCH; *.-1>
 2857       7330  SCHSWP= CLA CLL CML RAR /AC=4000
 2858 03175 6145  SCSWAP, SWAPIN
 2859       0003  SUJT2=  WS0

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 72


 2860                     PAGE
 2861             /ROUTINE TO RECOGNIZE AND REPLY TO ^C
 2862             /CALLED ONLY FROM 'GIR':
 2863             /       JMS GIRCT0
 2864             /       IN SI
 2865             /       PROGRAM RESTART HANDLED
 2866             
 2867 03200 0000  GIRCT0, 0
 2868 03201 6211          DATFLD
 2869 03202 4642          JMS I GIRFB     /IS IT IN 'SI' MODE?
 2870 03203 5600          JMP I GIRCT0    /YES - JUST RETURN
 2871 03204 1031          TAD CONDDB
 2872 03205 4645          JMS I GIRJBA    /FETCH THE JOB NUMBER AGAIN
 2873 03206 6201          CDF
 2874 03207 6212          CIF 10
 2875 03210 4641          JMS I GIRDTS    /STOP ANY DECTAPE
 2876 03211 1031          TAD CONDDB
 2877 03212 4645          JMS I GIRJBA    /NO - GET USER'S JOB #
 2878 03213 1063          TAD JOBTBA      /WE GET HIS JOB # BACK AGAIN
 2879 03214 4545          GETJTI          /PICK UP HIS STR0
 2880 03215 0000           JOBSTS
 2881 03216 7004          RAL             /CLEAR RUN BIT
 2882 03217 7130          CLL CML RAR     / & FORCE IT BACK ON
 2883 03220 6211          DATFLD
 2884 03221 3405          DCA I JOBSWA
 2885 03222 2005          ISZ JOBSWA      /POINTS TO STR1
 2886 03223 1405          TAD I JOBSWA
 2887 03224 0243          AND GIRFC1      /CLEAR HIS COMPLETION BITS & JSWAIT
 2888 03225 3405          DCA I JOBSWA
 2889 03226 7326          CLA CLL CML RTL /AC = 2
 2890 03227 1005          TAD JOBSWA
 2891 03230 3004          DCA WS1         /POINTS TO WAIT-MASK 1
 2892 03231 1404          TAD I WS1
 2893 03232 0244          AND GIRFC2      /CLEAR ALL NON-CRITICAL WAIT-BITS
 2894 03233 2004          ISZ WS1
 2895 03234 1404          TAD I WS1       / AND GET THE RK05 & TC08 BITS
 2896 03235 7650          SNA CLA         /IS HE STILL WAITING FOR SOMETHING?
 2897 03236 2405          ISZ I JOBSWA    /NO - INDICATE NO WAIT IN STR1
 2898 03237 2200          ISZ GIRCT0      /INDICATE THIS WAS A PROGRAMMATIC RESTART
 2899 03240 5600          JMP I GIRCT0    / & RETURN
 2900             
 2901 03241 2512  GIRDTS, F1DTST          /FIELD 1 ROUTINE TO STOP DECTAPES
 2902 03242 4437  GIRFB,  CHKSI
 2903 03243 3676  GIRFC1, -JSTIME-JSDEL-JSWAIT-1  / (ZAP '-JSTEL'?)
 2904 03244 3600  GIRFC2, JSF0+JSF1+JSF2+JSF3
 2905 03245 5567  GIRJBA, DEVJOB
 2906             
 2907             /ROUTINE TO CHECK FOR AND HANDLE LINE-FEED & RUBOUT.
 2908 03246 0000  GIRLRB, 0
 2909 03247 1325          TAD GIRRUB
 2910 03250 1032          TAD TTCHAR
 2911 03251 7450          SNA             /RUBOUT?
 2912 03252 5273          JMP GIRLR4      /YES
 2913 03253 1323          TAD GIRLF
 2914 03254 7440          SZA             /LINE-FEED?
 2915 03255 5260          JMP GIRLR2      /NO - CHECK FOR SI BREAK
 2916 03256 1326  GIRLR1, TAD GIRECH

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 73


 2917 03257 5264          JMP GIRLR3      /SET 'ECHO' FLAG IN THE DDB
 2918             /
 2919             /WE SHOULD REALLY CHECK THE 'FULL' FLAG AND SKIP THE BREAK
 2920             /CHECK IF WE CAN'T STORE THE BREAK ANYWAY.
 2921 03260 2246  GIRLR2, ISZ GIRLRB
 2922 03261 0324          AND GIRMSK      /FILTER OUT SIGNIFICANT BITS
 2923 03262 7640          SZA CLA         /IS THIS A BREAK CHARACTER FOR SI?
 2924 03263 5646          JMP I GIRLRB    /NO - STORE & ECHO
 2925 03264 1111  GIRLR3, TAD GIRSCM
 2926 03265 3270          DCA .+3
 2927 03266 1031          TAD CONDDB
 2928 03267 4550          IOR             /SET 'SICOM' AND MAYBE 'DECHO'
 2929 03270 0000           .-.
 2930 03271 2020          ISZ COMCNT      / AND INDICATE A COMMAND IS WAITING
 2931 03272 5646          JMP I GIRLRB    /THEN RETURN (TO ECHO & STORE, IF DECHO)
 2932             /
 2933 03273 1431  GIRLR4, TAD I CONDDB
 2934 03274 0111          AND GIRSCM
 2935 03275 7640          SZA CLA         /IS 'SI' ALREADY PROCESSING THE BUFFER?
 2936 03276 5646          JMP I GIRLRB    /YES - CAN'T RUBOUT ANYTHING NOW
 2937 03277 1031          TAD CONDDB
 2938 03300 1101          TAD GIRCHR
 2939 03301 3322          DCA GIRCNT      /SET POINTER TO THE CHARACTER COUNT
 2940 03302 1722          TAD I GIRCNT
 2941 03303 7041          CIA
 2942 03304 3322          DCA GIRCNT      /NUMBER OF CHARACTERS TO SPIN THROUGH
 2943 03305 3003          DCA WS0         /FAKE THE BREAK-MASK TO ZERO
 2944 03306 1031  GIRLR5, TAD CONDDB
 2945 03307 4540          FETCH           /FETCH A CHARACTER
 2946 03310 5256          JMP GIRLR1      /BUFFER EMPTY
 2947 03311 3032          DCA TTCHAR
 2948 03312 2322          ISZ GIRCNT      /IS THIS THE LAST CHARACTER?
 2949 03313 7410          SKP
 2950 03314 5646          JMP I GIRLRB    /YES - RETURN TO ECHO IT
 2951 03315 1031          TAD CONDDB
 2952 03316 4564          STORE           /NO - RESTORE IT
 2953 03317 7030           ALLOK
 2954 03320 4552          REBOOT          /SHOULD NEVER FAIL
 2955 03321 5306          JMP GIRLR5
 2956             /
 2957                     IFNZRO DDBINC-5 <GLITCH; *.-1>
 2958       0101  GIRCHR= C0005   /DDBINC
 2959 03322 0000  GIRCNT, 0
 2960 03323 0165  GIRLF,  377-212
 2961 03324 1374  GIRMSK, 1374
 2962 03325 7401  GIRRUB, -377
 2963 03326 0020  GIRECH, DECHO
 2964                     IFNZRO SICOM-100        <GLITCH; *.-1>
 2965       0111  GIRSCM= C0100

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 74


 2966             /COMBINED RESIDENT IOTS
 2967             
 2968       4000  P=      4000    /PRIVILEGE REQUIRED
 2969       2000  L=      2000    /LONG 'FIP' IOT (PARAMETER PACKET RETURNED)
 2970             
 2971 03327 0010  UUOTBL, 010     /READER
 2972 03330 0020          020     /PUNCH
 2973 03331 0030          030     /KEYBOARD
 2974 03332 0040          040     /TELEPRINTER
 2975 03333 0050          050     /NSCI1 (NONSTANDARD CHARACTER INPUT DEVICE)
 2976 03334 0060          060     /NSCO1 (NONSTANDARD CHARACTER OUTPUT DEVICE)
 2977 03335 0070          070     /NSCI2
 2978 03336 0100          100     /NSCO2
 2979 03337 0500          500     /RESERVED FOR FUTURE USE
 2980 03340 0660  UUOT1E, 660     /PRINTER
 2981             
 2982             /NON MICRO-CODED IOTS
 2983             
 2984 03341 0004          004     /UGTF - GET FLAGS
 2985 03342 0005          005     /URTF - RESTORE FLAGS (LINK & GT ONLY)
 2986 03343 0006          006     /SGT - SKIP IF 'GT' FLAG IS SET
 2987 03344 0200          200     /CKS - CHECK STATUS
 2988 03345 0400          400     /KSB - SET KEYBOARD BREAK
 2989             /
 2990 03346 0401          401     /SBC - SET BUFFER CONTROL FLAGS
 2991 03347 0402          402     /DUP - DUPLEX TELETYPE CONSOLE
 2992 03350 0403          403     /UND - UNDUPLEX TTY
 2993 03351 0405          405     /CLS - CLEAR STATUS
 2994 03352 0406          406     /SEGS - RETURN # FREE DISC SEGMENTS
 2995             /
 2996 03353 0411          411     /URT - USER RUN TIME
 2997 03354 0412          412     /TOD - TIME OF DAY
 2998 03355 0413          413     /RCR - RETURN CLOCK RATE
 2999 03356 0414          414     /DATE
 3000 03357 0415          415     /SYN - QUANTUM SYNCHRONIZATION
 3001             /
 3002 03360 0416          416     /STM - SET TIMER
 3003 03361 0417          417     /SRA - SET RESTART ADDRESS
 3004 03362 0420          420     /TSS - SKIP ON TS8
 3005 03363 0421          421     /USE - USER
 3006 03364 0422          422     /CON - USER CONSOL
 3007             /
 3008 03365 4423          423+P   /PEEK - LOOK IN MONITOR CORE
 3009 03366 0430          430     /SSW - SET SWITCH REGISTER
 3010 03367 0431          431     /SEA - SET ERROR ADDRESS
 3011 03370 0440          440     /ASD - ASSIGN DEVICE
 3012 03371 0442          442     /REL - RELEASE
 3013             /
 3014 03372 0600          600     /REN - RENAME FILE
 3015 03373 2601          601+L   /OPEN - OPEN FILE
 3016 03374 0602          602     /CLOS - CLOSE FILE
 3017 03375 2603          603+L   /RFILE
 3018 03376 0604          604     /PROT - PROTECT FILE
 3019             /
 3020 03377 2605          605+L   /WFILE
 3021 03400 2606          606+L   /XOPEN - OPEN WITH EXCLUSIVE USE
 3022 03401 4607          607+P   /CPASS - CHANGE USER'S PASSWORD

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 75


 3023 03402 0610          610     /CRF - CREATE FILE
 3024 03403 0611          611     /EXT - EXTEND FILE
 3025             /
 3026 03404 0612          612     /RED - REDUCE FILE
 3027 03405 2613          613+L   /FINF
 3028 03406 0614          614     /SIZE
 3029 03407 4615          615+P   /LOGOUT
 3030 03410 0617          617     /ACT - ACCOUNT NUMBER
 3031             /
 3032 03411 0620          620     /BCLR - CLEAR MFD BILLING FIELDS
 3033                             IFNZRO CDR <
 3034                     632     /RCRA - READ CARD ALPHA
 3035                     634     /RCRB - READ CARD BINARY
 3036                             IFNZRO CPU&7776 <
 3037                     636     /RCRC - READ CARD COMPRESSED (8/E ONLY)
 3038                             >>
 3039                             IFNZRO RK05+RK8E <
 3040 03412 4743          743+P   /DLAG - RK05 READ & WRITE
 3041                             >
 3042             /
 3043                             IFZERO TC01-1 <
 3044 03413 0764          764     /DTXA - LOAD STATUS REGISTER A
 3045                             >
 3046 03414 0771          771     /DTSF - SKIP ON DT FLAGS
 3047 03415 0772          772     /DTRB - ALSO 'RDS' FOR RK05 AND CDR
 3048 03416 0773  UUOT2E, 773     /DTSF DTRB - MICROCODED
 3049             
 3050             
 3051             /COMBINED RESIDENT IOT DISPATCH
 3052             
 3053 03417 1000  UUODTB, UPTR    /READER
 3054 03420 2213          UPTP    /PUNCH
 3055 03421 1631          UKEY    /KEYBOARD
 3056 03422 2221          UTEL    /TELEPRINTER
 3057 03423 1601          UNSCI1
 3058 03424 2201          UNSCO1
 3059 03425 1600          UNSCI2
 3060 03426 2200          UNSCO2
 3061 03427 4404          UUOERR  /RESERVED FOR FUTURE USE
 3062 03430 2202          ULPT    /LPT SERVICE
 3063             
 3064             /DISPATCH OR PARAMETER COUNTS FOR THE REMAINING IOTS.
 3065             
 3066                             IFNZRO CPU&7776 <
 3067 03431 4226          UGTF
 3068 03432 4236          URTF
 3069                             >
 3070                             IFZERO CPU&7776 <
 3071                     UUOERR
 3072                     UUOERR
 3073                             >
 3074                             IFZERO CPU-2 <
 3075 03433 4222          USGT
 3076                             >
 3077                             IFNZRO CPU-2 <
 3078                     UUOERR
 3079                             >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 76


 3080 03434 5534          UCKS
 3081 03435 1535          UKSB
 3082             /
 3083 03436 4324          USBC
 3084 03437 1765          UDUP
 3085 03440 1764          UUND
 3086 03441 3534          UCLS
 3087 03442 5531          USEGS
 3088             /
 3089 03443 5475          UURT
 3090 03444 5515          UTOD
 3091 03445 3757          URCR
 3092 03446 3761          UDATE
 3093 03447 4407          USYN
 3094             /
 3095 03450 4415          USTM
 3096 03451 1547          USRA
 3097 03452 3765          UTSS
 3098 03453 4410          UUSE
 3099 03454 5777          UCON
 3100             /
 3101 03455 7371          UPEEK
 3102 03456 1563          USSW
 3103 03457 1555          USEA
 3104 03460 0000          0       /ASD
 3105 03461 0000          0       /REL
 3106             /
 3107 03462 7772          -6      /REN
 3108 03463 7772  UFILWC, -6      /OPEN
 3109 03464 0000          0       /CLOS
 3110 03465 4600          UFILE
 3111 03466 0000          0       /PROT
 3112             /
 3113 03467 4600          UFILE
 3114 03470 7772          -6      /XOPEN
 3115 03471 7772          -6      /CPASS
 3116 03472 7774          -4      /CRF
 3117 03473 7774          -4      /EXT
 3118             /
 3119 03474 7774          -4      /RED
 3120 03475 7776          -2      /FINF
 3121 03476 4412          USIZE
 3122 03477 0000          0       /LOGOUT
 3123 03500 3746          UACT
 3124             /
 3125 03501 0000          0       /BCLR
 3126                             IFNZRO CDR <
 3127                     UUCDR0+2
 3128                     UUCRD0+1
 3129                             IFNZRO CPU&7776 <
 3130                     UUCDR0
 3131                             >>
 3132                             IFNZRO RK05+RK8E <
 3133 03502 1756          URK050
 3134                             >
 3135             /
 3136                             IFZERO TC01-1 <

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 77


 3137 03503 1757          UDTXA0
 3138                             >
 3139 03504 0334          UUOEX2
 3140 03505 1147          UDTRB
 3141 03506 1145          UDTRBS  

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 78


 3142             
 3143             /START USER DISC REQUEST FROM QUEUE.  WHEN THIS ROUTINE IS
 3144             /CALLED, THERE MUST BE SOMETHING IN SQREQ OR DSUTBL,
 3145             /IT WON'T STOP LOOKING!
 3146             /CALL   JMS DSUSER
 3147             /       RETURN
 3148             
 3149 03507 0000  DSUSER, 0
 3150 03510 1066          TAD SQREQ       /IS A SWAP REQUESTED?
 3151 03511 7640          SZA CLA
 3152 03512 5326          JMP DSUSR2      /YES, DO IT FIRST
 3153 03513 6211          DATFLD
 3154 03514 1417  DSUSR1, TAD I DSKPTR    /GET ENTRY FROM DSUTBL
 3155 03515 7450          SNA             /ANYTHING HERE?
 3156 03516 5314          JMP DSUSR1      /NO - CHECK NEXT POSITION
 3157 03517 7040          CMA
 3158 03520 7450          SNA             /REACHED END OF LIST (-1)?
 3159 03521 5330          JMP DSUSR3      /YES - RESET THE POINTER
 3160 03522 7040          CMA
 3161 03523 6201          CDF
 3162 03524 4535          DSGO            /YES, START IT UP
 3163 03525 5707          JMP I DSUSER    /AND BACK
 3164 03526 4475  DSUSR2, JMS I SWPIOA    /START A SWAP DISC IO
 3165 03527 5707          JMP I DSUSER    /RETURN BACK
 3166             
 3167 03530 1333  DSUSR3, TAD DSUSTB      /START OF 'DSUTBL'
 3168 03531 3017          DCA DSKPTR
 3169 03532 5314          JMP DSUSR1
 3170             
 3171 03533 3067  DSUSTB, DSUTBL-1+7

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 79


 3172             
 3173             /ROUTINE TO HANDLE THE CLEAR-STATUS (CLS) IOT.
 3174             /IOT CALL:
 3175             /       TAD (PKT
 3176             /       CLS             /CLEAR ERROR FLAGS & SUCH
 3177             /        :
 3178             /PKT,   0007            /BITS TO CLEAR IN STR0
 3179             /       0002            / STR1
 3180             /       0000            / AND THE DEVICE STATUS WORD
 3181             
 3182 03534 4546  UCLS,   GETJTW          /GET THE POINTER TO STR0
 3183 03535 0000           JOBSTS
 3184 03536 7346          CLA CLL CMA RTL /AC = -3
 3185 03537 3003          DCA UCLSCT      /SET THE WORD COUNT
 3186 03540 1360          TAD UCLSMK
 3187 03541 7410          SKP             /DON'T LET HIM MESS UP STR0
 3188 03542 7240  UCLS1,  CLA CMA
 3189 03543 4171          UDF
 3190 03544 0444          AND I L2SA      /GET HIS CLEARING MASK
 3191 03545 7040          CMA
 3192 03546 6211          DATFLD
 3193 03547 0405          AND I JOBSWA    /CLEAR THE BITS FROM STR0, STR1, & D.S.R.
 3194 03550 3405          DCA I JOBSWA    / AND PUT THEM BACK
 3195 03551 2044          ISZ L2SA        /INCREMENT HIS POINTER
 3196 03552 7000          NOP
 3197 03553 2005          ISZ JOBSWA      / OUR POINTER
 3198 03554 2003          ISZ UCLSCT      / AND THE COUNTER
 3199 03555 5342          JMP UCLS1
 3200 03556 3044          DCA L2SA        /CLEAR HIS AC
 3201 03557 5567          UUOEXT          / AND EXIT
 3202             /
 3203       0003  UCLSCT= WS0
 3204 03560 2427  UCLSMK, JSEREN+JSPRIV+JSRSEN+7  /ONLY ALLOW EXTERNAL STUFF TO CLEAR
 3205             
 3206             
 3207             /ROUTINE TO DECREMENT THE DISC ACTIVITY-COUNT &
 3208             /START UP THE NEXT TRANSFER IF THERE IS ONE.
 3209 03561 0000  DSKCON, 0
 3210 03562 7340          CLA CLL CMA
 3211 03563 1036          TAD DSBUSY
 3212 03564 3036          DCA DSBUSY      /DECREMENT COUNT
 3213 03565 7630          SZL CLA         /IS IT NOW -1?
 3214 03566 4541          JMS I FIUSER    /NO - START THE NEXT TRANSFER
 3215 03567 5761          JMP I DSKCON    /YES - THEN THERE IS NO MORE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 80


 3216                     IFZERO CPU-3 <
 3217             DC02EN, 0                       /THIS SUBROUTINE ENABLES ALL STATIONS AND ALL GROUPS
 3218                     CLA CMA
 3219                     MTON
 3220                     CLA                     /THEY'RE ENABLED NOW
 3221                     JMP I   DC02EN          /BYE BYE
 3222             
 3223             
 3224             DC02SL, 0                       /THIS ROUTINE SELECTS A GIVEN STATION AND GROUP
 3225                     TAD     DC7777          /ENTERED WITH LINE NUMBER IN AC.
 3226                     DCA     DC02EN          /SAVE FOR A SECOND
 3227                     TAD     DC17
 3228                     MTON                    /DISABLE ALL GROUPS
 3229                     CLA
 3230                     TAD     DC02EN          /REGET THE LINE NUMBER
 3231                     RTR
 3232                     RAR
 3233                     AND     C0003           /JUST MAJOR GROUP NUMBER
 3234                     CMA                     /ONE'S COMP NEGATE
 3235                     DCA     DCTEMP          /NOW PREPARE TO SET UP THE GROUP BITS.
 3236                     TAD     DC0220          /GROUP 1 BIT OFFSET ONE.
 3237                     CLL RAR                 /NOW SHIFT THE GROUP BIT ACCROSS
 3238                     ISZ     DCTEMP          /DONE?
 3239                     JMP     .-2             /NOPE
 3240                     DCA     DCTEMP          /SAVE GROUP BIT NOW IN DCTEMP
 3241                     TAD     DC02EN          /REGET THE LINE NUMBER
 3242                     AND     C0007           /JUST THE STATION BITS NOW
 3243                     CMA CLL CML             /SET THE LINC TO 1 WHILE NEGATING IT
 3244                     DCA     DC02EN
 3245                     RAR                     /ROTATE STATION BIT
 3246                     ISZ     DC02EN          /DONE
 3247                     JMP     .-2             /NOPE. LOOP
 3248                     TAD     DCTEMP          /ADD IN THE GROUP BIT
 3249                     MTON                    /SELECT IT, BABY
 3250                     CLA
 3251                     JMP I   DC02SL          /AND RETURN NOW
 3252             
 3253             DCTEMP, 0
 3254             DC17,   17
 3255             DC7777, -1
 3256             
 3257             TSER,   TAD     DC02LN          /GET THE LINE NUMBER NOW
 3258                     TAD     TBUFF           /GET THE TTY BUFFER NOW
 3259                     DCA     KTBUF           /SAVE FOR A SECOND NOW
 3260                     TAD I   KTBUF           /DOES HE HAVE A CHARACTER THERE?
 3261                     SPA CLA
 3262                     JMP     TSERX           /NOPE. JUST CLEAR THE FLAG
 3263                     TAD I   KTBUF           /GET THE CHARACTER NOW
 3264                     JMS I   TSERPP          /OUTPUT IT USING THE SPECIAL LITTLE ROUTINE NOW
 3265             DC02LN, 0                       /LINE NUMBER
 3266                     CLL CML RAR             /SET THE HIGH ORDER BIT ON[I HOPE THIS WORKS]
 3267                     DCA I   KTBUF           /STASH AWAY
 3268                     JMS     DC02EN          /ENABLE THE TTY'S NOW
 3269                     DISMIS                  /DISMIS IT.
 3270             
 3271             TSERPP, JBDC02                  /POINTER TO THE CHARACTER PUTTER
 3272             

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 81


 3273             TSERX,  TAD     DC02LN          /GET THE LINE NUMBER NOW
 3274                     SZA
 3275                     JMP     TSERX1          /IT'S THE DAMN DC02. WHAT A PAIN
 3276                     TCF
 3277                     JMP     TSERC           /CLEAN UP AND EXIT
 3278             
 3279             TSERX1, JMS     DC02SL          /SELECT THE RIGHT TTY
 3280                     MTCF
 3281                     JMP     TSERC           /CLEAN UP AND EXIT
 3282             
 3283             KSER,   TAD     DC02LN          /GET THE LINE NUMBER NOW
 3284                     TAD     KBUFF
 3285                     DCA     KTBUF           /PLAY AROUND WITH THE BUFFER POINTERS
 3286                     TAD     DC02LN          /REGET THE LINE NUMBER NOW
 3287                     SZA
 3288                     JMP     KSSER1          /DC02 INPUT
 3289                     KRB                     /READ IN THE CHARACTER NOW
 3290                     JMP     KSSER2          /COMMON FIXER
 3291             
 3292             KSSER1, JMS     DC02SL          /SELECT THE LINE NOW
 3293                     MKRB                    /READ IN THE CHARACTER NOW
 3294             
 3295             KSSER2, TAD     C1000           /FORCE THE CHARACTER NON-ZERO
 3296             TSERC,  DCA I   KTBUF
 3297                     JMS     DC02EN
 3298                     ISZ     ECHOFL
 3299                     DISMIS                  /NOT ECHOING
 3300                     TAD     .+2
 3301                     DISMIS                  /RETURN NOW
 3302                     ECHO                    /WITH ECHO POINTER IN THE AC.
 3303             ECHOFL, -1
 3304             
 3305             KTBUF,  0
 3306             DC0220, 20                      /GROUP STARTER UPPER
 3307                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 82


 3308                     PAGE
 3309             /TSS/8 CRASH-RECOVERY BOOTSTRAP
 3310             /WE JUST LOAD 'INIT' AND START IT.
 3311             /
 3312             /IN THE (VERY RARE) EVENT THE SYSTEM SHOULD CRASH OR (MORE LIKELY)
 3313             /A POWER OR HARDWARE FAILURE OCCURS, THIS ROUTINE MAY BE STARTED
 3314             /AT LOCATION 4200 IN FIELD 0.
 3315             /*RELOAD        /AUTO-RESTART STARTUP
 3316 03600 3202  RELOAD, DCA RBOOT       /SAVE THE CRASH-ADDRESS
 3317 03601 7410          SKP
 3318 03602 0000  RBOOT,  0               /ENTRY FOR AUTOMATIC RESTART
 3319 03603 6002          IOF
 3320 03604 7000          NOP             / (ROOM FOR POSSIBLE HLT)
 3321                     IFZERO DEBUG&7-2&4000   <*.-1; JMP .>
 3322             
 3323 03605 6201  BOOT,   CDF
 3324 03606 7340          CLA CLL CMA
 3325 03607 3624          DCA I B7751     /SET THE CORE ADDRESS -1
 3326 03610 3625          DCA I B7750     / & THE WORD-COUNT
 3327 03611 1226          TAD BTFLD       /GET THE 'INIT' FIELD
 3328             
 3329                     IFZERO RF08 <
 3330 03612 6615          DIML
 3331 03613 7326          CLA STL RTL
 3332 03614 6643          DXAL            /'INIT' IS ON TRACK 2
 3333                     >
 3334                     IFZERO RF08-40 <
 3335                     DEAL
 3336                     CLA
 3337                     NOP             /FOR SIZE ONLY
 3338                     >
 3339 03615 6603          DMAR            /READ THE TRACK
 3340 03616 6622          DFSC            / & WAIT
 3341 03617 5216          JMP .-1
 3342 03620 1202          TAD RBOOT
 3343 03621 6223          CIF CDF INFLD
 3344 03622 5623          JMP I .+1       /NOW START 'INIT'
 3345 03623 4201          AUTOST
 3346             
 3347 03624 7751  B7751,  7751
 3348 03625 7750  B7750,  7750
 3349                     IFZERO RF08 <
 3350 03626 0020  BTFLD,  INFLD
 3351                     >
 3352                     IFZERO RF08-40 <
 3353             BTFLD,  200+INFLD       /FIELD & TRACK
 3354                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 83


 3355             /THIS CODE RE-STARTS THE CLOCK & ALLOWS THE CONTINUATION
 3356             /OF A SYSTEM THAT WAS STOPPED IN 'NULJOB'.
 3357             
 3358             CONTIN,
 3359                     IFZERO DC08A <
 3360                             IFZERO CPU-1 <
 3361                     CLA CLL CMA
 3362                     CCF CLB         /SET PDP-8 CLOCK COUNT
 3363                             >
 3364                             IFNZRO CPU-3 <
 3365 03627 6131          CECI            /RE-ENABLE THE PDP-8 CLOCK
 3366                             >
 3367                             IFZERO CPU-3 <
 3368                     TAD PT12TM      /GET THE NUMBER OF TICKS PER OVERFLOW
 3369                     CLAB            /SEND TO THE CLOCK CONTROLLER
 3370                     CLA
 3371                     TAD PT12CM      /GET THE MAJOR CLOCK COUNT RATE
 3372                     CLLR            /AND SEND IT TO THE CONTROLLER
 3373                     CLA
 3374                     TAD PT12IN      /SET UP INTERRUPTS AND SO ON.
 3375                     CLEN
 3376                     CLSA            / & START THE CLOCK GOING
 3377                     CLA CMA         /SET TO ENABLE ALL SETS
 3378                     MTON
 3379                     CLA IAC         / AND ALSO THE INTERRUPTS
 3380                     MINT            / FOR THE FANTASTIC DC02
 3381                     CLA
 3382                             >
 3383                     >
 3384                     IFNZRO DC08A <
 3385                     TT8ON           /TURN ON THE DC08 CLOCK
 3386                     >
 3387                     IFZERO D689-4 <
 3388                     EDF             /RE-ENABLE THE DATA PHONES
 3389                     >
 3390             
 3391 03630 1111  SCHNUL, TAD C0100       /RUN NULL JOB IN USER MODE.
 3392 03631 3041          DCA L2SF        /FIELD 0; USER MODE
 3393 03632 1237          TAD SCHNJA
 3394 03633 3042          DCA L2SV0
 3395 03634 2044          ISZ L2SA        /BUMP THE SAVED AC
 3396 03635 7000          NOP
 3397 03636 5537          EXIT            /OFF TO NULL JOB
 3398             
 3399 03637 2000  SCHNJA, NULJOB
 3400             
 3401                     IFZERO CPU-3 <
 3402                     DECIMAL
 3403             PT12TM, -50             /50 MILLISECONDS PER INTERUPT
 3404                     OCTAL
 3405             PT12CM, 4100            /1 M.S. PER CLOCK TIC.
 3406             PT12IN, 300
 3407                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 84


 3408             
 3409             /"RSCHED" IS ENTERED AT THIS POINT
 3410             /RSCHED'S FUNCTION IS TO FIND JOBS TO RUN, REGARDLESS
 3411             /OF WHERE THEY MAY CURRENTLY RESIDE. IF THEY ARE IN CORE,
 3412             /GOOD; IF NOT THE NECESSARY STEPS WILL BE TAKEN TO
 3413             /BRING THEM INTO CORE. IN THE LATTER CASE, WE WILL THEN
 3414             /GO OFF AND FIND SOMETHING TO DO WHILE THE NON-RESIDENT
 3415             /JOB IS MADE RESIDENT
 3416             
 3417             /*SCHED0        /'RSCHED' ENTRY
 3418 03640 1062  SCHED0, TAD JOB
 3419 03641 0115          AND C0600
 3420 03642 7640          SZA CLA         /IS THIS A PHANTOM?
 3421 03643 5537          EXIT            /YES - CAN'T BUMP IT OFF
 3422 03644 1065          TAD SCHNEW
 3423 03645 7640          SZA CLA         /DOES THIS JOB GET A FULL SLICE?
 3424 03646 1064          TAD JOBTIM      /YES - IS IT RUNNING ON BORROWED TIME?
 3425 03647 7710          SPA CLA
 3426 03650 5537          EXIT            /NO, GO BACK TO IT
 3427 03651 5570          WAIT            /YES - START THE SCHEDULER
 3428             
 3429             
 3430             /CODE TO BEGIN A FILE LOAD INITIATED BY 'SI'; ALSO USED TO
 3431             /CONTINUE A LONG TRANSFER BY ANYONE ELSE.
 3432             /*READFI        /SI FILE-LOADER
 3433             
 3434 03652 1025  READFI, TAD SIREG
 3435 03653 3003  DSUEXT, DCA RDFJOB
 3436 03654 4301          JMS REMJOB      /REMEMBER WHO WE'RE KICKING OFF
 3437 03655 1003          TAD RDFJOB      /FIND RESIDENT FIELD FOR THIS JOB
 3438 03656 4533          CORE
 3439 03657 4637           FSWP+FIP+SI+37 /ANY FIELD WITH THIS JOB IN IT IS OK
 3440 03660 4552          REBOOT          /IF IT'S NOT THERE WE'RE SCREWED
 3441 03661 3041          DCA L2SF        /RESTORE FOR THIS JOB
 3442 03662 1003          TAD RDFJOB
 3443 03663 4554          RESJOB          /RESTORE LEVEL TWO FOR THIS JOB
 3444 03664 4546          GETJTW          /GET ADDRESS OF FILE PARAMETER BLOCK
 3445 03665 0007           JOBLNK
 3446 03666 6211          DATFLD
 3447 03667 5670          JMP I .+1       / AND OFF TO FILE HANDLER
 3448 03670 4731          SIFILE
 3449             /
 3450       0003  RDFJOB= WS0
 3451             
 3452             
 3453             /ROUTINE TO SET THE ERROR CODE FOR HUNG RK05 OR DECTAPE
 3454             /DETECTED IN FIELD 1 HANDLERS.
 3455             
 3456             /*DTRKHG        /ERROR SETTING FROM FIELD 1
 3457 03671 0000  DTRKHG, 0
 3458 03672 4536          ERROR           /JOB NUMBER IS PASSED IN THE AC
 3459 03673 0006           HUNGDV
 3460 03674 6213          CIF DATFLD
 3461 03675 5671          JMP I DTRKHG    / AND BACK TO FIELD 1
 3462             
 3463             /*RKL20         /LEVEL-2 DISPATCH FOR RK05
 3464 03676 6212  RKL20,  CIF DATFLD-1

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 85


 3465 03677 5700          JMP I .+1
 3466 03700 1615          RKL21

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 86


 3467             
 3468             /ROUTINE TO SAVE THE CURRENT JOB AND REMEMBER WHO WE BUMPED
 3469             /SO WE CAN CONTINUE HIM AFTER RESTARTING A DISC TRANSFER.
 3470             
 3471             IOR1,
 3472 03701 0000  REMJOB, 0
 3473 03702 1065          TAD SCHNEW
 3474 03703 0062          AND JOB         /ONLY REMEMBER HIM IF HE'S STILL USING 
 3475 03704 3051          DCA CURJOB      / HIS ORIGINAL QUANTUM SLICE
 3476 03705 4560          SAVJOB          /NOW SAVE HIS REGISTERS
 3477 03706 7240          CLA CMA
 3478 03707 3065          DCA SCHNEW      / AND SET THE FLAG FOR A FULL RESCHEDULE
 3479 03710 5701          JMP I REMJOB
 3480             
 3481             
 3482             /ROUTINE TO SET 'JSDEL' FOR THE JOB OWNING 'CONDDB'.
 3483             /ALSO GIVES HIM PRIORITY BY SETTING 'BONUS'.
 3484             
 3485 03711 0000  GIRBRK, 0
 3486 03712 1031          TAD CONDDB
 3487 03713 4721          JMS I GIRJBB    /GET HIS JOB NUMBER
 3488 03714 3045          DCA BONUS       / TO UP HIS PRIORITY
 3489 03715 1320          TAD GIRDLM
 3490 03716 4562          JMS I SETFLG    / AND SET THE DELIMITER BIT
 3491 03717 5711          JMP I GIRBRK
 3492             /
 3493 03720 4100  GIRDLM, JSDEL+JSTIME
 3494 03721 5567  GIRJBB, DEVJOB
 3495             
 3496             
 3497             /INCLUSIVE OR
 3498             /CALL   TAD ADDRESS OF WORD TO SET
 3499             /       CDF+(FIELD)     /FIELD WHERE DATA-WORD RESIDES
 3500             /       IOR
 3501             /        BITS TO SET
 3502             /       RETURN
 3503             
 3504 03722 0000  IOR0,   0
 3505 03723 3301          DCA IOR1
 3506 03724 1301          TAD IOR1
 3507 03725 0126          AND C7770
 3508 03726 7650          SNA CLA         /IS THIS A RATIONAL ADDRESS?
 3509                             IFNZRO DEBUG <
 3510                     REBOOT          /NO - ERROR *****
 3511                             >
 3512                             IFZERO DEBUG <
 3513 03727 5344          JMP IOREXT      /IN A PRODUCTION SYSTEM, JUST RETURN
 3514                             >
 3515 03730 6214          RDF             /FIELD TO SET IT IN
 3516 03731 1333          TAD .+2         /COMPUTE FIELD SELECT - FOR THAT FIELD
 3517 03732 3335          DCA .+3         /SAVE IT
 3518 03733 6201  UDFCDF, CDF
 3519 03734 1722          TAD I IOR0      /GET BITS TO SET
 3520 03735 0000          0               /SET FIELD AGAIN
 3521 03736 3371          DCA IOR2        /SAVE THEM
 3522 03737 1371          TAD IOR2
 3523 03740 7040          CMA

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 87


 3524 03741 0701          AND I IOR1      /CLEAR THE BITS IF ALREADY SET
 3525 03742 1371          TAD IOR2        /NOW SET THEM
 3526 03743 3701          DCA I IOR1      /SAVE NEW VALUE
 3527 03744 2322  IOREXT, ISZ IOR0        /SKIP ARGUMENT IN CALL
 3528 03745 5722          JMP I IOR0      /RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 88


 3529             
 3530             /ROUTINE TO HANDLE THE 'ACT' IOT - RETURN ANY JOB'S ACCT #
 3531 03746 1044  UACT,   TAD L2SA        /GET THE DESIRED JOB #
 3532 03747 7450          SNA             /HIS OWN JOB?
 3533 03750 1062          TAD JOB         /YES
 3534 03751 0107          AND C0037
 3535 03752 1063          TAD JOBTBA
 3536 03753 4545          GETJTI          /GET THE ACCOUNT #
 3537 03754 0015           JOBACT
 3538 03755 5362          JMP UUSAC1      / AND RETURN IT IN HIS AC
 3539             
 3540             /RETURN SEVERAL SIMPLE VALUES TO THE USER.
 3541 03756 0024          TICSPS
 3542 03757 1356  URCR,   TAD .-1         /RETURN THE REAL-TIME CLOCK-RATE
 3543 03760 5362          JMP UUSAC1
 3544             
 3545 03761 1035  UDATE,  TAD DATE        /RETURN TODAY'S DATE
 3546 03762 3044  UUSAC1, DCA L2SA
 3547 03763 5567          UUOEXT
 3548             
 3549             /CODE TO HANDLE THE 'TSS' IOT.
 3550 03764 0031          VERNUM
 3551 03765 1364  UTSS,   TAD .-1
 3552 03766 3044          DCA L2SA        /RETURN THE MONITOR VERSION #
 3553 03767 5770          JMP I .+1       / AND SIMULATE SKIP
 3554 03770 0334          UUOEX2
 3555             
 3556             /ROUTINE TO SET UP SUBROUTINE 'UDF'.
 3557             IOR2,
 3558 03771 0000  UDFSET, 0
 3559 03772 1041          TAD L2SF        /GET THE USER'S FIELD
 3560 03773 0110          AND C0070
 3561 03774 1333          TAD UDFCDF      / & FORM A CDF INSTR.
 3562 03775 3172          DCA UUDF
 3563 03776 5771          JMP I UDFSET

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 89


 3564                     PAGE
 3565             /QUEUE DISC REQUEST
 3566             /CALL   TAD ADDRESS OF TRANSFER BLOCK
 3567             /       JMS DSQUE
 3568             /       RETURN
 3569             
 3570                     IFNZRO FILPIF-2 <GLITCH; *.-1>
 3571       0076  DSQFLD= C0002   /FILPIF
 3572             
 3573 04000 0000  DSQUE,  0
 3574 04001 3216          DCA DSQUE1      /SAVE ADDRESS OF PARAMETER BLOCK
 3575 04002 1216          TAD DSQUE1      /NOW GET POINTER TO WORD WITH FIELD & FILE DATA
 3576 04003 1076          TAD DSQFLD
 3577 04004 3230          DCA DSQUE2      /SAVE POINTER
 3578 04005 6211          DATFLD
 3579 04006 1630          TAD I DSQUE2    /GET FIELD # (BITS 7-9) AND FILE # (BITS 10-11)
 3580 04007 0107          AND C0037       /USE THIS VALUE AS DSUTBL INDEX
 3581 04010 1054          TAD DSUTBA
 3582 04011 3230          DCA DSQUE2      /SAVE POINTER TO DSUTBL
 3583 04012 1216          TAD DSQUE1      /GET PARAMETER ADDRESS
 3584 04013 3630          DCA I DSQUE2    /SAVE IN DSUTBL
 3585 04014 6201          CDF             /AND EXIT
 3586 04015 5600          JMP I DSQUE
 3587             
 3588                     IFNZRO JCOMBD-1000      <GLITCH; *.-1>
 3589             DSQUE1,
 3590 04016 0000  COMBND, 0
 3591 04017 1064          TAD JOBTIM
 3592 04020 7640          SZA CLA         /ANY PART OF HIS TIME-SLICE LEFT?
 3593 04021 5616          JMP I COMBND    /YES - SO HE'S NOT COMPUTE-BOUND NOW
 3594 04022 4546          GETJTW          /NO - GET HIS JOB STATUS-WORD
 3595 04023 0000           JOBSTS
 3596 04024 1120          TAD C1000       / AND SET THE 'JCOMBD' BIT
 3597 04025 6211          DATFLD
 3598 04026 3405          DCA I JOBSWA
 3599 04027 5616          JMP I COMBND    /THEN RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 90


 3600             /RETURN CONTENT OF JOB STATUS FOR CURRENT JOB
 3601             /CALL:  GETJTW
 3602             /        RELATIVE ADDRESS OF WORD
 3603             /       RETURN (VALUE IN AC, ADDRESS IN 'JOBSWA')
 3604             
 3605             DSQUE2,
 3606 04030 0000  GETJW0, 0
 3607 04031 6201          CDF
 3608 04032 1630          TAD I GETJW0    /GET THE RELATIVE ADDRESS
 3609 04033 3236          DCA .+3         / AND SAVE IT
 3610 04034 1072          TAD JOBDAT
 3611 04035 4545          GETJTI          /NOW PICK UP THE WORD
 3612 04036 0000           0
 3613 04037 2230          ISZ GETJW0      /SKIP PAST THE PARAMETER
 3614 04040 5630          JMP I GETJW0    / AND RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 91


 3615             /*L2EXIT        /LEVEL-2 EXIT ROUTINE
 3616             /LEVEL-2 EXIT ROUTINE -- WE CHECK THE KEYBOARD INPUTS,
 3617             /THEY HAVE TO BE HIGHEST PRIORITY; THEN WE CHECK FOR
 3618             /ANYTHING ELSE ON THE LEVEL-2 QUEUE.  IF WE'RE ALL CAUGHT
 3619             /UP, WE MAKE ONE LAST CHECK FOR TERMINAL OUTPUT NEEDS.
 3620             /THEN WE RESTORE WHATEVER USER WAS ACTIVE WHEN IT ALL STARTED.
 3621             
 3622 04041 2011  CONINP, CONIN
 3623 04042 6413  CONOUA, CONOUT
 3624 04043 7572  L2KEY,  KEYC
 3625 04044 7007  L2QTA,  L2QTB-1
 3626 04045 0041  L2SFA,  L2SF
 3627 04046 7566  L2TFLG, TTOFLG
 3628                     IFNZRO DSI-1000 <GLITCH; *.-1>
 3629       0120  L2XCT1= C1000   /DSI
 3630 04047 0040  L2XCT2, CTRLC
 3631 04050 6274  L2XUFN, SUF     /USER MODE
 3632             
 3633 04051 6201  L2EXIT, CDF
 3634 04052 7200          CLA
 3635 04053 6002          IOF
 3636 04054 1643          TAD I L2KEY
 3637 04055 7640          SZA CLA         /ANY KEYBOARD INPUT WAITING?
 3638 04056 5641          JMP I CONINP    /YES - GRAB IT QUICK!
 3639 04057 1013  L2EX0,  TAD L2Q
 3640 04060 7041          CIA
 3641 04061 1014          TAD L2QE
 3642 04062 7650          SNA CLA         /LEVEL-2 QUEUE DRAINED?
 3643 04063 5270          JMP L2EX1       /YES
 3644 04064 1414          TAD I L2QE      /NO - FETCH THE NEXT TASK
 3645 04065 3005          DCA JOBSWA
 3646 04066 6001          ION
 3647 04067 5405          JMP I JOBSWA    / AND OFF TO IT
 3648             
 3649 04070 1244  L2EX1,  TAD L2QTA       /RESET EMPTY POINTER TO L2QUE
 3650 04071 3014          DCA L2QE
 3651 04072 1244          TAD L2QTA       /RESET FILL POINTER TO L2QUE
 3652 04073 3013          DCA L2Q
 3653 04074 1646          TAD I L2TFLG
 3654 04075 7650          SNA CLA         /ANY OUTPUTTERS NEED SERVICE?
 3655 04076 5642          JMP I CONOUA    /YES
 3656 04077 1245          TAD L2SFA
 3657 04100 3003  RESTOR, DCA WS0         /POINTER TO SAVED INFO
 3658 04101 1403          TAD I WS0       /SAVED FIELDS AND STATE
 3659 04102 3000          DCA 0           /RESTORE FIELDS AND MODE
 3660 04103 1000          TAD 0
 3661 04104 0110          AND C0070       /GET INSTRUCTION FIELD
 3662 04105 1122          TAD C6203
 3663 04106 3365          DCA RCIF        /CIF FOR PROPER FIELD
 3664 04107 1000          TAD 0
 3665 04110 7106          CLL RTL
 3666 04111 7004          RAL
 3667 04112 0110          AND C0070       /CDF FOR RETURN
 3668 04113 1353          TAD C6201       /NOT NECESSARY EQUAL TO INSTRUCTION FIELD
 3669 04114 3366          DCA RCDF
 3670 04115 1000          TAD 0
 3671 04116 0111          AND C0100       /USER PROGRAM, FIP OR SI?

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 92


 3672 04117 7650          SNA CLA         /USER MODE OR EXEC MODE?
 3673 04120 5351          JMP L2EX2       /EXEC MODE
 3674 04121 1250          TAD L2XUFN
 3675 04122 3367          DCA RUFF        /SET USER-MODE FLAG UPON EXIT
 3676 04123 1062          TAD JOB
 3677 04124 7450          SNA             /IS THIS A REAL JOB?
 3678 04125 5353          JMP L2EX3       /NO - MUST BE NULJOB
 3679 04126 4565          TTYUSE          /YES - GET HIS INPUT DDB
 3680 04127 3004          DCA WS1
 3681 04130 6211          DATFLD
 3682 04131 1404          TAD I WS1       /PICK UP HIS DDB STATUS-BITS
 3683 04132 0120          AND L2XCT1
 3684 04133 7640          SZA CLA         /IS HE IN 'SI' MODE?
 3685 04134 5353          JMP L2EX3       /YES - THEN ANY CTRL/C WOULD BE 'SI'S
 3686 04135 1404          TAD I WS1
 3687 04136 0247          AND L2XCT2
 3688 04137 7450          SNA             /NO - WAS CTRL/C TYPED?
 3689 04140 5353          JMP L2EX3       /NO
 3690 04141 7040          CMA
 3691 04142 0404          AND I WS1       /YES - CLEAR THE FLAG
 3692 04143 3404          DCA I WS1
 3693 04144 4546          GETJTW          /GET HIS PROGRAM-RESTART ADDRESS
 3694 04145 0005           JOBSRA
 3695 04146 3000          DCA 0
 3696 04147 7300          CLA CLL         /HIS AC & LINK GET CLEARED
 3697 04150 5365          JMP RCIF        / & HE'S RESTARTED
 3698 04151 1366  L2EX2,  TAD RCDF
 3699 04152 3367          DCA RUFF        /LEAVE USER-MODE FLAG CLEARED FOR EXEC STUFF
 3700             L2EX3,
 3701 04153 6201  C6201,  CDF
 3702 04154 2003          ISZ WS0
 3703 04155 1403          TAD I WS0       /PC
 3704 04156 3000          DCA 0
 3705 04157 2003          ISZ WS0
 3706 04160 1403          TAD I WS0       /LINK
 3707 04161 7106          CLL RTL
 3708 04162 2003          ISZ WS0
 3709 04163 7200          CLA
 3710 04164 1403          TAD I WS0       /AC
 3711 04165 0000  RCIF,   0
 3712 04166 0000  RCDF,   0
 3713 04167 0000  RUFF,   0               /'SUF' IF USER MODE, 'NOP' IF EXEC MODE
 3714 04170 6001          ION
 3715 04171 5400          JMP I 0         /BACK TO INTERRUPTED PROGRAM
 3716             
 3717             
 3718             /IF WE CAN'T FINISH AN IOT FOR LACK OF SYSTEM FACILITIES,
 3719             /WE BACK UP THE USER'S PC TO POINT TO THE SAME IOT AND
 3720             /HOPE THAT THINGS WILL LOOSEN UP SHORTLY.
 3721             
 3722             /*REDO0         /'REDO' AND IOT
 3723 04172 7340  REDO0,  CLA CLL CMA
 3724 04173 1042          TAD L2SV0       /BACK UP HIS PC
 3725 04174 3042          DCA L2SV0
 3726 04175 5570          WAIT            / AND RESCHEDULE

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 93


 3727                     PAGE
 3728                     IFNZRO .-4200   <GLITCH; *.-1>
 3729             
 3730             /STANDARD BOOTSTRAP AND RESTART ADDRESSES.
 3731             
 3732 04200 5602          JMP I .+2       /INIT BOOTSTRAP
 3733 04201 5603          JMP I .+2       /RESTART ADDRESS
 3734 04202 3605          BOOT
 3735 04203 3627          CONTIN
 3736             
 3737             /ROUTINE TO SET A FLAG IN THE USER STATUS REGISTER
 3738             /CALL:   (CONDBA POINTS TO DEVTBL ENTRY)
 3739             /       TAD (FLAGS)
 3740             /       JMS PTSTAR
 3741             /
 3742 04204 0000  PTSTAR, 0
 3743 04205 3217          DCA PTFLAG      /SAVE THE FLAGS
 3744 04206 1430          TAD I CONDBA
 3745 04207 4621          JMS I PTJOB     /GET THE OWNER'S JOB NUMBER
 3746 04210 7450          SNA             /IS IT OWNED?
 3747 04211 5604          JMP I PTSTAR    /NO - JUST RETURN
 3748 04212 1063          TAD JOBTBA
 3749 04213 3256          DCA PTSTRP      /YES - SET A POINTER TO HIS REGISTER
 3750 04214 7326          CLA CLL CML RTL
 3751 04215 1656          TAD I PTSTRP
 3752 04216 4550          IOR             /NOW 'OR' THE FLAGS INTO HIS 'STR1'
 3753 04217 0000  PTFLAG,  0
 3754 04220 5604          JMP I PTSTAR    /THEN RETURN
 3755             /
 3756 04221 5567  PTJOB,  DEVJOB
 3757             
 3758                     IFZERO CPU-2 <
 3759 04222 6006  USGT,   SGT             /SKIP ON EAE GREATER-THAN FLAG
 3760 04223 5567          UUOEXT
 3761 04224 5625          JMP I .+1       /SKIP ON RETURN
 3762 04225 0334          UUOEX2
 3763                     >
 3764                     IFNZRO CPU&7776 <
 3765 04226 1043  UGTF,   TAD L2SVLK
 3766 04227 7106          CLL RTL
 3767 04230 7204          CLA RAL
 3768 04231 6006          SGT             /SKIP ON THE GREATER-THAN FLAG
 3769 04232 7410          SKP
 3770 04233 7132          CLL CML RTR     /LINK = AC0, GT FLAG = AC1
 3771 04234 3044          DCA L2SA
 3772 04235 5567          UUOEXT
 3773             
 3774 04236 7333  URTF,   CLA CLL CML IAC RTR     /AC=6000
 3775 04237 0044          AND L2SA        /MASK OFF THE NEW LINK & GT FLAG
 3776 04240 6005          RTF             /RESTORE THE GT FLAG & LINK
 3777 04241 7212          CLA RTR
 3778 04242 3043          DCA L2SVLK      / AND SAVE HIS LINK
 3779 04243 5567          UUOEXT
 3780                     >

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 94


 3781             /HANDLER FOR THE 'HLT' AND 'OSR' INSTRUCTIONS
 3782             /
 3783 04244 0044  UHALSA, L2SA
 3784             
 3785 04245 1004  UHALT,  TAD UUOCAL      /IS IT A 7404?
 3786 04246 0100          AND C0004
 3787 04247 7650          SNA CLA         /OSR?
 3788 04250 5257          JMP UHALT1      /NO
 3789 04251 4546          GETJTW          /YES, GET CURRENT VALUE OF SWITCHES
 3790 04252 0010           JOBSWR
 3791 04253 3256          DCA UHALT2      /OR IT INTO AC
 3792 04254 1244          TAD UHALSA      /WHICH IS RIDICULOUS, SINCE OSR
 3793 04255 4550          IOR             /IS UNIVERSALLY CODED AS LAS, AND
 3794             PTSTRP,
 3795 04256 0000  UHALT2,  0              /A SIMPLE "DCA L2SA" WOULD DO
 3796 04257 1004  UHALT1, TAD UUOCAL      /NOW SEE IF IT WAS MICROCODED
 3797 04260 0076          AND C0002       /HALT?
 3798 04261 7650          SNA CLA
 3799 04262 5567          UUOEXT          /NO
 3800 04263 4546          GETJTW          /YES, CLEAR HIS RUN BIT
 3801 04264 0000           JOBSTS
 3802 04265 0317          AND UHBITS
 3803 04266 1320          TAD UJSHLT      / & SET THE 'HLT' BIT
 3804 04267 6211          DATFLD
 3805 04270 3405          DCA I JOBSWA
 3806 04271 2020          ISZ COMCNT      /INDICATE THAT 'SI' HAS WORK TO DO
 3807 04272 1062          TAD JOB
 3808 04273 4565          TTYUSE          /NOW GET HIS KEYBOARD NUMBER
 3809 04274 3031          DCA CONDDB
 3810 04275 6211          DATFLD
 3811 04276 4721          JMS I USBCSI    /IS HE ALREADY IN SI MODE?
 3812 04277 5570          WAIT            /YES
 3813             /?      TAD CONDDB
 3814             /?      CLRBUF          /NO - CLEAR HIS INPUT BUFFER
 3815 04300 1031          TAD CONDDB
 3816 04301 4550          IOR             /NOW SET THE 'SI' BIT
 3817             /?       DSI            / (MUST CLEAR 'DFULL' IF CLEARING INPUT)
 3818 04302 1100           DSI+SICOM
 3819 04303 2030          ISZ CONDBA      /NOW POINTS TO OUTPUT ENTRY
 3820 04304 6201          CDF
 3821 04305 1307          TAD UH215
 3822 04306 4551          PRINT           /PRINT THE 'CR-LF-DOT'
 3823 04307 0215  UH215,  215
 3824 04310 1312          TAD UH212
 3825 04311 4551          PRINT
 3826 04312 0212  UH212,  212
 3827 04313 1315          TAD UHDOT
 3828 04314 4551          PRINT
 3829 04315 0256  UHDOT,  ".
 3830             /?      TAD USBDEL
 3831             /?      UUOEXT          /CLEAR 'JSDEL' (SINCE INPUT WAS CLEARED) AND RESCHEDULE
 3832 04316 5570          WAIT
 3833             
 3834 04317 3567  UHBITS, -JSRUN-JSHLT-JSINER-1
 3835 04320 0200  UJSHLT, JSHLT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 95


 3836             /SET BUFFER CONTROL FLAGS
 3837             
 3838 04321 4437  USBCSI, CHKSI
 3839                     IFNZRO DFULL-400        <GLITCH; *.-1>
 3840       0123  USBFFC= C7377   /-DFULL-1
 3841 04322 1511  USBFLG, CLSTR1
 3842 04323 0020  USBTEL, JSTEL
 3843                     IFNZRO JSDEL-100        <GLITCH; *.-1>
 3844       0111  USBDEL= C0100   /JSDEL
 3845             
 3846 04324 1062  USBC,   TAD JOB
 3847 04325 4565          TTYUSE          /GET THE INPUT-DDB POINTER
 3848 04326 3031          DCA CONDDB
 3849 04327 1044          TAD L2SA
 3850 04330 7104          CLL RAL
 3851 04331 7700          SMA CLA         /CLEAR INPUT DDB?
 3852 04332 5345          JMP USBC1       /NO
 3853 04333 6211          DATFLD
 3854 04334 4721          JMS I USBCSI    /YES - IS HE IN 'SI' MODE?
 3855 04335 5345          JMP USBC1       /YES - CAN'T CLEAR INPUT NOW
 3856 04336 1031          TAD CONDDB
 3857 04337 4532          CLRBUF          /NO - CLEAR THE BUFFER
 3858 04340 1431          TAD I CONDDB
 3859 04341 0123          AND USBFFC      /CLEAR ANY 'FULL' FLAG
 3860 04342 3431          DCA I CONDDB
 3861 04343 1111          TAD USBDEL
 3862 04344 4722          JMS I USBFLG    / AND THE 'JSDEL' FLAG
 3863 04345 1044  USBC1,  TAD L2SA
 3864 04346 7700          SMA CLA         /CLEAR THE OUTPUT SIDE?
 3865 04347 5356          JMP USBC2       /NO
 3866 04350 2030          ISZ CONDBA      /YES - NOW POINTS TO OUTPUT SIDE
 3867 04351 6211          DATFLD
 3868 04352 1430          TAD I CONDBA
 3869 04353 4532          CLRBUF          /CLEAR THE BUFFER
 3870 04354 1323          TAD USBTEL
 3871 04355 4722          JMS I USBFLG    / AND THE 'JSTEL' FLAG
 3872 04356 3044  USBC2,  DCA L2SA        /FINALLY, CLEAR HIS AC
 3873 04357 5567          UUOEXT
 3874             
 3875             
 3876             /SKIP IF DISC IS NOT ACTIVE (IN A PARTICULAR FIELD)
 3877             /CALL:  TAD FIELD #
 3878             /       JMS DSKACT
 3879             /        ..DISC ACTIVE
 3880             /        ..DISC NOT ACTIVE
 3881             
 3882 04360 3060  DAUTBL, DSUTBL-1
 3883             
 3884 04361 0000  DSKACT, 0
 3885 04362 7106          CLL RTL         /FIELD * 4 IS MAJOR INDEX INTO DSUTBL
 3886 04363 1360          TAD DAUTBL
 3887 04364 3015          DCA AXS1
 3888 04365 6211          DATFLD
 3889 04366 1415          TAD I AXS1      /FILE # 0 BUSY?
 3890 04367 1415          TAD I AXS1      / "     1  "
 3891 04370 1415          TAD I AXS1      / "     2  "
 3892 04371 1415          TAD I AXS1      / "     3  "

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 96


 3893 04372 6201          CDF
 3894 04373 7650          SNA CLA         /IF ANY ONE WAS BUSY, AC .NE. 0
 3895 04374 2361          ISZ DSKACT      /NOPE - INDEX RETURN
 3896 04375 5761          JMP I DSKACT

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 97


 3897                     PAGE
 3898             
 3899             /ROUTINE USED BY 'SI' AND 'FIP' TO CLEAR DEVICE BUFFERS.
 3900             /'DATFLD' MUST BE SET WHEN CALLED.
 3901             /*SICLR         /BUFFER CLEAR ROUTINE
 3902             
 3903 04400 0000  SICLR,  0
 3904 04401 4532          CLRBUF          /CLEAR THE BUFFER
 3905 04402 6223          CDI 20
 3906 04403 5600          JMP I SICLR     / AND RETURN
 3907             
 3908             
 3909             /*UUOERR        /USER IOT ERROR
 3910 04404 1062  UUOERR, TAD JOB
 3911 04405 4536          ERROR           /SET 'ILLEGAL IOT' ERROR CODE
 3912 04406 0001           UUOERF
 3913 04407 5570  USYN,   WAIT            / AND BACK TO SCHEDULER
 3914             
 3915 04410 1062  UUSE,   TAD JOB         /RETURN USER'S JOB # IN AC
 3916 04411 7410          SKP
 3917             
 3918 04412 1114  USIZE,  TAD SEGSIZ      /RETURN DISC SEGMENT SIZE
 3919 04413 3044          DCA L2SA
 3920 04414 5567          UUOEXT
 3921             
 3922             /ROUTINE TO HANDLE THE 'STM' IOT - WE MERELY MAKE
 3923             /AN ENTRY IN 'CLKTBL' FOR THIS JOB.
 3924                     IFNZRO JSTIME-4000      <GLITCH; *.-1>
 3925             
 3926 04415 1044  USTM,   TAD L2SA
 3927 04416 7450          SNA             /ANY WAIT-TIME REQUESTED?
 3928 04417 5570          WAIT            /NO - JUST TREAT IT LIKE THE 'SYN' IOT
 3929 04420 7041          CIA
 3930 04421 3003          DCA WS0         /SAVE THE NUMBER OF SECONDS
 3931 04422 3044          DCA L2SA        /CLEAR USER'S AC
 3932 04423 5226          JMP .+3
 3933             
 3934 04424 1127  DOXSTM, TAD C7776       /WAIT 2 SECONDS TO TRY TO FIX I/O ERROR
 3935 04425 3003          DCA WS0         /SAVE - # UNITS OF TIME
 3936 04426 1062          TAD JOB         /SET CLKTBL ENTRY FOR THIS JOB
 3937 04427 1236          TAD CLKTBA
 3938 04430 3004          DCA WS1         /POINTS TO THIS JOB'S ENTRY
 3939 04431 1003          TAD WS0
 3940 04432 6211          DATFLD
 3941 04433 3404          DCA I WS1       /SET TABLE ENTRY
 3942 04434 7130          STL RAR         /SET AC=JSTIME
 3943 04435 5567          UUOEXT          /EXIT AND WAIT
 3944             
 3945 04436 2722  CLKTBA, CLKTBL  /JOB TIMER TABLE ADDRESS
 3946             
 3947             /ROUTINE TO CHECK THE 'DSI' FLAG IN A KEYBOARD DDB
 3948             /AND TAKE THE FIRST RETURN IF IT IS SET.
 3949                     IFNZRO DSI-1000 <GLITCH; *.-1>
 3950             
 3951 04437 0000  CHKSI,  0
 3952 04440 1431          TAD I CONDDB
 3953 04441 0120          AND C1000

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 98


 3954 04442 7650          SNA CLA         /USER MODE?
 3955 04443 2237          ISZ CHKSI       /YES - TAKE THE SECOND EXIT
 3956 04444 5637          JMP I CHKSI
 3957             
 3958             
 3959 04445 4647  SCHFAN, JMS I SCHREM    /REMEMBER THE DISPLACED JOB
 3960 04446 5561          SCHED
 3961             
 3962 04447 3701  SCHREM, REMJOB

      /TSS-8.25 CONFIGURATION FOR UWM                                    Page 99


 3963 04450 0000  FILERC, 0               /ROUTINE TO RECOVER FROM DISC ERRORS
 3964 04451 0000  FILUSA, 0               /AND SET ERROR CODES FOR USER
 3965 04452 0000  FILEWC, 0               /ERROR CODES ARE:
 3966       0171  FILER1= WS2             /       1  PARITY
 3967                                     /       2  END OF FILE
 3968                                     /       3  FILE NOT OPEN
 3969                                     /       4  PROTECTION VIOLATION
 3970                     IFNZRO FILPCA-4 <GLITCH; *.-1>
 3971       0100  FILECA= C0004   /FILPCA
 3972                     IFNZRO FILPCT-7 <GLITCH; *.-1>
 3973       0103  FILECT= C0007   /FILPCT
 3974                     IFNZRO FILPIF-2 <GLITCH; *.-1>
 3975       0076  FILEIF= C0002   /FILPIF
 3976                     IFNZRO FILWC-6  <GLITCH; *.-1>
 3977       0102  FILWCA= C0006   /FILWC
 3978 04453 6000  C6000,  6000
 3979 04454 0000  FILERR, 0
 3980 04455 3250          DCA FILERC      /ERROR CODE
 3981 04456 6201          CDF
 3982 04457 7344          CLA CLL CMA RAL /AC:=-2
 3983 04460 1250          TAD FILERC      /ERROR CODE - GT.2?
 3984 04461 7750          SPA SNA CLA     /PROTECTED OR NOT OPEN?
 3985 04462 5277          JMP FILER2      /NO
 3986 04463 4546          GETJTW          /GET ADDRESS OF PARAMETER BLOCK
 3987 04464 0007           JOBLNK
 3988 04465 4555          RETBLK          /RETURN IT TO FREE CORE
 3989 04466 7200          CLA
 3990 04467 1044          TAD L2SA        /GET POINTER TO PARAMETERS IN USER AREA
 3991 04470 1101          TAD C0005
 3992 04471 3254          DCA FILERR      /POINTS TO SIXTH USER PARAMETER (ERROR CODE)
 3993 04472 1250          TAD FILERC      /GET ERROR
 3994 04473 4171          UDF             /SELECT USER FIELD
 3995 04474 3654          DCA I FILERR    /PASS ERROR TO USER
 3996 04475 3044          DCA L2SA        /CLEAR HIS AC
 3997 04476 5567          UUOEXT          /AND BACK TO HIM
 3998             
 3999 04477 1654  FILER2, TAD I FILERR    /END OF FILE OR PARITY ERROR...
 4000 04500 1076          TAD FILEIF      /GET ADDRESS OF FILE PARAMETER BLOCK
 4001 04501 3365          DCA FILER5      /POINTS TO WORD 3 OF BLOCK
 4002 04502 6211          DATFLD
 4003 04503 1765          TAD I FILER5    /WAS FILE CALL ORIGINATED BY SI?
 4004 04504 0253          AND C6000       /BITS 0-1 WILL BE SET IF SO...
 4005 04505 7650          SNA CLA
 4006 04506 5333          JMP FILER4      /NO - IT CAME FROM USER PROGRAM
 4007 04507 1765          TAD I FILER5    /YES - GET FIELD # FOR TRANSFER
 4008 04510 7012          RTR
 4009 04511 0103          AND C0007       /MASK OUT FILE # BITS
 4010 04512 1050          TAD CORTBA      /INDEX INTO CORTBL
 4011 04513 3251          DCA FILUSA      /SAVE POINTER TO CORTBL ENTRY FOR THIS TRANSFER
 4012 04514 6201          CDF
 4013 04515 1651          TAD I FILUSA    /GET CORTBL ENTRY
 4014 04516 0107          AND C0037       /EXTRACT JOB #
 4015 04517 3251          DCA FILUSA      /SAVE JOB #
 4016 04520 1250          TAD FILERC
 4017 04521 7440          SZA             /WAS THERE ANY ERROR AT ALL?
 4018 04522 1127          TAD C7776
 4019 04523 7650          SNA CLA         /YES - WAS IT OTHER THAN AN END-OF-FILE?

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 100


 4020 04524 5330          JMP FILER3      /NO - WE'RE ALMOST DONE THEN
 4021 04525 1251          TAD FILUSA      /MUST BE PARITY ERROR - SET THE ERROR CODE
 4022 04526 4536          ERROR
 4023 04527 0005           DSKERR
 4024 04530 2254  FILER3, ISZ FILERR      /INDEX PAST CALLING ARGUMENT
 4025 04531 6201          CDF
 4026 04532 5654          JMP I FILERR    /AND BACK
 4027             
 4028             
 4029 04533 1765  FILER4, TAD I FILER5    /UPDATE USER CONTROL TO INDICATE ERROR CODE
 4030 04534 7004          RAL             /SHIFT FIELD # INTO BITS 6-8
 4031 04535 0110          AND C0070       /SAVE IT
 4032 04536 1340          TAD FILCDF      /GENERATE "UDF"
 4033 04537 3365          DCA FILER5      /USER FIELD SELECT
 4034 04540 6201  FILCDF, CDF
 4035 04541 1654          TAD I FILERR    /PARAMETER BLOCK ADDRESS
 4036 04542 3252          DCA FILEWC      /SAVE IT
 4037 04543 1252          TAD FILEWC
 4038 04544 6211          DATFLD
 4039 04545 1100          TAD FILECA
 4040 04546 3171          DCA FILER1      /POINTS TO CORE ADDRESS IN PARAMETER BLOCK
 4041 04547 1571          TAD I FILER1    /GET CORE ADDRESS
 4042 04550 3171          DCA FILER1      /SAVE IT
 4043 04551 1252          TAD FILEWC      /START OF PARAMETERS
 4044 04552 1103          TAD FILECT      /+7
 4045 04553 3251          DCA FILUSA      /POINTS TO PTR TO FILE CONTROL
 4046 04554 1651          TAD I FILUSA    /GET ADDRESS OF FILE CONTROL
 4047 04555 1102          TAD FILWCA      /POINTS TO WORD COUNT IN FILE CONTROL
 4048 04556 3252          DCA FILEWC      /SAVE IT
 4049 04557 1252          TAD FILEWC
 4050 04560 7001          IAC
 4051 04561 3251          DCA FILUSA      /POINTS TO POINTER TO USER PARAMETERS
 4052 04562 1651          TAD I FILUSA    /GET POINTER TO USER ARGUMENTS
 4053 04563 3251          DCA FILUSA      /SAVE
 4054 04564 1652          TAD I FILEWC    /GET WORD COUNT TO GO FROM CONTROL BLOCK
 4055 04565 0000  FILER5, 0               /SELECT USER FIELD
 4056 04566 3651          DCA I FILUSA    /SAVE IN USER AREA
 4057 04567 2251          ISZ FILUSA      /POINTS TO WORD 4 OF USER ARGUMENTS
 4058 04570 1171          TAD FILER1      /GET LATEST CORE XFER ADDRESS
 4059 04571 3651          DCA I FILUSA    /SAVE FOR USER
 4060 04572 2251          ISZ FILUSA
 4061 04573 2251          ISZ FILUSA      /POINTS TO WORD 6 (ERROR WORD)
 4062 04574 1250          TAD FILERC
 4063 04575 3651          DCA I FILUSA    /PASS THE ERROR CODE ON TO USER
 4064 04576 5330          JMP FILER3      /AND BACK

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 101


 4065                     PAGE
 4066             
 4067             /RFILE AND WFILE IOTS
 4068             
 4069 04600 1365  UFILE,  TAD UFILWA      /GET USER PARAMETERS
 4070 04601 4767          JMS I UFPARM    /AND MOVE TO PARAMETER BLOCK
 4071 04602 1770          TAD I UFLNKA    /ADDRESS OF PARAMETER BLOCK
 4072 04603 1076          TAD UFIPIF
 4073 04604 3003          DCA UFPARA      /POINTS TO WORD 3 OF BLOCK
 4074 04605 6211          DATFLD
 4075 04606 1403          TAD I UFPARA    /CLEAR ALL BUT FILE # IN BLOCK
 4076 04607 0077          AND C0003
 4077 04610 3403          DCA I UFPARA    /SAVE IT
 4078 04611 1044          TAD L2SA        /ADDRESS OF USER PARAMETERS
 4079 04612 1076          TAD UFIPWC      /+2
 4080 04613 3344  SIFIL1, DCA UFILE1      /POINTS TO WORD COUNT IN USER AREA
 4081 04614 1403          TAD I UFPARA    /FILE #
 4082 04615 0077          AND C0003
 4083 04616 1366          TAD UFJF0
 4084 04617 3221          DCA UFJOBF      /RELATIVE ADDR OF FILE POINTER FOR THIS FILE
 4085 04620 4546          GETJTW
 4086 04621 0000  UFJOBF,  0              /POINTER TO FILE CONTROL INFO
 4087 04622 7450          SNA
 4088 04623 5341          JMP UFILER+1    /FILE NOT OPEN
 4089 04624 3221          DCA UFJOBF      /SAVE POINTER TO FILE CONTROL
 4090 04625 6211          DATFLD
 4091 04626 1403          TAD I UFPARA    /FILE #
 4092 04627 4775          JMS I UFIGJF    /GENERATE CORRESPONDING FILE BIT IN STR1
 4093 04630 3004          DCA UFIJSF      /FILE STATUS FLAG
 4094 04631 1041          TAD L2SF        /USER'S FIELD #
 4095 04632 0103          AND C0007
 4096 04633 7106          CLL RTL         /*4
 4097 04634 3005          DCA JOBSWA      /SAVE
 4098 04635 1403          TAD I UFPARA    /GET FILE # + ORIGINATING STATUS INFO.
 4099 04636 0364          AND C7743       /CLEAR FIELD #
 4100 04637 1005          TAD JOBSWA      /SET FIELD #
 4101 04640 3403          DCA I UFPARA    /SAVE IN PARAMETERS
 4102 04641 1221          TAD UFJOBF      /SAVE GLOBAL PARAMETERS
 4103 04642 7001          IAC             /POINTS TO WORD 2 OF CONTROL BLOCK
 4104 04643 3015          DCA AXS1        /CONTROL INDEX
 4105 04644 7346          CLL CLA CMA RTL /AC:=-3
 4106 04645 1003          TAD UFPARA
 4107 04646 3016          DCA AXS2        /PARAMETER INDEX POINTS TO START OF PARAMETERS-1
 4108 04647 1416          TAD I AXS2      /GET THE IOT
 4109 04650 0415          AND I AXS1      / 'AND' IT WITH THE 'PROTECTED' BIT
 4110 04651 7110          CLL RAR         /SAVE THE 'PRIVILEGED FILE' BIT
 4111 04652 7640          SZA CLA         /WRITE AND PROTECTED-BIT SET?
 4112 04653 5340          JMP UFILER      /YES - ERROR
 4113 04654 7420          SNL             /NO - PRIVILEGE REQUIRED?
 4114 04655 5263          JMP .+6         /NO
 4115 04656 4546          GETJTW          /YES - GET HIS STATUS WORD
 4116 04657 0000           JOBSTS
 4117 04660 0377          AND UFJSPV
 4118 04661 7650          SNA CLA         /DOES HE HAVE PRIVILEGE NOW?
 4119 04662 5340          JMP UFILER      /NO - "PROTECTION VIOLATION"
 4120 04663 6211          DATFLD
 4121 04664 1016          TAD AXS2        /SET FILPAR = START OF PARAMETER BLOCK

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 102


 4122 04665 3415          DCA I AXS1
 4123 04666 1416          TAD I AXS2      /DISC EXTENSION FROM PARAMETERS
 4124 04667 3415          DCA I AXS1      /TO CONTROL BLOCK
 4125 04670 2016          ISZ AXS2        /SKIP FIELD
 4126 04671 1416          TAD I AXS2      /SAVE WC
 4127 04672 3005          DCA JOBSWA
 4128 04673 2016          ISZ AXS2        /SKIP CORE ADDRESS FOR NOW
 4129 04674 1416          TAD I AXS2      /DISC ADDRESS
 4130 04675 3415          DCA I AXS1      /TO CONTROL BLOCK
 4131 04676 1373          TAD UFIRET      /RETURN ADDRESS
 4132 04677 3416          DCA I AXS2      /TO PARAMETER BLOCK
 4133 04700 1221          TAD UFJOBF      /POINTER TO FILE CONTROL
 4134 04701 3416          DCA I AXS2      /TO PARAMETER BLOCK
 4135 04702 1005          TAD JOBSWA      /WORD COUNT
 4136 04703 3415          DCA I AXS1      /TO CONTROL BLOCK
 4137 04704 1344          TAD UFILE1      /POINTS TO WC IN USER AREA
 4138 04705 7450          SNA             /IS THIS AN SI REQUEST?
 4139 04706 5311          JMP .+3         /YES
 4140 04707 3415          DCA I AXS1      /NO, SAVE POINTER TO WC IN CONTROL BLOCK
 4141 04710 3044          DCA L2SA        /CLEAR USER AC
 4142 04711 1221          TAD UFJOBF      /POINTER TO CONTROL BLOCK
 4143 04712 1077          TAD UFPAR2      /+3
 4144 04713 3321          DCA UFILPA      /POINTS TO POINTER IN CONTROL BLOCK POINTING TO PARAM. BLOCK.
 4145 04714 1221          TAD UFJOBF      /POINTS TO FILE CONTROL
 4146 04715 4772          JMS I UFILIX    /GET SEGMENT INDEX
 4147 04716 5351          JMP UFILE4      /NOT IN CORE - DO A WINDOW TURN
 4148 04717 5334          JMP UFILE2      /NON-EXISTENT DISC ADDRESS
 4149 04720 4774          JMS I UFICTB    /OK. SETUP TRANSFER BLOCK - POINTER TO SEGMENT # IN AC
 4150 04721 0000  UFILPA, 0               /POINTER TO FILPAR
 4151 04722 1721          TAD I UFILPA    /ADDRESS OF PARAMETERS
 4152 04723 4776          JMS I UFIQUE    /QUEUE THE REQUEST IN DSUTBL
 4153 04724 2036          ISZ DSBUSY      /DISC BUSY?
 4154 04725 7410          SKP             /YES
 4155 04726 4541          JMS I FIUSER    /NO. START TRANSFER
 4156 04727 1004          TAD UFIJSF      /CLEAR FILE STATUS BIT
 4157 04730 5567          UUOEXT          /EXIT
 4158             
 4159 04731 1076  SIFILE, TAD UFIPIF
 4160 04732 3003          DCA UFPARA      /POINTS TO FILE # IN PARAMETERS
 4161 04733 5213          JMP SIFIL1      /REST IS SAME AS USER PROGRAMS
 4162             
 4163 04734 4546  UFILE2, GETJTW          /NON EXISTANT DISC ADDRESS
 4164 04735 0007           JOBLNK         /GET ADDRESS OF PARAMETERS
 4165 04736 3344          DCA UFILE1      /SAVE IT
 4166 04737 5342          JMP .+3
 4167 04740 7001  UFILER, IAC             /PROTECTED
 4168 04741 7001          IAC             /NOT OPEN
 4169 04742 1076          TAD C0002       /EOF
 4170 04743 4771          JMS I UFERR     /FILE ERROR ROUTINE
 4171 04744 0000  UFILE1, 0               /POINTS TO PARAMETER BLOCK
 4172 04745 1344          TAD UFILE1
 4173 04746 4555          RETBLK          /RETURN PARA. BLK.
 4174 04747 7200          CLA
 4175 04750 5567          UUOEXT          /BACK TO USER
 4176             
 4177             UUOFIP,
 4178 04751 1072  UFILE4, TAD JOBDAT

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 103


 4179 04752 4544          GETJTA          /GET THE STATUS WORD
 4180 04753 0000           JOBSTS
 4181 04754 6211          DATFLD
 4182 04755 4550          IOR             /SET THE 'NON RESIDENT IOT' BIT
 4183 04756 0100           JSIOT
 4184 04757 1057          TAD FIPJOB
 4185 04760 7450          SNA             /HAS 'FIP' ALREADY BEEN REQUESTED?
 4186 04761 1062          TAD JOB         /NO - REQUEST IT NOW
 4187 04762 3057          DCA FIPJOB      / ELSE FIP WILL PICK US UP LATER
 4188 04763 5570          WAIT
 4189             
 4190       0003  UFPARA= WS0             /ADDR OF USER PARAMETERS
 4191       0004  UFIJSF= WS1             /FILE STATUS FLAG
 4192 04764 7743  C7743,  7743
 4193 04765 3463  UFILWA, UFILWC
 4194 04766 0020  UFJF0,  JOBF0
 4195                     IFNZRO FILPAR-3 <GLITCH; *.-1>
 4196       0077  UFPAR2= C0003   /FILPAR
 4197                     IFNZRO FILPIF-2 <GLITCH; *.-1>
 4198       0076  UFIPIF= C0002   /FILPIF
 4199                     IFNZRO FILPWC-3 <GLITCH; *.-1>
 4200       0076  UFIPWC= C0002   /FILPWC-1
 4201             
 4202 04767 2536  UFPARM, GETUSP
 4203 04770 2571  UFLNKA, UUOLNK
 4204 04771 4454  UFERR,  FILERR
 4205 04772 5400  UFILIX, FILIX
 4206 04773 5606  UFIRET, DSURET
 4207 04774 5045  UFICTB, FILCTB
 4208 04775 7234  UFIGJF, GETJFX
 4209 04776 4000  UFIQUE, DSQUE
 4210 04777 0400  UFJSPV, JSPRIV

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 104


 4211                     PAGE
 4212             
 4213             /RETURN NUMBER OF NEXT RUNABLE JOB IN AC.
 4214             /CALL:  JMS NXTJOB      / ('NXTJCT' SHOULD BE INITIALIZED AT 'WSCHED')
 4215             /       RETURN WITH JOB # IN AC
 4216             
 4217             FILCDA,
 4218 05000 0000  NXTJCT, 0
 4219 05001 0000  NXTJBN, 0       /LAST JOB NUMBER CHECKED
 4220 05002 7754  NXTMAX, -JOBMAX
 4221                     IFNZRO NOTRUN-1000      <GLITCH; *.-1>
 4222       0120  NXTNTR= C1000
 4223             
 4224             FILCT2,
 4225 05003 0000  NXTJOB, 0
 4226 05004 1045          TAD BONUS       /IS THERE ANY JOB BROKEN OUT OF I/O WAIT 
 4227 05005 7450          SNA
 4228 05006 5213          JMP NXTJ0
 4229 05007 4557          RUNABL          /IS IT RUNNABLE?
 4230 05010 5213          JMP NXTJ0       /NO,GET THE NEXT JOB
 4231 05011 1045          TAD BONUS       /THIS JOB
 4232 05012 5603          JMP I NXTJOB
 4233 05013 1455  NXTJ0,  TAD I FANCOR
 4234 05014 0120          AND NXTNTR
 4235 05015 7650          SNA CLA         /IS 'NOTRUN' SET IN THE PHANTOM FIELD?
 4236 05016 5223          JMP NXTJ1       /NO
 4237 05017 1455          TAD I FANCOR
 4238 05020 0115          AND C0600
 4239 05021 7640          SZA CLA         /YES - IS A PHANTOM IN IT?
 4240 05022 5561          SCHED           /YES - LET IT RUN
 4241 05023 1200  NXTJ1,  TAD NXTJCT
 4242 05024 7700          SMA CLA         /HERE AGAIN AFTER OVERFLOW?
 4243 05025 4552          REBOOT          /YES - ERROR *****
 4244 05026 2200          ISZ NXTJCT
 4245 05027 7410          SKP
 4246 05030 5561          SCHED           /TRIED EVERYTHING - HEAD FOR NULJOB
 4247 05031 1201          TAD NXTJBN
 4248 05032 1202          TAD NXTMAX
 4249 05033 7650          SNA CLA         /IS IT TIME TO WRAP AROUND TO JOB 1?
 4250 05034 3201          DCA NXTJBN      /YES
 4251 05035 2201          ISZ NXTJBN      /INCREMENT NUMBER OF JOB UNDER CONSIDERATION
 4252 05036 1201  NXTJ2,  TAD NXTJBN      /IS THE JOB RUNNABLE
 4253 05037 4557          RUNABLE
 4254 05040 5223          JMP NXTJ1       /NO, CONTINUE JOB TABLE ROUND ROBIN
 4255 05041 1201          TAD NXTJBN      /YES, RETURN WITH JOB NO. IN AC
 4256 05042 5603          JMP I NXTJOB

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 105


 4257             /CONSTRUCT TRANSFER BLOCK
 4258             /CALL   TAD SEGMENT WINDOW POINTER
 4259             /       JMS FILCTB
 4260             /       POINTER TO FILPAR
 4261             
 4262                     IFNZRO FILPDA-FILPDX-4  <GLITCH; *.-1>
 4263       0100  FILCPD= C0004   /FILPDA-FILPDX
 4264                     IFNZRO FILPWC-FILPDA+2  <GLITCH; *.-1>
 4265       0127  FILCWC= C7776   /FILPWC-FILPDA
 4266             
 4267       0005  FILCSW= JOBSWA  /POINTER TO SEGMENT WINDOW
 4268       0171  FILCPA= WS2     /POINTER TO FILPAR & FILDA
 4269 05043 0000  FILCWA, 0
 4270 05044 0000  FILCPX, 0       /POINTER TO FILPDX, FILPDA & FILPWC
 4271             
 4272 05045 0000  FILCTB, 0
 4273 05046 3005          DCA FILCSW      /SAVE POINTER TO SEGMENT IN WINDOW
 4274 05047 1645          TAD I FILCTB
 4275 05050 3171          DCA FILCPA      /ADDRESS OF POINTER TO PARAMETER BLOCK
 4276 05051 2245          ISZ FILCTB      /SKIP ARGUMENT IN CALL
 4277 05052 6211          DATFLD
 4278 05053 1571          TAD I FILCPA    /GET ADDRESS OF PARAMETERS
 4279 05054 7001          IAC             /POINTS TO WORD 2 OF PARAMETERS
 4280 05055 3244          DCA FILCPX
 4281 05056 2171          ISZ FILCPA      /POINTS TO DISC EXTENSION IN CONTROL BLOCK
 4282 05057 7240          CLA CMA
 4283 05060 1405          TAD I FILCSW    /GET SEGMENT #
 4284 05061 7110          CLL RAR
 4285 05062 7012          RTR
 4286 05063 7012          RTR             /MULTIPLY BY 400 SEG SIZE
 4287 05064 3203          DCA FILCT2      /SAVE "PRODUCT"
 4288 05065 1203          TAD FILCT2
 4289 05066 7004          RAL
 4290 05067 0113          AND SEGSM1      /THROW OUT CONTRIBUTION FROM HI ORDER BITS OF EXTENSION
 4291 05070 1377          TAD FIBAS1      /START OF LOGICAL FILE AREA
 4292 05071 7106          CLL RTL
 4293 05072 3644          DCA I FILCPX    /SAVE IN DISC EXTENSION IN PARAMETER BLOCK
 4294 05073 1203          TAD FILCT2      /NOW GET LOW ORDER ADDRESS
 4295 05074 0124          AND SEGLMK
 4296 05075 3203          DCA FILCT2      /AND SAVE IT
 4297 05076 1244          TAD FILCPX      /SET DISC ADDRESS
 4298 05077 1100          TAD FILCPD
 4299 05100 3244          DCA FILCPX      /POINTS TO LOW ORDER ADDRESS IN PAR. BLOCK
 4300 05101 1171          TAD FILCPA
 4301 05102 7001          IAC
 4302 05103 3200          DCA FILCDA      /POINTS TO LOW ORDER ADDRESS IN CONTROL BLOCK
 4303 05104 1600          TAD I FILCDA    /GET WORD ADDRESS SUPPLIED BY USER
 4304 05105 0113          AND SEGSM1      /(WORD IN SEGMENT)
 4305 05106 1203          TAD FILCT2      /+ WORD ADDRESS FROM SEGMENT ARITHMETIC
 4306 05107 3644          DCA I FILCPX    /SAVE IT IN PARAMETER BLOCK
 4307 05110 1244          TAD FILCPX      /SET WORD COUNT
 4308 05111 1127          TAD FILCWC
 4309 05112 3244          DCA FILCPX      /POINTS TO WORD COUNT IN PARAMETER BLOCK
 4310 05113 3644          DCA I FILCPX    /NOTHING TRANSFERRED YET
 4311 05114 1200          TAD FILCDA
 4312 05115 7001          IAC
 4313 05116 3243          DCA FILCWA      /POINTS TO WORD COUNT IN CONTROL BLOCK

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 106


 4314 05117 1113  FILCT1, TAD SEGSM1      /SEGSIZ-1
 4315 05120 0600          AND I FILCDA    /LOW ORDER ADDRESS IN CONTROL BLOCK
 4316 05121 3203          DCA FILCT2      /DISC ADDRESS MOD SEGSIZ
 4317 05122 1643          TAD I FILCWA    /GET - WC FROM CONTROL BLOCK
 4318 05123 7141          CLL CIA         /+WC
 4319 05124 1203          TAD FILCT2      /IF WE DO ENTIRE WC WILL WE GO INTO NEXT
 4320 05125 0124          AND SEGLMK      /  SEGMENT?
 4321 05126 7650          SNA CLA
 4322 05127 7430          SZL
 4323 05130 5333          JMP FILCT3
 4324 05131 1643          TAD I FILCWA    /NO
 4325 05132 5335          JMP .+3
 4326 05133 1124  FILCT3, TAD SEGLMK      /SUBTRACT SEGSIZ FROM WC, SO WE STAY IN SAME SEGMENT
 4327 05134 1203          TAD FILCT2
 4328 05135 3203          DCA FILCT2      /WORD COUNT FOR TRANSFER
 4329 05136 1203          TAD FILCT2      /UPDATE WORD COUNT IN PARAMETER BLOCK
 4330 05137 1644          TAD I FILCPX    /OLD VALUE
 4331 05140 3644          DCA I FILCPX    /NEW VALUE
 4332 05141 1203          TAD FILCT2      /UPDATE WORD COUNT IN FILE CONTROL BLOCK
 4333 05142 7041          CIA             /+WC
 4334 05143 1643          TAD I FILCWA    /OLD - WC
 4335 05144 3643          DCA I FILCWA    /NEW - WC
 4336 05145 1643          TAD I FILCWA    /ARE WE DONE?
 4337 05146 7650          SNA CLA
 4338 05147 5645          JMP I FILCTB    /YES
 4339 05150 1203          TAD FILCT2      /INCREMENT DISC ADDRESS
 4340 05151 7141          CLL CIA         /+WC
 4341 05152 1600          TAD I FILCDA    /OLD DISC ADDRESS
 4342 05153 3600          DCA I FILCDA    /NEW DISC ADDRESS
 4343 05154 7430          SZL             /OVERFLOW?
 4344 05155 2571          ISZ I FILCPA    /YES; INDEX DISC EXTENSION
 4345 05156 1405          TAD I FILCSW    /GET CURRENT SEGMENT #
 4346 05157 7160          CLL CML CMA     /-(SEG # +1)
 4347 05160 3203          DCA FILCT2      /SAVE IT
 4348 05161 2005          ISZ FILCSW      /POINTS TO NEXT SEGMENT IN WINDOW
 4349 05162 1005          TAD FILCSW      /ARE WE STILL IN THE WINDOW?
 4350 05163 0103          AND C0007
 4351 05164 7640          SZA CLA         /NEXT POINTER IN CORE?
 4352 05165 5372          JMP FILCT4      /YES, SEE IF NEXT SEGMENT IS CONTIGUOUS
 4353 05166 1067          TAD BASWIN
 4354 05167 1005          TAD FILCSW      /NO - DO A 13-BIT COMPARE WITH BASIC WINDOW
 4355 05170 7670          SNA SZL CLA     /IS IT THE SECOND OR BETTER BASIC SEGMENT?
 4356 05171 5645          JMP I FILCTB    /NO - JUST RETURN
 4357 05172 1405  FILCT4, TAD I FILCSW    /YES - GET THE NEXT SEGMENT
 4358 05173 1203          TAD FILCT2      /CONTIGUOUS SEGMENTS?
 4359 05174 7650          SNA CLA
 4360 05175 5317          JMP FILCT1      /YES; CONTINUE THE TRANSFER
 4361 05176 5645          JMP I FILCTB    /RETURN
 4362             
 4363 05177 0031  FIBAS1, SWDEX+JOBMAX

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 107


 4364                     PAGE
 4365             /BLOCK TRANSFER
 4366             /CALL   BLT
 4367             /        62S1   SELECT SOURCE DATA FIELD
 4368             /        SOURCE
 4369             /        62D1   SELECT DESTINATION DATA FIELD
 4370             /        DESTINATION
 4371             /        -NUMBER WORDS
 4372             /       RETURN
 4373             
 4374             /*BLT0          /BLOCK TRANSFER
 4375 05200 0000  BLT0,   0
 4376 05201 1600          TAD I BLT0      /GET SOURCE FIELD SELECT
 4377 05202 3225          DCA BLT1
 4378 05203 2200          ISZ BLT0        /POINTS TO SOURCE ADDRESS
 4379 05204 7240          STA
 4380 05205 1600          TAD I BLT0      /CORE ADDRESS -1 OF SOURCE
 4381 05206 3015          DCA AXS1
 4382 05207 2200          ISZ BLT0        /POINTS TO DESTINATION FIELD SELECT
 4383 05210 1600          TAD I BLT0      /GET DESTINATION SELECT
 4384 05211 3227          DCA BLT2
 4385 05212 2200          ISZ BLT0        /POINTS TO DEST. ADD
 4386 05213 7240          STA
 4387 05214 1600          TAD I BLT0      /DEST. ADD-1
 4388 05215 3016          DCA AXS2
 4389 05216 2200          ISZ BLT0        /POINTS TO - WORD COUNT
 4390 05217 1600          TAD I BLT0
 4391 05220 3236          DCA BLTC
 4392 05221 2200          ISZ BLT0        /RETURN ADDRESS
 4393 05222 6214          RDF
 4394 05223 1122          TAD C6203
 4395 05224 3233          DCA BLTF        /SAVE RETURN FIELD SELECT
 4396             
 4397 05225 0000  BLT1,   0               /SELECT SOURCE DATA FIELD
 4398 05226 1415          TAD I AXS1
 4399 05227 0000  BLT2,   0               /SELECT DESTINATION DATA FIELD
 4400 05230 3416          DCA I AXS2
 4401 05231 2236          ISZ BLTC        /DONE
 4402 05232 5225          JMP BLT1        /NO
 4403 05233 0000  BLTF,   0               /RETURN
 4404 05234 5600          JMP I BLT0

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 108


 4405             /TEST JOB FOR RUNABILITY
 4406             /CALL   TAD JOB #
 4407             /       RUNABL
 4408             /        NOT RUNNABLE
 4409             /        RUNNABLE
 4410             
 4411 05235 0147  RCBITS, JSIOT+JSIOTC+7  /FIP AND ERROR BITS
 4412             
 4413             BLTC,
 4414 05236 0000  RUNTST, 0               /COME HERE WITH JOB # IN AC
 4415 05237 0107          AND C0037
 4416 05240 1063          TAD JOBTBA              /TO GET JOBTABLE ADDRESS
 4417 05241 4545          GETJTI          /GET STR0
 4418 05242 0000           JOBSTS
 4419 05243 7500          SMA             /RUN BIT ON?
 4420 05244 5255          JMP RUNTS1      /NO - CHECK SPECIAL STUFF
 4421 05245 6211          DATFLD
 4422 05246 0120          AND C1000
 4423 05247 7450          SNA             /IS BIT 1000 ON SHOWING HE WAS COMPUTE BOUND?
 4424 05250 5270          JMP RUNTS2      /NO, IT MAY BE READY TO RUN TEST FURTHER
 4425 05251 7040          CMA             /YES - CLEAR THE COMPUTE-BOUND FLAG
 4426 05252 0405          AND I JOBSWA    / SO IT WILL RUN NEXT TIME AROUND
 4427 05253 3405          DCA I JOBSWA
 4428 05254 5277          JMP RUNTS4      /TAKE 'NOT RUNNABLE' RETURN
 4429 05255 0235  RUNTS1, AND RCBITS
 4430 05256 7450          SNA             /FIP REQUEST PENDING OR SYSTEM ERRORS?
 4431 05257 5636          JMP I RUNTST    /NONE
 4432 05260 0103          AND C0007
 4433 05261 7650          SNA CLA         /WAS IT A SYSTEM ERROR?
 4434 05262 5276          JMP RUNTS3      /NO - LET FIP FINISH UP
 4435 05263 6211          DATFLD
 4436 05264 7352          CLA CLL CMA RTR
 4437 05265 0405          AND I JOBSWA    /YES - CLEAR THE 'ERROR ENABLE'
 4438 05266 3405          DCA I JOBSWA    / SO 'SI' CAN PRINT A MESSAGE
 4439 05267 5276          JMP RUNTS3
 4440             
 4441 05270 2005  RUNTS2, ISZ JOBSWA
 4442 05271 1405          TAD I JOBSWA    /GET 'STR1'
 4443 05272 2005          ISZ JOBSWA
 4444 05273 2005          ISZ JOBSWA      /SKIP OVER THE DEVICE STATUSES
 4445 05274 0405          AND I JOBSWA
 4446 05275 7640          SZA CLA         /ANY STR1-TO-MASK1 MATCHES?
 4447 05276 2236  RUNTS3, ISZ RUNTST      /YES - HE'S RUNNABLE
 4448 05277 6201  RUNTS4, CDF
 4449 05300 5636          JMP I RUNTST

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 109


 4450             /SET SYSTEM ERROR CODE
 4451             /CALL   TAD JOB #
 4452             /       ERROR
 4453             /        ERROR CODE
 4454             /       NORMAL RETURN
 4455             
 4456 05301 0000  SYSERR, 0
 4457 05302 0107          AND C0037       /JOB # ONLY
 4458 05303 7450          SNA             /IS IT JOB 0?
 4459 05304 5323          JMP SYSER1      /YES - RETURN
 4460 05305 1063          TAD JOBTBA      /POINTER TO JOBTBL
 4461 05306 4545          GETJTI          /GET CURRENT VALUE OF STR0
 4462 05307 0000           JOBSTS
 4463 05310 0103          AND C0007       /EXTRACT ANY ERROR CODE IN THERE
 4464 05311 7640          SZA CLA         /ANY OLD BITS LYING AROUND?
 4465 05312 5323          JMP SYSER1      /YES; DON'T CONFUSE THE ISSUE
 4466 05313 1701          TAD I SYSERR    /GET THE ERROR CODE SUPPLIED
 4467 05314 6211          DATFLD
 4468 05315 1405          TAD I JOBSWA    /ADD IT TO OLD VALUE OF STR0
 4469 05316 3405          DCA I JOBSWA    /SAVE THE WHOLE MESS
 4470 05317 2005          ISZ JOBSWA
 4471 05320 1005          TAD JOBSWA      /POINTS TO STR1
 4472 05321 4550          IOR             /SET THE "ERROR HAS OCCURRED" BIT IN STR1
 4473 05322 0002           JSERR
 4474 05323 6201  SYSER1, CDF
 4475 05324 2301          ISZ SYSERR      /SKIP ARGUMENT IN CALL
 4476 05325 5701          JMP I SYSERR    /RETURN
 4477             
 4478             
 4479             /PROCESSOR FOR CARD READER INTERRUPTS
 4480             
 4481 05326 6671  INTCDR, RCSD            /CARD DONE?
 4482 05327 5737          JMP I ICDPTR    /NO - CONTINUE IN SKIP-CHAIN
 4483 05330 6674          RCRD            /YES - CLEAR THE FLAG
 4484 05331 1741          TAD I ICDTIM
 4485 05332 7650  GIRMAX, SNA CLA         /WERE WE EXPECTING AN INTERRUPT?  (ALSO '-130')
 4486 05333 5534          DISMIS          /NO - IGNORE IT
 4487 05334 3741          DCA I ICDTIM    /YES - BUT NOT ANY MORE (CARD'S DONE)
 4488 05335 1340          TAD ICDL2
 4489 05336 5534          DISMIS          /SCHEDULE LEVEL-2
 4490             /
 4491 05337 7410  ICDPTR, RINT
 4492 05340 7107  ICDL2,  CDL20
 4493 05341 2621  ICDTIM, TIMCDR

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 110


 4494             /
 4495             /BLOCK-FULL SIZE-CHECKING ROUTINE FOR GIR INPUT.
 4496             
 4497 05342 0000  GIRLIM, 0
 4498 05343 3225          DCA GIRLMP      /SAVE POINTER TO CHARACTER COUNT
 4499 05344 1625          TAD I GIRLMP
 4500 05345 1332          TAD GIRMAX
 4501 05346 7700          SMA CLA         /BUFFER FULL (TESTS 88 BUT HITS AT 90 CHARACTERS)?
 4502 05347 5371          JMP GIRLM1      /YES
 4503 05350 2342          ISZ GIRLIM      /NO - SKIP ON RETURN
 4504 05351 1625          TAD I GIRLMP
 4505 05352 1376          TAD GIROFF
 4506 05353 7710          SPA CLA         /TIME TO SEND 'XOFF'
 4507 05354 5742          JMP I GIRLIM    /NO
 4508 05355 1431          TAD I CONDDB
 4509 05356 7006          RTL
 4510 05357 7530          SZL SPA         /SI MODE, OR 'XOFF' ALREADY SENT?
 4511 05360 5742          JMP I GIRLIM    /YES
 4512 05361 7132          CLL CML RTR
 4513 05362 3431          DCA I CONDDB    /NO - REMEMBER TO SEND 'XON' LATER
 4514 05363 1430          TAD I CONDBA
 4515 05364 4550          IOR
 4516 05365 3000           DXOFF
 4517 05366 4777          JMS I GIRTYP    /MAKE SURE WE'RE TYPING
 4518 05367 4775          JMS I GIRBKA    / AND SET THE DELIMITER FLAG
 4519 05370 5742          JMP I GIRLIM
 4520             /
 4521 05371 1031  GIRLM1, TAD CONDDB
 4522 05372 4550          IOR             /SET THE 'FULL' FLAG
 4523 05373 0400           DFULL
 4524 05374 5742          JMP I GIRLIM
 4525             /
 4526 05375 3711  GIRBKA, GIRBRK
 4527       5225  GIRLMP= BLT1
 4528 05376 7710  GIROFF, -70
 4529 05377 1235  GIRTYP, TYPE

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 111


 4530                     PAGE
 4531             
 4532             /RETURN FILE WINDOW INDEX
 4533             /CALL   TAD POINTER TO FILE CONTROL
 4534             /       JMS FILIX
 4535             /       SEGMENT ADDRESS NOT IN WINDOW
 4536             /       NON-EXISTENT FILE ADDRESS
 4537             /       OK RETURN WITH ADDRESS OF SEGMENT POINTER
 4538             
 4539                     IFNZRO FILDA-4  <GLITCH; *.-1>
 4540       0100  FILIDA= C0004   /FILDA
 4541             
 4542 05400 0000  FILIX,  0
 4543 05401 3274          DCA FILICN      /SAVE POINTER TO FILE CONTROL
 4544 05402 1274          TAD FILICN
 4545 05403 1100          TAD FILIDA      /4
 4546 05404 6211          DATFLD
 4547 05405 3365          DCA FILSP2      /POINTS TO FILE EXTENSION IN CONTROL BLOCK
 4548 05406 1765          TAD I FILSP2    /FILE EXTENSION
 4549 05407 0113          AND SEGSM1      /# WORDS/SEGMENT -1
 4550 05410 3364          DCA FILSP1      /HIGH ORDER COMPONENT OF SEG #
 4551 05411 2365          ISZ FILSP2      /POINTS TO LOW ORDER ADD
 4552 05412 1765          TAD I FILSP2    /LOW ORDER ADDRESS
 4553 05413 0124          AND SEGLMK      /GET RID OF ADDRESS IN SEGMENT
 4554 05414 7104          CLL RAL
 4555 05415 1364          TAD FILSP1      /HIGH ORDER PART
 4556 05416 7006          RTL             /"DIVIDE" BY 400 SEG SIZE
 4557 05417 7006          RTL
 4558 05420 7061          CMA CML IAC     / (THIS IS A 13-BIT NEGATE)
 4559 05421 3273          DCA FILISN      / = - (SEG # - 1)
 4560 05422 1674          TAD I FILICN    /POINT TO WINDOW
 4561 05423 3367          DCA FILICA
 4562 05424 2274          ISZ FILICN      /GET TO SEGMENT # INDEX IN WINDOW
 4563 05425 1767          TAD I FILICA    /GET WORD 1 OF WINDOW
 4564 05426 0103          AND C0007
 4565 05427 7440          SZA             /IS THIS A VALID WINDOW?
 4566 05430 5247          JMP FILIX4      /MAYBE NOT, BUT IT COULD BE THE BASIC WINDOW
 4567 05431 1674          TAD I FILICN    /YES - SEE IF OUR SEGMENT IS IN IT
 4568 05432 1273          TAD FILISN
 4569 05433 7460          SZA SNL         /FILSCT-SN>0?
 4570 05434 5244          JMP FILIX2      /YES. SEGMENT POINTER NOT IN CORE
 4571 05435 1102          TAD C0006
 4572 05436 7420          SNL             /FILSCT+6 - SN < 0?
 4573 05437 5260          JMP FILIX5
 4574 05440 7200          CLA             /YES. SEGMENT POINTER NOT IN CORE
 4575 05441 1767          TAD I FILICA    /ANY MORE SEGMENTS?
 4576 05442 7650          SNA CLA
 4577 05443 2200  FILIX1, ISZ FILIX       /NO. NON-EXISTENT FILE ADDRESS
 4578 05444 7200  FILIX2, CLA
 4579 05445 6201  FILIX3, CDF
 4580 05446 5600          JMP I FILIX     /RETURN
 4581 05447 0102  FILIX4, AND C0006       /IS IT BASIC OR INVALID WINDOW
 4582 05450 7650          SNA CLA         /IS THIS THE BASIC WINDOW? (1ST WORD=7777)
 4583 05451 5245          JMP FILIX3      /NO - INVALID WINDOW
 4584 05452 1273          TAD FILISN      /GET 13-BIT NEGATIVE SEGMENT NUMBER
 4585 05453 1067          TAD BASWIN
 4586 05454 7470          SNA SZL         /ARE WE IN THE BASIC WINDOW?

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 112


 4587 05455 5243          JMP FILIX1      /NO - TAKE 'NONEXISTENT ADDRESS' EXIT
 4588 05456 7041          CIA             /AC = SEGMENT POINTER
 4589 05457 5263          JMP FILIX6
 4590             
 4591 05460 7041  FILIX5, CIA
 4592 05461 1103          TAD C0007       /WINDOW INDEX
 4593 05462 1367          TAD FILICA      /START OF WINDOW
 4594 05463 3274  FILIX6, DCA FILICN      /POINTS TO SEGMENT #
 4595 05464 2200          ISZ FILIX       /SEGMENT ADDRESS IN CORE - EXIT
 4596 05465 1674          TAD I FILICN    /GET SEGMENT # FOR THIS FILE ADDRESS
 4597 05466 7650          SNA CLA
 4598 05467 5245          JMP FILIX3      /ZERO SEGMENT NUMBER IS NOT A SEGMENT!
 4599 05470 1274          TAD FILICN      /EXIT WITH POINTER TO THIS SEGMENT IN AC.
 4600 05471 2200          ISZ FILIX
 4601 05472 5245          JMP FILIX3
 4602             
 4603 05473 0000  FILISN, 0
 4604 05474 0000  FILICN, 0

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 113


 4605             /RETURN USER RUN TIME
 4606             /USER CALLS WITH ADDRESS OF THREE WORD BLOCK
 4607             /WORD 1 CONTAINS THE JOB #
 4608             /THE HI AND LO ORDER RUN TIMES ARE RETURNED IN WORDS 2 AND 3
 4609             
 4610 05475 4171  UURT,   UDF             /USER FIELD
 4611 05476 1444          TAD I L2SA      /JOB #
 4612 05477 7450          SNA             /THIS JOB?
 4613 05500 1062          TAD JOB         /YES
 4614 05501 0107          AND C0037
 4615 05502 1063          TAD JOBTBA
 4616 05503 3364          DCA UCOP0       /SAVE POINTER TO JOB STATUS
 4617 05504 1364          TAD UCOP0
 4618 05505 4545          GETJTI          /HI ORDER RUNTIME
 4619 05506 0017           JOBRTH
 4620 05507 3365          DCA UCOP1
 4621 05510 1364          TAD UCOP0
 4622 05511 4545          GETJTI          /LOW ORDER 
 4623 05512 0016           JOBRTM
 4624 05513 3366          DCA UCOP2
 4625 05514 5351          JMP UCOPYS      /COPY IN USER AREA
 4626             
 4627             
 4628             /RETURN THE TIME OF DAY IN TICS SINCE MIDNITE
 4629             /USER CALLS WITH ADDRESS OF TWO WORD BLOCK IN AC
 4630             /HI AND LOW ORDER PARTS RETURNED IN WORDS 1 AND 2
 4631             
 4632 05515 1033  UTOD,   TAD CLK1        /-TIME TILL MIDNITE
 4633 05516 7100          CLL
 4634 05517 1327          TAD INKLK1      /TIME AT MIDNITE
 4635 05520 3366          DCA UCOP2       /LOW ORDER TIME NOW
 4636 05521 7430          SZL
 4637 05522 7001          IAC
 4638 05523 1034          TAD CLK2        /-TIME TILL MIDNITE
 4639 05524 1330          TAD INKLK2      /TIME AT MIDNITE
 4640 05525 3365          DCA UCOP1       /TIME NOW (HI ORDER)
 4641 05526 5353          JMP UCOPY2      /COPY IN USER AREA
 4642             
 4643 05527 7000  INKLK1, INCLK1
 4644 05530 0645  INKLK2, INCLK2
 4645             
 4646             /RETURN THE NUMBER OF FREE DISC SEGMENTS. 'NFSEGS' IS
 4647             /SET BY 'FIP' EACH TIME IT EXITS.
 4648             
 4649 05531 1333  USEGS,  TAD NFSEGS      /PASS IT BACK IN HIS AC
 4650 05532 5362          JMP UCOPYA
 4651             
 4652             /*NFSEGS        /NUMBER OF FREE DISC SEGMENTS
 4653 05533 7777  NFSEGS, 7777    / (UPDATED BY 'FIP')

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 114


 4654             /RETURN THE USER'S STATUS REGISTERS
 4655             /CALLED WITH ADDRESS OF THREE WORD BLOCK IN AC
 4656             
 4657 05534 4546  UCKS,   GETJTW
 4658 05535 0000           JOBSTS
 4659 05536 3364          DCA UCOP0       /STATUS 0
 4660 05537 6211          DATFLD
 4661 05540 2005          ISZ JOBSWA
 4662 05541 1405          TAD I JOBSWA    /STATUS 1
 4663 05542 3365          DCA UCOP1
 4664 05543 2005          ISZ JOBSWA
 4665 05544 1405          TAD I JOBSWA
 4666 05545 3366          DCA UCOP2       /STATUS 2
 4667 05546 4171          UDF             /SELECT USER FIELD
 4668 05547 1364          TAD UCOP0
 4669 05550 3444          DCA I L2SA
 4670 05551 2044  UCOPYS, ISZ L2SA        /BUMP POINTER
 4671 05552 7000          NOP
 4672 05553 4171  UCOPY2, UDF             /FOR LATER ENTRIES
 4673 05554 1365          TAD UCOP1       /SECOND WORD
 4674 05555 3444          DCA I L2SA
 4675 05556 2044          ISZ L2SA
 4676 05557 7000          NOP
 4677 05560 1366          TAD UCOP2       /THIRD WORD
 4678 05561 3444          DCA I L2SA
 4679             
 4680 05562 3044  UCOPYA, DCA L2SA        /CLEAR USER AC
 4681 05563 5567          UUOEXT
 4682             
 4683             DEVJO0,
 4684             UCOP0,
 4685 05564 0000  FILSP1, 0
 4686             UCOP1,
 4687 05565 0000  FILSP2, 0
 4688 05566 0000  UCOP2,  0
 4689             
 4690             
 4691             /ROUTINE TO EXTRACT JOB NUMBER FROM DDB
 4692             /CALL
 4693             /       TAD (DDB ADDRESS)
 4694             /       JMS DEVJOB
 4695             /       RETURN WITH JOB # IN AC (AND 'DATFLD' SET)
 4696             
 4697             FILICA,
 4698 05567 0000  DEVJOB, 0
 4699 05570 7001          IAC
 4700 05571 3364          DCA DEVJO0      /POINTS TO WORD 1 OF DDB
 4701 05572 6211          DATFLD
 4702 05573 1764          TAD I DEVJO0    /GET WORD 1
 4703 05574 0107          AND C0037       /IGNORE JUNK
 4704 05575 5767          JMP I DEVJOB    /RETURN

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 115


 4705                     PAGE
 4706             
 4707             /WE ENTER THIS ROUTINE AT LEVEL 2
 4708             /AFTER COMPLETING A DISC TRANSFER
 4709             /IF A FILE TRANSFER IS INVOLVED, WE CONTINUE
 4710             /WITH IT
 4711             /IF OVERLAY, WE GO TO OVERLAY CONTROL
 4712             
 4713       0003  DSURT1= WS0
 4714       0004  DSURT2= WS1
 4715             
 4716                     IFNZRO FILDA-4  <GLITCH; *.-1>
 4717       0100  DSURDA= C0004   /FILDA
 4718                     IFNZRO FILPDA-5 <GLITCH; *.-1>
 4719       0100  DSUPDA= C0004   /FILPDA-1
 4720 05600 4717  DSUMTB, -DSUTBL
 4721 05601 7234  DGETJX, GETJFX
 4722             
 4723 05602 3561  DSKCT,  DSKCON
 4724 05603 0000  DSKCOD, 0
 4725       0003  DSUET1= WS0
 4726             
 4727 05604 7744  DSURPA, DSPARM
 4728 05605 4454  DSUFEA, FILERR
 4729             
 4730 05606 7001  DSURET, IAC             /ERROR IN DISC TRANSFER
 4731 05607 3203          DCA DSKCOD      /SAVE ERROR CODE
 4732 05610 1017          TAD DSKPTR      /POINTS TO REQUEST CURRENTLY RUNNING
 4733 05611 1200          TAD DSUMTB      /FIND RELATIVE INDEX IN TABLE
 4734 05612 7112          CLL RTR         /DIVIDE BY FOUR
 4735 05613 0103          AND C0007       /SAVE FIELD
 4736 05614 1050          TAD CORTBA      /INDEX INTO CORTBL
 4737 05615 3351          DCA DSUCOR
 4738 05616 1751          TAD I DSUCOR    /GET CORTBL ENTRY
 4739 05617 0107          AND C0037       /EXTRACT JOB #
 4740 05620 1063          TAD JOBTBA      /POINTS TO JOBTBL
 4741 05621 3353          DCA DSUJTE      /SAVE JOBTBL ADDRESS
 4742 05622 1353          TAD DSUJTE
 4743 05623 4544          GETJTA          /GET ADDRESS OF STR1
 4744 05624 0001           JOBSTS+1
 4745 05625 3352          DCA DSUJST      /SAVE IT
 4746 05626 1203          TAD DSKCOD      /IS THERE AN ERROR
 4747 05627 7440          SZA
 4748 05630 5271          JMP DSURER      /YES JMP OUT OF THE ROUTINE AS QUICKLY AS POSSIBLE
 4749 05631 4354          JMS DSUPAR      /PARAMETER BLOCK ADDRESS
 4750 05632 1100          TAD DSURDA
 4751 05633 3003          DCA DSURT1      /POINTS TO WORD 5 OF PARAMETERS
 4752 05634 1604          TAD I DSURPA    /ADDRESS OF PARAMETERS
 4753 05635 7001          IAC
 4754 05636 3004          DCA DSURT2      /POINTS TO DISC EXTENSION IN PARAMETERS
 4755 05637 6211          DATFLD
 4756 05640 1403          TAD I DSURT1    /DISC EXTENSION FROM CONTROL...
 4757 05641 3404          DCA I DSURT2    /       ...TO PARAMETERS
 4758 05642 1004          TAD DSURT2
 4759 05643 1100          TAD DSUPDA
 4760 05644 3004          DCA DSURT2      /POINTS TO DISC ADDRESS IN PARAMETERS
 4761 05645 2003          ISZ DSURT1      /POINTS TO DISC ADDRESS IN FILE CONTROL

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 116


 4762 05646 1403          TAD I DSURT1    /DISC ADDRESS FROM CONTROL...
 4763 05647 3404          DCA I DSURT2    /       ...TO PARAMETERS
 4764 05650 2003          ISZ DSURT1      /POINTS TO WORD COUNT IN FILE CONTROL
 4765 05651 7144          CLL CMA RAL
 4766 05652 1004          TAD DSURT2
 4767 05653 3004          DCA DSURT2      /POINTS TO WORD COUNT IN PARAMETERS
 4768 05654 1404          TAD I DSURT2    /SAVE TEMPORARILY -WC FROM PARAMETERS
 4769 05655 7041          CIA
 4770 05656 3203          DCA DSKCOD
 4771 05657 1403          TAD I DSURT1    /MOVE WC FROM FILE CONTROL...
 4772 05660 3404          DCA I DSURT2    /       ...TO PARAMETERS
 4773 05661 2004          ISZ DSURT2      /POINTS TO CORE ADD IN PARAM.
 4774 05662 1203          TAD DSKCOD      /UPDATE CORE ADD BY COUNT TRANSFERRED
 4775 05663 1404          TAD I DSURT2
 4776 05664 3404          DCA I DSURT2    /SAVE NEW ADD
 4777 05665 1403          TAD I DSURT1    /GET WORD COUNT FROM CONTROL
 4778 05666 6201          CDF
 4779 05667 7640  C7640,  SZA CLA         /ARE WE DONE?
 4780 05670 5306          JMP DSURE2      /NO
 4781 05671 3203  DSURER, DCA DSKCOD      /SAVE ERROR STATUS
 4782 05672 1604          TAD I DSURPA    /GET ADDRESS OF PARAMETER BLOCK
 4783 05673 3276          DCA .+3         /FOR CALL TO FILERR
 4784 05674 1203          TAD DSKCOD      /ERROR CODE
 4785 05675 4605          JMS I DSUFEA    /HANDLE ERROR
 4786 05676 0000           0
 4787 05677 7300          CLA CLL
 4788 05700 1751          TAD I DSUCOR
 4789 05701 1267          TAD C7640       /ADD TO 'DSHOLD' COUNT; OVERFLOWS TO 'NOTRUN' BIT
 4790 05702 0350          AND DSHOLD
 4791 05703 7420          SNL             /DID IT BLOW UP?
 4792 05704 3751          DCA I DSUCOR    /NO - SET 'NOTRUN' BIT
 4793 05705 5320          JMP DSURE1
 4794             
 4795             /MOVE SEGMENT WINDOW
 4796 05706 1353  DSURE2, TAD DSUJTE      /SET JOBLNK
 4797 05707 4544          GETJTA
 4798 05710 0007           JOBLNK
 4799 05711 3203          DCA DSKCOD      /SAVE POINTER TO JOBLNK
 4800 05712 1604          TAD I DSURPA    /GET ADDRESS OF PARAMETER BLOCK
 4801 05713 6211          DATFLD
 4802 05714 3603          DCA I DSKCOD    /AND SAVE IN JOBLNK
 4803 05715 6201          CDF
 4804 05716 3604          DCA I DSURPA    /CLEAR DSPARM
 4805 05717 7240          CLA CMA         /SET THE 'MORE I/O' SWITCH
 4806             
 4807 05720 3354  DSURE1, DCA DSFLAG      /CLEAR (OR SET) THE 'MORE I/O' SWITCH
 4808 05721 1017          TAD DSKPTR      /FIGURE OUT WHICH INTERNAL FILE #
 4809 05722 1200          TAD DSUMTB
 4810 05723 4601          JMS I DGETJX
 4811 05724 6211          DATFLD
 4812 05725 1752          TAD I DSUJST
 4813 05726 3752          DCA I DSUJST    /SET THE FILE-READY BIT IN STR1
 4814 05727 4335          JMS DSURE4      /CLEAR THE 'DSUTBL' ENTRY AND RESTART I/O
 4815 05730 2354          ISZ DSFLAG      /ANY MORE TO THIS TRANSFER?
 4816 05731 5556          RSCHED          /NO - RESCHEDULE TO BUMP OFF NULL-JOB
 4817 05732 1751          TAD I DSUCOR    /YES - GET THE JOB NUMBER
 4818 05733 5734          JMP I .+1       / AND RUN THROUGH IT ALL AGAIN

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 117


 4819 05734 3653          DSUEXT
 4820             
 4821             /ROUTINE TO CLEAR THE 'DSUTBL' ENTRY AND RESTART THE DISC.
 4822 05735 0000  DSURE4, 0
 4823 05736 1017          TAD DSKPTR
 4824 05737 3003          DCA DSUET1      /SET QUEUE POINTER
 4825 05740 6211          DATFLD
 4826 05741 3403          DCA I DSUET1    /CLEAR THE 'DSUTBL' ENTRY
 4827 05742 6201          CDF
 4828 05743 1604          TAD I DSURPA    /GET THE PARAMETER BLOCK ADDRESS
 4829 05744 7440          SZA
 4830 05745 4555          RETBLK          / AND RETURN IT
 4831 05746 4602          JMS I DSKCT     /THEN DECREMENT 'DSBUSY'
 4832 05747 5735          JMP I DSURE4    / AND RETURN
 4833             
 4834 05750 1177  DSHOLD, NOTRUN+NOHOLD+CJOB

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 118


 4835 05751 0000  DSUCOR, 0       /POINTER TO CORE TABLE ENTRY
 4836 05752 0000  DSUJST, 0       /POINTER TO JOB STATUS
 4837 05753 0000  DSUJTE, 0       /JOB TABLE ENTRY
 4838             
 4839             DSFLAG,
 4840 05754 0000  DSUPAR, 0       /GET PARAMETER BLOCK ADDRESS
 4841 05755 1604          TAD I DSURPA    /GET ADDRESS
 4842 05756 1103          TAD C0007       /GET POINTER TO LAST WORD IN BLOCK
 4843 05757 3003          DCA DSUET1
 4844 05760 6211          DATFLD
 4845 05761 1403          TAD I DSUET1    /GET ADDRESS OF FILE CONTROL
 4846 05762 6201          CDF
 4847 05763 5754          JMP I DSUPAR    /EXIT
 4848             
 4849             /*OVERL1
 4850 05764 4354  OVERL1, JMS DSUPAR      /GET ADDRESS OF FILE CONTROL
 4851 05765 7440          SZA
 4852 05766 5373          JMP OVE2
 4853 05767 1455          TAD I FANCOR
 4854 05770 1120          TAD C1000       /SET 'NOTRUN' SO THE PHANTOM STARTS
 4855 05771 3455          DCA I FANCOR
 4856 05772 1376          TAD OVESCH
 4857 05773 3354  OVE2,   DCA DSFLAG      /SAVE THE DISPATCH ADDRESS
 4858 05774 4335          JMS DSURE4      /NOW CLEAR THE 'DSUTBL' ENTRY
 4859 05775 5754          JMP I DSFLAG    / AND DISPATCH
 4860             
 4861 05776 4445  OVESCH, SCHFAN
 4862             
 4863             /ROUTINE TO HANDLE THE 'CON' IOT - WE RETURN THE
 4864             /KEYBOARD NUMBER OF THE SPECIFIED JOB.
 4865 05777 1044  UCON,   TAD L2SA        /GET THE JOB NUMBER
 4866 06000 7450          SNA             /ANYTHING PASSED?
 4867 06001 1062          TAD JOB         /NO - GET HIS OWN JOB #
 4868 06002 0107          AND C0037
 4869 06003 1211          TAD TTYTBB
 4870 06004 3003          DCA WS0         /SET THE 'TTYTBL' ENTRY POINTER
 4871 06005 6211          DATFLD
 4872 06006 1403          TAD I WS0       /GET THE UNIT #
 4873 06007 3044          DCA L2SA        / AND RETURN IT IN HIS AC
 4874 06010 5567          UUOEXT
 4875             
 4876 06011 2747  TTYTBB, TTYTBL

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 119


 4877 06012 1050  SWGOOD, TAD CORTBA      /GET A POINTER TO THIS FIELD'S
 4878 06013 1056          TAD FINISH      / ENTRY IN CORTBL
 4879 06014 3066          DCA SQREQ
 4880 06015 1060          TAD FIT         /JOB SWAPPED IN
 4881 06016 1120          TAD C1000       /NOT RUN BIT
 4882 06017 3466  SWGOD1, DCA I SQREQ     /STORE IT IN THE CORTBL
 4883 06020 3056          DCA FINISH
 4884 06021 3060          DCA FIT         /SET ALL CONCERNED WORDS TO ZERO
 4885 06022 3061          DCA FORCE
 4886 06023 3066          DCA SQREQ
 4887 06024 4626          JMS I SWSCON    /SEE IF ANY MORE DISC IO WAITING TO BE ATTENDED TO
 4888 06025 5556          RSCHED          /RESCHEDULE
 4889 06026 3561  SWSCON, DSKCON
 4890             
 4891 06027 1056  SWERR,  TAD FINISH
 4892 06030 7510          SPA             /WAS IT A SWAP-OUT OR SWAP-IN ERROR?
 4893 06031 7041          CIA             /DURING SWAP OUT
 4894 06032 1050          TAD CORTBA
 4895 06033 3066          DCA SQREQ       /POINTER TO CORTBA FOR THIS FIELD
 4896 06034 1076          TAD SWERER
 4897 06035 3246          DCA SWPER1      /SET SWAP-IN ERROR CODE INITIALLY
 4898 06036 1056          TAD FINISH
 4899 06037 7710          SPA CLA         /WAS THIS A SWAP-IN OR -OUT ERROR?
 4900 06040 5243          JMP .+3         /SWAP-OUT
 4901 06041 1060          TAD FIT         /SWAP-IN - JUST GET JOB NUMBER
 4902 06042 5245          JMP .+3
 4903 06043 2246          ISZ SWPER1      /SWAP-OUT ERROR CODE = 3
 4904 06044 1466          TAD I SQREQ     /GET THE JOB BEING SWAPPED OUT
 4905 06045 4536          ERROR           /SET APPROPRIATE ERROR CODE
 4906 06046 0000  SWPER1,  0
 4907 06047 5217          JMP SWGOD1      /CLEAR ALL THE CONCERNED WORDS BEFORE LEAVING
 4908             
 4909                     IFNZRO SWPRER-2 <GLITCH; *.-1>
 4910       0076  SWERER= C0002   /SWPRER
 4911                     IFNZRO SWPWER-3 <GLITCH; *.-1>

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 120


 4912             /SAVE JOB REGISTER
 4913             /THIS ROUTINE IS USED TO SAVE THE LEVEL 2 REGISTERS
 4914             /IN THE JOB DATA AREA.  AFTER SAVING THIS
 4915             /INFORMATION, JOB IS SET TO 0 TO INDICATE
 4916             /THAT NULJOB IS RUNNING
 4917             /CALL   SAVJOB
 4918             /       RETURN
 4919             /
 4920             /THE SAVE AREA FOR A JOB NOW LOOKS LIKE THIS:
 4921             /
 4922             /JOBREG
 4923             /       .................................................
 4924             / +0    :                       PC                      :
 4925             /       :................................................
 4926             / +1    :                       AC                      :
 4927             /       :...............................................:
 4928             / +2    : M : L : G :   IOT COPY #  :<------ SC ------->:
 4929             /       :...:...:...:...:...:...:...:...:...:...:...:...:
 4930             /
 4931             /WHERE: M = 1 (4000 BIT) IF EAE IS IN MODE 'B'
 4932             /       L = 1 (2000 BIT) IF LINK IS SET
 4933             /       G = 1 (1000 BIT) IF 'GT' FLAG IS SET
 4934             
 4935 06050 0000  SAVJO0, 0
 4936 06051 1062          TAD JOB
 4937 06052 7450          SNA             /IS NULJOB RUNNING ALREADY?
 4938 06053 5330          JMP SAVJO1      /YES - NOTHING TO SAVE
 4939 06054 0115          AND C0600
 4940 06055 7640          SZA CLA         /IS A PHANTOM RUNNING?
 4941 06056 5277          JMP SAVJO3      /YES
 4942             
 4943                     IFZERO MQREG-1 <
 4944 06057 4546          GETJTW          /GET THE MQ-REGISTER POINTER
 4945 06060 0014           JOBEAE
 4946 06061 7701          CLA MQA         /GET THE CONTENTS OF THE MQ
 4947 06062 6211          DATFLD
 4948 06063 3405          DCA I JOBSWA    / & SAVE IT
 4949                     >
 4950 06064 6201          CDF
 4951                     IFZERO EAE-20 <
 4952                             IFZERO CPU-2 <
 4953                     SKB             /SKIP IF MODE 'B' SET (ALSO CLOBBERS AC & MQ)
 4954                     SKP CLA         /MODE 'B' NOT SET
 4955                     CLA CLL CML RAR /INDICATE MODE 'B' BY 4000
 4956                     SGT             /'GT' FLAG SET?
 4957                     SKP             /NO
 4958                     TAD C1000       /YES - SET THE BIT
 4959                             >
 4960                     SCA             /NOW GET THE SEQUENCE COUNT
 4961                     TAD L2SVLK      / ADD IN THE LINK (2000 BIT)
 4962                     DCA L2SVLK      / & SAVE ALL THE BITS
 4963                     >
 4964 06065 1072          TAD JOBDAT
 4965 06066 4544          GETJTA          /GET THE SAVE-AREA ADDRESS
 4966 06067 0011           JOBREG
 4967 06070 3275          DCA .+5
 4968 06071 4530          BLT             /NOW SAVE THE REGISTERS

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 121


 4969 06072 6201           CDF
 4970 06073 0042           L2SV0  / (LEVEL 2 SAVE)
 4971 06074 6211           DATFLD
 4972 06075 0000           0      / (JOB STATUS BLOCK SAVE)
 4973 06076 7775           -3     /3 WORDS - PC, AC, & LINK
 4974 06077 1062  SAVJO3, TAD JOB
 4975 06100 0107          AND C0037
 4976 06101 7650          SNA CLA         /DO WE HAVE A JOB NUMBER?
 4977 06102 5325          JMP SAVJO2      /NOT YET
 4978 06103 4546          GETJTW          /YES - GET POINTER TO LOW-ORDER CPU TIME
 4979 06104 0016           JOBRTM
 4980 06105 7201          CLA IAC         /INCLUDE WHATEVER TICKS HAVEN'T BEEN RECORDED
 4981 06106 1046          TAD CLOCK
 4982 06107 1333          TAD QUATIM      / TO UPDATE HIS RUN TIME
 4983 06110 1064          TAD JOBTIM      /-# TICKS HE DIDN'T USE
 4984 06111 7450          SNA             /IF YOU WANT TO CHARGE HIM SOMETHING, CHANGE
 4985 06112 7000          NOP             / THIS TO 'IAC', YOU'LL CHARGE HIM 1 TICK FOR EACH FRACTION
 4986 06113 7100          CLL
 4987 06114 6211          DATFLD
 4988 06115 1405          TAD I JOBSWA    /ACCUMULATE INTO RUNTIME
 4989 06116 3405          DCA I JOBSWA    /SAVE THE NEW CUMULATIVE TIME
 4990 06117 7420          SNL             /OVERFLOW INTO HIGH ORDER?
 4991 06120 5324          JMP .+4         /NO
 4992 06121 2005          ISZ JOBSWA      /YES - GET TO THE HIGH-ORDER TIME
 4993 06122 2405          ISZ I JOBSWA    / AND BUMP IT ONE UNIT
 4994 06123 7000          NOP
 4995 06124 4732          JMS I SAVJO4    /SET THE BIT IF IT WAS COMPUTE-BOUND
 4996 06125 3062  SAVJO2, DCA JOB         /SIMULATE NULJOB
 4997 06126 6211          DATFLD
 4998 06127 3472          DCA I JOBDAT    /CLEAR POINTER TO CURRENT JOB DATA AREA
 4999 06130 6201  SAVJO1, CDF
 5000 06131 5650          JMP I SAVJO0    /AND EXIT.
 5001             
 5002 06132 4016  SAVJO4, COMBND
 5003 06133 0006  QUATIM, -QUANT

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 122


 5004             /ROUTINE TO SET UP SWAP
 5005             /CORTBL POINTER TO FIELD TO BE SWAPPED OUT IN WS0
 5006             /FINISH= +FIELD # FOR SWAP IN ;FINISH= -FIELD# FOR SWAP OUT
 5007             /FIT=JOB TO BE SWAPPED IN OR PHANTOM TO BE BROUGHT IN
 5008             /FORCE=FIELD TO BE SWAPPED OUT
 5009             /ENTER AT SWAPIN FOR SWAP IN
 5010             /ENTER AT SWPOUT FOR SWAP OUT
 5011             
 5012 06134 1061  SWPOUT, TAD FORCE
 5013 06135 7041          CIA
 5014 06136 3056          DCA FINISH      /SET FINISH = -FORCE (TO INDICATE SWAP OUT)
 5015 06137 1003          TAD WS0         /OR SWAP BIT INTO CORTBL
 5016 06140 4550          IOR
 5017 06141 4000           FSWP
 5018 06142 1403          TAD I WS0       /JOBS ARE THE ONLY ONCE TO BE SWAPPED OUT
 5019 06143 4372          JMS TRAC        /GET THE TRAC # FOR THIS JOB
 5020 06144 3073          DCA OUTTRC      /SAVE IT
 5021 06145 1056  SWAPIN, TAD FINISH      /FINISH HAS FIELD # FOR SWAP ACTIVITY + OR -
 5022 06146 7510          SPA
 5023 06147 7041          CIA             /GET THE ABSOLUTE VALUE
 5024 06150 7106          CLL RTL
 5025 06151 7004          RAL             /IN POSITION 00X0
 5026 06152 3066          DCA SQREQ       /SAVE IT FOR SETTING UP DISC  IO
 5027 06153 1060          TAD FIT
 5028 06154 0115          AND C0600
 5029 06155 7450          SNA             /IS IT A PHANTOM WE NEED?
 5030 06156 5367          JMP SWAP1       /NO - JOB IS TO BROUGHT IN
 5031 06157 0114          AND C0400       /IS FIP NEEDED?
 5032 06160 7640          SZA CLA
 5033                     IFZERO RF08-40 <TAD C0100>      /YES, DF32 NEEDS TRAC IN POSITION 0X00
 5034 06161 7001          IFZERO RF08 <IAC >      /YES, RF08 NEEDS TRAC IN POSITION 000X
 5035 06162 3071  SWAP3,  DCA INTRC
 5036 06163 2036          ISZ DSBUSY      /IS ANY DISC ACTIVITY GOING ON?
 5037 06164 5561          SCHED           /YES, SO FIND A RESIDENT JOB
 5038 06165 4475          JMS I SWPIOA    /NO, START THE SWAP IO
 5039 06166 5561          SCHED           /FIND A RESIDENT JOB IN THE MEANWHILE
 5040 06167 1060  SWAP1,  TAD FIT         /GET THE JOB # TO BE SWAPPED IN
 5041 06170 4372          JMS TRAC        /GET ITS TRAC #
 5042 06171 5362          JMP SWAP3
 5043             
 5044             /SUBROUTINE TO BUILD THE DISC CONTROL-WORD TO TRANSFER
 5045             /THE SWAP AREA FOR THE JOB WHOSE NUMBER IS IN THE AC.
 5046 06172 0000  TRAC,   0
 5047 06173 0107          AND C0037       /JUST GET THE JOB #
 5048 06174 1376          TAD SWBASE      /YES - GET TRAC # WHERE SWAP AREA BEGINS - 1
 5049             
 5050                     IFZERO RF08-40 <
 5051                     CLL RTL; RTL; RTL       /TRAC # IN POSITION 0X00 FOR DF32
 5052                     >
 5053 06175 5772          JMP I TRAC      /RETURN
 5054             
 5055 06176 0004  SWBASE, SWDEX-1         /SWAP TRACK OF JOB 1

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 123


 5056                     PAGE
 5057             /*GIR00         /GENERAL INPUT ROUTINE
 5058             /GENERAL INPUT ROUTINE
 5059             /CALL:  CHAR IN TTCHAR
 5060             /       GIR
 5061             /        DEVTBL ADDRESS
 5062             /       BUFFER OVERFLOW RETURN. CHAR NOT DISTRIBUTED
 5063             /       NORMAL RETURN
 5064             
 5065                     IFNZRO CTRLS-4000       <GLITCH; *.-1>
 5066             
 5067 06200 0000  GIR00,  0
 5068 06201 1600          TAD I GIR00
 5069 06202 3030          DCA CONDBA      /DEVTBL POINTER TO INPUT DDB
 5070 06203 2200          ISZ GIR00
 5071 06204 6214          RDF             /SET UP RETURN TO CALLER
 5072 06205 1122          TAD C6203
 5073 06206 3326          DCA GIRFUL
 5074 06207 6211          DATFLD
 5075 06210 1430          TAD I CONDBA
 5076 06211 3031          DCA CONDDB      / = ADDRESS OF INPUT DDB
 5077 06212 4774  GIRSQ,  JMS I GIRSQA    /CHECK FOR ^S/^Q ('ISZ CONDBA' IF DISABLED)
 5078 06213 1032          TAD TTCHAR
 5079 06214 1375          TAD MCC
 5080 06215 7450          SNA             /YES - IS IT A CTRL/C?
 5081 06216 5233          JMP GIR1        /YES - SET FLAG & CLEAR BUFFERS
 5082 06217 7001          IAC
 5083 06220 7640          SZA CLA         /NO - IS IT A CTRL/B?
 5084 06221 5330          JMP GIR7        /NO - JUST HANDLE NORMALLY
 5085 06222 1031          TAD CONDDB
 5086 06223 4550          IOR             /YES - SET THE 'CTRL/B' FLAG (USED FOR LOGIN)
 5087 06224 0002           CTRLB
 5088 06225 4770          JMS I GIRFA     /IN SI ALREADY?
 5089 06226 5251          JMP GIR2        /YES - CLEAR OUTPUT BUFFER
 5090 06227 1031          TAD CONDDB
 5091 06230 4550          IOR             /NO - SET KEYBOARD IN 'SI' MODE
 5092 06231 1000           DSI
 5093 06232 5254          JMP GIR3        /THEN GO CLEAR THE INPUT BUFFER
 5094 06233 4770  GIR1,   JMS I GIRFA     /IN SI MODE?
 5095 06234 5245          JMP GIR1A       /YES
 5096 06235 1031          TAD CONDDB
 5097 06236 4772          JMS I GIRJOB    /GET THE JOB #
 5098 06237 1063          TAD JOBTBA
 5099 06240 4545          GETJTI          /GET THE STATUS-WORD
 5100 06241 0000           JOBSTS
 5101 06242 0106          AND GIRCTE
 5102 06243 7650          SNA CLA         /IS THE CTRL/C ENABLED?
 5103 06244 5325          JMP GIREXT      /NO - JUST IGNORE THE CTRL/C
 5104 06245 6211  GIR1A,  DATFLD
 5105 06246 1031          TAD CONDDB
 5106 06247 4550          IOR             /INDICATE 'CTRL/C' IN DDB
 5107 06250 0040           CTRLC
 5108 06251 1430  GIR2,   TAD I CONDBA
 5109 06252 7440          SZA             /IS THERE AN OUTPUT DDB?
 5110 06253 4532          CLRBUF          /YES - CLEAR IT
 5111 06254 1431  GIR3,   TAD I CONDDB
 5112 06255 0111          AND GIRSIC

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 124


 5113 06256 7640          SZA CLA         /IS 'SICOM' SET?
 5114 06257 5267          JMP GIR4        /YES - WE CAN'T MESS UP SI BY CLEARING INPUT
 5115 06260 1031          TAD CONDDB
 5116 06261 4532          CLRBUF          /NO - CLEAR INPUT BUFFER
 5117 06262 1431          TAD I CONDDB
 5118 06263 0123          AND GIRFFC      /CLEAR ANY 'FULL' FLAG
 5119 06264 3431          DCA I CONDDB
 5120 06265 1111          TAD GIRDEL
 5121 06266 4766          JMS I GIRCLR    / AND CLEAR 'JSDEL' (SINCE THE INPUT IS GONE)
 5122 06267 1430  GIR4,   TAD I CONDBA
 5123 06270 7450          SNA             /IS THERE AN OUTPUT DDB?
 5124 06271 5277          JMP GIR5        /NO
 5125 06272 3171          DCA WS2
 5126 06273 1571          TAD I WS2
 5127 06274 0121          AND C3777
 5128 06275 3571          DCA I WS2       /YES - CLEAR ANY ^S BIT
 5129 06276 4776          JMS I TYPEB     / AND MAKE SURE HE'S TYPING
 5130 06277 1032  GIR5,   TAD TTCHAR
 5131 06300 3171          DCA WS2         /SAVE THE CHARACTER
 5132 06301 1304          TAD GIRUPA
 5133 06302 6201          CDF
 5134 06303 4551          PRINT           /TYPE AN UP-ARROW
 5135 06304 0336  GIRUPA, "^              /ALSO NOP
 5136 06305 1171          TAD WS2
 5137 06306 1111          TAD C0100       /NOW FORM THE NON-CTRL CHARACTER
 5138 06307 3032          DCA TTCHAR
 5139 06310 1032          TAD TTCHAR
 5140 06311 7110          CLL RAR
 5141 06312 7620          SNL CLA         /IS IT A ^B?
 5142 06313 5316          JMP GIR6        /YES - JUST ECHO THE 'B'
 5143 06314 4767          JMS I GIRCTL    /NO - MUST BE ^C, GO HANDLE IT
 5144 06315 2020          ISZ COMCNT      / (RETURN IF IN SI-MODE)
 5145 06316 1031  GIR6,   TAD CONDDB
 5146 06317 4772          JMS I GIRJOB    /GET HIS JOB # AGAIN
 5147 06320 7650          SNA CLA         /IS HE LOGGED IN?
 5148 06321 5325          JMP GIREXT      /NO - THEN WE DON'T ECHO
 5149 06322 6201          CDF
 5150 06323 4551          PRINT           /YES - ECHO-TYPE THE CHARACTER
 5151 06324 5326          JMP GIRFUL
 5152 06325 2200  GIREXT, ISZ GIR00       /INCREMENT RETURN
 5153 06326 0000  GIRFUL, 0               /BACK TO CALLING FIELD
 5154 06327 5600          JMP I GIR00
 5155             
 5156             /THE CHARACTER IS EITHER FROM A PROGRAM OR 'SI' OR
 5157             /IS NEITHER A CTRL/B OR A CTRL/C; I.E. WE JUST PUSH
 5158             /IT THROUGH NORMALLY.
 5159 06330 4770  GIR7,   JMS I GIRFA     /IS THIS GOING TO SI?
 5160 06331 5337          JMP GIR8        /YES
 5161 06332 1431          TAD I CONDDB
 5162 06333 0114          AND C0400
 5163 06334 7640          SZA CLA         /IS THE BUFFER ALREADY FULL?
 5164 06335 5326          JMP GIRFUL      /YES - DON'T BOTHER WITH BREAK
 5165 06336 5341          JMP .+3
 5166 06337 4773  GIR8,   JMS I GIRLRA    /GO CHECK FOR RUBOUT AND LINE-FEED
 5167 06340 5355          JMP GIR9        /RETURN TO ECHO PRINT WITHOUT STORING
 5168 06341 1031          TAD CONDDB
 5169 06342 4564          STORE           /NOW STORE THE CHARACTER

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 125


 5170 06343 5342           GIRLIM
 5171 06344 5326          JMP GIRFUL      /NO ROOM
 5172 06345 4770          JMS I GIRFA     /IS THIS GOING TO 'SI'?
 5173 06346 5355          JMP GIR9        /YES - JUST GO ECHO IT
 5174 06347 1031          TAD CONDDB
 5175 06350 1076          TAD GIRBKM
 5176 06351 3003          DCA WS0
 5177 06352 1403          TAD I WS0       /GET THE BREAK-MASK
 5178 06353 4531          BREAK           /IS THIS A BREAK?
 5179 06354 4765          JMS I GIRBKB    /SET THE 'DELIMITER SEEN' FLAG & 'BONUS'
 5180 06355 6211  GIR9,   DATFLD
 5181 06356 4770          JMS I GIRFA     /IS HE IN 'SI' MODE?
 5182 06357 1125          TAD GIRMDP      /YES - JUST CHECK 'DHALF', NOT 'DUPL'
 5183 06360 1371          TAD GIRHD
 5184 06361 0431          AND I CONDDB
 5185 06362 7640          SZA CLA         /ARE EITHER 'DUPL' OR 'DHALF' SET?
 5186 06363 5325          JMP GIREXT      /YES - THEN ECHOING IS SUPPRESSED
 5187 06364 5316          JMP GIR6        /NO - GO PRINT THE CHARACTER
 5188             
 5189             /
 5190 06365 3711  GIRBKB, GIRBRK
 5191                     IFNZRO DDBBRK-2         <GLITCH; *.-1>
 5192       0076  GIRBKM= C0002
 5193 06366 1511  GIRCLR, CLSTR1
 5194                     IFNZRO JSRSEN-20        <GLITCH; *.-1>
 5195       0106  GIRCTE= C0020   /JSRSEN
 5196 06367 3200  GIRCTL, GIRCT0
 5197                     IFNZRO JSDEL-100        <GLITCH; *.-1>
 5198       0111  GIRDEL= C0100   /JSDEL
 5199 06370 4437  GIRFA,  CHKSI
 5200                     IFNZRO DFULL-400        <GLITCH; *.-1>
 5201       0123  GIRFFC= C7377   /-DFULL-1
 5202 06371 0210  GIRHD,  DUPL+DHALF
 5203 06372 5567  GIRJOB, DEVJOB
 5204 06373 3246  GIRLRA, GIRLRB
 5205                     IFNZRO DUPL-200         <GLITCH; *.-1>
 5206       0125  GIRMDP= C7600   /-DUPL
 5207                     IFNZRO SICOM-100        <GLITCH; *.-1>
 5208       0111  GIRSIC= C0100   /SICOM
 5209 06374 1157  GIRSQA, CONSQ
 5210 06375 7575  MCC,    -203            /- ^C
 5211 06376 1235  TYPEB,  TYPE

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 126


 5212                     PAGE
 5213             
 5214             /SERVICE ALL AC TRANSFER OUTPUT DEVICES (TTY'S, HSP, LPT, ETC.)
 5215             /IF FILLER CHARACTERS ARE NEEDED THE NEXT 3 WORDS MUST BE PATCHED ACCORDING TO YOUR NEEDS
 5216                             /THE VALUE OF DEVTBL IS ASSEMBLED HERE FOR YOUR CALCULATING CONVENIENCE
 5217 06400 2600  FILHI,  DEVTBL  /-(DEVTBL+2*(KXX+1)) WHERE KXX IS THE HIGHEST LINE REQUIRING FILLER CHARACTERS
 5218 06401 0000  FILLO,  0       /2 TIMES NUMBER OF LINES REQUIRING FILLER CHARACTERS
 5219 06402 0000  FILLC,  0       /-(ASCII CHAR.) TO LOOK FOR - 7 BITS ONLY (CR=7763; LF=7766)
 5220             
 5221       4603  JMSTIM= JMS I .
 5222 06403 6620          TTIME
 5223 06404 7752  CONCNT, -NULINE-CONTTY-CDVOUT-2
 5224                     IFNZRO DC08A    <IFNZRO .&177-5 <GLITCH; *.-1>
 5225                     T8OUT>          /PASS OUTPUT CHARACTER TO DC08A
 5226 06405 7000          IFZERO DC08A    <NOP>   /FOR SPACING
 5227 06406 2200  DEVOUT, OUTDIF
 5228       0002  CONREG= C0200
 5229 06407 0276  CONDEV, SKPTP+1
 5230 06410 7566  TTOFLA, TTOFLG
 5231 06411 0040  CONLPF, JSLPT
 5232 06412 0005  CONLPR, CDVOUT+1
 5233             IFNZRO OUTREG-200       <YOU GOOFED>
 5234             
 5235 06413 3562  CONOUT, DCA I SETFLG    /CLEAR SCHEDULER FLAG
 5236 06414 6001          ION
 5237 06415 2610          ISZ I TTOFLA    /SHOW THAT OUTPUT IS BEING SERVICED
 5238 06416 6211          DATFLD
 5239 06417 1002          TAD CONREG
 5240 06420 3003          DCA WS0         /OUTPUT REGISTER TABLE POINTER FOR OUTPUT SCAN
 5241 06421 1204          TAD CONCNT
 5242 06422 3004          DCA WS1         /NUMBER OF LINES TO CHECK + PUNCH & LINE PRINTER
 5243 06423 1403  CONOU0, TAD I WS0
 5244 06424 7710  TTIMER, SPA CLA         /DOES THIS DEVICE HAVE A REQUEST?
 5245 06425 5240          JMP CONOU2      /YES
 5246 06426 2003  CONOU1, ISZ WS0         /BUMP POINTER
 5247 06427 2004          ISZ WS1         /AND THE COUNT
 5248 06430 5223          JMP CONOU0
 5249 06431 1246          TAD CONSKP      /RESTORE THE NORMAL INSTRUCTION
 5250 06432 3224          DCA TTIMER
 5251                             IFNZRO LPT-3 <
 5252                     STA
 5253                     LSRP            /LP08 OR LE8 ERROR?
 5254                     LIE     >       /OK - TURN ON INTERRUPT ENABLE
 5255                             IFZERO LPT-3 <
 5256 06433 7000          NOP             /ENABLE LPT INTERRUPT HERE IF AVAILABLE
 5257 06434 7000          NOP
 5258 06435 7000          NOP     >
 5259 06436 5637          JMP I .+1
 5260 06437 2020          CONEXT
 5261             
 5262 06440 4355  CONOU2, JMS CONGET      /FIND HIS JOB
 5263 06441 3031          DCA CONDDB
 5264 06442 1431          TAD I CONDDB    /GET THE OUTPUT STATUS
 5265 06443 7510          SPA
 5266 06444 5365          JMP CONOU9      /HE HAS TYPED ^S
 5267 06445 7006          RTL
 5268 06446 7710  CONSKP, SPA CLA

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 127


 5269 06447 5333          JMP CONJAM      /SPECIAL CHARACTERS
 5270 06450 1031  CONOU3, TAD CONDDB
 5271 06451 4540          FETCH           /GET A CHARACTER
 5272 06452 5365          JMP CONOU9      /BUFFER EMPTY
 5273 06453 3032  CONOU4, DCA TTCHAR
 5274 06454 1032          TAD TTCHAR      /CHECK FOR CARRIAGE RETURN (FOR SERIAL LA30'S @ 300 BAUD)
 5275 06455 0112          AND C0177       /LET'S KEEP DAWNWOOD JUNIOR HIGH HAPPY
 5276 06456 1202          TAD FILLC
 5277 06457 7640          SZA CLA
 5278 06460 5275          JMP CONOU5      /NORMAL CHARACTER
 5279 06461 1030          TAD CONDBA
 5280 06462 1200          TAD FILHI       /HI LINE LIMIT FOR FILLERS
 5281 06463 7100          CLL
 5282 06464 1201          TAD FILLO       /LO LINE LIMIT FOR FILLERS
 5283 06465 7620          SNL CLA 
 5284 06466 5275          JMP CONOU5      /NO FILLERS FOR THIS LINE
 5285 06467 1031          TAD CONDDB
 5286 06470 1101          TAD C0005
 5287 06471 3171          DCA WS2         /POINTER TO DDB CHARACTER COUNT
 5288 06472 7130          STL RAR
 5289 06473 1571          TAD I WS2       /INDICATE THE NEED FOR FILLERS
 5290 06474 3571          DCA I WS2
 5291 06475 6002  CONOU5, IOF
 5292 06476 1403          TAD I WS0       /WHAT'S THE HARDWARE DOING?
 5293 06477 7006          RTL
 5294 06500 7620          SNL CLA         /HARDWARE BUSY FLAG IN THE LINK
 5295 06501 5307          JMP CONOU6      /NOTHING - SEND TO IT
 5296 06502 1032          TAD TTCHAR
 5297 06503 7004          RAL             /SET THE CHARACTER READY FLAG
 5298 06504 6001  CONOU8, ION
 5299 06505 3403          DCA I WS0       /NEW LINE STATUS
 5300 06506 5226          JMP CONOU1      /CHECK NEXT LINE
 5301 06507 1004  CONOU6, TAD WS1
 5302 06510 1212          TAD CONLPR
 5303 06511 7440          SZA             /LINE PRINTER?
 5304 06512 5342          JMP CONOU7      /NO - EITHER TTY, HSP, OR NONSTANDARD DEVICE
 5305                             IFNZRO LPT-3 <
 5306                     LIE             /DISABLE LS08/LS8E INTERRUPTS
 5307                     LCP     >       /DISABLE LP08/LE8 INTERRUPTS
 5308 06513 6001          ION
 5309 06514 1211          TAD CONLPF
 5310 06515 4562          JMS I SETFLG    /SET THE LINE PRINTER FLAG FOR THE USER
 5311 06516 1032          TAD TTCHAR
 5312 06517 5325          JMP CONLP2
 5313             CONLP1,
 5314                             IFZERO LPT-3 <
 5315 06520 6662          LCF
 5316 06521 6001          ION     >
 5317 06522 1031          TAD CONDDB
 5318 06523 4540          FETCH           /NO - GET ANOTHER CHARACTER FOR THE LINE PRINTER
 5319 06524 5365          JMP CONOU9      /LINE PRINTER BUFFER IS EMPTY
 5320                             IFNZRO LPT-3 <
 5321                     LSF             /IS IT READY FOR THE NEXT CHARACTER ALREADY
 5322                     JMP CONOU4      /NO - JUST TUCK THIS ONE AWAY FOR AN INTERRUPT TO TAKE
 5323             CONLP2, LPC
 5324                     STL CLA RTR
 5325                     DCA I WS0       /REMEMBER THE HARDWARE IS BUSY

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 128


 5326                     JMP CONLP1      >
 5327                             IFZERO LPT-3 <
 5328 06525 6002  CONLP2, IOF
 5329 06526 6666          LPC             /SEND OFF THE CHARACTER
 5330 06527 7200          CLA
 5331 06530 6661          LSF             /PRINTER READY FOR ANOTHER ALREADY?
 5332 06531 5351          JMP CONLP3      /NO - ONE MORE FETCH FOR BUFFERING
 5333 06532 5320          JMP CONLP1      /YES - KEEP GOING
 5334                             >
 5335             
 5336 06533 1431  CONJAM, TAD I CONDDB
 5337 06534 0107          AND C0037       /REMOVE THE JAM REQUEST
 5338 06535 3431          DCA I CONDDB
 5339 06536 1103          TAD C0007       /BELL?
 5340 06537 7430          SZL
 5341 06540 1105          TAD C0014       /NO -  "XOFF"
 5342 06541 5253          JMP CONOU4
 5343             
 5344 06542 1207  CONOU7, TAD CONDEV
 5345 06543 3350          DCA CONTLS
 5346 06544 1750          TAD I CONTLS
 5347 06545 1101          TAD C0005       /CONSTRUCT TLS, PLS, OR "JMP TBOUT"
 5348 06546 3350          DCA CONTLS
 5349 06547 1032          TAD TTCHAR
 5350 06550 0000  CONTLS, .-.             /TLS, PLS OR JMP TBOUT
 5351 06551 7332  CONLP3, STL CLA RTR     /AC=2000
 5352 06552 6001          ION
 5353 06553 3403          DCA I WS0
 5354 06554 5250          JMP CONOU3      /GET ANOTHER CHARACTER
 5355             
 5356 06555 0000  CONGET, 0
 5357 06556 1003          TAD WS0
 5358 06557 7124          STL RAL         /TIMES 2 PLUS 1
 5359 06560 1206          TAD DEVOUT
 5360 06561 3030          DCA CONDBA      /DEVTBL POINTER
 5361 06562 1430          TAD I CONDBA    /IS THERE A DDB FOR THIS DEVICE?
 5362 06563 7440          SZA
 5363 06564 5755          JMP I CONGET
 5364 06565 7350  CONOU9, CLL STA RAR
 5365 06566 6202          CIF             /NO INTERRUPTS
 5366 06567 0403          AND I WS0
 5367 06570 3403          DCA I WS0       /CLEAR THE REQUEST FLAG
 5368 06571 1430          TAD I CONDBA    /DOES HE EXIST
 5369 06572 7450          SNA
 5370 06573 5226          JMP CONOU1      /NO - SO WE'RE FINISHED
 5371 06574 3015          DCA AXS1
 5372 06575 1415          TAD I AXS1      /JOB
 5373 06576 7640          SZA CLA
 5374 06577 5226          JMP CONOU1      /STILL DEFINED
 5375 06600 3430          DCA I CONDBA    /CLEAR HIM FROM THE DEVTBL
 5376 06601 1031          TAD CONDDB      /TIME TO RELEASE THE DDB
 5377 06602 6201          CDF
 5378 06603 4555          RETBLK
 5379 06604 6211          DATFLD
 5380 06605 7240  TTIME2, STA
 5381 06606 1015  TTIME3, TAD AXS1        /ADDRESS OF DDB
 5382 06607 4532          CLRBUF          /FLUSH OUT BUFFER

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 129


 5383 06610 1403          TAD I WS0
 5384 06611 0120          AND C1000
 5385 06612 7650          SNA CLA         /ARE WE HERE DUE TO A HUNG DEVICE?
 5386 06613 7332          CLA CLL CML RTR /NO - LEAVE THE 'INTERRUPT PENDING' BIT SET
 5387 06614 0403          AND I WS0       /CLEAR THE WAITING CHARACTER
 5388 06615 3403          DCA I WS0
 5389 06616 5617          JMP I .+1
 5390 06617 6440          CONOU2

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 130


 5391             TOFA1,
 5392 06620 0000  TTIME,  0
 5393 06621 0120          AND C1000
 5394 06622 7740  C7740,  SZA SMA CLA     /SMA HERE TO MAKE CONSTANT
 5395 06623 5234          JMP TTIME1      /NO INTERRUPTS
 5396 06624 6202          CIF
 5397 06625 1403          TAD I WS0
 5398 06626 7540          SZA SMA         /REQUEST OR INACTIVE
 5399 06627 1120          TAD C1000       /NO SET TIMER BIT
 5400 06630 7500          SMA             /HOW SHALL WE EXIT
 5401 06631 2220          ISZ TTIME       /SKIP - HE'S CURRENTLY ACTIVE
 5402 06632 3403          DCA I WS0       /SAVE UPDATED STATUS
 5403 06633 5620          JMP I TTIME     /AND AWAY
 5404 06634 4574  TTIME1, JMS I CONGEA    /HUNG - FIND HIS JOB
 5405 06635 3015          DCA AXS1
 5406 06636 4576          JMS I CONSEA
 5407 06637 1253          TAD TTIMCD
 5408 06640 1004          TAD WS1
 5409 06641 7710          SPA CLA         /IS THIS AN ASSIGNABLE CHARACTER DEVICE?
 5410 06642 5206          JMP TTIME3      /NO - A TELEPRINTER
 5411 06643 1415          TAD I AXS1      /JOB OWNING DEVICE
 5412 06644 7450          SNA
 5413 06645 5205          JMP TTIME2      /NO JOB, HUNG--LET'S GET RID OF HIS BUFFER!!
 5414 06646 6201          CDF
 5415 06647 4536          ERROR           /PASS THE ERROR TO HIM
 5416 06650 0006           HUNGDV
 5417 06651 6211          DATFLD
 5418 06652 5575          JMP I CONO1A    /TRY AGAIN NOW
 5419             
 5420 06653 0006  TTIMCD, CDVOUT+2
 5421             
 5422             TOFT1,
 5423 06654 0000  TOFSET, 0               /ONLY CALLED BY "TOF"
 5424 06655 1261          TAD TOF
 5425 06656 7710          SPA CLA         /CALLED FROM INPUT OR OUTPUT HANDLER?
 5426 06657 4576          JMS I CONSEA    /SET OUTPUT FLAGS
 5427 06660 5654          JMP I TOFSET

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 131


 5428             /RETRIEVE A CHARACTER FROM LINKED BUFFER
 5429             /CALL:  DDB ADDRESS IN AC
 5430             /       JMS TOF
 5431             /       RETURN BUFFER EMPTY
 5432             /       RETURN CHARACTER IN AC
 5433             
 5434 06661 0000  TOF,    0
 5435 06662 1101          TAD C0005       /INDEX TO COUNT
 5436 06663 3220          DCA TOFA1
 5437 06664 1620          TAD I TOFA1
 5438 06665 7450          SNA
 5439 06666 5661          JMP I TOF       /ALREADY EMPTY
 5440 06667 2261          ISZ TOF         /SHOW SUCCESS
 5441 06670 7510          SPA
 5442 06671 5352          JMP TOF3        /GENERATE A FILLER
 5443 06672 1222          TAD C7740
 5444 06673 7450          SNA
 5445 06674 4254          JMS TOFSET      /TIME TO SET STR1 BIT
 5446 06675 1107          TAD C0037       /AC NOW = COUNT -1
 5447 06676 7450          SNA
 5448 06677 5355          JMP TOF4        /THIS WILL BE THE LAST CHARACTER
 5449 06700 3620  TOF0,   DCA I TOFA1
 5450 06701 2220          ISZ TOFA1       /POINT TO EMPTY COUNT
 5451 06702 2620          ISZ I TOFA1     /ANY LEFT IN THIS BLOCK?
 5452 06703 5322          JMP TOF1        /MUST BE
 5453 06704 1376          TAD TC7766
 5454 06705 3620          DCA I TOFA1     /RESET THE EMPTY COUNT
 5455 06706 2220          ISZ TOFA1       /EMPTY BLOCK
 5456 06707 1620          TAD I TOFA1
 5457 06710 6201          CDF
 5458 06711 4555          RETBLK          /RETURN THE EMPTY BLOCK
 5459 06712 6211          DATFLD
 5460 06713 3620          DCA I TOFA1     /LINK TO NEXT BLOCK
 5461 06714 1620          TAD I TOFA1
 5462 06715 0103          AND C0007
 5463 06716 7640          SZA CLA         /LEGAL LINK POINTER?
 5464 06717 4552          REBOOT          /NO - ERROR *****
 5465 06720 1376          TAD TC7766
 5466 06721 5324          JMP TOF1+2
 5467 06722 1620  TOF1,   TAD I TOFA1     /GET THE COUNT TO DETERMINE POSITION WITHIN THE BLOCK
 5468 06723 2220          ISZ TOFA1       /POINT TO EMPTY BLOCK
 5469 06724 1077          TAD C0003
 5470 06725 7500          SMA             /UNPACK?
 5471 06726 7124          STL RAL         /YES (MULT BY 2 THEN ADD ONE) FUDGE POSITION
 5472 06727 7510          SPA             /UNPACK?
 5473 06730 7161          STL CIA         /NO -  MAKE OFF SET POSITIVE - SET LINK TO INDICATE NO UNPACKING NEEDED
 5474 06731 1620          TAD I TOFA1     /ADD OFFSET TO EMPTY BLOCK POINTER
 5475 06732 3220          DCA TOFA1
 5476 06733 1620          TAD I TOFA1     /GET CHARACTER; OR AT LEAST PART OF IT
 5477 06734 7430          SZL             /UNPACK?
 5478 06735 5350          JMP TOF2        /NO
 5479 06736 0124          AND C7400       /SAVE PERTINENT BITS
 5480 06737 3254          DCA TOFT1
 5481 06740 2220          ISZ TOFA1
 5482 06741 1620          TAD I TOFA1     /GET THE OTHER HALF OF THE CHARACTER
 5483 06742 0124          AND C7400       /THROW AWAY THE JUNK
 5484 06743 7112          CLL RTR         /START MOVING IT INTO PLACE

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 132


 5485 06744 7012          RTR
 5486 06745 1254          TAD TOFT1       /GET THE M.S. BITS
 5487 06746 7012          RTR
 5488 06747 7012          RTR             /THAT SHOULD DO IT
 5489 06750 0113  TOF2,   AND C0377       /CLEAR ANY JUNK LEFT OVER
 5490 06751 5661          JMP I TOF       /AND AWAY
 5491 06752 1114  TOF3,   TAD C0400       /INCR. FILLER COUNT
 5492 06753 3620          DCA I TOFA1
 5493 06754 5661          JMP I TOF       /EXIT WITH FILLER (NULL) CHARACTER
 5494 06755 4254  TOF4,   JMS TOFSET      /SET THE STR1 BIT FOR THIS DEVICE
 5495 06756 7240          STA
 5496 06757 1220          TAD TOFA1
 5497 06760 3254          DCA TOFT1       /POINTS TO FILL BLOCK POINTER
 5498 06761 1654          TAD I TOFT1
 5499 06762 6201          CDF
 5500 06763 4555          RETBLK          /RETURN LAST BLOCK OF THE BUFFER
 5501 06764 6211          DATFLD
 5502 06765 0261          AND TOF
 5503 06766 7700          SMA CLA         /CALLED FROM INPUT OR OUTPUT HANDLER?
 5504 06767 1003          TAD WS0         /INPUT - CHECK FOR NON-ZERO BREAK MASK
 5505 06770 7650          SNA CLA
 5506 06771 5374          JMP TOF5        /NO "JSDEL"TO CLEAR
 5507 06772 1111          TAD C0100
 5508 06773 4777          JMS I TOFCLR    /CLEAR JSDEL - THIS IS THE LAST CHARACTER
 5509 06774 3654  TOF5,   DCA I TOFT1     /CLEAR FILL POINTER SO WE KNOW WE'RE EMPTY
 5510 06775 5300          JMP TOF0
 5511             
 5512 06776 7766  TC7766, 7766
 5513 06777 1511  TOFCLR, CLSTR1

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 133


 5514                     IFNZRO CORTBL-.&4000    <GLITCH; *.-1>
 5515       7001          *CORTBL
 5516             /*CORTBL        /CORE ALLOCATION TABLE (FIXED)
 5517             /
 5518             /THIS IS THE FIELD ALLOCATION TABLE
 5519             /THE LOCK-BITS ARE REMOVED BY INIT AS A FUNCTION
 5520             /OF THE NUMBER OF USER FIELDS.
 5521 07001 2000  CORTBL, LOCK    /DATFLD
 5522 07002 2000          LOCK    /FIELD 2
 5523 07003 2000          LOCK    /FIELD 3
 5524 07004 2000          LOCK    /FIELD 4
 5525 07005 2000          LOCK    /FIELD 5
 5526 07006 2000          LOCK    /FIELD 6
 5527 07007 2000          LOCK    /FIELD 7
 5528             
 5529             /
 5530             /THE FOLLOWING IS THE LEVEL-2 ACTIVITY QUEUE.
 5531 07010 0000  L2QTB,  ZBLOCK 20
      07011 0000
      07012 0000
      07013 0000
      07014 0000
      07015 0000
      07016 0000
      07017 0000
      07020 0000
      07021 0000
      07022 0000
      07023 0000
      07024 0000
      07025 0000
      07026 0000
      07027 0000
 5532             
 5533             
 5534             /ROUTINE TO PERMIT 'STORE' AN EXTRA BUFFER AND CHECK
 5535             /TO CLEAR THE 'FULL' FLAG.
 5536             
 5537 07030 0000  ALLOK,  0
 5538 07031 2230          ISZ ALLOK       /ALWAYS ALLOW ANOTHER BLOCK
 5539 07032 3245          DCA ALLOKP      /SAVE THE POINTER TO THE COUNT
 5540 07033 1645          TAD I ALLOKP
 5541 07034 1244          TAD ALLOKM
 5542 07035 7740          SMA SZA CLA     /CAN WE CLEAR THE 'FULL' FLAG?
 5543 07036 5630          JMP I ALLOK     /NOT YET
 5544 07037 1431          TAD I CONDDB
 5545 07040 0243          AND ALLOKC      /YES
 5546 07041 3431          DCA I CONDDB
 5547 07042 5630          JMP I ALLOK
 5548             /
 5549 07043 7377  ALLOKC, -DFULL-1
 5550 07044 7647  ALLOKM, -131            /BUFFER FULL TRIPS AT 90 CHARACTERS

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 134


 5551             /*DEVCHK        /CHECK DEVICE OWNERSHIP
 5552             /CHECK DEVICE ASSIGNMENT.
 5553             /CALL:  JMS DEVCHK
 5554             /        DEVTBL POINTER
 5555             /       RETURN IF OK; THROUGH 'UUOERR' IF NOT
 5556             /
 5557             ALLOKP,
 5558 07045 0000  DEVCHK, 0
 5559 07046 1645          TAD I DEVCHK
 5560 07047 2245          ISZ DEVCHK
 5561 07050 3171          DCA WS2         /SAVE THE DEVTBL POINTER
 5562 07051 6214          RDF
 5563 07052 1122          TAD C6203
 5564 07053 3266          DCA DEVEXT      /SET THE RETURN FIELD
 5565 07054 6211          DATFLD
 5566 07055 1571          TAD I WS2
 5567 07056 7450          SNA             /DDB EXIST?
 5568 07057 5566          JMP I UUOERA    /NO - THEN HE DOESN'T OWN IT!
 5569 07060 3015          DCA AXS1
 5570 07061 1062          TAD JOB
 5571 07062 7041          CIA
 5572 07063 1415          TAD I AXS1
 5573 07064 7640          SZA CLA         /OWNED BY THIS USER?
 5574 07065 5566          JMP I UUOERA    /NO - BAD!
 5575 07066 7402  DEVEXT,  HLT
 5576 07067 5645          JMP I DEVCHK    /YES - TAKE NORMAL RETURN
 5577             
 5578             
 5579             /HANDLER FOR THE USER'S IOT REQUESTS OF THE CARD READER
 5580             
 5581 07070 7001  UUCDR0, IAC             /RCRC - READ CARD COMPRESSED (8/E ONLY)
 5582 07071 7001          IAC             /RCRB - READ CARD BINARY
 5583 07072 3004          DCA UUOCAL      /RCRA - READ CARD ALPHA
 5584 07073 4245          JMS DEVCHK      /CHECK HIS OWNERSHIP
 5585 07074 2644  UUCDR1,  DEVTBE+4
 5586 07075 1004          TAD UUOCAL      /HE OWNS IT ALL RIGHT
 5587 07076 6212          CIF DATFLD-1
 5588 07077 5700          JMP I .+1       /PASS THE IOT TYPE-CODE
 5589 07100 1735          UUCDR
 5590             
 5591             /HANDLER FOR CARD READER TIMEOUTS
 5592             
 5593 07101 6211  L2CDR,  DATFLD
 5594 07102 1674          TAD I UUCDR1
 5595 07103 3015          DCA AXS1
 5596 07104 1015          TAD AXS1        /GET HIS JOB NUMBER
 5597 07105 4536          ERROR           / AND PASS HIM THE ERROR CODE
 5598 07106 0006           HUNGDV
 5599 07107 6212  CDL20,  CIF DATFLD-1
 5600 07110 5711          JMP I .+1       /THEN OFF TO FIELD 1
 5601 07111 1704          CDL21

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 135


 5602             /ROUTINE TO CHECK IF A CHARACTER IS A BREAK-CHARACTER.
 5603             /CALL:  TAD (BREAK-MASK)        /CHARACTER IN 'TTCHAR'
 5604             /       JMS BRKTST
 5605             /        NOT A BREAK
 5606             /        A BREAK
 5607             /
 5608 07112 0000  BRKTST, 0
 5609 07113 6201          CDF
 5610 07114 7550          SPA SNA         /IS IT 4000 OR 0?
 5611 07115 5333          JMP BRKTS2      /YES
 5612 07116 3003          DCA WS0         /NO - SAVE IT
 5613 07117 1336          TAD BRKTBA
 5614 07120 3015          DCA AXS1        /SET POINTER TO THE TABLE
 5615 07121 1032          TAD TTCHAR
 5616 07122 2015  BRKTS1, ISZ AXS1
 5617 07123 1415          TAD I AXS1      / -(HIGH END OF RANGE)
 5618 07124 7100          CLL
 5619 07125 1415          TAD I AXS1      / +(NUMBER OF CHARACTERS)
 5620 07126 7420          SNL             /DID IT FALL OUT HERE?
 5621 07127 5322          JMP BRKTS1      /NOPE
 5622 07130 7200          CLA
 5623 07131 1415          TAD I AXS1      /YES - GET THE CORRESPONDING MASK
 5624 07132 0003          AND WS0
 5625 07133 7650  BRKTS2, SNA CLA         /IS IT A BREAK?
 5626 07134 2312          ISZ BRKTST      /NO
 5627 07135 5712          JMP I BRKTST
 5628             
 5629 07136 7135  BRKTBA, .-1
 5630 07137 7445          -"Z-1;          "Z-"A+1;        2000    /LETTERS
      07140 0032
      07141 2000
 5631 07142 0007          "A-"9-1;        "9-"0+1;        1000    /NUMBERS
      07143 0012
      07144 1000
 5632             
 5633 07145 0046          "0-211-1;       211-211+1;      400     /TAB
      07146 0001
      07147 0400
 5634 07150 7773          211-215-1;      215-212+1;      200     /LF, VT, FF, CR
      07151 0004
      07152 0200
 5635 07153 7716          212-";-1;       ";-"!+1;        100     / !"#$%&'()*+,-./:;
      07154 0033
      07155 0100
 5636             
 5637 07156 0000          "!-240-1;       240-240+1;      40      /SPACE
      07157 0001
      07160 0040
 5638 07161 7737          240-"@-1;       "@-"<+1;        20      /<=>?@
      07162 0005
      07163 0020
 5639 07164 7734          "<-"_-1;        "_-"[+1;        10      /[\]^_
      07165 0005
      07166 0010
 5640             
 5641 07167 7733          "[-377-1;       377-377+1;      4       /RUBOUT
      07170 0001

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 136


      07171 0004
 5642 07172 0000          377-376-1;      376-375+1;      2       /ALTMODES
      07173 0002
      07174 0002
 5643 07175 7775          375-377-1;      377-0+1;        1       /ANYTHING ELSE
      07176 0400
      07177 0001

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 137


 5644                     PAGE
 5645             /RETURN ADDRESS OF LINKED TABLE ENTRY
 5646             /CALL   TAD TABLE ENTRY ADDRESS
 5647             /       GETJTA
 5648             /        ENTRY NAME
 5649             /       RETURN
 5650             
 5651             /*GETJTB        /GET ADDRESS OF LINKED ENTRY
 5652 07200 0000  GETJTB, 0
 5653 07201 3231          DCA GETJT1      /SAVE JOBTABLE ADDRESS
 5654 07202 1600          TAD I GETJTB    /ENTRY #
 5655 07203 3232          DCA GETJT2
 5656 07204 6214          RDF             /FIELD CALLED FROM
 5657 07205 1122          TAD C6203
 5658 07206 3227          DCA GETJT3      /SO WE CAN GET BACK
 5659 07207 6211          DATFLD          /CHANGE TO DATA FIELD
 5660 07210 1631  GETJ1,  TAD I GETJT1    /GET JOBTBL ENTRY
 5661 07211 7450          SNA             /LINK 0?
 5662 07212 5226          JMP GETJ3       /YES - RETURN 0
 5663 07213 3231          DCA GETJT1      /NO. JOB DATA ADDRESS
 5664 07214 1233          TAD GETJM7
 5665 07215 1232          TAD GETJT2      /ARE WE IN PROPER BLOCK?
 5666 07216 7510          SPA             /ENTRY<7?
 5667 07217 5222          JMP .+3         /YES
 5668 07220 3232          DCA GETJT2      /NO. LINK TO NEXT
 5669 07221 5210          JMP GETJ1       /AND TRY AGAIN
 5670 07222 7200          CLA
 5671 07223 1232          TAD GETJT2      /INDEX INTO BLOCK
 5672 07224 1231          TAD GETJT1      /START OF BLOCK
 5673 07225 7001          IAC
 5674 07226 2200  GETJ3,  ISZ GETJTB      /SKIP CALLING ARGUMENT
 5675 07227 0000  GETJT3, 0               /BACK TO CALLING FIELD
 5676 07230 5600          JMP I GETJTB
 5677             
 5678 07231 0000  GETJT1, 0
 5679 07232 0000  GETJT2, 0
 5680 07233 7771  GETJM7, -7

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 138


 5681             /GET JSFX
 5682             /CALL   TAD FILE #
 5683             /       JMS GETJFX
 5684             /       RETURN WITH JSFX IN AC
 5685             
 5686 07234 0000  GETJFX, 0
 5687 07235 0077          AND C0003       /FILE # ONLY
 5688 07236 7040          CMA
 5689 07237 3247          DCA GETJF0      /-SHIFT COUNT
 5690 07240 7130          STL RAR
 5691 07241 7010          RAR
 5692 07242 2247          ISZ GETJF0      /DONE?
 5693 07243 5241          JMP .-2
 5694 07244 5634          JMP I GETJFX    /YES, EXIT WITH BIT SET IN AC

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 139


 5695             /RESTORE JOB REGISTERS
 5696             /CALL   TAD JOB #
 5697             /       RESJOB
 5698             /       RETURN
 5699             
 5700 07245 7772  QUANTA, QUANT
 5701 07246 0637  RESMSK, FIP+SI+37
 5702             
 5703             GETJF0,
 5704 07247 0000  RESJO0, 0
 5705 07250 0246          AND RESMSK      /CLEAR CORE STATUS BITS
 5706 07251 3062          DCA JOB         /AND SAVE IN JOB
 5707 07252 1062          TAD JOB
 5708 07253 0107          AND C0037
 5709 07254 1063          TAD JOBTBA
 5710 07255 3304          DCA RESJO1      /JOBTBL POINTER FOR THIS JOB
 5711 07256 6211          DATFLD
 5712 07257 1704          TAD I RESJO1    /GET ADDRESS OF JOB DATA AREA
 5713 07260 3472          DCA I JOBDAT    /AND SAVE IN FIELD 1
 5714 07261 6201          CDF
 5715 07262 1046          TAD CLOCK       /REMOVE ANY QUEUED CLOCK TICKS
 5716 07263 7040          CMA
 5717 07264 1245          TAD QUANTA      /INITIALIZE HIS QUANTUM RUN TIME
 5718 07265 3064          DCA JOBTIM
 5719 07266 3042          DCA L2SV0       /SET PC=0 IN ANTICIPATION OF PHANTOMS
 5720 07267 1062          TAD JOB         /IS IT A PHANTOM?
 5721 07270 0115          AND C0600
 5722 07271 7640          SZA CLA
 5723 07272 5647          JMP I RESJO0    /YES; WE'RE RESTORED!
 5724             /
 5725             / NOW RESTORE THE EAE REGISTERS IF THEY EXIST
 5726             /
 5727                     IFZERO EAE-20 <
 5728                             IFZERO CPU-2 <
 5729                     SWAB            /PUT EAE IN MODE B
 5730                     GETJTW          /PICK UP MODE, GT, & SC
 5731                      JOBREG+1
 5732                     MQL             / & SAVE THEM IN MQ
 5733                     TAD C1000
 5734                     MQA             /IF THE 'GT' FLAG WAS SET BEFORE,
 5735                     SAM             / THIS WILL SET IT NOW
 5736                     CLA MQA ACS     /LOAD SC ALL THE WAY FROM MQ
 5737                     MQA             /GET MODE BACK INTO AC
 5738                     SMA CLA         /WAS IT SET?
 5739                     SWBA            /NO - SET MODE 'A'
 5740                             >
 5741                             IFNZRO CPU-2 <
 5742                     GETJTW          /PICK UP SC
 5743                      JOBREG+1
 5744                     AND C0037       /ZAP ALL BUT THE SEQUENCE-COUNT
 5745                     CMA             /COMPLEMENT AND STORE FOR
 5746                     DCA .+2         /  OLD-STYLE EAE
 5747                     SCL             /LOAD SC
 5748                     0
 5749                             >
 5750                     >
 5751                     IFZERO MQREG-1 <

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 140


 5752 07273 4546          GETJTW          /RESTORE MQ
 5753 07274 0014           JOBEAE
 5754 07275 7421          MQL
 5755                     >
 5756 07276 1304          TAD RESJO1
 5757 07277 4544          GETJTA          /GET ADDDRESS OF PC IN JOB DATA AREA
 5758 07300 0011           JOBREG
 5759 07301 3304          DCA RESJO1
 5760 07302 4530          BLT             /MOVE PC, AC, & LINK TO LEVEL-2 REGISTERS
 5761 07303 6211           DATFLD
 5762 07304 0000  RESJO1,  0
 5763 07305 6201           CDF
 5764 07306 0042           L2SV0
 5765 07307 7775           -3
 5766 07310 5647          JMP I RESJO0    /ALL RESTORED

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 141


 5767             /ROUTINE TO FIND THE BEST FIELD TO SWAP. THIS ALGORITHM
 5768             /GIVES A SYSTEM PHANTOM PRIORITY OVER NON-RUNNABLE JOBS
 5769             /BUT NOT OVER RUNNABLE JOBS. SINCE INACTIVE JOBS THUS TEND
 5770             /TO BE SWAPPED OUT, MORE CORE IS AVAILABLE FOR ACTIVE JOBS
 5771             /AND LESS SWAPPING NEEDS TO BE DONE.
 5772             
 5773 07311 1352  SCNSWP, TAD SCNSAV
 5774 07312 3751          DCA I SCNPTR    /SET OUR OWN POINTER IN 'CORE'
 5775 07313 1750          TAD I SCNCNT
 5776 07314 3003          DCA WS0         /SET FIELD COUNTER
 5777 07315 4533  SCN1,   CORE            /FIND AN UN-PROTECTED FIELD
 5778 07316 7600           FSWP+LOCK+NOTRUN+FIP+SI
 5779 07317 5332          JMP SCN2        /NONE THERE
 5780 07320 0103          AND C0007
 5781 07321 3061          DCA FORCE       /SAVE THE FIELD NUMBER
 5782 07322 1061          TAD FORCE
 5783 07323 1050          TAD CORTBA
 5784 07324 3005          DCA JOBSWA
 5785 07325 1405          TAD I JOBSWA    /GET THE 'CORTBL' ENTRY
 5786 07326 4557          RUNABL          /IS THE JOB RUNNABLE?
 5787 07327 5344          JMP SCN3        /NO - FORCE IT OUT
 5788 07330 2003          ISZ WS0
 5789 07331 5315          JMP SCN1        /YES - TRY AGAIN
 5790 07332 3061  SCN2,   DCA FORCE       /CLEAR 'FORCE'
 5791 07333 4533          CORE            /CHECK FOR NON-BUSY PHANTOM
 5792 07334 7037           FSWP+LOCK+NOTRUN+37
 5793 07335 7410          SKP
 5794 07336 5753          JMP I SCN12A    /OK - JUST LOAD OVER PHANTOM
 5795 07337 4533          CORE            /NO - LOOK FOR ANY VALID FIELD
 5796 07340 7600           FSWP+LOCK+NOTRUN+FIP+SI
 5797 07341 5561          SCHED           /NOTHING TO SWAP - TRY FOR A RESIDENT JOB
 5798 07342 0103          AND C0007
 5799 07343 3061          DCA FORCE       /FOUND ONE - SAVE THE FIELD NUMBER
 5800 07344 1751  SCN3,   TAD I SCNPTR    /PICK UP AND SAVE THE SEARCH POINTER
 5801 07345 3352          DCA SCNSAV      / SO WE CAN SWAP FAIRLY
 5802 07346 5747          JMP I .+1       /THEN GO SET UP TO SWAP OUT
 5803 07347 3162          SCHFR1
 5804             
 5805 07350 1315  SCNCNT, CORCNT
 5806 07351 1374  SCNPTR, CORTBP  /SEARCH POINTER IN 'CORE'
 5807 07352 7002  SCNSAV, CORTBL+1
 5808 07353 3151  SCN12A, SCHE12

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 142


 5809             /SEARCH FOR TTY; RETURN POINTER TO INPUT DDB
 5810             /CALL   TAD JOB #
 5811             /       TTYUSE
 5812             /       RETURN WITH DDB ADDR IN AC, 0 IF NOT FOUND
 5813             
 5814 07354 0000  TTYSRC, 0
 5815 07355 0107          AND C0037       /GET JOB #
 5816 07356 1370          TAD TTYTBA      /START OF TTY TABLE
 5817 07357 3030          DCA CONDBA
 5818 07360 6211          DATFLD
 5819 07361 1430          TAD I CONDBA    /GET UNIT # FROM TABLE
 5820 07362 7104          CLL RAL         /POSITION IN DEVTBL
 5821 07363 1053          TAD DEVTBA      /POINTER TO DEVTBL
 5822 07364 3030          DCA CONDBA
 5823 07365 1430          TAD I CONDBA    /DDB ADDRESS
 5824 07366 6201          CDF
 5825 07367 5754          JMP I TTYSRC
 5826             
 5827 07370 2747  TTYTBA, TTYTBL
 5828             
 5829             /FIELD 0 DISPATCH FOR  PEEK IOT
 5830             
 5831 07371 6212  UPEEK,  CIF+10          /OFF TO FIELD 1
 5832 07372 5773          JMP I .+1
 5833 07373 2445          UPEEK1

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 143


 5834       7400          *7400
 5835                     IFNZRO DC08A <
 5836             /*JMPDC8        /SKIP OVER DC08A VECTORS
 5837             /*DC8REG        /SKIP OVER ACTIVE REGISTERS
 5838             JMPDC8= JMP I .         /SKIP OVER DC08A VECTORS
 5839                     .+3
 5840             DC8REG= JMP .           /SKIP OVER DC08A ACTIVE REGISTERS
 5841                     IAC
 5842                     ISZ ACFLG       /SWITCH TO OUTPUT SIDE
 5843                     TAD DCCNT
 5844                     TAD ACX10
 5845                     DCA ACX10       /SKIP OVER THE DC08A ENTRIES IN THE TABLE
 5846                     JMP ACINT1      /BACK TO WORK
 5847             DCCNT,  DC08A-1 >
 5848       7410  *7410
 5849             
 5850 07410 3365  RINT,   DCA SRVFLG      /CLEAR LEVEL 2 REQUEST FLAG
 5851 07411 6211          DATFLD
 5852 07412 6011          RSF
 5853 07413 5244          JMP ACINT
 5854 07414 6012          RRB             /GET CHARACTER FROM THE READER
 5855 07415 3411          DCA I ACX11     /PUT IT IN THE RING BUFFER
 5856 07416 6201          CDF
 5857 07417 2070          ISZ HSRCNT      /ENOUGH ??
 5858 07420 5225          JMP RINT1       /N0 - SEE IF THERE'S STILL ROOM IN THE RING BUFFER
 5859 07421 3643  RINT0,  DCA I RTIM
 5860 07422 6211          DATFLD
 5861 07423 1240          TAD RDEV
 5862 07424 5351          JMP ACINT8      /STORE THE ENTRY NUMBER FOR THE READER
 5863 07425 1372  RINT1,  TAD KEYC        /IS THERE ENOUGH ROOM LEFT IN THE RING BUFFER?
 5864 07426 1241          TAD RLIM
 5865 07427 7700          SMA CLA
 5866 07430 5234          JMP RINT2
 5867 07431 6014          RFC             /KEEP THE READER GOING
 5868 07432 7144          CLL CMA RAL     /SET THE TIMER FOR 2 MORE SECONDS
 5869 07433 5221          JMP RINT0
 5870 07434 1242  RINT2,  TAD RL2A
 5871 07435 3413          DCA I L2Q       /SCHEDULE THE READER TO BE RESTARTED AFTER THE BUFFER HAS BEEN EMPTIED
 5872 07436 2365          ISZ SRVFLG      /REMEMBER WE WANT LEVEL 2
 5873 07437 5221          JMP RINT0
 5874             
 5875 07440 0020  RDEV,   NULINE+CONTTY   /RELATIVE ENTRY NUMBER FOR HSR
 5876 07441 7755  RLIM,   -NULINE-CONTTY-CDVIN
 5877 07442 1043  RL2A,   L2PTR1
 5878 07443 2617  RTIM,   TIMPTR
 5879             
 5880             /*OUTIOT        /INCREMENT 'ACFLG' TO SIGNAL OUTPUT
 5881             /*ENDIOT        /JMP TO EXIT HANDLER
 5882       2340  OUTIOT= ISZ ACFLG
 5883       5333  ENDIOT= JMP ACINT6

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 144


 5884 07444 7344  ACINT,  CLL STA RAL     /AC=-2
 5885 07445 3340          DCA ACFLG       /START BY CHECKING FOR INPUT
 5886 07446 1375          TAD ACTBLA      /ADDRESS OF THE SKIP IOT'S
 5887 07447 3010          DCA ACX10
 5888 07450 7126          STL RTL
 5889 07451 1373  ACINT0, TAD HIPRO
 5890 07452 3323          DCA HICNT       /SHORT LOOP COUNT TO PROTECT HI-PRIORITY DEVICES
 5891 07453 6211          DATFLD
 5892 07454 2323  ACINT1, ISZ HICNT
 5893 07455 5264          JMP ACINT2-2
 5894 07456 4774          JMS I HIPRIA    /GO CHECK RK, DT, & CDR
 5895 07457 7450          SNA             /ANYTHING REQUESTED?
 5896 07460 5251          JMP ACINT0      /NO
 5897 07461 3413          DCA I L2Q       /QUEUE THEIR REQUEST FOR THEM
 5898 07462 2365          ISZ SRVFLG      /REMEMBER IT
 5899 07463 5251          JMP ACINT0      /RE-INTIALIZE THE COUNT
 5900 07464 1410          TAD I ACX10
 5901 07465 3266          DCA ACINT2
 5902 07466 0000  ACINT2, .-.             /DEVICE SKIP
 5903 07467 5254          JMP ACINT1      /NOT THIS ONE
 5904 07470 1266          TAD ACINT2
 5905 07471 1101          TAD C0005       /GERNERATE READ OR SEND IOT
 5906 07472 2340          ISZ ACFLG
 5907 07473 5337          JMP ACINT7      /MUST BE A KEYBOARD
 5908 07474 3304          DCA ACINT3      /SAVE THE TLS PLS OR LPC
 5909 07475 1010          TAD ACX10
 5910 07476 1376          TAD ACOUT       /DETERMINE THE LINE NUMBER
 5911 07477 3340          DCA ACFLG       /THIS LINE'S OUTPUT REGISTER
 5912 07500 1740          TAD I ACFLG
 5913 07501 7010          RAR
 5914 07502 7420          SNL
 5915 07503 5320          JMP ACINT5      /NOTHING WAITING TO GO
 5916 07504 0000  ACINT3, .-.
 5917 07505 7321          CLA STL IAC
 5918 07506 7012          RTR
 5919 07507 3740          DCA I ACFLG     /HARDWARE BUSY AND REQUEST FLAGS SET
 5920 07510 3366          DCA TTOFLG      /SCHEDULE LEVEL 2
 5921 07511 1013  ACINT4, TAD L2Q         /POSTION OF FILL POINTER
 5922 07512 1377          TAD L2QBOT      /MINUS L2QTB-1
 5923 07513 7041          CIA
 5924 07514 1365          TAD SRVFLG      /DON'T COUNT THE ONES WE JUST PUT IN
 5925 07515 7650          SNA CLA         /SHOULD WE SCHEDULE LEVEL 2?
 5926 07516 1137          TAD EXITA       /YES
 5927 07517 5534          DISMIS

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 145


 5928 07520 7201  ACINT5, CLA IAC
 5929 07521 1266          TAD ACINT2
 5930 07522 3323          DCA .+1
 5931 07523 0000  HICNT,  .-.             /TCF, PCF OR LCF
 5932 07524 7330          STL CLA RAR     /AC=4000
 5933 07525 0740          AND I ACFLG
 5934 07526 3740          DCA I ACFLG     /NO MORE INTERRUPTS EXPECTED FROM THIS LINE
 5935 07527 1365  ACEXIT, TAD SRVFLG      /ANY REQUESTS?
 5936 07530 7640          SZA CLA
 5937 07531 5311          JMP ACINT4      /YES - MAKE SURE THEY'RE SCHEDULED
 5938 07532 5534          DISMIS          /NOTHING SPECIAL
 5939             
 5940             ACINT6,
 5941                             IFNZRO LPT-3 <
 5942                     LSRP            /LP08/LE8 ERROR?
 5943                     JMP ACEXIT      /NO, MUST BE AN UNDEFINED INTERRUPT
 5944                     LCP     >       /CLEAR INTERRUPT ENABLE
 5945                             IFZERO LPT-3 <
 5946 07533 7000          NOP             /ROOM FOR EXTRANEOUS INTERRUPT CLEARING
 5947 07534 7000          NOP
 5948 07535 7000          NOP     >
 5949 07536 5327          JMP ACEXIT
 5950             
 5951 07537 3340  ACINT7, DCA ACFLG       /SAVE THE KRB IOT
 5952 07540 0000  ACFLG,  .-.
 5953 07541 7450          SNA
 5954 07542 5327          JMP ACEXIT      /THROW AWAY NULL CHARACTERS
 5955 07543 0112          AND C0177
 5956 07544 1002          TAD C0200       /FORCE ON THE "PARITY" BIT
 5957 07545 3411          DCA I ACX11     /STASH IT ON THE RING BUFFER
 5958 07546 1375          TAD ACTBLA
 5959 07547 7040          CMA
 5960 07550 1010          TAD ACX10       /LINE NUMBER CAUSING INTERRUPT
 5961 07551 4353  ACINT8, JMS ACINT9      /STASH LINE NUMBER & UPDATE POINTERS ETC.
 5962 07552 5311          JMP ACINT4      /SCHEDULE LEVEL 2 IF WE WERE IN USER MODE
 5963 07553 0000  ACINT9, 0
 5964 07554 3411          DCA I ACX11     /STASH AWAY THE LINE NUMBER
 5965 07555 2372          ISZ KEYC        /COUNT THE ENTRY
 5966 07556 2370          ISZ ACCNT       /END OF RING BUFFER
 5967 07557 5753          JMP I ACINT9    /NO
 5968 07560 1367          TAD ACRING
 5969 07561 3011          DCA ACX11       /YES - RESET POINTER
 5970 07562 1371          TAD ACSIZE
 5971 07563 3370          DCA ACCNT       /AND THE COUNT
 5972 07564 5753          JMP I ACINT9
 5973             
 5974 07565 0000  SRVFLG, 0
 5975 07566 0001  TTOFLG, 1               /NON-ZERO WHEN SERVICE IS NOT REQUIRED
 5976 07567 0303  ACRING, RINGIN-1
 5977 07570 7742  ACCNT,  -INPUTS
 5978 07571 7742  ACSIZE, -INPUTS
 5979 07572 0000  KEYC,   0
 5980             HIPRO,
 5981             IFNZRO CPU-2 < -4 >
 5982 07573 7772  IFZERO CPU-2 < -6 >
 5983 07574 0251  HIPRIA, DTCHK
 5984 07575 0225  ACTBLA, SKPTBL-1

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 146


 5985 07576 7723  ACOUT,  OUTREG-SKPTBL-NULINE-CONTTY-CDVIN-CDVGAP-1
 5986 07577 0771  L2QBOT, -L2QTB+1
 5987             

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 147


 5988                     PAGE
 5989                     
 5990 07600 0000  SWPIO,  0
 5991 07601 7346          CLA CLL CMA RTL /=3 IN AC
 5992 07602 3345          DCA DSERRI      /#OF TRIES
 5993 07603 1056          TAD FINISH
 5994 07604 7700          SMA CLA         /WHICH WAY DO WE SWAP?
 5995 07605 5210          JMP INSET       /SWAP IN
 5996 07606 4231          JMS SWOUT       /SWAP OUT
 5997 07607 5600          JMP I SWPIO     /RETURN
 5998             
 5999 07610 4212  INSET,  JMS SWPIN       /SWAP IN
 6000 07611 5600          JMP I SWPIO     /RETURN
 6001             
 6002 07612 0000  SWPIN,  0
 6003 07613 6601          DCMA            /TO STOP THE DISC
 6004 07614 1230          TAD SWINA       /RETURN ADDRESS FOR INTURRUPT CHAIN
 6005 07615 3747          DCA I DSWATA    /SAVE IT
 6006 07616 1071          TAD INTRC       /GET THE TRAC # TO BE READ IN
 6007             
 6008                     IFZERO RF08-40 <
 6009                     TAD SQREQ       /FIELD TO BE USED
 6010                     DEAL
 6011                     CLA
 6012                     NOP             /JUST FOR PROPER LENGTH
 6013                     >
 6014                     IFZERO RF08 <
 6015 07617 6643          DXAL
 6016 07620 1066          TAD SQREQ       /FIELD TO BE SWAPPED IN
 6017 07621 1353          TAD C0500       /ENABLE INTERRUPT ON ERROR AND ON COMPLETION
 6018 07622 6615          DIML
 6019                     >
 6020 07623 3350          DCA DSWC        /WORD COUNT
 6021 07624 7040          CMA
 6022 07625 3351          DCA DSMA        /CORE ADDRESS
 6023 07626 6603          DMAR
 6024 07627 5612          JMP I SWPIN
 6025 07630 7674  SWINA,  SWINR           /SWAPIN RETURN ADDRESS
 6026             
 6027 07631 0000  SWOUT,  0
 6028 07632 6601          DCMA            /TO STOP THE DISC IN CASE OF PROBLEM
 6029 07633 1247          TAD SWOUA       /RETURN ADDRESS FOR INTERRUPT CHAIN
 6030 07634 3747          DCA I DSWATA    /SAVE IT
 6031 07635 1073          TAD OUTTRC      /GET THE TRAC # TO BE SWAPPED OUT
 6032                     IFZERO RF08-40 <
 6033                     TAD SQREQ       /FIELD TO BE SWAPPED OUT
 6034                     DEAL
 6035                     CLA
 6036                     NOP
 6037                     >
 6038                     IFZERO RF08 <
 6039 07636 6643          DXAL
 6040 07637 1066          TAD SQREQ       /FIELD TO SWAPPED OUT
 6041 07640 1353          TAD C0500       /INTERRUPT ON ERROR AND ON COMPLETION
 6042 07641 6615          DIML
 6043                     >
 6044 07642 3350          DCA DSWC        /WORD COUNT

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 148


 6045 07643 7040          CMA
 6046 07644 3351          DCA DSMA        /CORE ADDRESS
 6047 07645 6605          DMAW
 6048 07646 5631          JMP I SWOUT
 6049             
 6050             
 6051 07647 7650  SWOUA,  SWOUTR          /RETURN ADDRESS AFTER SWAP OUT
 6052             
 6053 07650 5260  SWOUTR, JMP SOUTR1      /ERROR
 6054 07651 1056          TAD FINISH      /FINISH = -FIELD # AT THIS STAGE MAKE IT +
 6055 07652 7041          CIA
 6056 07653 3056          DCA FINISH      /SAVE IT
 6057 07654 7346          CLA CLL CMA RTL / -3
 6058 07655 3345          DCA DSERRI      /# OF TRIES FOR SWAP IN
 6059 07656 4212  SOUT5,  JMS SWPIN
 6060 07657 5534          DISMIS          /GO BACK TO WHAT WE WERE DOING
 6061 07660 2345  SOUTR1, ISZ DSERRI      /3 TRIES BEFORE GIVING UP
 6062 07661 5272          JMP SOUTR2
 6063             SOUTR4,
 6064                             IFZERO RF08  <
 6065 07662 6616          DIMA            /GET THE ERROR FLAGS
 6066 07663 0100          AND C0004       /IS IT DUE TO EAE?
 6067 07664 7650          SNA CLA
 6068                                     >
 6069 07665 1270          TAD NORMAL      /NO, DISC IN REAL TROUBLE
 6070 07666 1271          TAD SLEP2A      /EAE, PUT TO SLEEP
 6071 07667 5373          JMP NOTOK       /JMP TO COMMON PART  SAVE CORE!!!
 6072             
 6073 07670 3451  NORMAL, -SLEEP2+SWERR
 6074 07671 2356  SLEP2A, SLEEP2
 6075             
 6076 07672 4231  SOUTR2, JMS SWOUT       /TRY AGAIN TO SWAP OUT
 6077 07673 5534          DISMIS
 6078             
 6079 07674 5277  SWINR,  JMP SWIN1       /ERROR
 6080 07675 1074          TAD SWPGD2      /OK WHAT TO DO NEXT? L2Q
 6081 07676 5373          JMP NOTOK       /COMMON CODE
 6082 07677 2345  SWIN1,  ISZ DSERRI      /TRY 3 TIMES ON ERROR
 6083 07700 5256          JMP SOUT5
 6084 07701 5262          JMP SOUTR4      /GIVE UP

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 149


 6085             /START DISC TRANSFER
 6086             /CALL:  TAD ADDRESS OF PARAMETERS
 6087             /       DSGO
 6088             /       RETURN
 6089             
 6090       0012  DSPAR=  12
 6091             
 6092 07702 0000  DSGO0,  0
 6093 07703 3344          DCA DSPARM
 6094 07704 7346          CLA CLL CMA RTL
 6095 07705 3345          DCA DSERRI
 6096 07706 4310          JMS DSTRYA
 6097 07707 5702          JMP I DSGO0
 6098             
 6099 07710 0000  DSTRYA, 0
 6100 07711 6601          DCMA            /CLEAR THE FLAG & STOP THE DISC
 6101 07712 1346          TAD DSRETA
 6102 07713 3747          DCA I DSWATA
 6103 07714 7240          CLA CMA         /ADDRESS OF PARA-1 FOR INDEX REGISTER
 6104 07715 1344          TAD DSPARM
 6105 07716 3012          DCA DSPAR
 6106 07717 6211          DATFLD
 6107 07720 1412          TAD I DSPAR     /FUNCTION
 6108 07721 3340          DCA DSRORW
 6109 07722 1412          TAD I DSPAR     /DISC EXTENSION
 6110             
 6111                     IFZERO RF08-40 <
 6112                     CLL RTL
 6113                     CLL RAL
 6114                     TAD I DSPAR     /MEMORY EXTENSION
 6115                     CLL RAL
 6116                     DEAL
 6117                     CLA
 6118                     >
 6119                     IFZERO RF08 <
 6120 07723 7112          CLL RTR
 6121 07724 6643          DXAL
 6122 07725 1412          TAD I DSPAR
 6123 07726 7104          CLL RAL
 6124 07727 0110          AND C0070
 6125 07730 1353          TAD C0500
 6126 07731 6615          DIML            /LOAD INTERRUPT ENABLE AND MEMORY EXTENSION
 6127                     >
 6128 07732 1412          TAD I DSPAR
 6129 07733 3350          DCA DSWC
 6130 07734 1412          TAD I DSPAR
 6131 07735 3351          DCA DSMA
 6132 07736 1412          TAD I DSPAR
 6133 07737 6201          CDF
 6134 07740 0000  DSRORW, 0
 6135 07741 5710          JMP I DSTRYA
 6136             
 6137 07742 4310  DSERR1, JMS DSTRYA
 6138 07743 5534          DISMIS
 6139             
 6140 07744 0000  DSPARM, 0
 6141 07745 0000  DSERRI, 0

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 150


 6142 07746 7756  DSRETA, DSRET
 6143 07747 0234  DSWATA, DSWAIT
 6144             
 6145                     IFNZRO 7750-.&4000      <GLITCH; *.-1>
 6146       7750          *7750
 6147 07750 7751  DSWC,   7751    /FOR LOADING INTO FIELD 0 ON INITIALIZATION
 6148 07751 7751  DSMA,   7751    /(SINCE THE 4K TRANSFER OVERWRITES THE DATA BREAK LOCATIONS)
 6149             
 6150 07752 2353  SLEEPA, SLEEP1
 6151 07753 0500  C0500,  500
 6152 07754 0000          0               /FOR DECTAPE SERVICE
 6153 07755 0000          0               /FOR DECTAPE SERVICE
 6154             
 6155 07756 5361  DSRET,  JMP .+3         /ERROR
 6156 07757 7001          IAC
 6157 07760 5371          JMP OK          /OK
 6158 07761 2345          ISZ DSERRI
 6159 07762 5342          JMP DSERR1
 6160             
 6161                     IFZERO RF08 <
 6162 07763 6616          DIMA
 6163 07764 0100          AND C0004       /IS DRL FLAG ON?
 6164 07765 7650          SNA CLA
 6165 07766 5371          JMP OK          /NO, NORMAL ERROR RETURN
 6166 07767 1352          TAD SLEEPA      /YES, EAE MAY BE THE REASON PUT IT TO SLEEP
 6167 07770 5373          JMP NOTOK
 6168                     >
 6169 07771 6211  OK,     DATFLD
 6170 07772 1412          TAD I DSPAR
 6171 07773 6201  NOTOK,  CDF
 6172 07774 6601          DCMA
 6173 07775 5534          DISMIS          /RETURN TO MONITOR
 6174             
 6175             /////   $$$$$

      No detected errors

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 151
                                                                    Symbol Table

    1  ACCNT  07570   C0020  00106   CLRINP  0100   CONTLS 06550   DEVTBL  2600 
    2  ACEXIT 07527   C0037  00107   CLST0  01400   CONTTY  0001   DEVWAT 01477 
    3  ACFLG  07540   C0070  00110   CLSTR1 01511   CORCNT 01315   DEVWT0 01440 
    4  ACINT  07444   C0100  00111   CM200  00717   CORE    4533   DFORC   0004 
    5  ACINT0 07451   C0177  00112   CMDUPL 01777   CORMEM  0070   DFULL   0400 
    6  ACINT1 07454   C0200  00002   CNOTR  00047   CORSR1 01333   DGETJX 05601 
    7  ACINT2 07466   C0377  00113   COMBND 04016   CORSR2 01372   DHALF   0010 
    8  ACINT3 07504   C0400  00114   COMCNT 00020   CORSR3 01352   DISMI0 00300 
    9  ACINT4 07511   C0500  07753   COMDSP 00021   CORSR4 01373   DISMI1 00323 
   10  ACINT5 07520   C0600  00115   COMPTR 00022   CORSR5 01342   DISMI2 00325 
   11  ACINT6 07533   C0770  00116   CONAS1 02133   CORSR6 01354   DISMIS  5534 
   12  ACINT7 07537   C0777  00117   CONAS2 02136   CORSRC 01317   DLAG    6743 
   13  ACINT8 07551   C1000  00120   CONASD 02112   CORTBA 00050   DLCA    6744 
   14  ACINT9 07553   C3777  00121   CONCNT 06404   CORTBE 01316   DLDC    6746 
   15  ACOUT  07576   C4000  01153   CONDBA 00030   CORTBL 07001   DMAINT  6747 
   16  ACRING 07567   C4001  01311   CONDDB 00031   CORTBP 01374   DOXSTM 04424 
   17  ACSIZE 07571   C4037  03000   CONDEV 06407   CP0177 00776   DRST    6745 
   18  ACTBLA 07575   C5200  00777   CONDVE 02002   CPASS   0207   DSBUSY 00036 
   19  ACX10  00010   C6000  04453   CONEXT 02020   CPU     0002   DSERR1 07742 
   20  ACX11  00011   C6201  04153   CONGEA 00174   CRF     0210   DSERRI 07745 
   21  ALLOK  07030   C6203  00122   CONGET 06555   CSCF    6133   DSFLAG 05754 
   22  ALLOKC 07043   C7377  00123   CONIN  02011   CTIMER 01531   DSGO    4535 
   23  ALLOKM 07044   C7400  00124   CONIN0 02077   CTRLB   0002   DSGO0  07702 
   24  ALLOKP 07045   C7600  00125   CONIN1 02062   CTRLC   0040   DSHOLD 05750 
   25  ASD     0040   C7640  05667   CONIN2 02102   CTRLS   4000   DSI     1000 
   26  AUTOST  4201   C7740  06622   CONIN3 02012   CUF     6264   DSKACT 04361 
   27  AXS1   00015   C7743  04764   CONIN4 02025   CURJOB 00051   DSKCOD 05603 
   28  AXS2   00016   C7770  00126   CONINA 02064   D680    0000   DSKCON 03561 
   29  B7750  03625   C7776  00127   CONINP 04041   D689    0000   DSKCT  05602 
   30  B7751  03624   CDL11   1720   CONJAM 06533   DATA1   2400   DSKERR  0005 
   31  BASWIN 00067   CDL20  07107   CONJMS 01530   DATE   00035   DSKP    6741 
   32  BCLR    0220   CDL21   1704   CONLP1 06520   DATFLD  6211   DSKPTR 00017 
   33  BILLNG  0007   CDR     0000   CONLP2 06525   DAUTBL 04360   DSKSIZ  0100 
   34  BLT     4530   CDVGAP  0003   CONLP3 06551   DBELL   1000   DSMA   07751 
   35  BLT0   05200   CDVIN   0003   CONLPF 06411   DBINPA  0100   DSPAR   0012 
   36  BLT1   05225   CDVOUT  0004   CONLPR 06412   DC08A   0000   DSPARM 07744 
   37  BLT2   05227   CECI    6131   CONNSF 02003   DC08LO  0000   DSQFLD  0076 
   38  BLTC   05236   CHKSI  04437   CONO1A 00175   DCLR    6742   DSQUE  04000 
   39  BLTF   05233   CINT    6204   CONOU0 06423   DCSIZE  0000   DSQUE1 04016 
   40  BONUS  00045   CJOB    0037   CONOU1 06426   DDBBRK  0002   DSQUE2 04030 
   41  BOOT   03605   CJOBDA  0020   CONOU2 06440   DDBINC  0005   DSRET  07756 
   42  BRDMAX  0012   CLK1   00033   CONOU3 06450   DDBINP  0004   DSRETA 07746 
   43  BREAK   4531   CLK2   00034   CONOU4 06453   DDBJN   0001   DSRORW 07740 
   44  BRKINI  4000   CLKCHK 00240   CONOU5 06475   DDBOUC  0006   DSTRYA 07710 
   45  BRKTBA 07136   CLKCNT 00223   CONOU6 06507   DDBOUP  0007   DSUCOR 05751 
   46  BRKTS1 07122   CLKINI 00224   CONOU7 06542   DDBSTS  0000   DSUET1  0003 
   47  BRKTS2 07133   CLKIT  00237   CONOU8 06504   DDBTIM  0003   DSUEXT 03653 
   48  BRKTST 07112   CLKMIS 00247   CONOU9 06565   DEAD   00052   DSUFEA 05605 
   49  BTFLD  03626   CLKTBA 04436   CONOUA 04042   DEBUG   0000   DSUJST 05752 
   50  C0002  00076   CLKTBL  2722   CONOUT 06413   DECHO   0020   DSUJTE 05753 
   51  C0003  00077   CLKTMR 02644   CONPTC 00571   DEVCHK 07045   DSUMTB 05600 
   52  C0004  00100   CLOCK  00046   CONREG  0002   DEVEXT 07066   DSUPAR 05754 
   53  C0005  00101   CLOCKR  0062   CONSEA 00176   DEVJO0 05564   DSUPDA  0100 
   54  C0006  00102   CLOS    0202   CONSET 00556   DEVJOB 05567   DSURDA  0100 
   55  C0007  00103   CLRBF0 02151   CONSKP 06446   DEVOUT 06406   DSURE1 05720 
   56  C0010  00104   CLRBU1 02177   CONSQ  01157   DEVTBA 00053   DSURE2 05706 
   57  C0014  00105   CLRBUF  4532   CONTIN 03627   DEVTBE  2640   DSURE4 05735 

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 152
                                                                    Symbol Table

   58  DSURER 05671   FILCDF 04540   FINISH 00056   GIRCNT 03322   HUNGDV  0006 
   59  DSURET 05606   FILCPA  0171   FIP     0400   GIRCT0 03200   ICDL2  05340 
   60  DSURPA 05604   FILCPD  0100   FIPBLK  7720   GIRCTE  0106   ICDPTR 05337 
   61  DSURT1  0003   FILCPX 05044   FIPDEX  0004   GIRCTL 06367   ICDTIM 05341 
   62  DSURT2  0004   FILCSW  0005   FIPJOB 00057   GIRDEL  0111   ICLK1  02601 
   63  DSUSER 03507   FILCT1 05117   FIPWC   0000   GIRDLM 03720   ICLK2  02600 
   64  DSUSR1 03514   FILCT2 05003   FIT    00060   GIRDTS 03241   INCLK1  7000 
   65  DSUSR2 03526   FILCT3 05133   FIUSER 00141   GIRECH 03326   INCLK2  0645 
   66  DSUSR3 03530   FILCT4 05172   FORCE  00061   GIREXT 06325   INFLD   0020 
   67  DSUSTB 03533   FILCTB 05045   FRCMAX  0012   GIRFA  06370   INIDEX  0010 
   68  DSUTBA 00054   FILCWA 05043   FRECNT 00040   GIRFB  03242   INKLK1 05527 
   69  DSUTBL  3061   FILCWC  0127   FREE   00037   GIRFC1 03243   INKLK2 05530 
   70  DSWAIT 00234   FILDA   0004   FSWP    4000   GIRFC2 03244   INPUTS  0036 
   71  DSWATA 07747   FILECA  0100   GETB   01400   GIRFFC  0123   INSET  07610 
   72  DSWC   07750   FILECT  0103   GETB1  01435   GIRFLD 00460   INT    00200 
   73  DTALK   0001   FILEIF  0076   GETB2  01436   GIRFUL 06326   INT0   00206 
   74  DTAMIN  0002   FILER1  0171   GETBLK  4542   GIRHD  06371   INT2   00235 
   75  DTCHK  00251   FILER2 04477   GETBT  01477   GIRJBA 03245   INTAC  00203 
   76  DTCK1  00276   FILER3 04530   GETDB0 01440   GIRJBB 03721   INTCDR 05326 
   77  DTDCF0 00537   FILER4 04533   GETDB1 01511   GIRJOB 06372   INTLK  00204 
   78  DTDCON 00554   FILER5 04565   GETDB2 01400   GIRLF  03323   INTRC  00071 
   79  DTDEF0 00535   FILERC 04450   GETDB5 01471   GIRLIM 05342   IOR     4550 
   80  DTDQUE 00555   FILERR 04454   GETDDB  4543   GIRLM1 05371   IOR0   03722 
   81  DTDSF0 00541   FILEWC 04452   GETJ1  07210   GIRLMP  5225   IOR1   03701 
   82  DTDSK  00527   FILHI  06400   GETJ3  07226   GIRLR1 03256   IOR2   03771 
   83  DTDXF0 00547   FILICA 05567   GETJF0 07247   GIRLR2 03260   IOREXT 03744 
   84  DTINT0 00225   FILICN 05474   GETJFX 07234   GIRLR3 03264   IOWAIT 00753 
   85  DTJOB   0027   FILIDA  0100   GETJI0 00355   GIRLR4 03273   IOWAT1 00775 
   86  DTL11   0601   FILISN 05473   GETJM7 07233   GIRLR5 03306   IOWAT2 00774 
   87  DTL20  00551   FILIX  05400   GETJT1 07231   GIRLRA 06373   JCOMBD  1000 
   88  DTL21   1004   FILIX1 05443   GETJT2 07232   GIRLRB 03246   JMSTIM  4603 
   89  DTRKHG 03671   FILIX2 05444   GETJT3 07227   GIRMAX 05332   JOB    00062 
   90  DUPL    0200   FILIX3 05445   GETJTA  4544   GIRMDP  0125   JOBACT  0015 
   91  DXOFF   3000   FILIX4 05447   GETJTB 07200   GIRMSK 03324   JOBDAT 00072 
   92  DXON    2000   FILIX5 05460   GETJTI  4545   GIROFF 05376   JOBDWT  0004 
   93  EAE     0000   FILIX6 05463   GETJTW  4546   GIRRUB 03325   JOBEAE  0014 
   94  EMPTY  00004   FILLC  06402   GETJW0 04030   GIRSB  00523   JOBERR  0006 
   95  ENDBUF  0400   FILLO  06401   GETUS1 02573   GIRSC  00400   JOBF0   0020 
   96  ENDIOT  5333   FILPAR  0003   GETUSP 02536   GIRSC3 00434   JOBF1   0021 
   97  ENTABL  5600   FILPCA  0004   GIR     4547   GIRSC4 00440   JOBF2   0022 
   98  ERPDEX  0000   FILPCT  0007   GIR00  06200   GIRSC5 00454   JOBF3   0023 
   99  ERPWC   0000   FILPDA  0005   GIR1   06233   GIRSC6 00463   JOBLNK  0007 
  100  ERROR   4536   FILPDX  0001   GIR1A  06245   GIRSC8 00500   JOBMAX  0024 
  101  EXIT    5537   FILPFN  0000   GIR2   06251   GIRSCM  0111   JOBREG  0011 
  102  EXITA  00137   FILPIF  0002   GIR3   06254   GIRSCT 00524   JOBRTH  0017 
  103  EXT     0211   FILPRA  0006   GIR4   06267   GIRSCX 00517   JOBRTM  0016 
  104  F1BUF   0177   FILPRO  0002   GIR5   06277   GIRSIC  0111   JOBSCH  0024 
  105  F1DTST  2512   FILPWC  0003   GIR6   06316   GIRSIZ 00525   JOBSRA  0005 
  106  F1ECNT  0176   FILRES  0007   GIR7   06330   GIRSQ  06212   JOBSTB  0002 
  107  F1OFFJ  0036   FILSCT  0001   GIR8   06337   GIRSQA 06374   JOBSTS  0000 
  108  F1RTN  00277   FILSP1 05564   GIR9   06355   GIRST  00526   JOBSWA 00005 
  109  F1TCNT  0175   FILSP2 05565   GIRBKA 05375   GIRTYP 05377   JOBSWR  0010 
  110  FANCOR 00055   FILUSA 04451   GIRBKB 06365   GIRUPA 06304   JOBTBA 00063 
  111  FANFLD  0076   FILWC   0006   GIRBKM  0076   HICNT  07523   JOBTBL  2675 
  112  FETCH   4540   FILWCA  0102   GIRBRK 03711   HIPRIA 07574   JOBTIM 00064 
  113  FIBAS1 05177   FILWPT  0000   GIRCHR  0101   HIPRO  07573   JOBWMK  0003 
  114  FILCDA 05000   FINF    6613   GIRCLR 06366   HSRCNT 00070   JSACC   0200 

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 153
                                                                    Symbol Table

  115  JSBAT   0100   L2TIME 02602   OUTSI2 01302   RDEV   07440   SAVJOB  4560 
  116  JSDEL   0100   L2XCT1  0120   OUTSIZ 01255   RDFJOB  0003   SCDACT 03001 
  117  JSEREN  2000   L2XCT2 04047   OUTTRC 00073   READER  0001   SCFIP   0114 
  118  JSERR   0002   L2XUFN 04050   OVE2   05773   READFI 03652   SCHBSY 03124 
  119  JSF0    2000   LCF     6662   OVERL1 05764   REBOOT  4552   SCHE10 03146 
  120  JSF1    1000   LCP     6667   OVERLA 02364   RED     0212   SCHE11 03113 
  121  JSF2    0400   LIBACT  0002   OVESCH 05776   REDO    5553   SCHE12 03151 
  122  JSF3    0200   LIE     6665   OVRLA1 00572   REDO0  04172   SCHE14 03152 
  123  JSHLT   0200   LIN     0214   P       4000   REL     0042   SCHE15 03125 
  124  JSINER  0010   LLC     6664   PHONES  0000   RELOAD 03600   SCHE16 03137 
  125  JSIOT   0100   LOCK    2000   PLT     0000   REMJOB 03701   SCHE7A 03002 
  126  JSIOTC  0040   LOUT    0215   PRGTBL  2774   REN     0200   SCHED   5561 
  127  JSLPT   0040   LPC     6666   PRINT   4551   RESJO0 07247   SCHED0 03640 
  128  JSPRIV  0400   LPT     0003   PRINT0 01203   RESJO1 07304   SCHED1 03033 
  129  JSPTP   0004   LPTSIZ 01313   PRINT1 01212   RESJOB  4554   SCHED3 03064 
  130  JSPTR   0010   LSF     6661   PRINT2 01227   RESMSK 07246   SCHED6 03055 
  131  JSRSEN  0020   LSP     6665   PRINTX 01225   RESTOR 04100   SCHED7 03057 
  132  JSRUN   4000   LSRP    6663   PROT    0204   RETB   00600   SCHED9 03062 
  133  JSTEL   0020   MCC    06375   PSTRIN 01141   RETB1  00712   SCHEDI 02646 
  134  JSTIME  4000   MCSCQ  01154   PSTWT0 01042   RETBL  00711   SCHEI1 02655 
  135  JSWAIT  0001   MQREG   0001   PT08    0000   RETBLK  4555   SCHEI2 02661 
  136  KEYA   02004   NFSEGS 05533   PTFLAG 04217   RETF   00631   SCHEI3 02665 
  137  KEYB   02005   NOHOLD  0140   PTJOB  04221   RETFIP 00633   SCHEI4 02677 
  138  KEYBA  02100   NORMAL 07670   PTRACA 01146   RF08    0000   SCHEI5 02700 
  139  KEYC   07572   NOTOK  07773   PTRCH  01025   RFILE   6603   SCHEI6 02701 
  140  KEYCNT 02006   NOTRUN  1000   PTRCHK 01137   RINGIN  0304   SCHEI7 02712 
  141  KEYSIZ 02007   NULINE  0017   PTRDEV 01001   RINT   07410   SCHEI8 02715 
  142  KL8     0017   NULJOB 02000   PTRFL  01011   RINT0  07421   SCHERN  7332 
  143  KLOST  02001   NXTCNT 02765   PTRFUL 01144   RINT1  07425   SCHFAN 04445 
  144  L       2000   NXTCO2 02721   PTRIOT 01140   RINT2  07434   SCHFR1 03162 
  145  L2689   4051   NXTCO3 02753   PTRSET 01130   RK05    0001   SCHMAX 03003 
  146  L2CDR  07101   NXTCO4 02761   PTRSI2 01106   RK8E    0000   SCHMUC 02764 
  147  L2EX0  04057   NXTCOP 02766   PTRSIZ 01062   RKDV    6740   SCHNCT 03004 
  148  L2EX1  04070   NXTCOR 02716   PTRSKP 01027   RKJOB   0045   SCHNEW 00065 
  149  L2EX2  04151   NXTDSK 02767   PTRTIM 01142   RKL11   2000   SCHNJA 03637 
  150  L2EX3  04153   NXTEND 02770   PTSTAR 04204   RKL20  03676   SCHNJN  0003 
  151  L2EXIT 04051   NXTFAN 02771   PTSTRP 04256   RKL21   1615   SCHNTR  0120 
  152  L2FIP   4051   NXTFLD 02772   PUNCH   0001   RL2A   07442   SCHNUA 02763 
  153  L2KEY  04043   NXTJ0  05013   QUANT   7772   RLIM   07441   SCHNUL 03630 
  154  L2OUT  01522   NXTJ1  05023   QUANTA 07245   RS08    0001   SCHNXA 03005 
  155  L2PTR  01110   NXTJ2  05036   QUATIM 06133   RSCHEA 00156   SCHREM 04447 
  156  L2PTR1 01043   NXTJBN 05001   QUEUE0 01473   RSCHED  5556   SCHSCN 03174 
  157  L2Q    00013   NXTJCT 05000   RBOOT  03602   RTABLE  6160   SCHSI   0002 
  158  L2QBOT 07577   NXTJOB 05003   RCBITS 05235   RTIM   07443   SCHSWP  7330 
  159  L2QE   00014   NXTMAX 05002   RCDF   04166   RUFF   04167   SCJIOT  0111 
  160  L2QTA  04044   NXTMSK 02773   RCIF   04165   RUNABL  4557   SCLOCK  7332 
  161  L2QTB  07010   NXTNTR  0120   RCNI    6637   RUNTS1 05255   SCN1   07315 
  162  L2SA   00044   OK     07771   RCNO    6635   RUNTS2 05270   SCN12A 07353 
  163  L2SF   00041   OPCHK  00250   RCRA    6632   RUNTS3 05276   SCN2   07332 
  164  L2SFA  04045   OPEN    6601   RCRB    6634   RUNTS4 05277   SCN3   07344 
  165  L2SI    4051   OUTDIF  2200   RCRC    6636   RUNTST 05236   SCNCNT 07350 
  166  L2SV0  00042   OUTFRE 01317   RCRD    6674   SATSIZ  0530   SCNPTR 07351 
  167  L2SVLK 00043   OUTIOT  2340   RCSD    6671   SAVJO0 06050   SCNSAV 07352 
  168  L2TFLG 04046   OUTLIM 01312   RCSE    6672   SAVJO1 06130   SCNSWP 07311 
  169  L2TIM1 02613   OUTOFF 01314   RCSF    6631   SAVJO2 06125   SCSI    0002 
  170  L2TIM3 02631   OUTREG  0200   RCSI    6675   SAVJO3 06077   SCSWAP 03175 
  171  L2TIMA 00236   OUTSI1 01301   RCTF    6677   SAVJO4 06132   SEGLMK 00124 

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 154
                                                                    Symbol Table

  172  SEGSIZ 00114   SWINR  07674   TTYSRC 07354   UHALT  04245   URCR   03757 
  173  SEGSM1 00113   SWOUA  07647   TTYTBA 07370   UHALT1 04257   URK050 01756 
  174  SETFLG 00162   SWOUT  07631   TTYTBB 06011   UHALT2 04256   URRS   01030 
  175  SI      0200   SWOUTR 07650   TTYTBL  2747   UHALTA 02530   URTF   04236 
  176  SIBRKM  0204   SWPER1 06046   TTYUSE  4565   UHBITS 04317   USBC   04324 
  177  SICHAR 00023   SWPGD2 00074   TYPE   01235   UHDOT  04315   USBC1  04345 
  178  SICLR  04400   SWPIN  07612   TYPEA  02010   UJSHLT 04320   USBC2  04356 
  179  SICOM   0100   SWPIO  07600   TYPEB  06376   UJSPTP  0100   USBCSI 04321 
  180  SIDATA 00020   SWPIOA 00075   UACT   03746   UJSTEL 02252   USBDEL  0111 
  181  SIDEX   0000   SWPOUT 06134   UCKS   05534   UKEY   01631   USBFFC  0123 
  182  SIFIL1 04613   SWPRER  0002   UCLS   03534   UKEY0A 01753   USBFLG 04322 
  183  SIFILE 04731   SWPWER  0003   UCLS1  03542   UKEY1  01633   USBTEL 04323 
  184  SIFLG  00024   SWSCON 06026   UCLSCT  0003   UKEY1A 01752   USEA   01555 
  185  SINT    6254   SYSER1 05323   UCLSMK 03560   UKEYBA  0076   USEGS  05531 
  186  SIREG  00025   SYSERR 05301   UCON   05777   UKEYC  01663   USGT   04222 
  187  SIWC    0000   TC01    0001   UCOP0  05564   UKEYFL 01644   USIZE  04412 
  188  SJIOTC 00751   TC7766 06776   UCOP1  05565   UKEYRS 01665   USRA   01547 
  189  SKPTBL  0226   TD8E    0000   UCOP2  05566   UKEYWT 01750   USRA1  01564 
  190  SKPTP   0275   TICMIN  2260   UCOPY2 05553   UKL2SA 01751   USSW   01563 
  191  SLEEP  02357   TICSPS  0024   UCOPYA 05562   UKLOOP 01754   USTM   04415 
  192  SLEEP1 02353   TIM689 02627   UCOPYS 05551   UKRD1  01726   USYN   04407 
  193  SLEEP2 02356   TIMCDR 02621   UDATE  03761   UKREAD 01717   UTABLE  6040 
  194  SLEEPA 07752   TIMCOA 01532   UDF     4171   UKSB   01535   UTEL   02221 
  195  SLEP2A 07671   TIMCON 02615   UDFCDF 03733   UKSB1  01573   UTEL1  02245 
  196  SOUT5  07656   TIMER0  2200   UDFSET 03771   UKSB2  01574   UTEL2  02250 
  197  SOUTR1 07660   TIMERA 02645   UDTRB  01147   UKSBRK  0076   UTELC   0003 
  198  SOUTR2 07672   TIMFIP 02625   UDTRBS 01145   UKT0   02304   UTELFL 02227 
  199  SOUTR4 07662   TIMPTR 02617   UDTXA0 01757   UKT1   02324   UTELS  02254 
  200  SPL     6102   TIMSI  02623   UDUP   01765   UKT12  02347   UTELS1 02266 
  201  SQREQ  00066   TLKMAX  0012   UFERR  04771   UKTSI   0120   UTELS2 02301 
  202  SRVFLG 07565   TOF    06661   UFICTB 04774   UKWAIT 01670   UTELSK 02303 
  203  START   5563   TOF0   06700   UFIGJF 04775   UKWAT1 01674   UTELSW 02304 
  204  STOMIN  0005   TOF1   06722   UFIJSF  0004   UKWAT2 01676   UTOD   05515 
  205  STORE   4564   TOF2   06750   UFILE  04600   UKWAT3 01715   UTSS   03765 
  206  SUF     6274   TOF3   06752   UFILE1 04744   UKXON  01755   UU7600 02526 
  207  SUJ    00634   TOF4   06755   UFILE2 04734   ULPT   02202   UUCDR   1735 
  208  SUJ1   00650   TOF5   06774   UFILE4 04751   ULPT1  02223   UUCDR0 07070 
  209  SUJ3   00724   TOFA1  06620   UFILER 04740   ULPTDV 02212   UUCDR1 07074 
  210  SUJ4   00727   TOFCLR 06777   UFILIX 04772   UNSCDV 01625   UUDF   00172 
  211  SUJCNT 00713   TOFSET 06654   UFILPA 04721   UNSCHK 01626   UUDTRK  1415 
  212  SUJDES 00712   TOFT1  06654   UFILWA 04765   UNSCI1 01601   UUND   01764 
  213  SUJDFS 00711   TRAC   06172   UFILWC 03463   UNSCI2 01600   UUO0   02367 
  214  SUJERR  0076   TRUKBD  0012   UFIPIF  0076   UNSCLR 01627   UUO1   02427 
  215  SUJSRC 00710   TS8DEX  0030   UFIPWC  0076   UNSCNT  0101   UUO2   02445 
  216  SUJT2   0003   TTCHAR 00032   UFIQUE 04776   UNSCO1 02201   UUO3   02463 
  217  SUJUDF 00752   TTIMCD 06653   UFIRET 04773   UNSCO2 02200   UUOA   00205 
  218  SWAP1  06167   TTIME  06620   UFJF0  04766   UNSCWT 01630   UUOCAL  0004 
  219  SWAP3  06162   TTIME1 06634   UFJOBF 04621   UPEEK  07371   UUODTB 03417 
  220  SWAPIN 06145   TTIME2 06605   UFJSPV 04777   UPEEK1  2445   UUOERA 00166 
  221  SWBASE 06176   TTIME3 06606   UFLNKA 04770   UPTIM1  0174   UUOERF  0001 
  222  SWDEX   0005   TTIMEB 01533   UFPAR2  0077   UPTIM2  0173   UUOERR 04404 
  223  SWERER  0076   TTIMER 06424   UFPARA  0003   UPTLPA 02253   UUOEX1 00336 
  224  SWERR  06027   TTOFLA 06410   UFPARM 04767   UPTP   02213   UUOEX2 00334 
  225  SWGOD1 06017   TTOFLB 01234   UGTF   04226   UPTP1  02224   UUOEX3 00350 
  226  SWGOOD 06012   TTOFLC 01534   UH212  04312   UPTR   01000   UUOEXT  5567 
  227  SWIN1  07677   TTOFLG 07566   UH215  04307   URCB   01036   UUOFIP 04751 
  228  SWINA  07630   TTYEVE  0001   UHALSA 04244   URCBI  01143   UUOLNK 02571 

      /TSS-8.25 CONFIGURATION FOR UWM                                   Page 155
                                                                    Symbol Table

  229  UUOPRV  0114 
  230  UUOPTR 02572 
  231  UUOSR  02472 
  232  UUOSR1 02475 
  233  UUOSR2 02521 
  234  UUOSR3 02525 
  235  UUOSR4 02526 
  236  UUOSRH 02536 
  237  UUOSRL 02566 
  238  UUOT1A 02533 
  239  UUOT1E 03340 
  240  UUOT2A 02534 
  241  UUOT2E 03416 
  242  UUOTBA 02531 
  243  UUOTBL 03327 
  244  UUOTLL 02532 
  245  UUOUDF 02535 
  246  UUOWAT 00333 
  247  UURT   05475 
  248  UUSAC1 03762 
  249  UUSE   04410 
  250  UUSRC  02567 
  251  VERNUM  0031 
  252  WAIT    5570 
  253  WFILE   6605 
  254  WINBAS  7730 
  255  WRDSEG  0400 
  256  WS0    00003 
  257  WS1    00004 
  258  WS2    00171 
  259  WSCHED 03006 
  260  XOPEN   6606 
