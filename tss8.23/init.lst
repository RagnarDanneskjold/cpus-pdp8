
      /TSS/8 CONFIGURATION FOR UWM                                        Page 1


    1             /TSS/8 CONFIGURATION FOR UWM
    2             /CONFIGURATION PARAMETERS FOR THE TSS/8 MONITOR
    3             /COPYRIGHT 1971
    4             /DIGITAL EQUIPMENT CORP. -MAYNARD, MASS
    5             /
    6             /TSS/8 PDP-8/E HARDWARE OPTIONS
    7             /THIS SECTION DEFINES THE HARDWARE CONFIGURATION ON
    8             /WHICH THIS TSS/8 MONITOR WILL BE RUN
    9             /FOR EACH STATEMENT THE COMMENT INDICATES THE
   10             /POSSIBLE RESPONSES
   11             
   12       0002  CPU=    2       /0 IF CPU IS PDP-8/I; 1 IF PDP-8
   13                             / 2 IF PDP-8/E; 3 IF PDP-12
   14             
   15       0000  EAE=    0       /20 IF CPU INCLUDES EAE; 0 IF NOT
   16             
   17       0070  CORMEM= 70      /HIGHEST DATA FIELD SELECT; FOR 12K SYS,
   18                             / RESPOND 20; FOR 16K, RESPOND 30; FOR 32K, 70
   19             
   20       0000  D680=   0       /2 IF TTY INTERFACING IS 680 OR DC08;
   21                             / 0 IF TTY INTERFACING IS PT08'S
   22             
   23       0000  D689=   0       /4 IF 680 OR DC08 INCLUDES 689 OR DC08F;
   24                             / 0 IF IT DOESN'T OR TTY INTERFACING IS PT08'S
   25             
   26       0000  RF08=   0       /40 IF SYSTEM DISC IS DF32; 0 IF RF08
   27             
   28       0001  RS08=   1       /# OF DISCS IN SYSTEM, WHETHER RF08 OR DF32
   29             
   30       0000  RK8E=   0       /# OF RK8E DRIVES; ONLY FIRST IS USED FOR SYSTEM
   31                             / THE REMAINDER ARE TREATED AS PERIPHERALS
   32             
   33       0001  READER= 1       /1 IF SYSTEM INCLUDES HIGH-SPEED READER; 0 IF NOT
   34             
   35       0001  PUNCH=  1       /1 IF SYS HAS HSP, 0 IF NOT
   36             
   37       0001  TC01=   1       /1 IF SYS HAS DECTAPES; 0 IF NOT
   38             
   39       0000  TU55=   0       /1 IF SYSTEM INCLUDES MORE THAN TWO DECTAPES
   40                             / 0 IF 0, 1, OR 2 DRIVES
   41             
   42       0000  TD8E=   0       /1 IF TD8E DECTAPES AVAILABLE FOR LOADING & DUMPING
   43                             / 0 IF NOT; NOTE THAT TD8E TAPES CANNOT BE USED UNDER
   44                             / TSS/8, THEY REQUIRE CONTINUOUS CPU ATTENTION
   45             
   46       0000  PLOTTER=0       /NO SYSTEMS CAN HAVE PLOTTER
   47             
   48       0000  LPT=    0       /0 IF NO PRINTER ON SYS; 1 IF LP08; 2 IF LS8E
   49             
   50       0000  CDR=    0       /NO SYS CAN HAVE CARD READER
   51             /
   52             /MONITOR OPTIONS 
   53             /FILL IN THE FOLLOWING LINES TO INDICATE THE 
   54             /MONITOR CAPACITY FOR THIS SYSTEM
   55             
   56                     DECIMAL
   57       0024  JOBMAX= 20      /NUMBER OF SIMULTANEOUS USERS (.LE. 20)

      /TSS/8 CONFIGURATION FOR UWM                                        Page 2


   58             
   59       0017  NULINE= 15      /NUMBER OF TTYS TO BE ATTACHED TO SYS.
   60                             / SIMULTANEOUSLY, NOT COUNTING CONSOLE (.LE. 19)
   61                             / GENERALLY .GE. JOBMAX; IF SYS. USES 680 OR DC08,
   62                             / NULINE MUST BE A MULTIPLE OF 5 (FIVE); IF CPU IS
   63                             / A PDP-12, NULINE MUST BE MULTIPLE OF 8 (EIGHT)
   64             
   65       0011  TRUKBD= 9       /NUMBER OF ACTUAL KEYBOARDS ON SYSTEM (NOT COUNTING
   66                             / CONSOLE TTY). THIS MUST BE .LE. NULINE; NULINE
   67                             / MAY INCLUDE DUMMY TERMINALS, THIS MAY NOT.
   68             
   69       0011  FRCMAX= TRUKBD  /THE HIGHEST KEYBOARD # A '00XX' ACCT # MAY FORCE
   70                             / NOTE THAT A '000X' ACCOUNT MAY FORCE UP TO 'NULINE'
   71             
   72       0011  TLKMAX= TRUKBD  /THE HIGHEST KEYBOARD # WHICH MAY BE 'TALK'ED TO
   73             
   74       0011  BRDMAX= TRUKBD  /THE HIGHEST KEYBOARD WHICH WILL RECEIVE BROADCASTS
   75                     OCTAL
   76             
   77       0002  DTAMIN= 2       /THE FIRST DECTAPE DRIVE WHICH WILL BE ASSIGNED
   78                             / FOR 'ASSIGN D' COMMAND; NORMALLY =0, BUT MAY
   79                             / VARY FOR SLIGHTLY RESTRICTED DRIVE USE.
   80             
   81       0007  BILLNG= 7       /THE ACCOUNT NUMBER OF THE BILLING SYSTEM
   82                             / 0, IF NO BILLING SYSTEM USED
   83             /
   84             /SYSTEM CONSTANTS
   85             
   86       37777777776  QUANT=  -2      /NUMBER OF SYSTEM TICKS PER TIME SLICE  (-)
   87       0005  SWDEX=  5       /DISC TRACK OF FIRST SWAP AREA
   88       0001  TTYEVEN=1       /1 INDICATES PARITY TTY MAY BE USED WITH SYS
   89                             / 0 ALLOWS ONLY DEC MODIFIED TTYS
   90       0020  INFLD=  20      /FIELD SELECT THAT 'INIT' SHOULD BE BOOTED INTO
   91                             / MAKING IT 20 AVOIDS PROBLEMS SHOULD A
   92                             / FIELD NEED REPAIR & SYSTEM IS RUN ON 12K
   93             
   94             ///     END OF SYSTEM CONFIGURATION PARAMETERS

      /TSS/8 CONFIGURATION FOR UWM                                        Page 3


   95                96             /PARAMETERS - UWM VERSION 23
   97             /
   98             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
   99             /                               MAYNARD, MASSACHUSETTS
  100             /
  101             /
  102       0027  VERNUM= 27      /SYSTEM VERSION NUMBER
  103             /
  104       0005  STOMIN= 5       /MINIMUM # FREE STORAGE BLOCKS FOR NEW JOB
  105                     IFZERO RK8E <
  106                     IFZERO RF08-40 <
  107             DSKSIZ= RS08^10
  108                     >
  109                     IFZERO RF08 <
  110       0100  DSKSIZ= RS08^100        /# OF 4K DISC TRACKS
  111                     >
  112                     >
  113                     IFNZRO RK8E <
  114             DSKSIZ= 400     /# OF 4K DISC TRACKS
  115                     >
  116       0062  CLOCKR= 62      /50 MILLISECONDS
  117       2260  TICMIN= 2260    /1200
  118       0645  INCLK2= 0645    /1,728,000 TICKS PER DAY
  119       7000  INCLK1= 7000
  120       0024  TICSPS= 24      /NUMBER OF SYSTEM TICKS PER SECOND
  121       0010  INIDEX= 10      /INIT DISC EXTENSION
  122       0030  TS8DEX= 30      /FIELD 0 DISC EXTENSION*2^3
  123       0000  ERPDEX= 0       /ERP DISC EXTENSION*4
  124       0000  ERPWC=  0       /ERP WORD COUNT
  125       0004  FIPDEX= 4       /FIP DISC EXTENSION*4
  126       0000  FIPWC=  0       /FIP WORD COUNT
  127       0000  SIDEX=  ERPDEX  /SI DISC EXTENSION*4
  128       0000  SIWC=   ERPWC   /SI WORD COUNT
  129       0002  LIBACT= 2       /LIBRARY ACCOUNT #
  130       4000  BRKINI= 4000    /INITIAL USER BREAK MASK
  131       0400  WRDSEG= 400     /#WORDS PER DISC SEGMENT
  132             
  133             /IOT DEFINITIONS
  134             
  135                     IFZERO D680-2 <
  136             TTINCR= 6401    /INCREMENT LINE REGISTER
  137             TTI=    6402    /TELETYPE INPUT COMMAND
  138             TTO=    6404    /TELETYPE OUTPUT COMMAND
  139             TTCL=   6411    /CLEAR LINE REGISTER
  140             TTSL=   6412    /SET LINE REGISTER, CLEAR AC
  141             TTRL=   6414    /READ LINE REGISTER
  142             T8SKP=  6421    /SKIP ON CLOCK FLAG
  143             T8OFF=  6422    /TURN CLOCK OFF
  144             TT8ON=  6424    /TURN CLOCK ON
  145             TTRINC= 6461    /INCREMENT THE R REG.
  146             TT8CLR= 6473    /CLEAR AND LOAD THE R REG.
  147                     >

      /TSS/8 CONFIGURATION FOR UWM                                        Page 4


  148             /EXTENDED MEMORY
  149             
  150       6201  CDF=    6201    /CHANGE TO DATA FIELD 0
  151       6202  CIF=    6202    /CHANGE TO INSTRUCTION FIELD 0
  152       6204  CIOT=   6204    /CLEAR USER IOT
  153             
  154       6214  RDF=    6214    /READ DATA FIELD
  155       6224  RIF=    6224    /READ INSTRUCTION FIELD
  156       6234  RIB=    6234    /READ INTERRUPT BUFFER
  157       6244  RMF=    6244    /RESTORE MEMORY FIELD
  158       6254  SKPIOT= 6254    /SKIP ON USER IOT
  159       6264  UFF=    6264    /USER FLAG OFF
  160       6274  UFN=    6274    /USER FLAG ON
  161             
  162             /EAE
  163                     IFZERO EAE-20 <
  164             MUY=    7405    /MULTIPLY
  165             DVI=    7407    /DIVIDE
  166             NMI=    7411    /NORMALIZE
  167             SHL=    7413    /SHIFT ARITHMETIC LEFT
  168             ASR=    7415    /ARITHMETIC SHIFT RIGHT
  169             LSR=    7417    /LOGICAL SHIFT RIGHT
  170             MQL=    7421    /LOAD MQ
  171             SCL=    7403    /STEP COUNTER LOAD FROM MEMORY
  172             SCA=    7441    /STEP COUNTER TO AC
  173             MQA=    7501    /MQ TO AC
  174             
  175                     IFZERO CPU-2 <
  176             SAM=    7453    /SUBTRACT AC FROM MQ
  177             SKB=    7671    /SKIP IF MODE B (MESSES UP AC AND MQ)
  178             SWBA=   7447    /CHANGE MODE TO A
  179             SWAB=   7431    /CHANGE MODE TO B (ALSO DOES MQL)
  180             ACS=    7403    /AC(7:11) TO SC; AC CLEARED 
  181                     >>
  182       6006  SGT=    6006    /SKIP ON GT FLAG
  183                             /SOMEDAY FIX 'WHERE' COMMAND TO PRINT MODE & GT
  184             
  185             /LINE PRINTER IOTS
  186       6661  LSF=    6661    /SKIP ON CHAR FLAG SET
  187       6662  LCF=    6662    /CLEAR CHAR FLAG
  188       6663  LSRP=   6663    /SKIP ON NOT READY OR ON ERROR
  189       6664  LLC=    6664    /TRANSMIT CHAR TO PRINTER
  190       6665  LSP=    6665    /SET PROGRAM INTERRUPT
  191       6666  LPC=    6666    /TRANSMIT CHAR & CLEAR FLAG
  192       6667  LCP=    6667    /CLEAR PROGRAM INTERRUPT

      /TSS/8 CONFIGURATION FOR UWM                                        Page 5


  193             /CTY
  194             
  195       6044  TPC=    6044    /LOAD TELEPRINTER AND PRINT
  196             
  197             /DISC (DF32)
  198             
  199       6601  DCMA=   6601    /CLEAR
  200       6603  DMAR=   6603    /READ
  201       6605  DMAW=   6605    /WRITE
  202       6611  DCEA=   6611    /CLEAR DISC EXTENDED ADDRESS
  203       6615  DEAL=   6615    /LOAD EXTENDED ADDRESS
  204       6621  DFSE=   6621    /SKIP ON ERROR
  205       6622  DFSC=   6622    /SKIP ON COMPLETION
  206       6616  DEAC=   6616    /READ EXTENDED ADDRESS
  207             
  208             /DISC (RF08)
  209             
  210       6615  DIML=   6615
  211       6616  DIMA=   6616
  212       6643  DXAL=   6643
  213             
  214                     IFNZRO RK8E <
  215             DCLR=   6742    /CLEAR THE CONTROLLER
  216             DLAG=   6743    /LOAD DISC ADDRESS & GO
  217             DLDC=   6746    /LOAD THE COMMAND REGISTER
  218             DRST=   6745    /READ THE STATUS
  219             DSKP=   6741    /SKIP IF DONE OR ERROR
  220             DLCA=   6744    /LOAD CURRENT CORE ADDRESS
  221                     >
  222             
  223             /
  224             /STANDARD DECTAPE CONTROLLER IOTS
  225       6761  DTRA=   6761    /READ A-REGISTER
  226       6762  DTCA=   6762    /CLEAR A-REGISTER
  227       6764  DTXA=   6764    /XOR INTO A-REGISTER
  228       6771  DTSF=   6771    /SKIP ON DECTAPE FLAG
  229       6772  DTRB=   6772    /READ STATUS-REGISTER (B)
  230       6774  DTLB=   6774    /LOAD STATUS-REGISTER (B)
  231             
  232                     IFZERO CPU-3 <
  233             CLAB=   6133
  234             CLLR=   6132
  235             CLEN=   6134
  236             CLSA=   6135
  237             CLSK=   6131
  238             
  239             MTPF=   6113
  240             MINT=   6115
  241             MTON=   6117
  242             MKTF=   6123
  243             MINS=   6125
  244             MTRS=   6127
  245             
  246             MKSF=   6111
  247             MKCC=   6112
  248             MKRS=   6114
  249             MKRB=   6116

      /TSS/8 CONFIGURATION FOR UWM                                        Page 6


  250             
  251             MTSF=   6121
  252             MTCF=   6122
  253             MTPC=   6124
  254             MTLS=   6126
  255                     >
  256             
  257                     IFZERO CPU <
  258             /KW8I           REAL TIME CLOCK
  259             
  260             CECI=   6137    /CLEAR AND ENABLE CLOCK AND INTERRUPT
  261             CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  262                     >
  263             
  264                     IFZERO CPU-1 <
  265             CECI=   6315    /CLOCK ENABLE
  266             CSCF=   6301    /SKIP ON CLOCK FLAG
  267             CCF=    6302    /CLEAR CLOCK FLAG, CLEAR ENABLE AND CLEAR BUFFER
  268             CLB=    6304    /LOAD BUFFER FROM AC
  269                     >
  270             
  271                     IFZERO CPU-2 <
  272       6131  CECI=   6131    /CLOCK ENABLE
  273       6133  CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  274       6007  CAF=    6007    /CLEAR ALL FLAGS
  275                     >
  276             
  277                     IFZERO D689-4 <
  278             /689AG
  279             
  280             SRF=    6701    /SKIP IF RING FLAG
  281             SCF=    6711    /SKIP IF CARRIER FLAG
  282             DFCRF=  6742    /CLEAR RING FLAG
  283             CTG=    6721    /CLEAR GROUP COUNTER
  284             RRS=    6702    /READ RING STATUS
  285             ITG=    6731    /INCREMENT GROUP COUNTER
  286             STR=    6722    /SET TERMINAL READY
  287             EDF=    6704    /ENABLE DATAPHONE FEATURES
  288             DDF=    6714    /DISABLE DATAPHONE FEATURES
  289             CTR=    6724    /CLEAR TERMINAL FLAG
  290             CCF=    6741    /CLEAR CARRIER FLAG
  291             RCS=    6712    /READ CARRIER STATUS
  292                     >

      /TSS/8 CONFIGURATION FOR UWM                                        Page 7


  293             /TSS/8 IOTS
  294       0406  SEGS=   406     /RETURN NUMBER OF FREE SEGMENTS ON DISC
  295       0440  ASD=    440     /ASSIGN DEVICE
  296       0442  REL=    442     /RELEASE DEVICE
  297       0600  REN=    600     /RENAME FILE
  298       6601  OPEN=   6601    /OPEN FILE
  299       0602  CLOS=   602     /CLOSE
  300       6603  RFILE=  6603    /READ FILE
  301       0604  PROT=   604     /PROTECT
  302       6605  WFILE=  6605    /WRITE FILE
  303       6606  XOPEN=  6606    /OPEN FILE WITH EXCLUSIVE USE
  304       0607  CPASS=  607     /CHANGE A USER'S PASSWORD
  305       0610  CRF=    610     /CREATE
  306       0611  EXT=    611     /EXTEND
  307       0612  RED=    612     /REDUCE
  308       6613  FINF=   6613    /FILE INFORMATION
  309       0614  LIN=    614     /LOGIN
  310       0615  LOUT=   615     /LOGOUT
  311       0620  BCLR=   620     /CLEAR MFD BILLING INFORMATION
  312             
  313             /DEVICE DATA BLOCK
  314             
  315       0000  DDBSTS= 0               /WORD 1.  STATUS AND UNIT NUMBER
  316       2000          DXON=   2000    /XOFF SENT FLAG
  317       1000          DSI=    1000    /DESTINATION IS S.I. FLAG
  318       0400          DXOUT=  400     /BIT TO CAUSE 'XOFF' TO GO OUT
  319       0200          DUPL=   200     /CONSOLE IN DUPLEX MODE
  320       0100          SICOM=  100     /COMMAND WAITING
  321       0040          CTRLC=  40      /USER TYPED CTRL/C
  322             
  323                     /DEVICE UNIT NUMBER IS IN BITS 6-11
  324             
  325       0001  DDBJN=  1       /WORD 2. JOB NUMBER IN 7-11
  326       0002  DDBBRK= 2       /BREAK MASK
  327       0204  SIBRKM= 204     /SI BREAK MASK
  328       0003  DDBTIM= 3       /TIME THAT DEVICE WAS ASSIGNED
  329       0004  DDBINP= 4       /BUFFER FILL POINTER
  330       0005  DDBINC= 5       /BUFFER FILL COUNT
  331       0006  DDBOUP= 6       /BUFFER EMPTY POINTER
  332       0007  DDBOUC= 7       /BUFFER EMPTY COUNT

      /TSS/8 CONFIGURATION FOR UWM                                        Page 8


  333             /JOB DATA AREA
  334             
  335       0000  JOBSTS= 0               /STATUS
  336                     /STR0
  337       4000          JSRUN=  4000    /RUN BIT
  338       2000          JSEREN= 2000    /USER ERROR ENABLE
  339       1000          JCOMBD= 1000    /LAST TIME THE JOB RAN AS COMPUTE BOUND
  340       0400          JSHLT=  400     /PROGRAM EXECUTED 'HLT'
  341       0200          JSPRIV= 200     /LIBRARY PROGRAM (HAS PRIVILEGES)
  342       0100          JSIOT=  100     /NON-RESIDENT IOT
  343       0040          JSIOTC= 40      /COPY IOT RESULT TO USER
  344       0020          JSEXON= 20      /EXECUTE ONLY
  345                     /BITS 9-11 ARE SYSTEM ERROR CODE
  346       0001          UUOERF= 1       /IOT ERROR
  347       0002          SWPRER= 2       /SWAP READ ERROR
  348       0003          SWPWER= 3       /SWAP WRITE ERROR
  349       0005          DSKERR= 5       /DISC ERROR
  350       0006          HUNGDV= 6       /HUNG DEVICE
  351             
  352                     /STR1
  353       4000          JSTIME= 4000    /TIME IS UP
  354       2000          JSF0=   2000    /FILE 0 NOT BUSY
  355       1000          JSF1=   1000    /FILE 1 IS NOT BUSY
  356       0400          JSF2=   400     /FILE 2 IS NOT BUSY
  357       0200          JSF3=   200     /FILE 3 IS NOT BUSY
  358       0100          JSDEL=  100     /DELIMITER SEEN
  359       0020          JSTEL=  20      /OUTPUT BUFFER NOT FULL
  360       0010          JSPTR=  10      /CHARACTER IN READER BUFFER
  361       0004          JSPTP=  4       /PUNCH BUFFER IS NOT FULL
  362       0002          JSERR=  2       /SYSTEM ERROR DETECTED
  363       0001          JSWAIT= 1       /JOB NOT IN WAIT STATE
  364             
  365       0001  STR2=   1       /TC01&1!PUNCH&1!PLOTTER&1!LPT&1!CDR&1
  366             
  367       1000          JSPLT=  1000    /PLOTTER DONE
  368       0400          JSCDR=  400     /CHARACTER IN CDR BUFFER
  369       0200          JSCRNR= 200     /CDR NOT READY
  370       0100          JSCREF= 100     /CDR END FILE
  371       0004          JSDTC=  4       /DECTAPE CONTROLLER FLAG
  372       0002          JSDTE=  2       /DT ERROR FLAG
  373       0001          JSDTF=  1       /DT DONE FLAG
  374             
  375       0003  JOBWMK= 2+STR2          /WAIT MASK
  376       0005  JOBSRA= JOBWMK+1+STR2   /JOB RESTART ADDRESS
  377       0006  JOBERR= JOBSRA+1        /JOB ERROR RESTART ADDRESS
  378       0007  JOBLNK= JOBERR+1        /IOT LINKAGE
  379       0010  JOBSWR= JOBLNK+1        /SWITCH REGISTER
  380       0011  JOBREG= JOBSWR+1        /PC, AC, & LINK (W/MODE, GT, & SC)
  381       0014  JOBEAE= JOBREG+3        /MQ REGISTER
  382       0015  JOBACT= JOBEAE+1        /USER'S ACCOUNT #
  383       0016  JOBRTM= JOBACT+1        /LOW ORDER RUN TIME
  384       0017  JOBRTH= JOBRTM+1        /HIGH ORDER RUN TIME
  385       0020  JOBF0=  JOBRTH+1        /POINTER TO FILE 0 CONTROL
  386       0021  JOBF1=  JOBF0+1         /POINTER TO FILE 1 CONTROL
  387       0022  JOBF2=  JOBF1+1         /POINTER TO FILE 2 CONTROL
  388       0023  JOBF3=  JOBF2+1         /POINTER TO FILE 3 CONTROL
  389       0024  JOBSTB= JOBF3+1         /DECTAPE STATUS REGISTER B

      /TSS/8 CONFIGURATION FOR UWM                                        Page 9


  390             
  391             /TUNING PARAMETERS
  392             
  393       0010  MAXBUF= 10      /MAXIMUM PERMITTED # OF OUTPUT BUFFERS
  394       0003  MINBUF= 3       /RESTART JOB WHEN ONLY MINBUF BUFFERS ARE STILL FULL
  395             
  396             /FILE CONTROL BLOCK - POINTED TO BY JOBFX, X=0,1,2,3
  397             
  398       0000  FILWPT= 0       /POINTER TO FILE RETRIEVAL WINDOW
  399       0001  FILSCT= 1       /SEGMENT NUMBER OF FIRST WINDOW ENTRY
  400       0002  FILPRO= 2       /FILE PROTECTION - BIT 9
  401       0003  FILPAR= 3       /POINTER TO RFILE OR WFILE PARAMETER BLOCK
  402       0004  FILDA=  4       /DISC ADDRESS OF RFILE OR WFILE
  403       0006  FILWC=  6       /-WORD COUNT OF RFILE OR WFILE
  404       0007  FILRES= 7       /POINTER TO FILPIF IN USER AREA
  405             
  406             /FILE  RETRIEVAL WINDOW
  407             /WORD 0:        UFD LINK TO NEXT GROUP OF 7 SEGMENT POINTERS
  408             /WORDS 1-7:     SEVEN SEGMENT ADDRESSES
  409             
  410             /RFILE OR WFILE PARAMETER BLOCK - POINTED AT BY FILPAR
  411             
  412       0000  FILPFN= 0       /FUNCTION: 0603 OR 0605
  413       0001  FILPDX= 1       /DISC EXTENSION
  414       0002  FILPIF= 2       /INTERNAL FILE # (BITS 10-11) AND FIELD # (BITS 7-9)
  415       0003  FILPWC= 3       /-WORD COUNT FOR THIS TRANSFER
  416       0004  FILPCA= 4       /CORE ADDRESS FOR THIS TRANSFER
  417       0005  FILPDA= 5       /DISC ADDRESS
  418       0006  FILPRA= 6       /EXEC RETURN ADDRESS FOR THIS TRANSFER
  419       0007  FILPCT= 7       /POINTER TO FILE CONTROL BLOCK
  420             
  421             /CORE TABLE CONTROL FLAGS
  422             
  423       4000  FSWP=   4000    /SWAP REQUEST
  424       2000  LOCK=   2000    /LOCK IN CORE
  425       1000  NOTRUN= 1000    /HAS NOT BEEN SCHEDULED TO RUN
  426       0400  FIP=    400     /FILE PHANTOM (NOTE: FIP HAS BEEN ASSUMED EQUAL TO SEGISZ)
  427       0200  SI=     200     /SYSTEM COMMAND INTERPRETER PHANTOM
  428       0100  FIX=    100     /JUST FINISHED DISC TRANSFER
  429             /BITS 7-11 CONTAIN THE JOB #
  430             
  431             /FIP TABLE DEFINITIONS
  432             
  433       0530  SATSIZ= 530
  434       5600  ENTABL= 5600
  435       6040  UTABLE= ENTABL+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX
  436       6160  RTABLE= UTABLE+JOBMAX+JOBMAX+JOBMAX+JOBMAX

      /TSS/8 CONFIGURATION FOR UWM                                       Page 10


  437       0020  SIDATA=20       /SYSTEM INTERPRETER DATA
  438       0020          *SIDATA
  439             
  440 00020 0020  COMPTR, .       /POINTER TO LAST DEVTBL ENTRY SCANNED. INITIALIZE TO DEVTBL-1
  441 00021 0021  SIBUF,  .       /BUFFER STATE
  442 00022 0022  SICNT,  .
  443 00023 0023  COMDSP, .       /FIP RETURN DISPATCH
  444 00024 0024  SIFLG,  .       /COMMAND FLAGS
  445 00025 0025  SICHAR, .       /SAVE LAST CHAR FROM COMMAND SCAN
  446 00026 0026  SIREG,  .       /USER AC, LINK, PC
  447 00027 0027          .
  448 00030 0030          .
  449 00031 0031  TTCHAR, .       /TTY CHARACTER
  450             
  451       0032  CONSTANTS=SIDATA+12
  452       0032  *CONSTANTS
  453 00032 0002  C0002,  2
  454 00033 0003  C0003,  3
  455 00034 0004  C0004,  4
  456 00035 0007  C0007,  7
  457 00036 0037  C0037,  37
  458 00037 0100  C0100,  100
  459 00040 1000  C1000,  1000
  460 00041 7770  C7770,  7770
  461             
  462       0043  JOBCON=CONSTANTS+11     /JOB CONTROL
  463       0043  *JOBCON
  464             
  465 00043 0043  JOBTIM, .       /-#TICKS REMAINING TO RUN
  466 00044 3256  JOBTBA, JOBTBL  /JOB TABLE ADDRESS
  467             
  468       0046  FRSTOR=JOBCON+3
  469       0046  *FRSTOR
  470             
  471 00046 0046  FREE,   .       /POINTER TO HEAD OF FREE STORAGE
  472 00047 0047  FRECNT, .       /# FREE BLOCKS AVAILABLE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 11


  473       0050  TIMDAT= FRSTOR+2        /CLOCK AND DATE
  474       0050  *TIMDAT
  475             
  476             /CLOCK
  477 00050 0050  CLK2,   .
  478 00051 0051  CLK1,   .
  479             
  480       0052  SCHDAT=TIMDAT+2
  481       0052  *SCHDAT         /SCHEDULING DATA
  482             
  483 00052 0052  COMCNT, .       /NUMBER OF COMMANDS WAITING EXECUTION
  484 00053 0053  SQREQ,  .       /SWAP REQUEST FLAG
  485 00054 0054  FINISH, .       /+(I)-(O) FIELD OF JOB BEING SWAPPED
  486 00055 0055  FIT,    .       /JOB # TO BE SWAPPED IN
  487 00056 0056  FORCE,  .       /FIELD TO BE SWAPPED OUT
  488             
  489       0060  DATEND= 60      /END OF FIELD 0 PAGE 0 DATA
  490             
  491       0156  FIPDAT=156      /DATA REFERENCED BY FIP
  492       0156          *FIPDAT
  493             
  494 00156 0400  C0400,  400
  495                     IFNZRO WRDSEG-400       <GLITCH>
  496       0156  SEGSIZ= C0400   /WRDSEG
  497 00157 0031  FIBASE, SWDEX+JOBMAX    /BASE ADDRESS OF ALLOCATABLE DISC STORAGE
  498 00160 0160  JOB,    .       /# OF CURRENT JOB
  499 00161 0161  JOBDAT, .       /ADDRESS OF CURRENT JOB DATA LIST. MUST RESIDE IN DATA FIELD.
  500 00162 7077  CORTBA, CORTBL-1        /CORE ALLOCATION TABLE
  501 00163 3200  DEVTBA, DEVTBL  /DEVICE TABLE
  502 00164 3451  DSUTBA, DSUTBL  /USER DISC REQUEST QUEUE
  503 00165 0165  DSBUSY, .       /DISC BUSY COUNT
  504             
  505             /THE DATE IS KEPT AS A 12 BIT NUMBER IN THE FORMAT
  506             /DATE=((YEAR-1974)*12+(MONTH-1))*31+DAY-1
  507             
  508 00166 0166  DATE,   .

      /TSS/8 CONFIGURATION FOR UWM                                       Page 12


  509       0167  FISUBR=FIPDAT+11        /INST FIELD INDEPENDENT SUBROUTINES
  510       0167          *FISUBR
  511             
  512       0400  FISUBL=400
  513             
  514       1600  BLT0=   FISUBL+1200
  515 00167 1600  BLTA,   BLT0            /BLOCK TRANSFER
  516       4567  BLT=    JMS I Z BLTA
  517 00170 1302  CORSRA, CORSRC
  518       4570  CORE=   JMS I CORSRA
  519 00171 1400  GETBA,  GETB
  520       4571  GETBLK= JMS I GETBA
  521 00172 1451  GETDBA, GETDB0          /GET A DATA BLOCK
  522       4572  GETDDB= JMS I GETDBA
  523 00173 2200  TOFA,   TOF             /FETCH CHARACTER
  524       4573  FETCH=  JMS I Z TOFA
  525 00174 6600  GETJT0, GETJTB          /GET JOB DATA TABLE ADDRESS
  526       4574  GETJTA= JMS I Z GETJT0
  527 00175 0404  GIRSCA, GIRSC           /STORE CHARACTER IN BUFFER
  528       4575  STORE=  JMS I Z GIRSCA
  529 00176 0600  RETBA,  RETB            /RETURN BLOCK TO FREE STORAGE
  530       4576  RETBLK= JMS I Z RETBA
  531 00177 2455  WAITA,  WSCHED
  532       5577  WAIT=   JMP I WAITA
  533             
  534             /TABLES
  535                     IFNZRO CPU-3 <
  536       7100  DATA=   7100    /START OF FIELD 0 TABLES AND BUFFERS
  537                     >
  538             
  539                     IFZERO CPU-3 <
  540             DATA=   7200    /IF DC02 THERE LEAVE ROOM FOR THE CODE
  541                     >
  542       7100  CORTBL= DATA    /CORE ASSIGNMENT TABLE
  543       7107  L2QTB=  CORTBL+7
  544                     IFZERO D680-2 <
  545             T8OBF=  L2QTB+20        /TTY CHAR OUT BUFFER 1. # LINES
  546             T8OBF2= T8OBF+NULINE    /TTY CHAR OUT BUFFER 2.  # LINES
  547             T8IBF=  T8OBF2+NULINE   /TTY CHAR IN BUFFER. 2*# LINES
  548             T8IN=   T8IBF+NULINE+NULINE     /TTI LIST. 4*#LINES+1
  549             TYBEND= T8IN+NULINE+NULINE+NULINE+NULINE+1
  550                     >
  551                     IFZERO D680 <
  552       7127  TIBUFF= L2QTB+20                /TTY INPUT BUFFER. # LINES
  553       7147  TOBUFF= TIBUFF+NULINE+1 /TTY OUTPUT BUFFER. # LINES
  554       7167  TIDEV=  TOBUFF+NULINE+1 /DEVICE CODES (INPUT)
  555                             IFNZRO CPU-3 <
  556       7207  TODEV=  TIDEV+NULINE+1  /DEVICE CODES (OUTPUT)
  557       7227  TYBEND= TODEV+NULINE+1
  558                             >
  559             
  560                             IFZERO CPU-3 <
  561             TODEV=  TIDEV+1
  562             TYBEND= TODEV+1
  563                             >
  564                     >
  565             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 13


  566             IFZERO TC01     <DTASIZ=0>      /SIZE OF DTA CODE+BUFFERS
  567       1400  IFZERO TC01-1   <DTASIZ=1400>
  568             
  569       0000  IFZERO D689     <D689SIZ=0>     /SIZE OF 689AG CODE
  570             IFZERO D689-4   <D689SIZ=200>
  571             
  572       0200  PTRSIZ= 200
  573       0200  PTPSIZ= 200
  574       0200  PTPBUF= 200                     /START OF DEVICE BUFFERS
  575       0400  PTRBUF= PTPBUF+PTPSIZ
  576       0600  DTBUF1= PTRBUF+PTRSIZ
  577       1001  DTBUF2= DTBUF1+201
  578             
  579       6211  DATFLD=6211                     /MONITOR DATA FIELD SELECT
  580             
  581             IFZERO EAE-20   <MQREG=1>
  582       0001  IFZERO EAE      <IFZERO CPU-2 <MQREG=1>
  583                              IFNZRO CPU-2 <MQREG=0>>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 14


  584             /SUPER CRITICAL LOCATIONS
  585             /THESE LOCATIONS ARE USED TO LINK TS8 AND TS8II
  586             
  587             /IT MAY BE NECESSARY TO ADJUST THEM ACCORDINGLY
  588             
  589             /DEFINED IN TS8:
  590             
  591       1600  BLT0=   1600
  592       1302  CORSRC= 1302    /SEARCH CORE TABLE
  593       0166  DATE=   166
  594       0300  DISMI0= 300     /DISMIS
  595       0273  DTINT=  273     /DECTAPE SLOT IN INTERRUPT CHAIN
  596       2375  IFNZRO CPU-3  <DTL20=   2375>
  597             IFZERO CPU-3   <DTL20=  6575>
  598       1400  GETB=   1400    /GET A BLOCK OF FREE CORE
  599       1451  GETDB0= 1451    /GET A DDB
  600       6600  GETJTB= 6600    /GETJTA
  601       0404  GIRSC=  404     /STORE A CHARACTER
  602       6013  GIR00=  6013    /ENTRY TO GIR (GENERAL INPUT ROUTINE)
  603       5770  INTCOM= 5770    /COMPLETION OF INTERRUPT CODE
  604       0354  L2EXIT= 354     /LEAVE LEVEL 2
  605       0104  L2SV0=  104     /LEVEL 2 SAVED PC
  606       2175  OVERLA= 2175    /FILE STUFF
  607       0576  OVRLA1= 0576
  608       5333  NFSEGS= 5333    /NUMBER OF FREE DISC SEGMENTS
  609       7420  PTPEMP= 7420    /PTP BUFFER EMPTY PTR
  610       7457  PTPFIL= 7457    /PTP BUFFER FILL PTR
  611       0211  IFZERO D680     <PTP1=  211>    /IOTS TO BE OVERLAYED
  612             IFZERO D680-2   <PTP1=  234>
  613       7477  PTP2=   7477
  614       7531  PTP3=   7531
  615       7533  PTP4=   7533
  616       7537  PTP5=   7537
  617       3604  READFI= 3604    /MORE FILE STUFF
  618       3400  RELOAD= 3400    /AUTOMATIC SYSTEM RESTART
  619       0600  RETB=   600     /RETURN A BLOCK TO FREE CORE
  620       0112  SOURCE= 112     /CHARACTER SOURCE FOR GIR
  621       6402  T8K9=   6402
  622       6401  T8LC=   6401
  623       6400  T8MNC=  6400    /DC08 COMMON STORAGE LOCATIONS
  624       0151  UUDF=   151     /USER DATA FIELD SELECT
  625       5172  UUOERR= 5172
  626       0326  UUOEX1= 326     /UUO (RESIDENT IOT HANDLERS) EXIT
  627       2455  WSCHED= 2455    /ADDRESS FOR WAIT
  628             
  629             /DEFINED IN TS8II
  630             
  631       0032  DTBST1= 32      /DT BUFFER 1 STATUS
  632       2000  DTL21=  PTRSIZ+PTPSIZ+DTASIZ    /DT LEVEL 2 DISPATCH
  633       7720  FIPBLK= 7720    /FIXED BLOCK FOR FIP I/O
  634       0151  F1OFFJ= 151     /FOR OFF /ON COMMANDS USED BY SI
  635       1400  UDTXA=  DTL21-400       /DT UUO SERVICE
  636       0174  UPTIM1= 174     /UPTIME COUNTER IN FIELD 1
  637       0173  UPTIM2= 173
  638       7730  WINBAS= 7730    /ADDRESS OF THE BASIC WINDOW
  639             
  640                     IFNZRO CPU-3 <

      /TSS/8 CONFIGURATION FOR UWM                                       Page 15


  641       2001  DTL11=  DTL21+1 /DT LEVEL 1 DISPATCH
  642                     >
  643             
  644                     IFZERO CPU-3 <
  645             DTL11=  DTL21+1+1       /DT LEVEL 1 DISPATCH; TO ALLOW FOR DISPLAY CHARACTERS
  646                     >
  647       2200  TOF=    DTL21+200       /FETCH A CHARACTER
  648       2316  BUFTST= TOF+116
  649       2400  CRASH=  TOF+200
  650       2401  CNTRLC= CRASH+1 /DECTAPE CTRL/C HANDLER
  651       2505  BRKTST= CRASH+105
  652       2600  TIMER0= CRASH+200
  653       2700  UPEEK1= TIMER0+100
  654       2734  DFINT1= UPEEK1+34
  655       3000  SWK1=   UPEEK1+D689SIZ+100
  656       3200  IFNZRO CPU-3    <DATA1= SWK1+200>
  657             
  658                     IFZERO CPU-3 <
  659             PDPBAS= SWK1
  660             DATA1=  PDPBAS+1000
  661             PDPEXT= PDPBAS
  662             PDPIDE= PDPEXT+2
  663             DSCX=   PDPBAS&6000+1
  664                     >
  665       3000  DEVCHK= DATA1-200
  666       3100  KSFPRA= DATA1-100
  667       3200  DEVTBL= DATA1
  668       3240  DEVTBE= DEVTBL+NULINE+NULINE+2
  669       3256  JOBTBL= DEVTBE+16
  670       3303  CLKTBL= JOBTBL+JOBMAX+1
  671       3330  TTYTBL= CLKTBL+JOBMAX+1
  672       3355  PRGTBL= TTYTBL+JOBMAX+1
  673       3451  DSUTBL= PRGTBL+JOBMAX+JOBMAX+JOBMAX
  674             
  675       4201  AUTOST= 4201    /SYSTEM RESTART ADDRESS IN INIT
  676             
  677             ///     END OF PARAMETERS & COMMON DATA

      /TSS/8 CONFIGURATION FOR UWM                                       Page 16


  678               679             /INIT - UWM VERSION 23
  680             /
  681             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
  682             /                               MAYNARD, MASSACHUSETTS
  683             /
  684             /
  685             
  686             FIELD 2                         /INIT LOADS ONTO DISK TRACK 2
  687       0000          *0
  688 20000 5401          JMP I .+1       /JUST IN CASE WE GET HERE
  689 20001 4216          SUPER
  690       0010          *10
  691 20010 0007  T8AX1,  .-1     /680 SERVICE
  692 20011 0010  T8AX2,  .-1     /680 SERVICE
  693 20012 0011  T8AX3,  .-1     /680 SERVICE
  694 20013 0012  L2Q,    .-1     /LEVEL 2 QUEUE
  695 20014 0013  L2QE,   .-1     /LEVEL 2 QUEUE EMPTY POINTER
  696 20015 0015  AXS1,   .
  697 20016 0016  AXS2,   .
  698 20017 0016  DSKPTR, .-1     /DISC REQUEST QUEUE POINTER
  699             
  700             
  701             /SUBROUTINE DISPATCHES
  702             
  703       0060  SUBDSP=DATEND
  704       0060  *SUBDSP
  705             
  706 20060 0000  CHDFA,  0
  707 20061 0000  INIF,   0
  708 20062 5460          JMP I CHDFA
  709             
  710       4060  CHDF=JMS CHDFA
  711             
  712 20063 7754  CJOBMX, -JOBMAX
  713 20064 2555  INBUF,  INBUFA
  714 20065 2211  NUMBIA, NUMBI0
  715 20066 0000  CHAR,   0
  716 20067 0000  NUMHO,  0
  717 20070 0000          0
  718 20071 0000          0
  719 20072 0000  CORCNT, 0
  720 20073 0010  C0010,  10
  721 20074 6203  C6203,  6203
  722             
  723       0103  L2CON=  SUBDSP+23       /LEVEL 2 (EXEC) CONTROL
  724             
  725       0107  TT8PG0= L2CON+4         /680 CONSTANTS
  726             
  727             
  728       0107  *TT8PG0
  729 20107 0107  T8SL,   .
  730 20110 0110  T8NL,   .               /-NUMBER OF LINES
  731 20111 0111  T8LN,   .
  732 20112 0112  SOURCE, .                       /CHAR SOURCE FOR GIR
  733             /NEXT 17 LOC USED BY 680 SERVICE AS DEFINED BELOW
  734 20113 0113  T8INFL, .       /INPUT READY FLAG

      /TSS/8 CONFIGURATION FOR UWM                                       Page 17


  735 20114 0114  T8BFK,  .       /TO RESET INPUT BUFFER POINTER
  736 20115 0017  T8NUML, NULINE  /NUMBER OF LINES
  737 20116 0116  T8K0,   .
  738 20117 0117  T8K7,   .       /K FOR 1ST OUTPUT BUFFER
  739 20120 0120  T8OUTK, .       /POINTER TO FIRST OUTPUT BUFFER
  740 20121 0121  T8OTK2, .       /POINTER TO SECOND OUTPUT BUFFER
  741 20122 0122  T8K14,  .
  742 20123 0123  T8K36,  .       /K FOR 2ND OUTPUT BUFFER
  743 20124 0124  T8CNT1, .       /HOLD MAJOR LOOP COUNTER
  744 20125 0125  T8CNT2, .       /MINOR LOOP COUNTER
  745 20126 0126  T8CNT3, .       /COUNTER FOR INPUT BUFFER
  746 20127 0127  T8K8,   .               /TO ENTER COMMON SUBROUTINE
  747 20130 0130  T8K99,  .
  748 20131 0131  T8SOUT, .
  749 20132 0132  KCHAR,  .               /CTY INPUT CHARACTER
  750 20133 0133  TCHAR,  .       /CTY OUTPUT CHARACTER
  751 20134 7774  C7774,  -4
  752       4535  COMGET= JMS I .
  753 20135 2135          COMGE0
  754       4536  DISC=   JMS I .
  755 20136 1600          DISC0
  756       4537  YESNO=  JMS I .
  757 20137 2120          YESNO0
  758       4540  MESSAG= JMS I .
  759 20140 0600          MESSA0
  760       4541  OCTIN=  JMS I .
  761 20141 2336          OCTIN0
  762       4542  TYPE=   JMS I .
  763 20142 0536  TYPEA,  OUT
  764       4543  GETIN=  JMS I .
  765 20143 1656          GETIN0
  766 20144 0005  SWBASE, SWDEX           /SWAP TRACT FOR JOB 1
  767 20145 7777  C7777,  -1
  768 20146 7401  MC0377, -377
  769 20147 0000  AUTOSW, 0       / =0, FOR MANUAL RESTART
  770 20150 0000  SVCLK1, 0       /SAVED SYSTEM CLOCK
  771 20151 0000  SVCLK2, 0
  772 20152 0000  SVDATE, 0       /SAVED SYSTEM DATE
  773 20153 0000  SVUPT1, 0
  774 20154 0000  SVUPT2, 0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 18


  775       0200          *200
  776             /
  777             /PROGRAM TO OPEN AND MODIFY SINGLE DISC REGISTERS
  778             /
  779 20200 4540  DISCLK, MESSAG          /TYPE A CR-LF
  780 20201 0714           CRLF
  781 20202 4263          JMS OTIN        /GET AN ADDRESS
  782 20203 5200          JMP DISCLK      /: IS ONLY VALID TERMINATOR
  783 20204 5200          JMP DISCLK
  784 20205 4662  DISPLA, JMS I PSPACE
  785 20206 4653          JMS I POPEN     /GET THE WORD FROM DISC
  786 20207 1362          TAD OPNREG
  787 20210 4660          JMS I PHACK     / & TYPE IT OUT
  788 20211 4662          JMS I PSPACE
  789 20212 4656          JMS I PSAVE     /THEN SAVE IT FOR A MOMENT
  790 20213 4263          JMS OTIN        /GET NEW VALUE, IF ANY
  791 20214 5217          JMP SHUT        /<CR> - CLOSE REGISTER
  792 20215 5226          JMP CLSOPN      /<LF> - CLOSE & OPEN NEXT REGISTER
  793 20216 5205          JMP DISPLA      /: - TREAT AS NEW DISC ADDRESS
  794             
  795 20217 1365  SHUT,   TAD INPUT       /WAS REGISTER ALTERED?
  796 20220 7710          SPA CLA
  797 20221 5200          JMP DISCLK      /NO - JUST GET NEXT ADDRESS
  798 20222 1361          TAD VALUE1      /YES - CHANGE THE DISC LOCATION
  799 20223 3362          DCA OPNREG
  800 20224 4654          JMS I PCLOSE
  801 20225 5200          JMP DISCLK      /NOW GET NEXT ADDRESS
  802 20226 1365  CLSOPN, TAD INPUT       /WAS REGISTER ALTERED?
  803 20227 7710          SPA CLA
  804 20230 5234          JMP .+4         /NO - JUST OPEN THE NEXT
  805 20231 1361          TAD VALUE1      /YES - WRITE OUT THE NEW VALUE
  806 20232 3362          DCA OPNREG
  807 20233 4654          JMS I PCLOSE
  808 20234 1252          TAD KCR         /NOW TYPE <CR>
  809 20235 4542          TYPE
  810 20236 1252          TAD KCR
  811 20237 4542          TYPE
  812 20240 4657          JMS I PRESTO    /GET THE CURRENT REGISTER ADDRESS
  813 20241 4655          JMS I PNXTAD    / AND INCREMENT IT BY 1
  814 20242 1360          TAD VALUE       /THEN TYPE IT OUT
  815 20243 4660          JMS I PHACK
  816 20244 1361          TAD VALUE1
  817 20245 4660          JMS I PHACK
  818 20246 1251          TAD KCOLON
  819 20247 4542          TYPE
  820 20250 5205          JMP DISPLA      /THEN LOOK FOR ANY CHANGE
  821             
  822 20251 0272  KCOLON, ":
  823 20252 0215  KCR,    215
  824 20253 0400  POPEN,  XOPN
  825 20254 0411  PCLOSE, CLOSE
  826 20255 0553  PNXTAD, NEXTAD
  827 20256 0561  PSAVE,  SAVE
  828 20257 0567  PRESTO, RESTOR
  829 20260 0457  PHACK,  HACK
  830 20261 0504  PIN,    IN
  831 20262 0544  PSPACE, SPACE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 19


  832             /ROUTINE TO INPUT AN OCTAL NUMBER
  833             /ECHOES INPUT IF IT WAS VALID
  834             /CALL:  JMS OTIN
  835             /        CR TERMINATOR
  836             /        LF TERMINATOR
  837             /        : TERMINATOR
  838             /
  839             /RETURNS WITH "DOUBLE PRECISION" INPUT IN
  840             /VALUE AND VALUE1
  841             /INPUT=0 IF THERE WAS ANY, ELSE -1
  842             
  843 20263 0000  OTIN,   0
  844 20264 7240          CLA CMA
  845 20265 3365          DCA INPUT       /NO INPUT YET
  846 20266 3360          DCA VALUE       /CLEAR THE NUMBER
  847 20267 3361          DCA VALUE1
  848 20270 7410          SKP
  849 20271 4542          TYPE
  850 20272 4661  LISTEN, JMS I PIN
  851 20273 3363          DCA YCHAR
  852             /
  853             /NOW CHECK TO SEE IF THE INPUT HAD A VALID TERMINATOR
  854 20274 1363          TAD YCHAR
  855 20275 1366          TAD KMCOLON
  856 20276 7650          SNA CLA         /COLON?
  857 20277 5353          JMP COEXIT      /YES
  858 20300 1363          TAD YCHAR
  859 20301 1370          TAD KMLF
  860 20302 7650          SNA CLA         /LINE-FEED?
  861 20303 5354          JMP LFEXIT      /YES
  862 20304 1363          TAD YCHAR
  863 20305 1371          TAD KMCR
  864 20306 7650          SNA CLA         /CARRIAGE RETURN?
  865 20307 5355          JMP CREXIT      /YES
  866 20310 1363          TAD YCHAR
  867 20311 1367          TAD KMCX
  868 20312 7650          SNA CLA         /CTRL/X?
  869 20313 5774          JMP I XDDTA     /YES - ZING OFF TO XDDT
  870             /
  871             /NOT A VALID TERMINATOR - IS IT A VALID OCTAL DIGIT?
  872 20314 1363          TAD YCHAR
  873 20315 1372          TAD KMZERO
  874 20316 7710          SPA CLA         /LEGAL OCTAL DIGIT?
  875 20317 5272          JMP LISTEN      /NO - IGNORE IT
  876 20320 1363          TAD YCHAR
  877 20321 1373          TAD KMEIGHT
  878 20322 7700          SMA CLA
  879 20323 5272          JMP LISTEN
  880             /
  881             /COMES HERE WITH A VALID OCTAL DIGIT
  882 20324 3365          DCA INPUT       /INDICATE 'INPUT FOUND'
  883             /
  884             /NOW ADD THIS DIGIT TO THE DOUBLE PRECISION TOTAL
  885 20325 1363          TAD YCHAR
  886 20326 0035          AND C0007       /CONVERT THE DIGIT TO OCTAL
  887 20327 3364          DCA XCHAR
  888             /

      /TSS/8 CONFIGURATION FOR UWM                                       Page 20


  889             /FIRST, SHIFT HIGH-ORDER WORD LEFT ONE PLACE
  890 20330 1360          TAD VALUE
  891 20331 7104          CLL RAL
  892 20332 7104          CLL RAL
  893 20333 7104          CLL RAL
  894 20334 3360          DCA VALUE
  895             /
  896             /NOW GET LEFT-MOST LO-ORDER DIGIT
  897 20335 1361          TAD VALUE1
  898 20336 7006          RTL
  899 20337 7006          RTL
  900 20340 0035          AND C0007
  901             /
  902             /MOVE THIS DIGIT INTO THE HIGH ORDER WORD
  903 20341 1360          TAD VALUE
  904 20342 3360          DCA VALUE
  905             /
  906             /NOW ADD NEW INPUT DIGIT
  907 20343 1361          TAD VALUE1
  908 20344 7104          CLL RAL
  909 20345 7104          CLL RAL
  910 20346 7104          CLL RAL
  911 20347 1364          TAD XCHAR
  912 20350 3361          DCA VALUE1
  913 20351 1363          TAD YCHAR
  914 20352 5271          JMP LISTEN-1    /NOW GO ECHO INPUT
  915             
  916 20353 2263  COEXIT, ISZ OTIN
  917 20354 2263  LFEXIT, ISZ OTIN
  918 20355 1363  CREXIT, TAD YCHAR
  919 20356 4542          TYPE            /ECHO TERMINATOR
  920 20357 5663          JMP I OTIN
  921 20360 0000  VALUE,  0
  922 20361 0000  VALUE1, 0
  923 20362 0000  OPNREG, 0
  924 20363 0000  YCHAR,  0
  925 20364 0000  XCHAR,  0
  926 20365 7777  INPUT,  -1      /=-1, IF NO INPUT; =0, IF INPUT
  927 20366 7506  KMCOLO, -":
  928 20367 7550  KMCX,   -230    /CTRL/X
  929 20370 7566  KMLF,   -212
  930 20371 7563  KMCR,   -215
  931 20372 7520  KMZERO, -"0
  932 20373 7510  KMEIGH, -"8
  933 20374 7000  XDDTA,  7000    /XDDT ADDRESS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 21


  934                     PAGE
  935             /ROUTINE TO OPEN A DISC LOCATION (REGISTER)
  936 20400 0000  XOPN,   0
  937 20401 1655          TAD I PVALUE    /SET THE DISC ADDRESS
  938                     IFZERO RF08-40 <
  939                     AND K177
  940                     CLL RTL; RTL; RTL
  941                     >
  942 20402 3253          DCA DISCHI
  943 20403 1656          TAD I PVALU1
  944 20404 3252          DCA DISCLO
  945 20405 1210          TAD RDIOT       /SET FOR READ
  946 20406 4216          JMS DISK
  947 20407 5600          JMP I XOPN
  948 20410 6603  RDIOT,  DMAR
  949             
  950             /ROUTINE TO CLOSE A DISC REGISTER
  951 20411 0000  CLOSE,  0
  952 20412 1215          TAD WRIOT       /SET FOR WRITE
  953 20413 4216          JMS DISK
  954 20414 5611          JMP I CLOSE
  955 20415 6605  WRIOT,  DMAW
  956             
  957             /DISC TRANSFER ROUTINE
  958 20416 0000  DISK,   0
  959 20417 3237          DCA DLKIOT      /READ OR WRITE IOT
  960 20420 6224          RIF
  961 20421 1223          TAD K6201
  962 20422 3061          DCA INIF        /SET UP 'CHDF' ROUTINE
  963                     IFZERO RK8E <
  964 20423 6201  K6201,  CDF             /DOWN TO FIELD 0
  965 20424 7240          CLA CMA         /MOVING JUST ONE WORD
  966 20425 3647          DCA I P7750
  967 20426 1251          TAD PREGAD
  968 20427 3650          DCA I P7751
  969 20430 4060          CHDF
  970 20431 6224          RIF
  971                     IFZERO RF08-40 <
  972                     TAD DISCHI      /GET THE DISC EXTENSION
  973                     >
  974 20432 6615          DIML            /SET FIELD (& EXTENSION)
  975                     IFZERO RF08 <
  976 20433 1253          TAD DISCHI      /GET HIGH-ORDER ADDRESS
  977 20434 6643          DXAL
  978                     >
  979 20435 7200          CLA             /DEAL DOESN'T CLEAR AC
  980 20436 1252          TAD DISCLO      /GET LO-ORDER ADDRESS
  981 20437 0000  DLKIOT, 0               /DMAR OR DMAW
  982 20440 6621          DFSE            /ANY ERRORS?
  983                     IFZERO RF08 <
  984 20441 7610          SKP CLA         /NO
  985 20442 7402          HLT             /YES - JUST DIE
  986 20443 6622          DFSC            /I/O FINISHED?
  987 20444 5240          JMP .-4         /NO - JUST WAIT
  988                     >
  989                     IFZERO RF08-40 <
  990                     HLT             /YES - JUST DIE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 22


  991                     DFSC            /FINISHED?
  992                     JMP .-3         /NO - JUST WAIT
  993                     >
  994 20445 6601          DCMA            /CLEAR THE DISC FLAG
  995 20446 5616          JMP I DISK      / AND RETURN
  996             
  997 20447 7750  P7750,  7750
  998 20450 7751  P7751,  7751
  999 20451 0361  PREGAD, OPNREG-1        /REGISTER VALUE
 1000                     >
 1001                     IFNZRO RK8E <
 1002                     TAD DISCLO      /SET THE DATA POINTER
 1003                     DCA DISK3
 1004                     TAD DLKIOT      /GET THE IOT
 1005                     RTR
 1006                     SZL CLA         /IS THIS A WRITE?
 1007                     JMP .+5         /NO
 1008                     TAD I PREGAD    / & SET THE NEW VALUE
 1009             K6201,  CDF
 1010                     DCA I DISK3
 1011                     CHDF
 1012                     TAD DISCHI      /SET THE DISC EXTENSION
 1013                     CLL RTL; RAL
 1014                     DCA DISKAD
 1015                     DISC            /DO THE I/O
 1016             DLKIOT,  0      /FUNCTION
 1017             DISKAD,  0      /DISC EXT. & FIELD
 1018                     HLT             /ERROR - JUST DIE
 1019                     CDF             /CHANGE TO THE DATA FIELD
 1020                     TAD I DISK3     / & GET THE REGISTER CONTENTS
 1021                     CHDF
 1022                     DCA I PREGAD    / & SAVE THE VALUE
 1023                     JMP I DISK      /THEN RETURN
 1024             DISK3,  0
 1025             PREGAD, OPNREG          /REGISTER VALUE
 1026                     >
 1027             
 1028 20452 0000  DISCLO, 0
 1029 20453 0000  DISCHI, 0
 1030 20454 0177  K177,   177
 1031 20455 0360  PVALUE, VALUE
 1032 20456 0361  PVALU1, VALUE1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 23


 1033             /ROUTINE TO TYPE THE 4 OCTAL DIGITS IN THE ACC
 1034             /ON THE TELEPRINTER
 1035             
 1036 20457 0000  HACK,   0
 1037 20460 7106          CLL RTL
 1038 20461 7006          RTL
 1039 20462 3301          DCA XHACK
 1040 20463 1302          TAD KM4
 1041 20464 3300          DCA XCNT        /SET DIGIT COUNTER
 1042 20465 1301  YHACK,  TAD XHACK
 1043 20466 0035          AND C0007
 1044 20467 1303          TAD K260
 1045 20470 4542          TYPE
 1046 20471 1301          TAD XHACK
 1047 20472 7004          RAL
 1048 20473 7006          RTL
 1049 20474 3301          DCA XHACK
 1050 20475 2300          ISZ XCNT
 1051 20476 5265          JMP YHACK
 1052 20477 5657          JMP I HACK
 1053 20500 0000  XCNT,   0
 1054 20501 0000  XHACK,  0
 1055 20502 7774  KM4,    -4
 1056 20503 0260  K260,   260
 1057             
 1058             /ROUTINE TO GET A CHAR FROM THE KEYBOARD
 1059 20504 0000  IN,     0
 1060 20505 7200          CLA
 1061 20506 6031          KSF
 1062 20507 5306          JMP .-1
 1063 20510 6036          KRB
 1064 20511 0254          AND K177        /ZAP THE PARITY BIT
 1065 20512 7450          SNA
 1066 20513 5305          JMP IN+1        /IGNORE NULLS
 1067 20514 1332          TAD K200
 1068 20515 3336          DCA OUT
 1069 20516 1336          TAD OUT
 1070 20517 1334          TAD MLCA
 1071 20520 7510          SPA             /IS IT LOWER-CASE?
 1072 20521 5327          JMP IN1         /NO
 1073 20522 1335          TAD MLCZ
 1074 20523 7540          SMA SZA
 1075 20524 5327          JMP IN1         /NO
 1076 20525 1333          TAD LCFIX       /YES - CONVERT IT TO UPPER
 1077 20526 3336          DCA OUT
 1078 20527 7300  IN1,    CLA CLL
 1079 20530 1336          TAD OUT
 1080 20531 5704          JMP I IN        /RETURN W/ AC = CHAR
 1081 20532 0200  K200,   200
 1082 20533 0332  LCFIX,  372-40
 1083 20534 7437  MLCA,   -341    /LOWER-CASE "A"
 1084 20535 7747  MLCZ,   341-372 / AND "Z"
 1085             
 1086             /ROUTINE TO TELEPRINT A CHAR
 1087             
 1088 20536 0000  OUT,    0
 1089 20537 6046          TLS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 24


 1090 20540 7200          CLA
 1091 20541 6041          TSF
 1092 20542 5341          JMP .-1
 1093 20543 5736          JMP I OUT
 1094             
 1095             /TYPE TWO SPACES
 1096             
 1097 20544 0000  SPACE,  0
 1098 20545 1352          TAD KSPACE
 1099 20546 4542          TYPE
 1100 20547 1352          TAD KSPACE
 1101 20550 4542          TYPE
 1102 20551 5744          JMP I SPACE
 1103 20552 0240  KSPACE, 240
 1104             
 1105             /ROUTINE TO INCREMENT THE DOUBLE-PRECISON VALUE
 1106             /IN VALUE, VALUE1
 1107             
 1108 20553 0000  NEXTAD, 0
 1109 20554 7200          CLA
 1110 20555 2656          ISZ I PVALU1
 1111 20556 5753          JMP I NEXTAD
 1112 20557 2655          ISZ I PVALUE
 1113 20560 5753          JMP I NEXTAD
 1114             
 1115             /ROUTINE TO SAVE VALUE, VALUE1
 1116 20561 0000  SAVE,   0
 1117 20562 1655          TAD I PVALUE
 1118 20563 3375          DCA SAVE1
 1119 20564 1656          TAD I PVALU1
 1120 20565 3376          DCA SAVE2
 1121 20566 5761          JMP I SAVE
 1122             
 1123             /ROUTINE TO RESTORE VALUE, VALUE1
 1124 20567 0000  RESTOR, 0
 1125 20570 1375          TAD SAVE1
 1126 20571 3655          DCA I PVALUE
 1127 20572 1376          TAD SAVE2
 1128 20573 3656          DCA I PVALU1
 1129 20574 5767          JMP I RESTOR
 1130 20575 0000  SAVE1,  0
 1131 20576 0000  SAVE2,  0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 25


 1132                     PAGE
 1133             /ROUTINE TO TYPE PACKED MESSAGES.
 1134             /THE CHARACTER '_' CAUSES CR-LF TO BE TYPED.
 1135             /CALLING SEQUENCE:
 1136             /       MESSAG
 1137             /        ADDRESS OF PACKED-MESSAGE
 1138             /       RETURN
 1139             
 1140 20600 0000  MESSA0, 0
 1141 20601 1600          TAD I MESSA0    /GET THE MESSAGE ADDRESS
 1142 20602 3235          DCA MSGPTR
 1143 20603 2200          ISZ MESSA0
 1144 20604 1635  MSGLP,  TAD I MSGPTR
 1145 20605 7112          CLL RTR; RTR; RTR
      20606 7012
      20607 7012
 1146 20610 4215          JMS MSGPRT      /TYPE LEFT CHARACTER
 1147 20611 1635          TAD I MSGPTR
 1148 20612 4215          JMS MSGPRT      / AND THEN THE RIGHT-HAND
 1149 20613 2235          ISZ MSGPTR
 1150 20614 5204          JMP MSGLP
 1151             
 1152 20615 0000  MSGPRT, 0
 1153 20616 0236          AND MSG77       /ZAP ANY BAD BITS
 1154 20617 7450          SNA             /ARE WE DONE?
 1155 20620 5600          JMP I MESSA0    /YES - RETURN
 1156 20621 1243          TAD MSGM37
 1157 20622 7450          SNA             /IS IT '_'?
 1158 20623 5231          JMP MSGCR       /YES - TYPE <CR-LF>
 1159 20624 7510          SPA             /IS IT ALPHABETIC?
 1160 20625 1237          TAD MSG100      /YES - ADD IN BIT
 1161 20626 1242          TAD MSG237      / & ADD BACK 37 & PARITY
 1162 20627 4542  MSGPR1, TYPE            /TYPE THE CHARACTER
 1163 20630 5615          JMP I MSGPRT
 1164             
 1165 20631 1241  MSGCR,  TAD MSG215      /'_' MEANS <CR-LF>
 1166 20632 4542          TYPE
 1167 20633 1240          TAD MSG212
 1168 20634 5227          JMP MSGPR1      /GO SHARE SOME CODE
 1169             
 1170 20635 0000  MSGPTR, 0
 1171 20636 0077  MSG77,  77
 1172 20637 0100  MSG100, 100
 1173 20640 0212  MSG212, 212
 1174 20641 0215  MSG215, 215
 1175 20642 0237  MSG237, 237
 1176 20643 7741  MSGM37, -37
 1177             
 1178 20644 3737  AUTOMS, TEXT /__SYSTEM CRASH: /
      20645 2331
      20646 2324
      20647 0515
      20650 4003
      20651 2201
      20652 2310
      20653 7240
      20654 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 26


 1179 20655 4340  CORMES, TEXT /# USER FIELDS - /
      20656 2523
      20657 0522
      20660 4006
      20661 1105
      20662 1404
      20663 2340
      20664 5540
      20665 0000
 1180 20666 3722  RDORWT, TEXT /_READ OR WRITE/
      20667 0501
      20670 0440
      20671 1722
      20672 4027
      20673 2211
      20674 2405
      20675 0000
 1181 20676 0611  FIELD1, TEXT /FIELD # - /
      20677 0514
      20700 0440
      20701 4340
      20702 5540
      20703 0000
 1182 20704 2422  TRACK,  TEXT /TRACK # - /
      20705 0103
      20706 1340
      20707 4340
      20710 5540
      20711 0000
 1183 20712 1717  OOPS,   TEXT /OOPS_/
      20713 2023
      20714 3700
 1184       20714  CRLF=   .-1
 1185 20715 2205  FIPREM, TEXT /REFRESH??/
      20716 0622
      20717 0523
      20720 1077
      20721 7700
 1186 20722 1517  DATMES, TEXT /MONTH-DAY-YEAR: /
      20723 1624
      20724 1055
      20725 0401
      20726 3155
      20727 3105
      20730 0122
      20731 7240
      20732 0000
 1187 20733 1022  TIMESS, TEXT /HR:MIN - /
      20734 7215
      20735 1116
      20736 4055
      20737 4000
 1188       20736  DASH=   .-2
 1189 20740 1417  DDTMES, TEXT /LOAD XDDT? /
      20741 0104
      20742 4030
      20743 0404

      /TSS/8 CONFIGURATION FOR UWM                                       Page 27


      20744 2477
      20745 4000
 1190 20746 3714  LDXRS,  TEXT /_LOAD, DUMP, START?? /
      20747 1701
      20750 0454
      20751 4004
      20752 2515
      20753 2054
      20754 4023
      20755 2401
      20756 2224
      20757 7777
      20760 4000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 28


 1191                     PAGE
 1192             
 1193             /SYSTEM INITIALIZATION
 1194             
 1195 21000 7300  SYSINI, CLA CLL
 1196 21001 4060          CHDF            /SET THIS FIELD
 1197 21002 4616          JMS I SYSPER
 1198 21003 4536          DISC            /LOAD FIELD 0
 1199 21004 6603           DMAR
 1200 21005 0030           TS8DEX
 1201 21006 5203          JMP .-3         /ERROR - TRY AGAIN
 1202 21007 1220          TAD DVTB
 1203 21010 3217          DCA INIT0
 1204 21011 1617  SYSI1,  TAD I INIT0
 1205 21012 3060          DCA CHDFA
 1206 21013 4460          JMS I CHDFA
 1207 21014 2217          ISZ INIT0
 1208 21015 5211          JMP SYSI1
 1209             
 1210 21016 4010  SYSPER, PERSET
 1211 21017 0000  INIT0,  0               /VARIABLE DVTB POINTER
 1212             
 1213 21020 1021  DVTB,   .+1
 1214 21021 3056          CLEAR           /READ MONITOR II INTO DATFLD
 1215 21022 1403          DEVINI
 1216 21023 1454          CORINI
 1217 21024 1201          T8INI
 1218 21025 1110          SINIT
 1219 21026 1127          SCHINI
 1220 21027 2454          DSKINI
 1221 21030 1033          CLKINI
 1222 21031 4306          RDYMSG
 1223 21032 1070          START

      /TSS/8 CONFIGURATION FOR UWM                                       Page 29


 1224 21033 0000  CLKINI, 0
 1225 21034 1063          TAD CJOBMX      /CLEAR CLKTBL
 1226 21035 3015          DCA AXS1
 1227 21036 7240          STA
 1228 21037 1264          TAD CLKTBA
 1229 21040 3016          DCA AXS2
 1230 21041 6211          DATFLD
 1231 21042 3416          DCA I AXS2
 1232 21043 2015          ISZ AXS1
 1233 21044 5242          JMP .-2
 1234 21045 4060          CHDF
 1235 21046 4662          JMS I CLKDAT
 1236 21047 4663          JMS I CLKTIM
 1237 21050 1147          TAD AUTOSW
 1238 21051 7640          SZA CLA         /DOING AN AUTOMATIC RESTART?
 1239 21052 5633          JMP I CLKINI    /YES - DON'T RESET THE UPTIME
 1240 21053 1153          TAD SVUPT1
 1241 21054 6211          DATFLD
 1242 21055 3665          DCA I UPTM1A    /NO - RESTORE THE SYSTEM UPTIME
 1243 21056 1154          TAD SVUPT2
 1244 21057 3666          DCA I UPTM2A
 1245 21060 4060          CHDF
 1246 21061 5633          JMP I CLKINI
 1247             /
 1248 21062 2032  CLKDAT, DATEIN
 1249 21063 2507  CLKTIM, TIMEIN
 1250 21064 3303  CLKTBA, CLKTBL
 1251 21065 0174  UPTM1A, UPTIM1
 1252 21066 0173  UPTM2A, UPTIM2

      /TSS/8 CONFIGURATION FOR UWM                                       Page 30


 1253 21067 7106  STAQUE, L2QTB-1
 1254             
 1255 21070 0000  START,  0
 1256 21071 6201          CDF
 1257 21072 1267          TAD STAQUE      /RESET INTERRUPT QUEUE
 1258 21073 3413          DCA I L2Q
 1259 21074 1267          TAD STAQUE
 1260 21075 3414          DCA I L2QE
 1261 21076 6762          DTCA
 1262 21077 6012          RRB             /CLEAR ALL INTERRUPT FLAGS
 1263 21100 7200          CLA
 1264 21101 6022          PCF
 1265 21102 6264          UFF
 1266             
 1267                     IFZERO D689-4   <
 1268                     EDF             /TURN ON DATA PHONES
 1269                     DFCRF
 1270                     CCF
 1271                     >
 1272 21103 6042          TCF
 1273 21104 6203          CIF CDF
 1274             
 1275                     IFZERO D680-2 <
 1276                     TT8ON
 1277                     >
 1278                     IFZERO D680 <
 1279                             IFZERO CPU-1 <
 1280                             CLL CMA                 /LOAD CLOCK BUFFER
 1281                             CCF CLB
 1282                     >>
 1283                     IFZERO D680 <
 1284                             IFNZRO CPU-3 <
 1285 21105 6131          CECI
 1286                     >>
 1287                             IFZERO  CPU-3   <
 1288                     TAD M62         /50 MILLISECONDS PER TIC.
 1289                     OCTAL
 1290                     CLAB
 1291                     CLA
 1292                     TAD C4100
 1293                     CLLR
 1294                     CLA
 1295                     TAD C300
 1296                     CLEN
 1297                     CLSA
 1298                     CLA CMA
 1299                     MTON
 1300                     CLA IAC
 1301                     MINT
 1302                     CLA
 1303                             >
 1304                     IFNZRO LPT      <LCP>   /CLEAR PRINTER
 1305 21106 6001          ION
 1306 21107 5577          WAIT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 31


 1307 21110 0000  SINIT,  0               /INITIALIZE SI
 1308 21111 6201          CDF
 1309 21112 7240          STA
 1310 21113 1163          TAD DEVTBA
 1311 21114 3420          DCA I COMPTR    /COMPTR:=DEVTBL-1
 1312 21115 3421          DCA I SIBUF
 1313 21116 3422          DCA I SICNT
 1314 21117 3423          DCA I COMDSP
 1315 21120 3424          DCA I SIFLG
 1316 21121 3425          DCA I SICHAR
 1317 21122 3426          DCA I SIREG
 1318 21123 3427          DCA I SIREG+1
 1319 21124 3430          DCA I SIREG+2
 1320 21125 4060          CHDF
 1321 21126 5710          JMP I SINIT
 1322             
 1323                                     IFZERO  CPU-3   <
 1324             M62,    -62
 1325             C4100,  4100
 1326             C300,   300
 1327             
 1328                     PAGE
 1329             
 1330                             >
 1331             
 1332 21127 0000  SCHINI, 0               /INITIALIZE SCHEDULER
 1333 21130 6211          DATFLD
 1334 21131 7240          STA             /CLEAR JOBTBL
 1335 21132 1044          TAD JOBTBA
 1336 21133 3016          DCA AXS2
 1337 21134 1063          TAD CJOBMX
 1338 21135 3015          DCA AXS1
 1339 21136 3416          DCA I AXS2
 1340 21137 2015          ISZ AXS1
 1341 21140 5336          JMP .-2
 1342 21141 3561          DCA I JOBDAT
 1343 21142 6201          CDF
 1344 21143 3560          DCA I JOB
 1345 21144 3443          DCA I JOBTIM
 1346 21145 3452          DCA I COMCNT
 1347 21146 3453          DCA I SQREQ
 1348 21147 3454          DCA I FINISH
 1349 21150 3455          DCA I FIT
 1350 21151 3456          DCA I FORCE
 1351 21152 4060          CHDF
 1352 21153 5727          JMP I SCHINI

      /TSS/8 CONFIGURATION FOR UWM                                       Page 32


 1353                     IFNZRO CPU-3 <
 1354                     PAGE
 1355                     >
 1356                     IFZERO D680-2 <
 1357             /INITIALIZE 680 SYSTEM
 1358             
 1359             M8=     C7770
 1360             T8INCT, 0
 1361             T8GO,   T8GOS
 1362                     >
 1363 21200 6002  C6002,  6002
 1364             
 1365 21201 0000  T8INI,  0
 1366                     IFNZRO CPU-3 <
 1367                             IFZERO D680-2 <
 1368                     TAD T8NUML
 1369                     T8INIT
 1370                     0
 1371                     TAD M8          /WAIT 8 CLOCK TICKS
 1372                     DCA T8INCT
 1373                     TT8ON
 1374                     T8SKP           /WAIT
 1375                     JMP .-1
 1376                     ISZ T8INCT      /DONE?
 1377                     JMP .-4         /NO
 1378                     T8OFF
 1379                     JMP I T8INI
 1380                             >
 1381                             IFZERO D680 <
 1382 21202 1225          TAD T8DEVI
 1383 21203 3015          DCA AXS1
 1384 21204 1243          TAD INDEV
 1385 21205 3016          DCA AXS2
 1386 21206 4231          JMS T8BLT
 1387 21207 1226          TAD T8DEVO
 1388 21210 3015          DCA AXS1
 1389 21211 1271          TAD OUTDEV
 1390 21212 3016          DCA AXS2
 1391 21213 4231          JMS T8BLT
 1392 21214 1243          TAD INDEV
 1393 21215 3015          DCA AXS1
 1394 21216 1415  T8INI5, TAD I AXS1
 1395 21217 7450          SNA
 1396 21220 5601          JMP I T8INI
 1397 21221 1200          TAD C6002       /KCC-DEVICE CODE
 1398 21222 3223          DCA .+1
 1399 21223 0000          0
 1400 21224 5216          JMP T8INI5
 1401             
 1402 21225 7166  T8DEVI, TIDEV-1
 1403 21226 7206  T8DEVO, TODEV-1
 1404 21227 7760  T8CNTR, -NULINE-1
 1405 21230 0000  T8CNT4, 0
 1406             
 1407             /ROUTINE TO TRANSFER THE DEVICE IOT'S INTO FIELD ZERO.
 1408 21231 0000  T8BLT,  0
 1409 21232 1227          TAD T8CNTR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 33


 1410 21233 3230          DCA T8CNT4      /SET THE COUNTER
 1411 21234 1416          TAD I AXS2
 1412 21235 6201          CDF
 1413 21236 3415          DCA I AXS1
 1414 21237 4060          CHDF
 1415 21240 2230          ISZ T8CNT4
 1416 21241 5234          JMP .-5
 1417 21242 5631          JMP I T8BLT
 1418             
 1419                     IFZERO NULINE-24&4000   <GLITCH>
 1420 21243 1243  INDEV,  .
 1421 21244 0030          30      /K00 - INPUT DEVICE CODE
 1422 21245 0400          400
 1423 21246 0420          420     /K02
 1424 21247 0440          440
 1425 21250 0460          460     /K04
 1426 21251 0340          340
 1427 21252 0110          110     /K06
 1428 21253 0300          300
 1429 21254 0320          320     /K10
 1430 21255 0500          500
 1431 21256 0520          520     /K12
 1432 21257 0540          540
 1433 21260 0560          560     /K14
 1434 21261 0700          700
 1435 21262 0360          360     /K16
 1436 21263 0720          720
 1437 21264 0740          740     /K20
 1438 21265 0060          060
 1439 21266 0140          140     /K22
 1440 21267 0160          160
 1441 21270 0000          0
 1442 21271 1271  OUTDEV, .
 1443 21272 0040          40      /K00 - OUTPUT DEVICE CODE
 1444 21273 0410          410
 1445 21274 0430          430     /K02
 1446 21275 0450          450
 1447 21276 0470          470     /K04
 1448 21277 0350          350
 1449 21300 0120          120     /K06
 1450 21301 0310          310
 1451 21302 0330          330     /K10
 1452 21303 0510          510
 1453 21304 0530          530     /K12
 1454 21305 0550          550
 1455 21306 0570          570     /K14
 1456 21307 0710          710
 1457 21310 0370          370     /K16
 1458 21311 0730          730
 1459 21312 0750          750     /K20
 1460 21313 0070          070
 1461 21314 0150          150     /K22
 1462 21315 0170          170
 1463 21316 0000          0
 1464                     >>
 1465                     IFZERO CPU-3 <
 1466                     JMP I T8INI     /A BIGGY IF A DC02, ISN'T IT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 34


 1467                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 35


 1468                     IFZERO D680-2 <
 1469             /INITIALIZATION
 1470             /ENTER WITH NUMBER OF LINES IN AC
 1471             /FORMAT         T8INIT
 1472             /               1ST LINE NO.
 1473             
 1474             T8INIT= JMS I T8GO
 1475             
 1476             T8GOS,  0
 1477                     CDF
 1478                     DCA I T8NL      /NO. OF LINES
 1479                     CHDF
 1480                     TAD I T8GOS     /STARTING LINE NO.
 1481                     CDF
 1482                     CLL RTL         /POSITIONED
 1483                     RAL             / IN
 1484                     DCA T8K26       / BITS 2-8 (INITIAL LSW)
 1485                     DCA T8K15       /CLEAR THE CTR
 1486                     TAD I T8NL      /RAISE NO. OF
 1487                     ISZ T8K15       / LINES TO AN
 1488                     TAD T8K16       / EVEN MULTIPLE
 1489                     SNA             /OF 5, SKP IF NOT INTEGRAL ANS.
 1490                     JMP .+7         /CAME OUT EVEN
 1491                     SMA             /SKP IF WE'VE GONE BEYOND
 1492                     JMP .-5         /CONTINUE
 1493                     TAD T8K19       /BACK UP ONE
 1494                     ISZ I T8NL      /UP THE NO OF LINES
 1495                     SZA             /SKIP IF FINISHED
 1496                     JMP .-3         /CONTINUE BACKING UP
 1497                     CLA
 1498                     TAD T8K15
 1499                     CIA
 1500                     DCA T8K15       /STORE -N/5
 1501                     TAD I T8NL
 1502                     CIA
 1503                     DCA I T8NL      /STORE -N
 1504                     TAD I T8BFK     /INPUT BUFF.PTR
 1505                     DCA I PT8AX2
 1506                     TAD T8K16       /-5
 1507                     DCA I PT8CT1    /MAJOR LOOP COUNTER
 1508                     TAD T8K15       /-N/5
 1509                     DCA I T8K23     /T8MNC
 1510                     TAD T8K38       /SET CTR FOR MAX NO.
 1511                     TAD T8K15       /CHARS PER PASS EQ
 1512                     DCA I T8K0      /32-N/5
 1513                     TAD I T8NL
 1514                     DCA I T8K14     /-NO. LINES
 1515                     STA
 1516                     DCA I T8CNT3    /SET TO SKP
 1517                     TAD I T8K7      /T8OBF
 1518                     DCA I T8OUTK    /1ST OUTPUT BUFFER POINTER
 1519                     TAD I T8K36     /T8OBF2
 1520                     DCA I T8OTK2    /2ND OUTPUT BUFFER POINTER
 1521                     CHDF
 1522                     TAD I T8GOS     /STARTING LINE NO.
 1523                     CDF
 1524                     DCA I T8K33     /T8K9, STARTING LINE NO. -1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 36


 1525                     TAD I T8K33
 1526                     DCA I TT8K39
 1527                     TAD I T8K33     /T8K9
 1528                     CIA             /MAKE NEGATIVE
 1529                     DCA I T8K34     /T8SL, -STARTING LINE NO.
 1530                     DCA T8INFL      /CLEAR INPUT FLAG COUNTER
 1531                     STA             /-1
 1532                     DCA I T8K35     /T8LC, RESET INTERRUPT LEVEL COUNTER
 1533                     ISZ T8GOS       /INDEX EXIT
 1534                     CHDF
 1535                     JMP I T8GOS     /EXIT
 1536             
 1537             /CONSTANTS
 1538             T8K15,  0               /SET TO -N/5
 1539             T8K16,  -5              /FOR EVN MULT OF FIVE
 1540             T8K17,  10              /FOR ADDING TO LINE NO.
 1541             T8K19,  1               /USED TO FORM MULT OF 5
 1542             T8K20,  T8IN-1          /FOR STORING TTI'S
 1543             T8K21,  T8OBF-1         /DOUBLE BUF-
 1544             T8K22,  T8OBF2          /FERED OUTPUT
 1545             T8K23,  T8MNC           /FOR -N/5
 1546             T8K25,  TTI             /FOR THE TTI TABLE
 1547             T8K26,  0               /LINE STATUS WORD
 1548             T8K27,  2000            /CHAR. ASSEMBLY WOR
 1549             T8K28,  JMS I T8K99     /FOR JUMP TO STORE CHAR
 1550             T8K29,  JMP I T8K8      /FOR FINAL JUMP
 1551             T8K33,  T8K9            /FOR STARTING LINE-1
 1552             T8K34,  T8SL            /-STARTING LINE NO.
 1553             T8K35,  T8LC            /FOR INTERRUPT LEVEL COUNTER
 1554             T8K38,  40              /USED FOR NO. CHR/PASS
 1555             TT8K39, T8LN
 1556             
 1557             PT8AX2, T8AX2
 1558             PT8CT1, T8CNT1
 1559                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 37


 1560                     PAGE
 1561             
 1562 21400 7763  PERNUM, DEVTBE-JOBTBL+1
 1563 21401 3254  DEVDMB, JOBTBL-2        /JOBTBL-1 = 7777, THUS DEVICE IS UNAVAILABLE
 1564 21402 7740  DEVNUM, DEVTBL-DEVTBE
 1565             
 1566 21403 0000  DEVINI, 0               /CLEAR DEVTBL
 1567 21404 6211          DATFLD
 1568 21405 1202          TAD DEVNUM
 1569 21406 3015          DCA AXS1        /SET THE COUNTER TO CLEAR THE FIRST PART
 1570 21407 7240          STA
 1571 21410 1163          TAD DEVTBA
 1572 21411 3016          DCA AXS2
 1573 21412 3416          DCA I AXS2      /NOW CLEAR THE KEYBOARD PART OF 'DEVTBL'
 1574 21413 2015          ISZ AXS1
 1575 21414 5212          JMP .-2
 1576 21415 1200          TAD PERNUM
 1577 21416 3015          DCA AXS1        /NOW SET THE COUNTER FOR THE REST
 1578             
 1579                     IFZERO READER   <TAD DEVDMB>
 1580 21417 7000          IFNZRO READER   <NOP>
 1581 21420 4234          JMS DEVSET
 1582             
 1583                     IFZERO PUNCH    <TAD DEVDMB>
 1584 21421 7000          IFNZRO PUNCH    <NOP>
 1585 21422 4234          JMS DEVSET
 1586             
 1587 21423 1201          IFZERO LPT      <TAD DEVDMB>
 1588                     IFNZRO LPT      <NOP>
 1589 21424 4234          JMS DEVSET
 1590             
 1591 21425 1201          IFZERO PLOTTER  <TAD DEVDMB>
 1592                     IFNZRO PLOTTER  <NOP>
 1593 21426 4234          JMS DEVSET
 1594             
 1595 21427 1201          IFZERO CDR      <TAD DEVDMB>
 1596                     IFNZRO CDR      <NOP>
 1597 21430 4234          JMS DEVSET
 1598             
 1599                     IFZERO TC01     <TAD DEVDMB>
 1600 21431 7000          IFNZRO TC01     <NOP>
 1601 21432 4234          JMS DEVSET
 1602 21433 5231          JMP .-2         / ('DEVSET' EVENTUALLY WON'T RETURN)
 1603             
 1604 21434 0000  DEVSET, 0               /ROUTINE TO SET ENTRY IN DEVTBL
 1605 21435 3416          DCA I AXS2      /DEVTBL ENTRY
 1606 21436 2015          ISZ AXS1        /DONE?
 1607 21437 5634          JMP I DEVSET    /NO
 1608 21440 7240  DEVTDN, STA             /YES - SET DUMMY DDB
 1609 21441 3416          DCA I AXS2
 1610 21442 6201          CDF
 1611 21443 3532          DCA I KCHAR     / AND CLEAR TTY CONTROL WORDS
 1612 21444 3533          DCA I TCHAR
 1613 21445 4060          CHDF
 1614 21446 5603          JMP I DEVINI

      /TSS/8 CONFIGURATION FOR UWM                                       Page 38


 1615 21447 3240  CORDBE, DEVTBE
 1616 21450 0000  CORLNK, 0
 1617 21451 0006  CORMAX, CORMEM%10-1     /NUMBER OF USER FIELDS
 1618 21452 0060  FREND,  -FIPBLK         /END OF FREE CORE AREA
 1619 21453 3754  LODDTA, LODDT           /LOAD XDDT INTO FIELD 1
 1620             
 1621 21454 0000  CORINI, 0
 1622 21455 1147          TAD AUTOSW
 1623 21456 7640          SZA CLA         /AUTO-RESTART?
 1624 21457 5272          JMP CORIN0      /YES - ASSUME CONFIGURED MEMORY
 1625 21460 5272          JMP CORIN0      /CHANGE TO 'NOP' FOR XDDT & MEMORY MESSAGE
 1626             
 1627                     IFNZRO CPU-3 <
 1628 21461 4537          YESNO           /LOAD XDDT?
 1629 21462 0740           DDTMES
 1630 21463 7410          SKP             /NO
 1631 21464 4653          JMS I LODDTA    /YES - MOVE XDDT INTO FIELD 2
 1632                             >
 1633 21465 4540          MESSAG          /# USER FIELDS -
 1634 21466 0655           CORMES
 1635 21467 4543          GETIN           /READ THE RESPONSE
 1636 21470 4541          OCTIN           / AND CONVERT IT FROM ASCII
 1637 21471 5273          JMP .+2
 1638 21472 1251  CORIN0, TAD CORMAX      /GET THE NUMBER OF USER FIELDS
 1639 21473 0035          AND C0007
 1640 21474 7450          SNA             /ANYTHING ENTERED?
 1641 21475 7001          IAC             /NO - ASSUME 1 USER FIELD
 1642 21476 3072          DCA CORCNT
 1643 21477 1072          TAD CORCNT
 1644 21500 7041          CIA
 1645 21501 3015          DCA AXS1        /SAVE COUNTER FOR CORE-SEARCH ROUTINE
 1646 21502 7146          CLL CMA RTL
 1647 21503 1170          TAD CORSRA
 1648 21504 3016          DCA AXS2
 1649 21505 6201          CDF
 1650 21506 1015          TAD AXS1
 1651 21507 3416          DCA I AXS2      /SET (-) # USER FIELDS
 1652 21510 1072          TAD CORCNT
 1653 21511 1032          TAD C0002       /ALLOW FOR 'DATFLD' AND INITIAL 'CORTBL' OFFSET
 1654 21512 1162          TAD CORTBA
 1655 21513 7041          CIA
 1656 21514 3416          DCA I AXS2      /SET (-) THE FIRST LOCKED ENTRY IN CORTBL
 1657 21515 1162          TAD CORTBA
 1658 21516 7001          IAC             / (SKIP 'DATFLD')
 1659 21517 3016          DCA AXS2
 1660 21520 3416          DCA I AXS2      /NOW UNLOCK ALL USER FIELDS
 1661 21521 2015          ISZ AXS1
 1662 21522 5320          JMP .-2
 1663 21523 1072          TAD CORCNT
 1664 21524 1032          TAD C0002       /ALLOW FOR THE RESIDENT MONITOR
 1665 21525 7106          CLL RTL
 1666 21526 3072          DCA CORCNT      /CORCNT = TOTAL # FIELDS * 4
 1667 21527 1072          TAD CORCNT
 1668 21530 1164          TAD DSUTBA
 1669 21531 1073          TAD C0010       /ALLOW 'DSUTBL' TERMINATOR (1 WORD)
 1670 21532 0041          AND C7770       / AND FIND NEXT 8-WORD BOUNDARY
 1671 21533 3446          DCA I FREE      /SET THE POINTER TO THE FREE-CORE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 39


 1672 21534 1446          TAD I FREE
 1673 21535 6211          DATFLD
 1674 21536 3250  CORIN1, DCA CORLNK
 1675 21537 1250          TAD CORLNK
 1676 21540 1073          TAD C0010
 1677 21541 3016          DCA AXS2
 1678 21542 1016          TAD AXS2
 1679 21543 1252          TAD FREND
 1680 21544 7650          SNA CLA         /IS THE NEXT BLOCK PAST THE END?
 1681 21545 5353          JMP CORIN2      /YES - WE'RE DONE
 1682 21546 1016          TAD AXS2
 1683 21547 3650          DCA I CORLNK    /NO - SET THE LINK-WORD IN THE PREVIOUS BLOCK
 1684 21550 1016          TAD AXS2
 1685 21551 2015          ISZ AXS1        /INCREMENT OUR BLOCK COUNTER
 1686 21552 5336          JMP CORIN1
 1687 21553 3650  CORIN2, DCA I CORLNK    /LAST LINK IS ZERO
 1688 21554 1015          TAD AXS1
 1689 21555 7001          IAC
 1690 21556 6201          CDF
 1691 21557 3447          DCA I FRECNT    /SET THE NUMBER OF FREE-CORE BLOCKS
 1692 21560 4060          CHDF
 1693 21561 5654          JMP I CORINI
 1694             
 1695             /SKIP LEADING SPACES AND TABS
 1696             /CALL   JMS SKIPS
 1697             /       BUFFER EMPTY
 1698             /       NORMAL RETURN
 1699             
 1700 21562 7540  SKISPA, -240
 1701 21563 0027  SKITAB, 240-211
 1702             
 1703 21564 0000  SKIPS,  0
 1704 21565 4535  SKIPS1, COMGET          /FETCH A CHARACTER
 1705 21566 5764          JMP I SKIPS     /NONE LEFT
 1706 21567 1362          TAD SKISPA
 1707 21570 7440          SZA             /A SPACE?
 1708 21571 1363          TAD SKITAB
 1709 21572 7650          SNA CLA         / OR A TAB (CTRL/I)?
 1710 21573 5365          JMP SKIPS1      /YES - IGNORE IT
 1711 21574 2364          ISZ SKIPS
 1712 21575 5764          JMP I SKIPS     /RETURN NORMALLY

      /TSS/8 CONFIGURATION FOR UWM                                       Page 40


 1713                     PAGE
 1714             /THIS ROUTINE READS OR WRITES 4K AT A TIME.
 1715             /CALLING SEQUENCE:
 1716             /       DISC
 1717             /        FUNCTION       (6603 OR 6605)
 1718             /        DDDM           D=DISC EXTENSION, M=DATA FIELD (BITS 9-11)
 1719             /       ERROR RETURN
 1720             /       NORMAL RETURN
 1721             /
 1722                     IFZERO RK8E <
 1723             
 1724 21600 0000  DISC0,  0
 1725 21601 6214          RDF
 1726 21602 1223          TAD C6201
 1727 21603 3233          DCA DISC1
 1728 21604 1233          TAD DISC1
 1729 21605 3247          DCA DISC2
 1730 21606 1600          TAD I DISC0     /GET THE FUNCTION WORD
 1731 21607 3234          DCA DISROW
 1732 21610 2200          ISZ DISC0
 1733 21611 1600          TAD I DISC0     /GET THE FIELD # & DISC EXT.
 1734             
 1735                     IFZERO RF08-40 <
 1736                     ISZ DISC0
 1737                     CLL RTL
 1738                     RAL
 1739                     DEAL            / AND SEND THEM TO THE CONTROLLER
 1740                     CLA CLL
 1741                     >
 1742                     IFZERO RF08 <
 1743 21612 7006          RTL
 1744 21613 7004          RAL
 1745 21614 0251          AND C0070
 1746 21615 6615          DIML            /SEND OUT THE FIELD SELECT
 1747 21616 1600          TAD I DISC0
 1748 21617 7112          CLL RTR
 1749 21620 7010          RAR
 1750 21621 6643          DXAL            / AND THE DISC EXTENSION
 1751 21622 2200          ISZ DISC0
 1752                     >
 1753 21623 6201  C6201,  CDF
 1754 21624 1652          TAD I C7750
 1755 21625 3255          DCA WCSAVE      /SAVE THE CURRENT DATA-BREAK WORDS
 1756 21626 1653          TAD I C7751
 1757 21627 3254          DCA MASAVE
 1758 21630 3652          DCA I C7750     /THEN SET FOR ENTIRE FIELD
 1759 21631 7240          STA
 1760 21632 3653          DCA I C7751     / STARTING AT ADDRESS 0
 1761 21633 0000  DISC1,  0
 1762 21634 0000  DISROW, 0               /THEN START THE TRANSFER
 1763 21635 6622          DFSC
 1764 21636 5235          JMP .-1
 1765 21637 6621          DFSE            /ANY ERRORS?
 1766             
 1767                     IFZERO RF08-40 <
 1768                     SKP
 1769                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 41


 1770 21640 2200          ISZ DISC0       /NO - FIX THE RETURN ADDRESS
 1771 21641 7300          CLA CLL
 1772 21642 1255          TAD WCSAVE
 1773 21643 6201          CDF
 1774 21644 3652          DCA I C7750     /FINALLY, RESTORE THE CONTROL WORDS
 1775 21645 1254          TAD MASAVE
 1776 21646 3653          DCA I C7751
 1777 21647 0000  DISC2,  0
 1778 21650 5600          JMP I DISC0     / AND RETURN
 1779             
 1780 21651 0070  C0070,  70
 1781 21652 7750  C7750,  7750
 1782 21653 7751  C7751,  7751
 1783 21654 0000  MASAVE, 0
 1784 21655 0000  WCSAVE, 0
 1785                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 42


 1786                     IFNZRO RK8E <
 1787             /
 1788             /ROUTINE TO HANDLE THE RK08/E DISC.
 1789             
 1790             DISC0,  0
 1791                     CLA CLL CMA RTL /SET THE ERROR RE-TRY COUNTER
 1792                     DCA DISCER
 1793             DSRTRY, TAD I DISC0     /GET THE FUNCTION
 1794                     RTR; RAR        / & ISOLATE THE READ/WRITE BIT
 1795                     CLA RAR
 1796                     DCA DISCMD
 1797                     ISZ DISC0
 1798                     TAD I DISC0     /NOW GET THE ADDRESSING INFORMATION
 1799                     RTL; RAL
 1800                     AND DS70        /PICK OUT THE DATA FIELD
 1801                     TAD DISCMD
 1802                     DCA DISCMD      / & SAVE IT IN THE COMMAND-WORD
 1803                     TAD DSM20       /INITIALIZE THE BLOCK COUNTER
 1804                     DCA DSBLKS
 1805                     DLCA            / & LOAD THE CORE ADDRESS
 1806                     TAD I DISC0     /NOW GET THE DISC ADDRESS
 1807                     AND DS7770
 1808                     CLL RAL
 1809                     DCA DISCAD
 1810                     SZL             /HIGH-ORDER BIT ON?
 1811             DSOVFL, ISZ DISCMD      /YES - SET IT IN THE COMMAND-WORD
 1812             DSLOOP, DCA DSHDCK      /SET 'CHECK-HEADER' SWITCH
 1813                     DCLR            /CLEAR THE CONTROLLER
 1814                     TAD DSHDCK      /GET THE 'CHECK-HEADER' SWITCH
 1815                     CLL RTR
 1816                     TAD DISCMD      / & THE REST OF THE COMMAND
 1817                     DLDC
 1818                     TAD DISCAD      /NOW GET THE DISC ADDRESS
 1819                     DLAG            / & DO THE I/O
 1820                     DSKP
 1821                     JMP .-1
 1822                     DRST            /BACK AGAIN! GET THE STATUS
 1823                     CLL RAL
 1824                     SZA             /ANY ERROR BITS?
 1825                     JMP DSERR       /YES
 1826                     ISZ DSBLKS      /NO - DECREMENT BLOCK-COUNT
 1827                     SKP
 1828                     JMP DISCDN      /ALL DONE
 1829                     TAD DISCAD      /NO - CHECK FOR END OF TRACK
 1830                     CMA
 1831                     AND DS37
 1832                     SZA CLA         /ARE WE AT A BOUNDARY?
 1833                     CLA CLL CML RAR /NO - SKIP HEADER CHECK
 1834                     ISZ DISCAD      /NOW INCREMENT THE ADDRESS
 1835                     JMP DSLOOP      / AND DO IT AGAIN
 1836                     JMP DSOVFL      /ADDRESS OVERFLOWED - INCREMENT HI-ORDER
 1837             
 1838             /WE HIT AN ERROR CONDITION - RE-CALIBRATE THE DISC & TRY AGAIN.
 1839             DSERR,  AND DS1002
 1840                     SNA CLA         /WAS IT A SEEK-FAIL OR CYL. ADDR ERROR?
 1841                     JMP DSAGN       /NO - JUST TRY AGAIN
 1842                     DCLR            /YES - WE RE-CALIBRATE THE DRIVE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 43


 1843                     CLA CLL CML RTL / (AC=2)
 1844                     DCLR
 1845                     DSKP
 1846                     JMP .-1
 1847                     DCLR
 1848                     DRST            /NOW WAIT FOR THE STATUS TO CLEAR
 1849                     SZA CLA
 1850                     JMP .-2
 1851             DSAGN,  CLA CLL CMA
 1852                     TAD DISC0       /BACK UP THE PARAMETER POINTER
 1853                     DCA DISC0       / SO WE START FRESH
 1854                     ISZ DISCER      / BUT WE ONLY TRY 3 TIMES
 1855                     JMP DSRTRY
 1856             DISCDN, ISZ DISC0       /GOOD FINISH - FIX RETURN ADDRESS
 1857                     ISZ DISC0
 1858                     JMP I DISC0     /THEN RETURN
 1859             
 1860             DISCAD, 0
 1861             DISCMD, 0
 1862             DISCER, 0
 1863             DSBLKS, 0
 1864             DSHDCK, 0
 1865             DSM20,  -20
 1866             DS37,   37
 1867             DS70,   70
 1868             DS1002, 1002
 1869             DS7770, 7770
 1870                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 44


 1871             /
 1872             /SUBROUTINE TO READ A LINE FROM THE KEYBOARD.
 1873 21656 0000  GETIN0, 0
 1874 21657 1064          TAD INBUF
 1875 21660 3327          DCA BUFPTR
 1876 21661 4732  GETIN1, JMS I GETCHR    /READ A CHARACTER
 1877 21662 3727          DCA I BUFPTR
 1878 21663 1727          TAD I BUFPTR
 1879 21664 1146          TAD MC0377
 1880 21665 7640          SZA CLA         /RUBOUT IN STRING?
 1881 21666 5302          JMP GETIN3      /NO
 1882 21667 1064          TAD INBUF       /YES - ANYTHING TO RUB OUT?
 1883 21670 7041          CIA
 1884 21671 1327          TAD BUFPTR
 1885 21672 7650          SNA CLA
 1886 21673 5261          JMP GETIN1      /NO - JUST IGNORE RUBOUT
 1887 21674 7240          CLA CMA         /YES - BACK UP THE POINTER
 1888 21675 1327          TAD BUFPTR
 1889 21676 3327          DCA BUFPTR
 1890 21677 1727          TAD I BUFPTR    /GET CHARACTER
 1891 21700 4542  GETIN2, TYPE            /ECHO IT
 1892 21701 5261          JMP GETIN1
 1893             
 1894 21702 1327  GETIN3, TAD BUFPTR
 1895 21703 1326          TAD BUFLIM
 1896 21704 7650          SNA CLA         /REACHED BUFFER LIMIT?
 1897 21705 5324          JMP GETIN4      /YES - RING THE BELL
 1898 21706 1727          TAD I BUFPTR    /ECHO CHARACTER
 1899 21707 4542          TYPE
 1900 21710 1727          TAD I BUFPTR
 1901 21711 2327          ISZ BUFPTR      / & INCREMENT THE POINTER
 1902 21712 1330          TAD CM215
 1903 21713 7640          SZA CLA         /IS IT A CARRIAGE RETURN?
 1904 21714 5261          JMP GETIN1
 1905 21715 1331          TAD C0212
 1906 21716 4542          TYPE            /YES - TYPE A LINE-FEED
 1907 21717 3727          DCA I BUFPTR    / AND STORE A ZERO
 1908 21720 7240          CLA CMA
 1909 21721 1064          TAD INBUF
 1910 21722 3015          DCA AXS1        /SET THE INDEX REGISTER
 1911 21723 5656          JMP I GETIN0
 1912 21724 1035  GETIN4, TAD C0007
 1913 21725 5300          JMP GETIN2      /GO RING THE BELL
 1914             
 1915 21726 5212  BUFLIM, -INBUFZ
 1916 21727 0000  BUFPTR, 0
 1917 21730 7563  CM215,  -215
 1918 21731 0212  C0212,  212
 1919 21732 0504  GETCHR, IN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 45


 1920                     PAGE
 1921             /INIT BOOTSTRAP - LOAD TRACK 2 INTO FIELD 0
 1922             
 1923 22000 6201  INBOOT, CDF
 1924 22001 7240          STA
 1925 22002 3617          DCA I B7751
 1926 22003 3616          DCA I B7750
 1927 22004 6002          IOF
 1928             
 1929                     IFZERO D680-2 <
 1930                     T8OFF
 1931                     >
 1932             /START HERE IF WC & MA SETUP
 1933                     IFZERO RF08 <
 1934 22005 6615          DIML            /SET THE FIELD NUMBER
 1935 22006 7326          CLA CLL CML RTL
 1936 22007 6643          DXAL            / AND THE TRACK NUMBER
 1937                     >
 1938                     IFZERO RF08-40 <
 1939                     TAD S0200
 1940                     DEAL            /SET THE TRACK & FIELD
 1941                     CLA
 1942                     >
 1943 22010 6603          DMAR            /NOW START THE READ
 1944 22011 6622          DFSC
 1945 22012 5211          JMP .-1
 1946 22013 6203          CIF CDF
 1947 22014 5615          JMP I .+1       /WHEN DONE, START UP 'INIT'
 1948 22015 4216          SUPER
 1949             
 1950 22016 7750  B7750,  7750
 1951 22017 7751  B7751,  7751
 1952 22020 0200  S0200,  200     /INIT TRACK

      /TSS/8 CONFIGURATION FOR UWM                                       Page 46


 1953             /DATE INPUT
 1954             /DATE=((YEAR-1974)*12+(MONTH-1))*31+DAY-1
 1955             
 1956 22021 2400  DATMUL, DMUL
 1957 22022 7666  CMBASE, -112    / '74
 1958 22023 7763  CM13,   -15
 1959 22024 7563  CMCR,   -215
 1960 22025 7740  CM32,   -40
 1961 22026 0014  C0012,  14
 1962 22027 0037  C0031,  37
 1963 22030 0000  DATMON, 0
 1964 22031 0000  DATDAY, 0
 1965             
 1966 22032 0000  DATEIN, 0
 1967 22033 7300          CLA CLL
 1968 22034 1147          TAD AUTOSW
 1969 22035 7650          SNA CLA         /DOING AN AUTO-RESTART?
 1970 22036 5241          JMP .+3         /NO
 1971 22037 1152          TAD SVDATE
 1972 22040 5314          JMP DATE1       /YES - USE SAVED CURRENT DATE
 1973 22041 4540          MESSAG          /MONTH-DAY-YEAR:
 1974 22042 0722           DATMES
 1975 22043 4543          GETIN
 1976 22044 4465          NUMBIN          /MONTH
 1977 22045 7507           -"9
 1978 22046 5233          JMP DATEIN+1
 1979 22047 7450          SNA
 1980 22050 5233          JMP DATEIN+1
 1981 22051 3230          DCA DATMON
 1982 22052 1230          TAD DATMON
 1983 22053 1223          TAD CM13
 1984 22054 7700          SMA CLA         /0<MONTH<13?
 1985 22055 5233          JMP DATEIN+1    /NO
 1986 22056 4465          NUMBIN          /DAY
 1987 22057 7507           -"9
 1988 22060 5233          JMP DATEIN+1
 1989 22061 7450          SNA
 1990 22062 5233          JMP DATEIN+1
 1991 22063 3231          DCA DATDAY
 1992 22064 1231          TAD DATDAY      /0<DAY<32?
 1993 22065 1225          TAD CM32
 1994 22066 7700          SMA CLA
 1995 22067 5233          JMP DATEIN+1
 1996 22070 4465          NUMBIN          /YEAR
 1997 22071 7507           -"9
 1998 22072 5233          JMP DATEIN+1
 1999 22073 7450          SNA
 2000 22074 5233          JMP DATEIN+1
 2001 22075 1222          TAD CMBASE
 2002 22076 7510          SPA
 2003 22077 5233          JMP DATEIN+1
 2004 22100 3070          DCA NUMHO+1
 2005 22101 1226          TAD C0012
 2006 22102 4621          JMS I DATMUL
 2007 22103 7240          STA
 2008 22104 1230          TAD DATMON
 2009 22105 1071          TAD NUMHO+2

      /TSS/8 CONFIGURATION FOR UWM                                       Page 47


 2010 22106 3070          DCA NUMHO+1
 2011 22107 1227          TAD C0031
 2012 22110 4621          JMS I DATMUL
 2013 22111 7240          STA
 2014 22112 1231          TAD DATDAY
 2015 22113 1071          TAD NUMHO+2
 2016 22114 6201  DATE1,  CDF
 2017 22115 3566          DCA I DATE
 2018 22116 4060          CHDF
 2019 22117 5632          JMP I DATEIN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 48


 2020             /ROUTINE TO TYPE A MESSAGE AND CHECK FOR A YES-NO RESPONSE.
 2021             /CALLING SEQUENCE:
 2022             /       YESNO
 2023             /        MSGAD  /ADDRESS OF QUESTION
 2024             /       'NO' RETURN
 2025             /       'YES' RETURN
 2026             
 2027 22120 0000  YESNO0, 0
 2028 22121 1720          TAD I YESNO0
 2029 22122 2320          ISZ YESNO0
 2030 22123 3325          DCA .+2
 2031 22124 4540          MESSAG
 2032 22125 0000           0
 2033 22126 4543          GETIN
 2034 22127 1464          TAD I INBUF
 2035 22130 1334          TAD CM331
 2036 22131 7650          SNA CLA         /FIRST CHARACTER A "Y"?
 2037 22132 2320          ISZ YESNO0      /YES - INDEX RETURN
 2038 22133 5720          JMP I YESNO0
 2039 22134 7447  CM331,  -331
 2040             
 2041             /ROUTINE TO FETCH ONE CHARACTER FROM THE KEYBOARD BUFFER.
 2042             
 2043 22135 0000  COMGE0, 0
 2044 22136 1415          TAD I AXS1
 2045 22137 3066          DCA CHAR
 2046 22140 1066          TAD CHAR
 2047 22141 1224          TAD CMCR
 2048 22142 7650          SNA CLA         /CARRIAGE RETURN?
 2049 22143 5347          JMP .+4         /YES-RESET AXS1 SO NEXT CALL FINDS CR
 2050 22144 2335          ISZ COMGE0      /NO
 2051 22145 1066          TAD CHAR
 2052 22146 5735          JMP I COMGE0    /RETURN WITH AC = CHAR = CHARACTER
 2053 22147 7240          STA
 2054 22150 1015          TAD AXS1
 2055 22151 3015          DCA AXS1                /BACK UP POINTER
 2056 22152 5735          JMP I COMGE0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 49


 2057                     PAGE
 2058             
 2059             /NUMBER INPUT
 2060             /CALL   NUMBIN
 2061             /       -N      N=7,9 IN ASCII
 2062             /       NOT A NUMBER
 2063             /       # IN AC
 2064             
 2065       4465  NUMBIN= JMS I NUMBIA
 2066             
 2067       0070  NUMAGN= NUMHO+1 /MAGNITUDE
 2068 22200 0017  NUMB17, 17
 2069 22201 0000  NUMCNT, 0       /DIGIT COUNT
 2070                     IFNZRO NUMOCT-NUMDEC-10 <GLITCH>
 2071       0073  NUMDIF= C0010
 2072 22202 5302  NUMDSP, JMP NUMDEC
 2073 22203 7523  NUMINU, -"-
 2074 22204 7773  NUMM5,  -5
 2075 22205 7525  NUMPLS, -"+
 2076 22206 0000  NUMSGN, 0       /SIGN
 2077 22207 1564  NUMSKP, SKIPS
 2078 22210 7520  NUMZER, -"0
 2079             
 2080 22211 0000  NUMBI0, 0
 2081 22212 1611          TAD I NUMBI0    /SET CONVERSION DISPATCH
 2082 22213 0032          AND C0002
 2083 22214 7650          SNA CLA
 2084 22215 1073          TAD NUMDIF      /OCTAL
 2085 22216 1202          TAD NUMDSP      /DECIMAL
 2086 22217 3301          DCA NUMDEC-1
 2087 22220 3206          DCA NUMSGN      /INITIALIZE
 2088 22221 3070          DCA NUMAGN
 2089 22222 3067          DCA NUMHO
 2090 22223 3201          DCA NUMCNT
 2091 22224 4607          JMS I NUMSKP    /SKIP LEADING SPACES AND TABS
 2092 22225 5332          JMP NUMBI4      /BUFFER EMPTY
 2093 22226 1066          TAD CHAR
 2094 22227 1205          TAD NUMPLS      /+?
 2095 22230 7650          SNA CLA
 2096 22231 5237          JMP NUMBI1      /YES
 2097 22232 1066          TAD CHAR
 2098 22233 1203          TAD NUMINU      /-?
 2099 22234 7640          SZA CLA
 2100 22235 5241          JMP NUMBI2      /NO
 2101 22236 2206          ISZ NUMSGN      /YES - SET (-) INDICATOR
 2102 22237 4535  NUMBI1, COMGET          /GET A CHARACTER
 2103 22240 5320          JMP NUMBI3
 2104 22241 7200  NUMBI2, CLA
 2105 22242 1066          TAD CHAR
 2106 22243 1210          TAD NUMZER
 2107 22244 7710          SPA CLA         /DIGIT?
 2108 22245 5320          JMP NUMBI3      /NO
 2109 22246 1066          TAD CHAR
 2110 22247 1611          TAD I NUMBI0
 2111 22250 7740          SMA SZA CLA
 2112 22251 5320          JMP NUMBI3
 2113 22252 1066          TAD CHAR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 50


 2114 22253 0200          AND NUMB17
 2115 22254 3060          DCA CHDFA
 2116 22255 2201          ISZ NUMCNT
 2117 22256 1201          TAD NUMCNT      /MORE THAT 4 DIGITS?
 2118 22257 1204          TAD NUMM5
 2119 22260 7710          SPA CLA
 2120 22261 5275          JMP NUMBI5      /NO
 2121 22262 1067          TAD NUMHO       /SHIFT HIGH ORDER
 2122 22263 7106          CLL RTL
 2123 22264 7004          RAL
 2124 22265 0041          AND C7770
 2125 22266 3067          DCA NUMHO
 2126 22267 1070          TAD NUMAGN
 2127 22270 7106          CLL RTL
 2128 22271 7006          RTL
 2129 22272 0035          AND C0007
 2130 22273 1067          TAD NUMHO
 2131 22274 3067          DCA NUMHO
 2132 22275 1070  NUMBI5, TAD NUMAGN
 2133 22276 7106          CLL RTL
 2134 22277 7004          RAL
 2135 22300 0041          AND C7770
 2136 22301 7402          HLT
 2137 22302 7100  NUMDEC, CLL
 2138 22303 1070          TAD NUMAGN
 2139 22304 7430          SZL
 2140 22305 2067          ISZ NUMHO
 2141 22306 7100          CLL
 2142 22307 1070          TAD NUMAGN
 2143 22310 7430          SZL
 2144 22311 2067          ISZ NUMHO
 2145 22312 7100  NUMOCT, CLL
 2146 22313 1060          TAD CHDFA
 2147 22314 7430          SZL
 2148 22315 2067          ISZ NUMHO
 2149 22316 3070          DCA NUMAGN
 2150 22317 5237          JMP NUMBI1
 2151             
 2152 22320 1201  NUMBI3, TAD NUMCNT
 2153 22321 7650          SNA CLA
 2154 22322 5332          JMP NUMBI4      /NOT A NUMBER
 2155 22323 2211          ISZ NUMBI0
 2156 22324 1206          TAD NUMSGN
 2157 22325 7110          CLL RAR
 2158 22326 7200          CLA
 2159 22327 1070          TAD NUMAGN
 2160 22330 7430          SZL
 2161 22331 7041          CIA
 2162 22332 2211  NUMBI4, ISZ NUMBI0
 2163 22333 5611          JMP I NUMBI0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 51


 2164 22334 7520  OCI260, -260
 2165 22335 0000  OCTINT, 0
 2166             
 2167 22336 0000  OCTIN0, 0
 2168 22337 3335          DCA OCTINT
 2169 22340 1415  OCTIN1, TAD I AXS1      /GET A CHARACTER
 2170 22341 3016          DCA AXS2
 2171 22342 1016          TAD AXS2
 2172 22343 1334          TAD OCI260
 2173 22344 7510          SPA             /IS IT A LEGAL DIGIT?
 2174 22345 5361          JMP OCTIN2      /NO - WE'RE DONE
 2175 22346 1041          TAD C7770
 2176 22347 7500          SMA
 2177 22350 5361          JMP OCTIN2      /NO
 2178 22351 1073          TAD C0010
 2179 22352 3016          DCA AXS2
 2180 22353 1335          TAD OCTINT      /YES - GET THE NUMBER SO FAR
 2181 22354 7106          CLL RTL         / MULTIPLY IT BY 8
 2182 22355 7004          RAL
 2183 22356 1016          TAD AXS2        / AND ADD IN THE NEW DIGIT
 2184 22357 3335          DCA OCTINT
 2185 22360 5340          JMP OCTIN1
 2186 22361 7300  OCTIN2, CLA CLL
 2187 22362 1335          TAD OCTINT
 2188 22363 5736          JMP I OCTIN0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 52


 2189                     PAGE
 2190             
 2191 22400 0000  DMUL,   0
 2192 22401 3250          DCA MP2         /MULTIPLIER
 2193 22402 1070          TAD NUMHO+1     /LOW ORDER MULTIPLICAND
 2194 22403 4221          JMS MP4
 2195 22404 3071          DCA NUMHO+2     /LOW ORDER
 2196 22405 1252          TAD MP5
 2197 22406 3070          DCA NUMHO+1     /HIGH ORDER
 2198 22407 1067          TAD NUMHO       /HIGH ORDER MULTIPLICAND
 2199 22410 7450          SNA
 2200 22411 5600          JMP I DMUL
 2201 22412 4221          JMS MP4
 2202 22413 1070          TAD NUMHO+1
 2203 22414 3070          DCA NUMHO+1
 2204 22415 7004          RAL             /GET CARRY
 2205 22416 1252          TAD MP5
 2206 22417 3067          DCA NUMHO
 2207 22420 5600          JMP I DMUL
 2208             
 2209             
 2210 22421 0000  MP4,    0
 2211 22422 3247          DCA MP1
 2212 22423 3252          DCA MP5
 2213 22424 1253          TAD M12
 2214 22425 3251          DCA MP3
 2215 22426 7100          CLL
 2216 22427 1247          TAD MP1
 2217 22430 7010          RAR
 2218 22431 3247          DCA MP1
 2219 22432 1252          TAD MP5
 2220 22433 7420          SNL
 2221 22434 5237          JMP .+3
 2222 22435 7100          CLL
 2223 22436 1250          TAD MP2
 2224 22437 7010          RAR
 2225 22440 3252          DCA MP5
 2226 22441 2251          ISZ MP3
 2227 22442 5227          JMP MP4+6
 2228 22443 1247          TAD MP1
 2229 22444 7010          RAR
 2230 22445 7100          CLL
 2231 22446 5621          JMP I MP4
 2232             
 2233 22447 0000  MP1,    0
 2234 22450 0000  MP2,    0
 2235 22451 0000  MP3,    0
 2236 22452 0000  MP5,    0
 2237 22453 7764  M12,    -14

      /TSS/8 CONFIGURATION FOR UWM                                       Page 53


 2238 22454 0000  DSKINI, 0               /CLEAR USER DISC REQUEST QUEUE
 2239 22455 6211          DATFLD
 2240 22456 1072          TAD CORCNT
 2241 22457 7041          CIA
 2242 22460 3015          DCA AXS1
 2243 22461 7240          STA
 2244 22462 1164          TAD DSUTBA
 2245 22463 3016          DCA AXS2
 2246 22464 3416          DCA I AXS2
 2247 22465 2015          ISZ AXS1
 2248 22466 5264          JMP .-2
 2249 22467 7240          STA
 2250 22470 3416          DCA I AXS2      /MARK END OF TABLE
 2251 22471 6201          CDF
 2252 22472 7240          STA
 2253 22473 3565          DCA I DSBUSY
 2254 22474 7240          STA
 2255 22475 1164          TAD DSUTBA
 2256 22476 3417          DCA I DSKPTR
 2257 22477 6601          DCMA
 2258 22500 4060          CHDF
 2259 22501 5654          JMP I DSKINI

      /TSS/8 CONFIGURATION FOR UWM                                       Page 54


 2260             /TIME INPUT
 2261             
 2262 22502 2400  TIMULT, DMUL
 2263 22503 7132  TIMCK2, -INCLK2-1
 2264 22504 1000  TIMCK1, -INCLK1
 2265 22505 0074  C0074,  74      /60
 2266 22506 2260  C660,   TICMIN  /TICKS PER MINUTE
 2267             
 2268 22507 0000  TIMEIN, 0
 2269 22510 1147          TAD AUTOSW
 2270 22511 7650          SNA CLA         /DOING AUTO-RESTART?
 2271 22512 5320          JMP TIME1       /NO
 2272 22513 6201          CDF
 2273 22514 1150          TAD SVCLK1      /YES - RESET THE OLD CLOCK
 2274 22515 3451          DCA I CLK1
 2275 22516 1151          TAD SVCLK2
 2276 22517 5352          JMP TIME2
 2277 22520 4540  TIME1,  MESSAG
 2278 22521 0733           TIMESS         /TIME:
 2279 22522 4543          GETIN
 2280 22523 4465          NUMBIN
 2281 22524 7507           -"9
 2282 22525 5310          JMP TIMEIN+1
 2283 22526 3070          DCA NUMHO+1
 2284 22527 3067          DCA NUMHO
 2285 22530 1305          TAD C0074
 2286 22531 4702          JMS I TIMULT
 2287 22532 4465          NUMBIN
 2288 22533 7507           -"9
 2289 22534 5310          JMP TIMEIN+1
 2290 22535 1071          TAD NUMHO+2
 2291 22536 3070          DCA NUMHO+1
 2292 22537 3067          DCA NUMHO
 2293 22540 1306          TAD C660
 2294 22541 4702          JMS I TIMULT
 2295 22542 7100          CLL
 2296 22543 6201          CDF
 2297 22544 1071          TAD NUMHO+2
 2298 22545 1304          TAD TIMCK1
 2299 22546 3451          DCA I CLK1
 2300 22547 7004          RAL
 2301 22550 1070          TAD NUMHO+1
 2302 22551 1303          TAD TIMCK2
 2303 22552 3450  TIME2,  DCA I CLK2
 2304 22553 4060          CHDF
 2305 22554 5707          JMP I TIMEIN
 2306             
 2307 22555 0000  INBUFA, ZBLOCK 12       /INPUT BUFFER FOR INIT RESPONSES
      22556 0000
      22557 0000
      22560 0000
      22561 0000
      22562 0000
      22563 0000
      22564 0000
      22565 0000
      22566 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 55


 2308       22566  INBUFZ= .-1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 56


 2309                     PAGE
 2310             /DECTAPE TRANSFER ROUTINE
 2311             /CALLING SEQUENCE:
 2312             /       JMS DTGO
 2313             /       WORD 0BCD, WHERE:
 2314             /               B(BITS 3-5) = UNIT NUMBER
 2315             /               C(BITS 6-8) = MEMORY FIELD
 2316             /               D(BITS 9-11); 5=WRITE,3=READ
 2317             /       BLOCK NUMBER
 2318             /       ERROR RETURN
 2319             /       NORMAL RETURN
 2320             
 2321                     IFZERO TD8E <
 2322                             IFNZRO CPU-3 <
 2323             
 2324 22600 0000  DTGO,   0
 2325 22601 7346          CLA CLL CMA RTL
 2326 22602 3134          DCA DTERRI
 2327 22603 1600          TAD I DTGO      /GET THE FUNCTION WORD
 2328 22604 2200          ISZ DTGO
 2329 22605 3327          DCA DTMF
 2330 22606 1327          TAD DTMF
 2331 22607 7106          CLL RTL
 2332 22610 7004          RAL
 2333 22611 3324          DCA DTFUNC
 2334 22612 1600          TAD I DTGO      /GET THE STARTING BLOCK NUMBER
 2335 22613 2200          ISZ DTGO
 2336 22614 3325          DCA DTBLKO
 2337 22615 6201  DTAGN,  CDF
 2338 22616 7240          CLA CMA
 2339 22617 3717          DCA I DTMAA     /SET THE SEARCH WORD-BUFFER
 2340 22620 6774          DTLB
 2341 22621 7300  DTREV,  CLA CLL
 2342 22622 1324          TAD DTFUNC      /START SEARCH REVERSE
 2343 22623 0322          AND DT7010      /EXTRACT UNIT NUMBER
 2344 22624 1323          TAD DT0600      /SEARCH REVERSE FUNCTION
 2345 22625 6766          DTCA DTXA       /START SEARCH
 2346 22626 4300  DTRWT,  JMS DTWAIT      /REVERSE WAIT
 2347 22627 5221          JMP DTREV       /SELECT ERROR, TRY AGAIN
 2348 22630 5240          JMP DTFOR       /FRONT END ZONE ASSUMED
 2349 22631 1033          TAD C0003
 2350 22632 6201          CDF
 2351 22633 1545          TAD I C7777
 2352 22634 7040          CMA
 2353 22635 1325          TAD DTBLKO      /BACK 3 FROM OBJECT BLOCK?
 2354 22636 7710          SPA CLA         /IF SO, START FORWARD
 2355 22637 5226          JMP DTRWT       /IF NOT, CONTINUE REVERSE
 2356             
 2357 22640 1324  DTFOR,  TAD DTFUNC      /START SEARCH FORWARD
 2358 22641 0322          AND DT7010
 2359 22642 1326          TAD DT0200
 2360 22643 6766          DTCA DTXA
 2361 22644 4300  DTFWT,  JMS DTWAIT      /FORWARD WAIT
 2362 22645 5240          JMP DTFOR       /SELECT ERROR; TRY AGAIN
 2363 22646 5221          JMP DTREV       /BACK END ZONE ASSUMED
 2364 22647 6201          CDF
 2365 22650 1545          TAD I C7777

      /TSS/8 CONFIGURATION FOR UWM                                       Page 57


 2366 22651 7041          CIA
 2367 22652 1325          TAD DTBLKO      /OBJECT BLOCK
 2368 22653 7510          SPA             /ARE WE PAST IT?
 2369 22654 5221          JMP DTREV       /YES - REVERSE DIRECTION
 2370 22655 7640          SZA CLA         /NO - IS THIS THE BLOCK WE WANT?
 2371 22656 5244          JMP DTFWT       /NO - JUST CONTINUE SEARCH
 2372 22657 1327          TAD DTMF
 2373 22660 6774          DTLB            /SET THE DATA FIELD
 2374 22661 3720          DCA I DTWCA
 2375 22662 1324          TAD DTFUNC
 2376 22663 0321          AND DT0070      /EXTRACT READ OR WRITE BYTE
 2377 22664 1037          TAD C0100       /CONTINUOUS MODE
 2378 22665 4300          JMS DTWAIT      /XOR IN READ OR WRITE; XOR OUT THE SEARCH
 2379 22666 7000          NOP             /SELECT ERROR - TREAT AS NORMAL ERROR
 2380 22667 5275          JMP DTERR
 2381 22670 2200          ISZ DTGO        /INCREMENT IF NORMAL RETURN
 2382 22671 6761  DTER1,  DTRA
 2383 22672 0326          AND DT0200
 2384 22673 6764          DTXA            /STOP THE DRIVE
 2385 22674 5600          JMP I DTGO
 2386             
 2387 22675 2134  DTERR,  ISZ DTERRI
 2388 22676 5215          JMP DTAGN       /RE-TRY TRANSFER
 2389 22677 5271          JMP DTER1
 2390             
 2391             
 2392             /ROUTINE TO KILL TIME WHILE DECTAPE SPINS
 2393             /CALL:  JMS DTWAIT
 2394             /       RETURN IF SELECT ERROR OCCURS
 2395             /       RETURN FOR ALL OTHER ERROR CONDITIONS
 2396             /       RETURN IF TRANSFER OR OPERATION WAS OK
 2397             
 2398 22700 0000  DTWAIT, 0
 2399 22701 6764          DTXA            /XOR THE FUNCTION WORD
 2400 22702 4060          CHDF            /BACK TO THIS DATA FIELD
 2401 22703 6761          DTRA            /CHECK THE STATUS
 2402 22704 0326          AND DT0200
 2403 22705 7650          SNA CLA         /IS THE TAPE MOVING?
 2404 22706 5700          JMP I DTWAIT    /NO - MUST BE SELECT ERROR
 2405 22707 6773          DTSF DTRB       /YES - WAIT FOR THE FLAG
 2406 22710 5307          JMP .-1
 2407 22711 7500          SMA             /ANY ERRORS?
 2408 22712 2300          ISZ DTWAIT      /NO - INCREMENT RETURN ADDRESS
 2409 22713 0156          AND C0400
 2410 22714 7650          SNA CLA         /SELECT ERROR?
 2411 22715 2300          ISZ DTWAIT      /NO - INCREMENT RETURN AGAIN
 2412 22716 5700          JMP I DTWAIT    / THEN RETURN
 2413             
 2414       0134  DTERRI=C7774
 2415       7755  DTMA=7755
 2416       7754  DTWC=7754
 2417 22717 7755  DTMAA,  DTMA
 2418 22720 7754  DTWCA,  DTWC
 2419 22721 0070  DT0070, 70
 2420 22722 7010  DT7010, 7010
 2421 22723 0600  DT0600, 600
 2422 22724 0000  DTFUNC, 0               /STORE THE FUNCTION

      /TSS/8 CONFIGURATION FOR UWM                                       Page 58


 2423 22725 0000  DTBLKO, 0
 2424 22726 0200  DT0200, 200
 2425 22727 0000  DTMF,   0
 2426                             >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 59


 2427                             IFZERO CPU-3 <
 2428             DTGO,   0               /SAME CALLING SEQUENCE AS THE 8 VERSION.
 2429                     CLA
 2430                     TAD I DTGO      /GET THE CALLING WORD
 2431                     DCA DTWHAT      /WHAT HE WANTS TO DO.
 2432                     ISZ DTGO
 2433                     TAD I DTGO      /GET THE BLAHS NOW
 2434                     DCA DTBLCK      /SAVE AWAY NOW.
 2435                     ISZ DTGO        /WE ARE NOW POINTING TO THE ERROR RETURN
 2436                     TAD     DTWHAT          /REGET THE DESIRED FUNCTION
 2437                     RTR
 2438                     RAR                     /PLACE THE READ OR WRITE BIT IN THE LINC.
 2439                     SZL CLA                 /IF READ BYPASS FUDGE
 2440                     CLA CLL IAC RTL         /+4 FOR THE OPERATION
 2441                     TAD     C0702           /BASIC READ INSTRUCTION.
 2442                     DCA     DTINST          /SAVE IN THE EXECUTE WORD NOW.
 2443                     TAD     DTWHAT          /REGET THE FUNCTION STUFF
 2444                     AND     C0100           /GET THE UNIT NUMBER JAZZ.
 2445                     CLL RTR
 2446                     RAR                     /ROTATE TO BIT 8.
 2447                     TAD     DTINST
 2448                     DCA     DTINST          /STASH IT AWAY. ALL IS NOW WELL
 2449                     TAD     DTWHAT          /GET THE STUFF AGAIN.
 2450                     RTL
 2451                     RTL                     /MOVE TO BITS 0-2
 2452                     RTL
 2453                     AND     C7000           /CHOP OFF THE EXTRA CRAP
 2454                     DCA     DTAXO           /SAVE IN THE AXO REGISTER
 2455                     TAD     DTWHAT
 2456                     RTL
 2457                     RTL
 2458                     RTL                     /BITS 3-4 IN BITS 10-11
 2459                     AND     C0003           /CHOP OFF SOME MORE CRAP
 2460                     TAD     C0030           /SET NO PAUSE AND EXTENDED ADDRSSSING.
 2461                     TAD     DTAXO
 2462                     DCA     DTAXO           /SAVE AWAY FOR A SECOND.
 2463                     6141                    /GET INTO LINC MODE
 2464                     1020                    /LDA I
 2465             DTAXO,  0
 2466                     11                      /THE CLEAR WILL SET UP THE TMA ADDRESS
 2467                     23                      /TMA.
 2468             DTINST, 0                       /PROPER INSTRUCTION
 2469             DTBLCK, 0                       /PROPER BLOCK
 2470                     6                       /DJR.
 2471                     416                     /STD
 2472                     6000 .-2                /JMP    .-2
 2473                     3                       /TAC
 2474                     2                       /GET INTO 8 MODE
 2475                     CMA
 2476                     SNA CLA
 2477                     JMP     DTGOOD
 2478                     TAD     DTWHAT
 2479                     RTR
 2480                     RAR
 2481                     SZL CLA                 /WAS IT A READ??????
 2482             DTGOOD, ISZ     DTGO            /NOPE. A WRITE WAS OK. GOOD EXIT
 2483                     JMP I   DTGO

      /TSS/8 CONFIGURATION FOR UWM                                       Page 60


 2484             DTWHAT, 0
 2485             C0030,  0030
 2486             C0702,  702
 2487             C7000,  7000
 2488                             >
 2489                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 61


 2490                     IFNZRO TD8E <
 2491             /ROUTINE TO HANDLE THE TD8E DECTAPES FOR LOADING AND
 2492             /DUMPING THE SYSTEM; THEY CANNOT BE USED UNDER TSS/8.
 2493             /CALLING SEQUENCE:
 2494             /       JMS DTGO
 2495             /        ABCD   /A=UNUSED; B=UNIT; C=FIELD; D=3 (READ), 5 (WRITE)
 2496             /        BLOCK #
 2497             /       ERROR RETURN
 2498             /       NORMAL RETURN
 2499             
 2500             SDSS=   6771    /SKIP ON SINGLE-LINE FLAG
 2501             SDST=   6772    /SKIP ON TIMING ERROR
 2502             SDSQ=   6773    /SKIP ON QUAD-LINE FLAG
 2503             SDLC=   6774    /LOAD COMMAND REGISTER
 2504             SDLD=   6775    /LOAD DATA REGISTER
 2505             SDRC=   6776    /READ COMMAND REGISTER
 2506             SDRD=   6777    /READ DATA REGISTER
 2507             
 2508             DTGO,   0
 2509                     CLA CLL CMA RTL /SET THE ERROR LIMIT (3)
 2510                     DCA I DTERCT
 2511                     TAD I DTGO      /GET THE FUNCTION WORD
 2512                     DCA I DTFNC
 2513                     ISZ DTGO
 2514                     TAD I DTFNC     /GET THE LOW BIT OF THE UNIT #
 2515                     CLL RTL; RTL; RAL
 2516                     AND DT4000
 2517                     DCA I DTDRV
 2518                     TAD I DTFNC     /NOW GET THE DATA FIELD
 2519                     AND DT70
 2520                     TAD DT6201
 2521                     DCA DTFLD
 2522                     TAD I DTGO      /GET THE STARTING BLOCK #
 2523                     DCA DTBLK
 2524                     ISZ DTGO
 2525                     TAD DTM37       / AND SET THE BLOCK COUNT TO 37
 2526                     DCA DTBLCT
 2527             DTMNT,  TAD I DTDRV     /TEST FOR A SELECT ERROR
 2528                     SDLC
 2529                     SDRC
 2530                     AND DT100
 2531                     SZA CLA         /ERROR?
 2532                     JMP DTMNT       /YES - JUST WAIT FOR DRIVE
 2533                     DCA I DTBFF     /ZERO START ADDRESS (SINCE WE DO A WHOLE FIELD)
 2534                     CLA CLL         / & START DRIVE IN REVERSE INITIALLY
 2535                     JMP DTMOVE
 2536             DTNEXT, CHDF            /GET BACK TO OUR FIELD
 2537                     SDST
 2538                     SZA CLA         /CHECKSUM ERROR?
 2539                     JMP DTERR       /YES - NO RECOVERY HERE
 2540                     ISZ DTBLCT      /ANY MORE BLOCKS TO DO?
 2541                     SKP             /YES
 2542                     JMP DTEXIT      /NO - TAKE 'NORMAL' EXIT
 2543                     ISZ DTBLK       /INCREMENT THE BLOCK #
 2544             DTMOVE, CLA CML RTR     /GET THE MOTION BIT (1=FORWARD, 0=REVERSE)
 2545                     TAD DT1000      / & ADD IN THE 'GO' BIT
 2546                     TAD I DTDRV

      /TSS/8 CONFIGURATION FOR UWM                                       Page 62


 2547                     SDLC            /THEN START THE DRIVE
 2548                     JMS DTRDQD
 2549                     JMS DTRDQD
 2550                     CLA
 2551             DTSRCH, SDSS            /WAIT FOR SINGLE-LINE FLAG
 2552                     JMP .-1
 2553                     SDRC
 2554                     CLL RTL
 2555                     AND DT374       /ISOLATE THE MARK-TRACK BITS
 2556                     TAD DTM110
 2557                     SNA             /IS IT THE END-ZONE?
 2558                     JMP DTENDZ      /YES
 2559                     TAD DTM20
 2560                     SZA CLA         /IS IT A BLOCK MARK?
 2561                     JMP DTSRCH      /NOPE - KEEP LOOKING
 2562                     SDRD            /YES - GET THE BLOCK NUMBER
 2563                     SZL             /ARE WE IN REVERSE?
 2564                     TAD DT3         /YES - ALLOW 3 BLOCKS FOR TURNAROUND
 2565                     CMA
 2566                     TAD DTBLK       / (WATCH THE LINK HERE)
 2567                     CMA
 2568                     SNA             /IS THIS THE RIGHT BLOCK?
 2569                     JMP DTFND       /YES
 2570                     SZL CLA         /NO - ARE WE HEADED FOR IT?
 2571                     JMP DTSRCH      /YES - KEEP GOING
 2572             DTENDZ, SDRC            /GET OUR DIRECTION
 2573                     CLL RTL
 2574                     SZL CLA         /ARE WE IN REVERSE?
 2575                     JMP DTMOVE      /YES - TURN AROUND
 2576             DTERR,  ISZ DTERCT      /STEP THE ERROR COUNTER
 2577                     JMP DTMOVE      / & TRY AGAIN
 2578                     SKP
 2579             
 2580             /HERE WE STOP THE TAPE AND RETURN.
 2581             DTEXIT, ISZ DTGO        /FIX FOR THE NORMAL RETURN
 2582             DTQUIT, CLA CLL
 2583                     CHDF            /GET BACK TO OUR FIELD
 2584                     TAD I DTDRV     /STOP THE DRIVE
 2585                     SDLC
 2586                     CLA
 2587                     JMP I DTGO      /THEN RETURN
 2588             /WE FOUND THE BLOCK - NOW PERFORM THE OPERATION.
 2589             DTFND,  SZL CLA         /ARE WE GOING THE RIGHT WAY?
 2590                     JMP DTMOVE      /NO - TURN AROUND
 2591             DTFLD,  HLT             /YES - GET TO THE DATA FIELD
 2592                     JMP I .+1       / & GO PERFORM THE I/O
 2593                     DTPAGE
 2594             
 2595             /SUBROUTINE TO READ ONE FULL WORD FROM TAPE
 2596             DTRDQD, 0
 2597                     SDSQ            /WAIT FOR FULL WORD
 2598                     JMP .-1
 2599                     SDRD            /THEN READ IT
 2600                     JMP I DTRDQD    / & RETURN
 2601             
 2602             /SUBROUTINE TO WRITE ONE FULL WORD ONTO TAPE.
 2603             DTWRQD, 0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 63


 2604                     JMS I DTEQF     /UPDATE THE CHECKSUM
 2605                     SDSQ            /NOW WAIT FOR A WORD-BOUNDARY
 2606                     JMP .-1
 2607                     SDLD
 2608                     CLA
 2609                     JMP I DTWRQD
 2610             
 2611             DTBFF,  DTBUFF
 2612             DTBLCT, 0
 2613             DTBLK,  0
 2614             DTDRV,  DTUNIT
 2615             DTEQF,  DTEQUF
 2616             DTERCT, 0
 2617             DTFNC,  DTFUNC
 2618             DT3,    3
 2619             DT70,   70
 2620             DT100,  100
 2621             DT374,  374
 2622             DT1000, 1000
 2623             DT4000, 4000
 2624             DT6201, CDF
 2625             DTM20,  -20
 2626             DTM37,  -37
 2627             DTM110, -110
 2628                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 64


 2629                     PAGE
 2630             
 2631             /4K DISC READ OR WRITE
 2632             
 2633 23000 7300  LOAD,   CLA CLL
 2634 23001 6224          RIF
 2635 23002 1074          TAD C6203
 2636 23003 3061          DCA INIF
 2637 23004 4060          CHDF
 2638 23005 4540  LOAD1,  MESSAG          / "READ OR WRITE - "
 2639 23006 0666           RDORWT
 2640 23007 4540          MESSAG
 2641 23010 0736           DASH
 2642 23011 4543          GETIN
 2643 23012 1464          TAD I INBUF
 2644 23013 1253          TAD CMR
 2645 23014 7450          SNA             /FIRST CHAR "R"?
 2646 23015 5222          JMP .+5         /YES - DO A READ
 2647 23016 1254          TAD CMW
 2648 23017 7640          SZA CLA         /NO - A "W"?
 2649 23020 5205          JMP LOAD1       /NO - ASK AGAIN
 2650 23021 7326          CLA CLL CML RTL /YES - SET FOR "WRITE"
 2651 23022 1255          TAD C6603       / OR A "READ"
 2652 23023 3243          DCA RORW
 2653 23024 4540          MESSAG          / "FIELD # - "
 2654 23025 0676           FIELD1
 2655 23026 4543          GETIN
 2656 23027 4541          OCTIN           /GET THE FIELD #
 2657 23030 0035          AND C0007
 2658 23031 3244          DCA FLDNUM
 2659 23032 4540          MESSAG          / "TRACK # - "
 2660 23033 0704           TRACK
 2661 23034 4543          GETIN
 2662 23035 4541          OCTIN
 2663 23036 7106          CLL RTL
 2664 23037 7004          RAL
 2665 23040 1244          TAD FLDNUM
 2666 23041 3244          DCA FLDNUM
 2667 23042 4536          DISC            /NOW READ THE TRACK
 2668 23043 0000  RORW,    0
 2669 23044 0000  FLDNUM,  0
 2670 23045 7410          SKP             /ERROR
 2671 23046 5251          JMP .+3
 2672 23047 4540          MESSAG          / "OOPS" - DISC ERROR
 2673 23050 0712           OOPS
 2674 23051 5652          JMP I .+1       /NOW BACK TO XDDT
 2675 23052 7000          7000
 2676             
 2677 23053 7456  CMR,    -"R
 2678 23054 7773  CMW,    "R-"W
 2679 23055 6603  C6603,  6603

      /TSS/8 CONFIGURATION FOR UWM                                       Page 65


 2680 23056 0000  CLEAR,  0
 2681 23057 7200          CLA
 2682 23060 4536          DISC            /READ MONITOR II INTO FIELD 1
 2683 23061 6603           DMAR
 2684 23062 0041           TS8DEX+11
 2685 23063 7402          HLT             /ERROR?
 2686 23064 1270          TAD CLRDEV
 2687 23065 4271          JMS ZERO        /ZERO OUT FREE CORE
 2688 23066 4060          CHDF
 2689 23067 5656          JMP I CLEAR
 2690             
 2691 23070 3200  CLRDEV, DEVTBL
 2692             
 2693 23071 0000  ZERO,   0               /CLEAR FIELD 1 FROM C(AC) TO 7777
 2694 23072 3300          DCA CLR2        /BEGINNING ADDRESS
 2695 23073 6211          DATFLD
 2696 23074 3700          DCA I CLR2
 2697 23075 2300          ISZ CLR2
 2698 23076 5274          JMP .-2
 2699 23077 5671          JMP I ZERO
 2700 23100 0000  CLR2,   0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 66


 2701             /SUBROUTINE TO SEND A MESSAGE TO ALL REAL CONSOLE PRINTERS.
 2702 23101 0000  PRTAL0, 0
 2703 23102 1701          TAD I PRTAL0    /GET THE MESSAGE ADDRESS
 2704 23103 3312          DCA PRAMSG
 2705 23104 2301          ISZ PRTAL0
 2706 23105 1317          TAD PRAMAX
 2707 23106 3015          DCA AXS1        /SET THE CONSOLE COUNTER
 2708 23107 3016          DCA AXS2
 2709 23110 1016  PRTAL1, TAD AXS2        /GET THE CONSOLE NUMBER
 2710 23111 4320          JMS QUEUE       / AND SEND THE MESSAGE
 2711 23112 0000  PRAMSG,  0
 2712 23113 2016          ISZ AXS2
 2713 23114 2015          ISZ AXS1
 2714 23115 5310          JMP PRTAL1      /DO THE NEXT ONE
 2715 23116 5701          JMP I PRTAL0    / AND RETURN
 2716             /
 2717 23117 7766  PRAMAX, -TRUKBD-1
 2718             /
 2719             /SUBROUTINE TO SEND A MESSAGE TO A PARTICULAR CONSOLE.
 2720             /CALLED WITH THE CONSOLE NUMBER IN THE AC.
 2721 23120 0000  QUEUE,  0
 2722 23121 3373          DCA QTTY
 2723 23122 1720          TAD I QUEUE     /GET THE MESSAGE ADDRESS
 2724 23123 3372          DCA QPTR
 2725 23124 2320          ISZ QUEUE
 2726 23125 1373          TAD QTTY
 2727 23126 7124          CLL CML RAL
 2728 23127 1270          TAD CLRDEV
 2729 23130 3371          DCA QDEV        /POINTS TO DEVTBL ENTRY
 2730 23131 6211          DATFLD
 2731 23132 1771          TAD I QDEV
 2732 23133 7640          SZA CLA         /ALREADY HAVE A DDB?
 2733 23134 5346          JMP QUEUE1      /YES - JUST ADD TO THE BUFFER
 2734 23135 1373          TAD QTTY
 2735 23136 6201          CDF
 2736 23137 3512          DCA I SOURCE    /NO - SET 'SOURCE' FOR 'GETDDB'
 2737 23140 4060          CHDF
 2738 23141 1371          TAD QDEV
 2739 23142 6202          CIF
 2740 23143 4572          GETDDB          /NOW FETCH A DDB
 2741 23144 5720          JMP I QUEUE     /NONE THERE - JUST RETURN
 2742 23145 6211          DATFLD
 2743 23146 1771  QUEUE1, TAD I QDEV
 2744 23147 3371          DCA QDEV        /SAVE THE DDB ADDRESS
 2745 23150 6201          CDF
 2746 23151 1370          TAD C0177
 2747 23152 3512          DCA I SOURCE    /FUDGE SO 'STORE' ALLOWS UP TO 160 CHARACTERS
 2748 23153 4060          CHDF
 2749 23154 1772  QUEUE2, TAD I QPTR      /GET A CHARACTER
 2750 23155 7450          SNA             /END OF MESSAGE?
 2751 23156 5720          JMP I QUEUE     /YES - RETURN
 2752 23157 6201          CDF
 2753 23160 3431          DCA I TTCHAR    /NO - STORE IT IN FIELD 0
 2754 23161 4060          CHDF
 2755 23162 6202          CIF
 2756 23163 1371          TAD QDEV
 2757 23164 4575          STORE           /NOW BUFFER IT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 67


 2758 23165 5720          JMP I QUEUE     /NO ROOM - JUST RETURN
 2759 23166 2372          ISZ QPTR
 2760 23167 5354          JMP QUEUE2
 2761             /
 2762 23170 0177  C0177,  177
 2763 23171 0000  QDEV,   0
 2764 23172 0000  QPTR,   0
 2765 23173 0000  QTTY,   0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 68


 2766                     PAGE
 2767             
 2768                     IFZERO TD8E <
 2769                     IFNZRO CPU-3 <
 2770             
 2771             /
 2772             /TC08 BOOTSTRAP LOADER; THIS IS WRITTEN IN BLOCK ZERO
 2773             /OF TC08 SYSTEM DUMP TAPES. THIS ALLOWS THE SYSTEM TO
 2774             /BE BROUGHT UP USING THE TC08 DECTAPE BOOTSTRAP.
 2775             
 2776 23200 5220  TCHEAD, JMP TCHD1       /START LOAD SEQUENCE
 2777 23201 0000  TCBLKS, 0       /# OF TRACKS INIT SHOULD LOAD ONCE BOOTSTRAPPED
 2778 23202 3475  TCDTA,  DTA     /READ/WRITE FLAG IN 'INIT'
 2779 23203 0020  TCFLD,  INFLD   /FIELD TO LOAD 'INIT'
 2780 23204 7677  TCINBK, -101    /DECTAPE LOCATION OF 'INIT'
 2781 23205 0061  TCINIF, INIF    /DATA-FIELD SELECT ROUTINE IN 'INIT'
 2782 23206 7755  TCMA,   7755    /DATA-BREAK MEMORY ADDRESS
 2783 23207 7754  TCWC,   7754    /DATA-BREAK WORD-COUNT
 2784 23210 7777  TCWRD,  7777    /ADDR. OF WORD-BUFFER USED TO CHECK BLOCK NUMBER
 2785 23211 0130  TC130,  130     /READ FUNCTION
 2786 23212 0200  TC200,  200
 2787 23213 0600  TC600,  600
 2788 23214 0610  TC610,  610
 2789             
 2790                     IFNZRO TCHEAD+16-.&4000 <GLITCH>
 2791       3216          *TCHEAD+16
 2792 23216 6771          DTSF            /THIS OVERLAYS THE TC08 BOOTSTRAP
 2793 23217 5216          JMP .-1
 2794 23220 7300  TCHD1,  CLA CLL
 2795 23221 6774          DTLB            /SET FIELD ZERO FOR SEARCH
 2796 23222 1213          TAD TC600
 2797 23223 6766          DTCA DTXA       /FIRST REWIND THE TAPE
 2798 23224 6771          DTSF
 2799 23225 5224          JMP .-1
 2800 23226 6201          CDF
 2801 23227 1210          TAD TCWRD
 2802 23230 3606          DCA I TCMA      /SET THE WORD-BUFFER
 2803 23231 1214          TAD TC610       /NOW SEARCH FORWARD
 2804 23232 6764  TCHD2,  DTXA            /SET THE FUNCTION
 2805 23233 6773          DTSF DTRB       / AND WAIT FOR THE FLAG
 2806 23234 5233          JMP .-1
 2807 23235 7710          SPA CLA         /ANY ERRORS?
 2808 23236 5220          JMP TCHD1       /YES - RETRY
 2809 23237 1610          TAD I TCWRD
 2810 23240 1204          TAD TCINBK
 2811 23241 7640          SZA CLA         /REACHED 'INIT' BLOCK YET?
 2812 23242 5232          JMP TCHD2       /NO - CONTINUE SEARCH
 2813 23243 1203          TAD TCFLD
 2814 23244 6774          DTLB            /YES - SET FIELD FOR 'INIT'
 2815 23245 3607          DCA I TCWC      / AND CLEAR THE WORD-COUNT TO TRANSFER 4K
 2816 23246 7240          CLA CMA
 2817 23247 3606          DCA I TCMA
 2818 23250 1211          TAD TC130
 2819 23251 6764          DTXA            /NOW START READ OF 'INIT'
 2820 23252 6773          DTSF DTRB
 2821 23253 5252          JMP .-1
 2822 23254 7710          SPA CLA         /ANY ERRORS?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 69


 2823 23255 5220          JMP TCHD1       /YES - RETRY
 2824 23256 1212          TAD TC200
 2825 23257 6764          DTXA            /ALL DONE - STOP THE DRIVE
 2826 23260 6221  TCUDF,  CDF INFLD       /GET TO THE 'INIT' FIELD
 2827 23261 1260          TAD TCUDF
 2828 23262 3605          DCA I TCINIF    /SET UP THE DATA-FIELD SELECT ROUTINE
 2829 23263 1302          TAD TCSVT1
 2830 23264 3700          DCA I SVUP1A    /PASS BACK THE OLD UPTIME
 2831 23265 1303          TAD TCSVT2
 2832 23266 3701          DCA I SVUP2A
 2833 23267 7240          CLA CMA
 2834 23270 3602          DCA I TCDTA     /SET THE READ/WRITE FLAG TO 'READ'
 2835 23271 6223          CIF CDF INFLD
 2836 23272 1201          TAD TCBLKS
 2837 23273 7450          SNA             /SHOULD WE LOAD THE SYSTEM?
 2838 23274 5676          JMP I .+2       /NO - JUST START 'INIT'
 2839 23275 5677          JMP I .+2       /YES - WE DO THIS ONLY WHEN BUILDING THE SYSTEM
 2840 23276 4216          SUPER
 2841 23277 3415          SYSBLD
 2842             /
 2843 23300 0153  SVUP1A, SVUPT1
 2844 23301 0154  SVUP2A, SVUPT2
 2845 23302 0000  TCSVT1, 0
 2846 23303 0000  TCSVT2, 0
 2847             
 2848             /
 2849             /SUBROUTINE TO WRITE OUT THE PRECEDING TAPE HEADER.
 2850 23304 0000  WRTHD,  0
 2851 23305 7300          CLA CLL
 2852 23306 1153          TAD SVUPT1      /COPY OVER THE SAVED UPTIME
 2853 23307 3302          DCA TCSVT1
 2854 23310 1154          TAD SVUPT2
 2855 23311 3303          DCA TCSVT2
 2856 23312 6774  WRTHD1, DTLB            /USE FIELD ZERO FOR SEARCH
 2857 23313 1213          TAD TC600
 2858 23314 6766          DTCA DTXA       /REWIND THE FIRST REEL
 2859 23315 4750          JMS I WHWAIT    / & WAIT FOR THE FLAG
 2860 23316 5312          JMP WRTHD1      /SELECT ERROR - TRY AGAIN
 2861 23317 7410          SKP             /MUST BE END-ZONE ERROR
 2862 23320 5312          JMP WRTHD1      /NO ERROR - BUT WE SHOULD GET ONE
 2863 23321 6201          CDF
 2864 23322 1210          TAD TCWRD
 2865 23323 3606          DCA I TCMA      /SET THE WORD-POINTER
 2866 23324 1214          TAD TC610
 2867 23325 4750          JMS I WHWAIT    / AND SEARCH FORWARD
 2868 23326 5312          JMP WRTHD1      /SELECT ERROR
 2869 23327 5312          JMP WRTHD1      /OTHER ERROR
 2870 23330 6201          CDF
 2871 23331 1610          TAD I TCWRD
 2872 23332 7640          SZA CLA         /AT BLOCK ZERO?
 2873 23333 5312          JMP WRTHD1      /NO - TRY AGAIN
 2874 23334 6224          RIF
 2875 23335 6774          DTLB            /YES - SET THE CURRENT FIELD
 2876 23336 1352          TAD WRTLEN
 2877 23337 3607          DCA I TCWC      / AND THE WORD-COUNT
 2878 23340 1351          TAD WRTADR
 2879 23341 3606          DCA I TCMA      / AND THE ADDRESS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 70


 2880 23342 1347          TAD WH50
 2881 23343 4750          JMS I WHWAIT    /THEN START THE WRITE
 2882 23344 5312          JMP WRTHD1      /SELECT ERROR - TRY AGAIN
 2883 23345 5312          JMP WRTHD1      /OTHER ERROR - START OVER
 2884 23346 5704          JMP I WRTHD     /NO ERRORS - JUST RETURN
 2885             /
 2886 23347 0050  WH50,   50
 2887 23350 2700  WHWAIT, DTWAIT
 2888 23351 3177  WRTADR, TCHEAD-1
 2889 23352 7600  WRTLEN, -200
 2890             
 2891       3354          *TCHEAD+154
 2892 23354 7755          7755    /THESE OVERLAY THE BREAK LOCATIONS DURING
 2893 23355 7755          7755    / THE INITIAL LOAD
 2894                     >>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 71


 2895                     IFNZRO TD8E <   /CONTINUATION OF TD8E DECTAPE HANDLER
 2896             /
 2897             /NOW SET UP TO DO THE READ OR WRITE.
 2898             DTPAGE, TAD DTM201      /SET (-) WORDS / BLOCK
 2899                     DCA DTWDCT
 2900             DTRVGD, SDSS            /NOW WAIT FOR REVERSE-GUARD
 2901                     JMP .-1
 2902                     SDRC
 2903                     AND DT77
 2904                     TAD DTM32
 2905                     SZA CLA         /IS IT REVERSE-GUARD?
 2906                     JMP DTRVGD      /NO - KEEP LOOKING
 2907                     TAD DTFUNC      /GET THE FUNCTION-WORD
 2908                     RTR
 2909                     SZL CLA         /READ?
 2910                     JMP DTREAD      /YES
 2911             DTWRIT, SDRC            /NO - WRITE
 2912                     AND DT300
 2913                     SZA CLA         /WRITE-LOCK OR SELECT ERROR?
 2914                     JMP I DTBAD     /YES - JUST DIE
 2915                     JMS I DTRQD     / (THIS WORD UNUSED)
 2916                     CLA
 2917                     TAD DT1400      /GET THE FUNCTION
 2918                     TAD DTUNIT      / AND THE UNIT
 2919                     SDLC            / AND START THE TRANSFER
 2920                     CLA CMA         /PUT 77 INTO REVERSE CHECKSUM
 2921                     JMS I DTWQD
 2922                     CLA CMA         / AND INITIALIZE OUR CHECKSUM
 2923                     DCA DTCKSM
 2924             DTWRLP, TAD I DTBUFF    /OK, NOW GET A DATA WORD
 2925                     JMS I DTWQD     / & WRITE IT OUT
 2926                     ISZ DTBUFF      /THEN MOVE THE POINTER
 2927                     NOP
 2928                     ISZ DTWDCT      / & STEP THE WORD-COUNT
 2929                     JMP DTWRLP      /THEN GET THE NEXT
 2930                     JMS DTCHEK      /ALL DONE - UPDATE THE CHECKSUM
 2931                     JMS I DTWQD     / AND WRITE IT OUT
 2932                     JMS I DTWQD
 2933                     CLL CML         /SET TO START FORWARD
 2934                     JMP I DTNXTA    / AND GO DO THE NEXT BLOCK
 2935             
 2936             DTREAD, JMS I DTRQD     /SKIP THE CONTROL-WORDS
 2937                     JMS I DTRQD
 2938                     JMS I DTRQD
 2939                     AND DT77
 2940                     TAD DT7700
 2941                     DCA DTCKSM
 2942             DTRDLP, JMS I DTRQD     /OK, GET A WORD FROM TAPE
 2943                     JMS DTEQUF      / & INCLUDE IT IN THE CHECKSUM
 2944                     DCA I DTBUFF    / THEN STORE IT
 2945                     ISZ DTBUFF
 2946                     NOP
 2947                     ISZ DTWDCT      /STEP THE WORD-COUNT
 2948                     JMP DTRDLP
 2949                     JMS I DTRQD     /GET THE CHECKSUM
 2950                     AND DT7700
 2951                     JMS DTEQUF

      /TSS/8 CONFIGURATION FOR UWM                                       Page 72


 2952                     JMS DTCHEK      / & CUT IT DOWN
 2953                     JMP I DTNXTA    /THEN GO CHECK IT & GET NEXT BLOCK
 2954             
 2955             /SUBROUTINE TO UPDATE THE CHECKSUM.
 2956             DTEQUF, 0
 2957                     CMA             /ALTHOUGH DECTAPE CHECKSUMS ARE
 2958                     DCA DTEQF1      / THE EQUIVALENCE OF ALL WORDS 6 BITS
 2959                     TAD DTEQF1      / AT A TIME, EQUIVALENCE IS ASSOCIATIVE
 2960                     AND DTCKSM      / SO WE DO IT 12 BITS AT A TIME & CONDENSE
 2961                     CIA             / IT LATER. THIS ROUTINE USES THESE IDENTITIES:
 2962                     CLL RAL         /       A+B=(A.XOR.B)+2*(A.AND.B)
 2963                     TAD DTEQF1      /       A.EQU.B=.NOT.(A.XOR.B)=A.XOR.(.NOT.B)
 2964                     TAD DTCKSM      /       A.EQU.B=(A+(.NOT.B))-2*(A.AND.(.NOT.B))
 2965                     DCA DTCKSM
 2966                     TAD DTEQF1
 2967                     CMA
 2968                     JMP I DTEQUF
 2969             DTEQF1, 0
 2970             
 2971             /SUBROUTINE TO CONDENSE THE CHECKSUM (SEE COMMENTS IN DTEQUF).
 2972             DTCHEK, 0
 2973                     CLA
 2974                     TAD DTCKSM
 2975                     CMA
 2976                     CLL RTL; RTL; RTL
 2977                     JMS DTEQUF
 2978                     CLA CLL CML     /FORCES LINK ON AT DTNEXT
 2979                     TAD DTCKSM
 2980                     AND DT7700
 2981                     JMP I DTCHEK
 2982             
 2983             DTBAD,  DTQUIT
 2984             DTBUFF, 0
 2985             DTCKSM, 0
 2986             DTERRS, 0
 2987             DTFUNC, 0
 2988             DTNXTA, DTNEXT
 2989             DTRQD,  DTRDQD
 2990             DTUNIT, 0
 2991             DTWDCT, 0
 2992             DTWQD,  DTWRQD
 2993             DT77,   77
 2994             DT300,  300
 2995             DT1400, 1400
 2996             DT7700, 7700
 2997             DTM32,  -32
 2998             DTM201, -201
 2999                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 73


 3000       3400          *3400
 3001             
 3002             /DISC DUMP ON DTA1
 3003             /DECTAPE BLOCK 40N+1=DISC TRAC N
 3004             
 3005 23400 4535  DSKDMP, COMGET          /SCAN TO FIND A COMMA
 3006 23401 5211          JMP DSKD1       /BUFFER EMPTY - DUMP THE WHOLE DISC
 3007 23402 1326          TAD MCOM
 3008 23403 7640          SZA CLA         /COMMA?
 3009 23404 5200          JMP DSKDMP      /NO
 3010 23405 4465          NUMBIN          /YES - READ THE NUMBER OF 4K BLOCKS TO DUMP
 3011 23406 7511           -"7
 3012 23407 5656          JMP I SUPERA    /BAD #
 3013 23410 7041          CIA
 3014             DSKD1,
 3015                     IFZERO TD8E <
 3016                     IFNZRO CPU-3 <
 3017 23411 3733          DCA I HDBLKA    /SET THE COUNT INTO THE TC08 BOOTSTRAP
 3018 23412 1733          TAD I HDBLKA
 3019                     >>
 3020 23413 7450          SNA             /IF ZERO, DO THE WHOLE DISC
 3021 23414 1323          TAD DSKSZ
 3022 23415 3322  SYSBLD, DCA DSKCNT      /ENTRY FROM SYSTEM DECTAPE BOOTSTRAP
 3023 23416 7100          CLL
 3024 23417 1275          TAD DTA
 3025 23420 7640          SZA CLA         /READ OR WRITE?
 3026 23421 7120          STL             /READ - SET L=1
 3027 23422 7420          SNL             /READ OR WRITE?
 3028 23423 1032          TAD C0002       /WRITE
 3029 23424 1320          TAD C0013       /READ - START WITH UNIT # 0
 3030 23425 3277          DCA DSKDTP
 3031 23426 7001          IAC
 3032 23427 3300          DCA DSKDTP+1
 3033 23430 7430          SZL             /READ FROM TAPE?
 3034 23431 1032          TAD C0002       /YES - THEN WE WRITE ONTO DISC
 3035 23432 1325          TAD D6603       /NO - WE READ FROM DISC
 3036 23433 3261          DCA DSKDKP
 3037 23434 7001          IAC
 3038 23435 3262          DCA DSKDKP+1
 3039 23436 7430          SZL
 3040 23437 7001          IAC
 3041 23440 1327          TAD DSKDSA      /GET THE POINTER-LIST
 3042 23441 3275          DCA DTA
 3043 23442 1675          TAD I DTA
 3044 23443 3251          DCA DSKDRD      /SET THE READ-SUBROUTINE CALL
 3045 23444 2275          ISZ DTA
 3046 23445 1675          TAD I DTA
 3047 23446 3252          DCA DSKDWR      /SET THE WRITE-SUBROUTINE CALL
 3048             
 3049                     IFZERO TD8E <
 3050                     IFNZRO CPU-3 <
 3051 23447 7420          SNL             /IS THIS A WRITE?
 3052 23450 4734          JMS I WRTHDA    /YES - WRITE OUT A BOOTSTRAP LOADER
 3053                     >>
 3054             /
 3055             /NOW WE TRANSFER THE SPECIFIED NUMBER BLOCKS
 3056             /FROM OUR INPUT-DEVICE (TAPE OR DISC) TO OUR OUTPUT DEVICE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 74


 3057             /(DISC OR TAPE).
 3058 23451 7402  DSKDRD,  HLT
 3059 23452 7402  DSKDWR,  HLT
 3060 23453 2322          ISZ DSKCNT
 3061 23454 5251          JMP DSKDRD
 3062 23455 5656          JMP I .+1
 3063 23456 4216  SUPERA, SUPER
 3064             
 3065 23457 0000  DSK,    0
 3066 23460 4536          DISC
 3067 23461 0000  DSKDKP,  0
 3068 23462 0000           0
 3069 23463 5270          JMP DSK1
 3070 23464 1262          TAD DSKDKP+1
 3071 23465 1073          TAD C0010
 3072 23466 3262          DCA DSKDKP+1
 3073 23467 5657          JMP I DSK
 3074             DSK1,
 3075 23470 6616          IFZERO RF08     <DIMA>
 3076                     IFZERO RF08-40  <DEAC>
 3077 23471 0032          AND C0002
 3078 23472 7650          SNA CLA         /'NXD' ERROR?
 3079 23473 5260          JMP DSK+1       /NO - JUST TRY AGAIN
 3080 23474 5657          JMP I DSK       /YES - RETURN NORMALLY
 3081             
 3082 23475 0000  DTA,    0
 3083 23476 4724          JMS I DSKTGO
 3084 23477 0000  DSKDTP,  0
 3085 23500 0000           0
 3086 23501 5276          JMP .-3         /ERROR - JUST TRY AGAIN
 3087 23502 1300          TAD DSKDTP+1
 3088 23503 1317          TAD C0040
 3089 23504 3300          DCA DSKDTP+1
 3090 23505 1300          TAD DSKDTP+1
 3091 23506 1317          TAD C0040
 3092 23507 1321          TAD CM2702
 3093 23510 7710          SPA CLA         /REACHED THE END OF THIS REEL?
 3094 23511 5675          JMP I DTA       /NO - JUST RETURN
 3095 23512 1037          TAD C0100       /YES - INCREMENT THE UNIT NUMBER
 3096 23513 1277          TAD DSKDTP
 3097 23514 3277          DCA DSKDTP
 3098 23515 3300          DCA DSKDTP+1
 3099 23516 5675          JMP I DTA
 3100             
 3101             
 3102 23517 0040  C0040,  40
 3103 23520 0013  C0013,  13
 3104 23521 5076  CM2702, -2702
 3105 23522 0000  DSKCNT, 0
 3106 23523 7700  DSKSZ,  -DSKSIZ
 3107 23524 2600  DSKTGO, DTGO
 3108 23525 6603  D6603,  6603
 3109 23526 7524  MCOM,   -254
 3110 23527 3530  DSKDSA, .+1
 3111 23530 4257          JMS DSK
 3112 23531 4275          JMS DTA
 3113 23532 4257          JMS DSK

      /TSS/8 CONFIGURATION FOR UWM                                       Page 75


 3114             
 3115                     IFZERO TD8E <
 3116                     IFNZRO CPU-3 <
 3117 23533 3201  HDBLKA, TCBLKS
 3118 23534 3304  WRTHDA, WRTHD
 3119                     >>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 76


 3120                     PAGE
 3121             /FILE PHANTOM AND DISC REFRESHER
 3122             /WRITE NEW MFD ON DISC DIRECTLY ABOVE THE SWAPPING AREA
 3123             
 3124 23600 4537  REFCO0, YESNO           /"ARE YOU SURE"?
 3125 23601 0715           FIPREM
 3126 23602 5707          JMP I REFSUP    /NO
 3127 23603 4540          MESSAG          /YES - TELL HIM INITIAL PASSWORDS
 3128 23604 3726           NEWPAS
 3129 23605 4720          JMS I FIPBLT    /CLEAR FIELD 1
 3130 23606 4060          CHDF
 3131 23607 1312          TAD MFD1        /MOVE VIRGIN "MFD" TO FIELD 1
 3132 23610 3313          DCA COUNT2
 3133 23611 1713  FIPRF3, TAD I COUNT2    /GET A WORD
 3134 23612 2313          ISZ COUNT2
 3135 23613 7040          CMA
 3136 23614 7450          SNA             /REACHED THE END OF THE CANNED MFD?
 3137 23615 5224          JMP FIPRF1      /YES
 3138 23616 7040          CMA
 3139 23617 6211          DATFLD
 3140 23620 3711          DCA I COUNT     /NO - STORE THE WORD INTO FIP
 3141 23621 4060          CHDF
 3142 23622 2311          ISZ COUNT
 3143 23623 5211          JMP FIPRF3
 3144 23624 4536  FIPRF1, DISC            /WRITE OUT THE FRESH MFD
 3145 23625 6605           DMAW
 3146 23626 0311           SWDEX+JOBMAX^10+1
 3147 23627 7402          HLT             /DISC WRITE ERROR
 3148             
 3149             /INITIALIZE STORAGE ALLOCATION TABLE "SAT"
 3150             /THE SAT TABLE RESIDES IN FIP AT 7777 AND EXTENDS
 3151             /DOWN THRU 7777-(SATSIZ-1).  EACH BIT POSITION
 3152             /REPRESENTS 1 SEGMENT OF FILE STORAGE.
 3153             /SEGMENT 0 IS BIT 0 OF 7252,
 3154             /SEGMENT 1 IS BIT 1 OF 7252, ETC.   7252 =7777-(SATSIZ+2).
 3155             /LOCATION SATCNT=7777-(SATSIZ-1)+1 CONTAINS THE COUNT OF AVAILABLE
 3156             /SEGMENTS.  A SEGMENT IS AVAILABLE IF ITS SAT BIT HAS THE
 3157             /VALUE 0.
 3158             
 3159 23630 4716          JMS I FIPRFD    /FIP TO FIELD 1
 3160 23631 3304          DCA FIPRF2
 3161 23632 1317          TAD CENTBL
 3162 23633 4720          JMS I FIPBLT    /CLEAR ALL THE FIP TABLE SPACE
 3163 23634 1325          TAD SEGMAX
 3164 23635 3315          DCA STORE0      / # SEGS = DSKSIZ-JOBMAX-SWDEX^20-1
 3165 23636 7240          CLA CMA
 3166 23637 6211          DATFLD
 3167 23640 3721          DCA I SATBOT    /"-255"
 3168 23641 7344          CLL STA RAL     /SUBTRACT TWO SEGMENTS (FOR 1,2 UFD'S)
 3169 23642 1315          TAD STORE0      /SET SATCNT TO # DISC SEGMENTS-2
 3170 23643 3722          DCA I SATCNT    /"-254"
 3171 23644 7130          CLL CML RAR     /MARK SEGMENTS 0,1 FOR MFD,UFD USAGE
 3172 23645 7130          CLL CML RAR
 3173 23646 3710          DCA I SATTBL
 3174 23647 1315          TAD STORE0
 3175 23650 7500          SMA             /OVER 4000 SEGMENTS?
 3176 23651 5257          JMP .+6         /NO OK

      /TSS/8 CONFIGURATION FOR UWM                                       Page 77


 3177 23652 1324          TAD CM4004      /SUBTRACT 4004
 3178 23653 3315          DCA STORE0
 3179 23654 1323          TAD C0253       /253 WORDS =4004 SEGS
 3180 23655 3311          DCA COUNT
 3181 23656 1315          TAD STORE0
 3182 23657 1314          TAD C7764       /-14
 3183 23660 2311          ISZ COUNT       /COUNT # ZERO WORDS IN SAT
 3184 23661 7500          SMA
 3185 23662 5257          JMP .-3
 3186 23663 3315          DCA STORE0
 3187 23664 1311          TAD COUNT
 3188 23665 1310          TAD SATTBL
 3189 23666 1145          TAD C7777
 3190 23667 3311          DCA COUNT       /POINTS TO LAST NON-LOCKED WORD IN SAT
 3191 23670 7124          CLL CML RAL     /BUILD THE PARTIAL WORD FOR THE END
 3192 23671 2315          ISZ STORE0
 3193 23672 5270          JMP .-2
 3194 23673 3711          DCA I COUNT     /MARK END OF FILE STORAGE AS ALLOCATED
 3195 23674 5277          JMP FIPRF5
 3196 23675 7240  FIPRF4, CLA CMA
 3197 23676 3711          DCA I COUNT     /NOW LOCK-OUT THE REMAINDER OF SAT
 3198 23677 2311  FIPRF5, ISZ COUNT
 3199 23700 5275          JMP FIPRF4
 3200 23701 4060          CHDF
 3201 23702 4536          DISC            /NOW WRITE OUT THE NEW 'FIP'
 3202 23703 6605           DMAW
 3203 23704 0000  FIPRF2,  0
 3204 23705 7402          HLT
 3205 23706 5707          JMP I REFSUP    /RETURN TO 'INIT' SUPERVISOR
 3206             
 3207 23707 4216  REFSUP, SUPER
 3208 23710 7252  SATTBL, -SATSIZ+2
 3209             
 3210 23711 0000  COUNT,  0
 3211 23712 4111  MFD1,   MFD
 3212 23713 0000  COUNT2, 0
 3213 23714 7764  C7764,  -14
 3214 23715 0000  STORE0, 0
 3215 23716 4076  FIPRFD, FIPRD
 3216 23717 5600  CENTBL, ENTABL  /BOTTOM OF FIP TABLE AREA
 3217 23720 3071  FIPBLT, ZERO    /ROUTINE TO CLEAR FIELD 1 FROM C(AC)
 3218 23721 7250  SATBOT, -SATSIZ
 3219 23722 7251  SATCNT, -SATSIZ+1
 3220 23723 0253  C0253, 253
 3221 23724 3774  CM4004, -4004
 3222 23725 1157  SEGMAX, DSKSIZ-JOBMAX-SWDEX^20-1        /MAXIMUM SEGMENT NUMBER
 3223 23726 3711  NEWPAS, TEXT /_INITIAL MGR1 & MGR2 PASSWORDS ARE 'LOAD'_/
      23727 1611
      23730 2411
      23731 0114
      23732 4015
      23733 0722
      23734 6140
      23735 4640
      23736 1507
      23737 2262
      23740 4020

      /TSS/8 CONFIGURATION FOR UWM                                       Page 78


      23741 0123
      23742 2327
      23743 1722
      23744 0423
      23745 4001
      23746 2205
      23747 4047
      23750 1417
      23751 0104
      23752 4737
      23753 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 79


 3224             /ROUTINE TO MOVE XDDT INTO DATFLD (HIGH END OF TS8II).
 3225             
 3226 23754 0000  LODDT,  0
 3227 23755 1376          TAD KM4300
 3228 23756 3774          DCA I FRENDA    /MAKE FREE-CORE END AT 4300
 3229 23757 7240          CLA CMA
 3230 23760 1375          TAD K4300
 3231 23761 3015          DCA AXS1        /POINTS TO ORIGINAL
 3232 23762 1015          TAD AXS1
 3233 23763 3016          DCA AXS2        /POINTS TO COPY
 3234 23764 1415  LODLP,  TAD I AXS1      /GET A WORD
 3235 23765 6211          DATFLD
 3236 23766 3416          DCA I AXS2      / & MOVE IT
 3237 23767 4060          CHDF
 3238 23770 2373          ISZ DDTSIZ      /ARE WE DONE?
 3239 23771 5364          JMP LODLP       /NO
 3240 23772 5754          JMP I LODDT     /YES - RETURN
 3241             
 3242 23773 4501  DDTSIZ, 4300-7577       /THIS GETS DESTROYED
 3243 23774 1452  FRENDA, FREND
 3244 23775 4300  K4300,  4300
 3245 23776 3500  KM4300, -4300

      /TSS/8 CONFIGURATION FOR UWM                                       Page 80


 3246                     PAGE
 3247 24000 5601          JMP I .+1
 3248 24001 2000          2000
 3249             
 3250 24002 6157  CRTABL, RTABLE-1        /MFD SEGMENT #S
 3251 24003 6040  CUTABL, UTABLE
 3252 24004 6041  CUTAB1, UTABLE+1
 3253 24005 5577  FIPTBS, ENTABL-1        /START OF AREA TO CLEAR IN FIP
 3254 24006 0311  MFDLOC, SWDEX+JOBMAX^10+1       /DISC ADDRESS OF MFD
 3255 24007 0531  SATCON, SATSIZ+1
 3256             
 3257 24010 0000  PERSET, 0
 3258 24011 1206          TAD MFDLOC
 3259 24012 3215          DCA FRD1
 3260 24013 4536          DISC            /READ THE MFD INTO FIELD 1
 3261 24014 6603           DMAR
 3262 24015 0000  FRD1,    0
 3263 24016 5213          JMP .-3         /ERROR - TRY AGAIN
 3264 24017 1073          TAD C0010
 3265 24020 7104          CLL RAL
 3266 24021 3015          DCA AXS1
 3267 24022 1064          TAD INBUF
 3268 24023 3016          DCA AXS2
 3269 24024 1310          TAD M7          /SET THE MAX SEGMENT COUNT
 3270 24025 3215          DCA FRD1
 3271 24026 6211  FRD2,   CDF 10
 3272 24027 1415          TAD I AXS1
 3273 24030 4060          CHDF
 3274 24031 7450          SNA             /HAVE WE REACHED THE END?
 3275 24032 5236          JMP FRD3        /YES - WE'RE DONE
 3276 24033 3416          DCA I AXS2
 3277 24034 2215          ISZ FRD1
 3278 24035 5226          JMP FRD2
 3279 24036 3416  FRD3,   DCA I AXS2      /STORE A ZERO AS A TERMINATOR
 3280 24037 4276          JMS FIPRD       /FIP TO FIELD 1
 3281 24040 3273          DCA PERSE1
 3282 24041 1205          TAD FIPTBS      /CLEAR FIP TABLES
 3283 24042 3015          DCA AXS1
 3284 24043 6211          DATFLD
 3285 24044 3415          DCA I AXS1
 3286 24045 1015          TAD AXS1        /HAVE WE REACHED BOTTOM OF SAT?
 3287 24046 1207          TAD SATCON
 3288 24047 7640          SZA CLA
 3289 24050 5244          JMP .-4         /NO
 3290 24051 1202          TAD CRTABL      /MOVE MFD SEGMENT #S TO RTABLE
 3291 24052 3015          DCA AXS1
 3292 24053 1064          TAD INBUF
 3293 24054 3016          DCA AXS2
 3294 24055 4060  PERSE3, CHDF
 3295 24056 1416          TAD I AXS2
 3296 24057 6211          DATFLD
 3297 24060 7450          SNA
 3298 24061 5264          JMP .+3
 3299 24062 3415          DCA I AXS1
 3300 24063 5255          JMP PERSE3
 3301 24064 7324          CLL CLA CML RAL
 3302 24065 3603          DCA I CUTABL    /UTABLE=1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 81


 3303 24066 7040          CMA
 3304 24067 3604          DCA I CUTAB1    /UTABLE+1=-1
 3305 24070 4060          CHDF
 3306 24071 4536          DISC            /NOW WRITE IT OUT
 3307 24072 6605           DMAW
 3308 24073 0000  PERSE1,  0
 3309 24074 5271          JMP .-3
 3310 24075 5610          JMP I PERSET
 3311             
 3312             /ROUTINE TO READ 'FIP' INTO FIELD 1
 3313 24076 0000  FIPRD,  0
 3314 24077 1307          TAD PERFIP
 3315 24100 3303          DCA PERSE0
 3316 24101 4536          DISC            /READ FIP INTO FIELD 1
 3317 24102 6603           DMAR
 3318 24103 0000  PERSE0,  0
 3319 24104 5301          JMP .-3
 3320 24105 1303          TAD PERSE0
 3321 24106 5676          JMP I FIPRD
 3322             
 3323 24107 0011  PERFIP, FIPDEX^2+1      /DISC ADDRESS OF FIP
 3324 24110 7771  M7,     -7
 3325             /
 3326             /INITIAL MFD AFTER REFRESHING
 3327 24111 0000  MFD,    0
 3328 24112 0000          0
 3329 24113 0000          0
 3330 24114 0010          10
 3331 24115 0000          0
 3332 24116 0000          0
 3333 24117 0000          0
 3334 24120 0000          0
 3335             
 3336 24121 0001          1               /0,1 PROJ,PROG NUMBER
 3337 24122 5457          5457    /"LOAD"
 3338 24123 4144          4144
 3339 24124 0030          30              /NEXT ENTRY
 3340 24125 0037          37              /PROTECTION
 3341 24126 0000          0
 3342 24127 0000          0
 3343 24130 0020          20              /FIRST RETREIVAL BLOCK AT WORD 10
 3344             
 3345 24131 0000          0
 3346 24132 0001          1               /SEGMENT 1 IS THE ONLY ONE AROUND
 3347 24133 0000          0               /NO OTHER SEGMENTS YET
 3348 24134 0000          0               /FINISH UP THE BLOCK
 3349 24135 0000          0
 3350 24136 0000          0
 3351 24137 0000          0
 3352 24140 0000          0
 3353             
 3354 24141 0002          2               /0,2 PROJ,PROG NUMBER
 3355 24142 5457          5457    /"LOAD"
 3356 24143 4144          4144
 3357 24144 0000          0               /NO OTHER ENTRIES
 3358 24145 0032          32              /PROTECTION
 3359 24146 0000          0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 82


 3360 24147 0000          0
 3361 24150 0040          40              /SECONDS RETRIEVAL BLOCK
 3362             
 3363 24151 0000          0               /ONLY WINDOW
 3364 24152 0002          2               /SEGMENT #2
 3365 24153 7777          7777            /TERMINATE THE STRING
 3366 24154 3737  UPMSG,  TEXT '__TSS/8 RESTARTED_PLEASE LOGIN__.'
      24155 2423
      24156 2357
      24157 7040
      24160 2205
      24161 2324
      24162 0122
      24163 2405
      24164 0437
      24165 2014
      24166 0501
      24167 2305
      24170 4014
      24171 1707
      24172 1116
      24173 3737
      24174 5600

      /TSS/8 CONFIGURATION FOR UWM                                       Page 83


 3367                     PAGE
 3368                     IFNZRO 4200-.   <GLITCH>
 3369             /INIT SUPERVISOR
 3370             /OVERLAYS XDDT PERMANENT SYMBOL TABLE
 3371 24200 5216  MANUAL, JMP SUPER       /STARTED IN 'SI' - DON'T GRAB THE DATE & TIME
 3372 24201 3147  AUTOST, DCA AUTOSW      /SET (OR CLEAR) THE AUTO-RESTART FLAG
 3373 24202 6201          CDF
 3374 24203 1451          TAD I CLK1
 3375 24204 3150          DCA SVCLK1      /SAVE THE CURRENT TIME
 3376 24205 1450          TAD I CLK2
 3377 24206 3151          DCA SVCLK2
 3378 24207 1566          TAD I DATE
 3379 24210 3152          DCA SVDATE      / AND THE DATE
 3380 24211 6211          DATFLD
 3381 24212 1704          TAD I UPTM1B    / AND THE SYSTEM UPTIME
 3382 24213 3153          DCA SVUPT1
 3383 24214 1705          TAD I UPTM2B
 3384 24215 3154          DCA SVUPT2
 3385 24216 6224  SUPER,  RIF
 3386 24217 1074          TAD C6203
 3387 24220 3061          DCA INIF
 3388 24221 4060          CHDF
 3389 24222 1147          TAD AUTOSW
 3390 24223 7640          SZA CLA         /AUTOMATIC RESTART?
 3391 24224 5667          JMP I SYSINA    /YES
 3392 24225 4540          MESSAG
 3393 24226 0746           LDXRS          /LOAD, DUMP, XDDT, REFRESH, START??
 3394 24227 4543          GETIN           /WAIT FOR REPLY
 3395 24230 1464          TAD I INBUF
 3396 24231 1300          TAD CM0314      /LOAD?
 3397 24232 7450          SNA
 3398 24233 5271          JMP SUPLOD      /YES
 3399 24234 1073          TAD C0010       /DUMP?
 3400 24235 7650          SNA CLA
 3401 24236 5272          JMP SUPDMP      /YES
 3402             
 3403 24237 1464          TAD I INBUF
 3404 24240 1302          TAD CM0330      /XDDT?
 3405 24241 7650          SNA CLA
 3406 24242 5675          JMP I SUPDDT    /YES
 3407             
 3408                     /NOW IT'S EITHER REFRESH OR START...
 3409                     /EITHER WAY, WE NEED AN INIT IN FIELD 2
 3410             
 3411 24243 6224          RIF
 3412 24244 1277          TAD C7760
 3413 24245 7650          SNA CLA         /ARE WE ALREADY THERE?
 3414 24246 5262          JMP SUPER2      /YES
 3415 24247 3303          DCA SUPCNT      /HAVE TO MOVE THERE
 3416 24250 4060          CHDF
 3417 24251 1703          TAD I SUPCNT    /FROM HERE...
 3418 24252 6221          DATFLD+10
 3419 24253 3703          DCA I SUPCNT    /       ... TO THERE
 3420 24254 2303          ISZ SUPCNT
 3421 24255 5250          JMP .-5
 3422 24256 6223          DATFLD+12
 3423 24257 5260          JMP .+1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 84


 3424 24260 1256          TAD .-2
 3425 24261 3061          DCA INIF        /REMEMBER WHERE WE ARE
 3426             
 3427 24262 1464  SUPER2, TAD I INBUF
 3428 24263 1301          TAD CM0322      /REFRESH?
 3429 24264 7640          SZA CLA
 3430 24265 5667          JMP I .+2       /NO; ASSUME START
 3431 24266 5670          JMP I .+2       /YES
 3432 24267 1000  SYSINA, SYSINI
 3433 24270 3600          REFCO0
 3434             
 3435 24271 7240  SUPLOD, STA             /"DTA" = 0 FOR WRITE; =/ 0 OTHERWISE
 3436 24272 3676  SUPDMP, DCA I SUPDTA
 3437 24273 5674          JMP I .+1
 3438 24274 3400          DSKDMP
 3439             
 3440 24275 7000  SUPDDT, 7000
 3441 24276 3475  SUPDTA, DTA
 3442 24277 7760  C7760,  -20
 3443 24300 7464  CM0314, -"L
 3444 24301 7456  CM0322, -"R
 3445 24302 7450  CM0330, -"X
 3446 24303 0000  SUPCNT, 0
 3447 24304 0174  UPTM1B, UPTIM1
 3448 24305 0173  UPTM2B, UPTIM2

      /TSS/8 CONFIGURATION FOR UWM                                       Page 85


 3449 24306 0000  RDYMSG, 0
 3450 24307 1354          TAD RDYQCH
 3451 24310 3142          DCA TYPEA       /REPLACE THE 'TYPE' ROUTINE
 3452 24311 1147          TAD AUTOSW
 3453 24312 7650          SNA CLA         /DOING AN AUTOMATIC RESTART?
 3454 24313 5342          JMP RDYMS1      /NO
 3455 24314 1356          TAD RDYTP0
 3456 24315 3372          DCA QCHAR       /SET TO BUFFER FOR K00
 3457 24316 4540          MESSAG          /TYPE SYSTEM CRASH MESSAGE
 3458 24317 0644           AUTOMS
 3459 24320 1147          TAD AUTOSW
 3460 24321 4760          JMS I RDYOCT    / THE CRASH ADDRESS,
 3461 24322 4540          MESSAG
 3462 24323 0736           DASH
 3463 24324 1152          TAD SVDATE
 3464 24325 4760          JMS I RDYOCT    / THE DATE,
 3465 24326 1353          TAD KSLASH
 3466 24327 4542          TYPE
 3467 24330 1151          TAD SVCLK2
 3468 24331 4760          JMS I RDYOCT    / AND THE TIME
 3469 24332 1150          TAD SVCLK1
 3470 24333 4760          JMS I RDYOCT
 3471 24334 4540          MESSAG
 3472 24335 0736           DASH
 3473 24336 1154          TAD SVUPT2
 3474 24337 4760          JMS I RDYOCT    / AND ALSO THE SYSTEM UPTIME
 3475 24340 1153          TAD SVUPT1
 3476 24341 4760          JMS I RDYOCT
 3477 24342 1357  RDYMS1, TAD RDYTP1
 3478 24343 3372          DCA QCHAR       /NOW SET TO BUFFER FOR EVERYONE
 3479 24344 1035          TAD C0007
 3480 24345 4542          TYPE            /RING THE BELL
 3481 24346 4540          MESSAG          / AND TELL EVERYONE WE'RE BACK UP
 3482 24347 4154           UPMSG
 3483 24350 1355          TAD RDYTYP
 3484 24351 3142          DCA TYPEA       /RESET THE 'TYPE' ROUTINE
 3485 24352 5706          JMP I RDYMSG    / AND RETURN
 3486             /
 3487 24353 0257  KSLASH, "/
 3488 24354 4361  RDYQCH, RTYPE
 3489 24355 0536  RDYTYP, OUT
 3490 24356 3120  RDYTP0, QUEUE   /BUFFER CHARACTER FOR K00 ONLY
 3491 24357 3101  RDYTP1, PRTAL0  /BUFFER CHARACTER FOR EVERY TERMINAL
 3492 24360 0457  RDYOCT, HACK    /TYPE AN OCTAL NUMBER
 3493             /
 3494             /ROUTINE TO BUFFER A SINGLE CHARACTER IN TSS/8
 3495 24361 0000  RTYPE,  0
 3496 24362 3373          DCA RTYPCH      /SAVE THE CHARACTER
 3497 24363 7012          RTR             / AND THE LINK
 3498 24364 3303          DCA SUPCNT
 3499 24365 4772          JMS I QCHAR     /THEN BUFFER IT
 3500 24366 4373           RTYPCH
 3501 24367 1303          TAD SUPCNT
 3502 24370 7106          CLL RTL         /RESTORE THE LINK
 3503 24371 5761          JMP I RTYPE     / AND RETURN
 3504             /
 3505 24372 0000  QCHAR,  0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 86


 3506 24373 0000  RTYPCH, 0       /SINGLE CHARACTER MESSAGE
 3507 24374 0000          0
 3508             /
 3509             
 3510                     IFNZRO 4434-.&4000      <GLITCH; *.-1>
 3511       5400          *5400
 3512 25400 0070          CORMEM          /PATCH FIELD SELECT FOR XDDT
 3513             
 3514       6400          *6400
 3515 26400 4434          4434    /DELETE ALL BUT THE 8 BASIC INSTRUCTIONS IN XDDT
 3516 26401 4434          4434
 3517 26402 4434          4434

      /TSS/8 CONFIGURATION FOR UWM                                       Page 87


 3518       7626          *7626
 3519             /BINARY LOADER - SLIGHTLY MODIFIED FROM THE STANDARD LOADER
 3520             /TO ALLOW IT TO OVERLAY ITSELF & TO MAKE THE DATA-BREAK
 3521             /LOCATIONS CLOBBERABLE.
 3522             
 3523             /EXTRACT ERRORS, FIELD, L/T
 3524       27626  BEGG=   .
 3525       7627          *.+1
 3526 27627 3352          DCA SWITCH      /SET SWITCH
 3527 27630 4260          JMS READ        /GET A CHARACTER
 3528 27631 1347          TAD M376
 3529 27632 7750          SPA SNA CLA     /IS IT A 377?
 3530 27633 5237          JMP .+4         /NO
 3531 27634 2352          ISZ SWITCH      /YES - COMPLEMENT SWITCH
 3532 27635 7040          CMA
 3533 27636 5227          JMP BEGG+1
 3534 27637 1352          TAD SWITCH
 3535 27640 7640          SZA CLA         /IS SWITCH SET?
 3536 27641 5230          JMP BEGG+2      /YES - IGNORE
 3537 27642 1363          TAD CHAR1       /NO - TEST FOR CODE TYPES
 3538 27643 0274          AND MASK
 3539 27644 1361          TAD M200
 3540 27645 7510          SPA
 3541 27646 2226          ISZ BEGG        /DATA OR ORIGIN
 3542 27647 7750          SPA SNA CLA
 3543 27650 5626          JMP I BEGG      /DATA, ORIGIN, OR L/T
 3544 27651 1363          TAD CHAR1
 3545 27652 0256          AND FMASK
 3546 27653 1257          TAD CHANGE
 3547 27654 3353          DCA MEMTEM      /SAVE NEW FIELD SETTING
 3548 27655 5230          JMP BEGG+2      /CONTINUE INPUT
 3549 27656 0070  FMASK,  70
 3550 27657 6201  CHANGE, CDF
 3551             
 3552       27660  READ=   .               /ROUTINE TO GET ONE CHAR
 3553       7662          *.+2            /'JMP' TO APPROPRIATE SECTION
 3554 27662 6031  LOR,    KSF             /WAIT FOR FLAG
 3555 27663 5262          JMP .-1
 3556 27664 6036          KRB
 3557 27665 3363          DCA CHAR1
 3558 27666 1363          TAD CHAR1
 3559 27667 5660          JMP I READ
 3560 27670 6011  HIR,    RSF
 3561 27671 5270          JMP .-1
 3562 27672 6016          RRB RFC
 3563 27673 5265          JMP LOR+3
 3564 27674 0300  MASK,   300
 3565             
 3566             /TRAILER CODE SEEN
 3567 27675 4336  BEND,   JMS ASSEMB      /ASSEMBLE THE TAPE CHECKSUM
 3568 27676 7041          CIA
 3569 27677 1364          TAD CHKSUM
 3570 27700 7402  DONE,   HLT             / & HALT WITH DIFFERENCE IN AC
 3571             
 3572 27701 6032  BEGIN,  KCC
 3573 27702 6014          RFC
 3574 27703 6214          RDF

      /TSS/8 CONFIGURATION FOR UWM                                       Page 88


 3575 27704 1257          TAD CHANGE
 3576 27705 3353          DCA MEMTEM      /SAVE FIELD INSTRUCTION
 3577 27706 7604          CLA OSR
 3578 27707 7700          SMA CLA         /LOW- OR HIGH-SPEED READER?
 3579 27710 1346          TAD HIRI        /HIGH
 3580 27711 1345          TAD LORI        /LOW
 3581 27712 3261          DCA READ+1
 3582 27713 4226          JMS BEGG        /SKIP PAST LEADER
 3583 27714 5313          JMP .-1
 3584 27715 3364  GO,     DCA CHKSUM
 3585 27716 1353          TAD MEMTEM
 3586 27717 3356          DCA MEMFLD      /SET DATA-FIELD SELECT
 3587 27720 1363          TAD CHAR1
 3588 27721 3366          DCA WORD1
 3589 27722 4260          JMS READ        /GET SECOND CHAR OF PAIR
 3590 27723 3367          DCA WORD2
 3591 27724 4226          JMS BEGG        /LOOK AHEAD
 3592 27725 5275          JMP BEND        /TRAILER SEEN - LAST WORD IS CHECKSUM
 3593 27726 4336          JMS ASSEMB
 3594 27727 7420          SNL             /NEW ORIGIN?
 3595 27730 5356          JMP MEMFLD      /NO - STORE THE WORD
 3596 27731 3365          DCA ORIGIN      /YES - SET IT
 3597 27732 1366  CHEX,   TAD WORD1
 3598 27733 1367          TAD WORD2
 3599 27734 1364          TAD CHKSUM      /UPDATE THE CHECKSUM
 3600 27735 5315          JMP GO
 3601             
 3602       27736  ASSEMB= .
 3603       7737          *.+1
 3604 27737 1366          TAD WORD1
 3605 27740 7106          CLL RTL
 3606 27741 7006          RTL
 3607 27742 7006          RTL
 3608 27743 1367          TAD WORD2
 3609 27744 5736          JMP I ASSEMB
 3610 27745 5262  LORI,   JMP LOR
 3611 27746 0006  HIRI,   HIR-LOR
 3612 27747 7402  M376,   -376
 3613 27750 7751          7751    /THESE ARE FOR THE DISC DATA-BREAK
 3614 27751 7751          7751    / CONTROL-WORDS
 3615       27752  SWITCH= .
 3616       7753  MEMTEM= SWITCH+1
 3617       7754          *7754
 3618 27754 7755          7755    /THESE ARE THE DECTAPE DATA-BREAK WORDS
 3619 27755 7755          7755
 3620       27756  MEMFLD= .       /DATA-FIELD SELECT
 3621       7757          *MEMFLD+1
 3622 27757 3765          DCA I ORIGIN
 3623 27760 2365          ISZ ORIGIN
 3624 27761 7600  M200,   7600
 3625 27762 5332          JMP CHEX
 3626       27763  CHAR1=  .       /BY NOT USING ZERO CONSTANTS HERE, WE
 3627       7764  CHKSUM= CHAR1+1 / PERMIT THIS LOADER TO LOAD OVER ITSELF
 3628       7765  ORIGIN= CHKSUM+1
 3629       7766  WORD1=  ORIGIN+1
 3630       7767  WORD2=  WORD1+1
 3631       7777          *7777

      /TSS/8 CONFIGURATION FOR UWM                                       Page 89


 3632 27777 5301          JMP BEGIN
 3633             /////   $$$$$

      No detected errors
