
      /TSS/8 CONFIGURATION FOR UWM                                        Page 1


    1             /TSS/8 CONFIGURATION FOR UWM
    2             /CONFIGURATION PARAMETERS FOR THE TSS/8 MONITOR
    3             /COPYRIGHT 1971
    4             /DIGITAL EQUIPMENT CORP. -MAYNARD, MASS
    5             /
    6             /TSS/8 PDP-8/E HARDWARE OPTIONS
    7             /THIS SECTION DEFINES THE HARDWARE CONFIGURATION ON
    8             /WHICH THIS TSS/8 MONITOR WILL BE RUN
    9             /FOR EACH STATEMENT THE COMMENT INDICATES THE
   10             /POSSIBLE RESPONSES
   11             
   12       0002  CPU=    2       /0 IF CPU IS PDP-8/I; 1 IF PDP-8
   13                             / 2 IF PDP-8/E; 3 IF PDP-12
   14             
   15       0000  EAE=    0       /20 IF CPU INCLUDES EAE; 0 IF NOT
   16             
   17       0070  CORMEM= 70      /HIGHEST DATA FIELD SELECT; FOR 12K SYS,
   18                             / RESPOND 20; FOR 16K, RESPOND 30; FOR 32K, 70
   19             
   20       0000  D680=   0       /2 IF TTY INTERFACING IS 680 OR DC08;
   21                             / 0 IF TTY INTERFACING IS PT08'S
   22             
   23       0000  D689=   0       /4 IF 680 OR DC08 INCLUDES 689 OR DC08F;
   24                             / 0 IF IT DOESN'T OR TTY INTERFACING IS PT08'S
   25             
   26       0000  RF08=   0       /40 IF SYSTEM DISC IS DF32; 0 IF RF08
   27             
   28       0001  RS08=   1       /# OF DISCS IN SYSTEM, WHETHER RF08 OR DF32
   29             
   30       0000  RK8E=   0       /# OF RK8E DRIVES; ONLY FIRST IS USED FOR SYSTEM
   31                             / THE REMAINDER ARE TREATED AS PERIPHERALS
   32             
   33       0001  READER= 1       /1 IF SYSTEM INCLUDES HIGH-SPEED READER; 0 IF NOT
   34             
   35       0001  PUNCH=  1       /1 IF SYS HAS HSP, 0 IF NOT
   36             
   37       0001  TC01=   1       /1 IF SYS HAS DECTAPES; 0 IF NOT
   38             
   39       0000  TU55=   0       /1 IF SYSTEM INCLUDES MORE THAN TWO DECTAPES
   40                             / 0 IF 0, 1, OR 2 DRIVES
   41             
   42       0000  TD8E=   0       /1 IF TD8E DECTAPES AVAILABLE FOR LOADING & DUMPING
   43                             / 0 IF NOT; NOTE THAT TD8E TAPES CANNOT BE USED UNDER
   44                             / TSS/8, THEY REQUIRE CONTINUOUS CPU ATTENTION
   45             
   46       0000  PLOTTER=0       /NO SYSTEMS CAN HAVE PLOTTER
   47             
   48       0000  LPT=    0       /0 IF NO PRINTER ON SYS; 1 IF LP08; 2 IF LS8E
   49             
   50       0000  CDR=    0       /NO SYS CAN HAVE CARD READER
   51             /
   52             /MONITOR OPTIONS 
   53             /FILL IN THE FOLLOWING LINES TO INDICATE THE 
   54             /MONITOR CAPACITY FOR THIS SYSTEM
   55             
   56                     DECIMAL
   57       0024  JOBMAX= 20      /NUMBER OF SIMULTANEOUS USERS (.LE. 20)

      /TSS/8 CONFIGURATION FOR UWM                                        Page 2


   58             
   59       0017  NULINE= 15      /NUMBER OF TTYS TO BE ATTACHED TO SYS.
   60                             / SIMULTANEOUSLY, NOT COUNTING CONSOLE (.LE. 19)
   61                             / GENERALLY .GE. JOBMAX; IF SYS. USES 680 OR DC08,
   62                             / NULINE MUST BE A MULTIPLE OF 5 (FIVE); IF CPU IS
   63                             / A PDP-12, NULINE MUST BE MULTIPLE OF 8 (EIGHT)
   64             
   65       0011  TRUKBD= 9       /NUMBER OF ACTUAL KEYBOARDS ON SYSTEM (NOT COUNTING
   66                             / CONSOLE TTY). THIS MUST BE .LE. NULINE; NULINE
   67                             / MAY INCLUDE DUMMY TERMINALS, THIS MAY NOT.
   68             
   69       0011  FRCMAX= TRUKBD  /THE HIGHEST KEYBOARD # A '00XX' ACCT # MAY FORCE
   70                             / NOTE THAT A '000X' ACCOUNT MAY FORCE UP TO 'NULINE'
   71             
   72       0011  TLKMAX= TRUKBD  /THE HIGHEST KEYBOARD # WHICH MAY BE 'TALK'ED TO
   73             
   74       0011  BRDMAX= TRUKBD  /THE HIGHEST KEYBOARD WHICH WILL RECEIVE BROADCASTS
   75                     OCTAL
   76             
   77       0002  DTAMIN= 2       /THE FIRST DECTAPE DRIVE WHICH WILL BE ASSIGNED
   78                             / FOR 'ASSIGN D' COMMAND; NORMALLY =0, BUT MAY
   79                             / VARY FOR SLIGHTLY RESTRICTED DRIVE USE.
   80             
   81       0007  BILLNG= 7       /THE ACCOUNT NUMBER OF THE BILLING SYSTEM
   82                             / 0, IF NO BILLING SYSTEM USED
   83             /
   84             /SYSTEM CONSTANTS
   85             
   86       37777777776  QUANT=  -2      /NUMBER OF SYSTEM TICKS PER TIME SLICE  (-)
   87       0005  SWDEX=  5       /DISC TRACK OF FIRST SWAP AREA
   88       0001  TTYEVEN=1       /1 INDICATES PARITY TTY MAY BE USED WITH SYS
   89                             / 0 ALLOWS ONLY DEC MODIFIED TTYS
   90       0020  INFLD=  20      /FIELD SELECT THAT 'INIT' SHOULD BE BOOTED INTO
   91                             / MAKING IT 20 AVOIDS PROBLEMS SHOULD A
   92                             / FIELD NEED REPAIR & SYSTEM IS RUN ON 12K
   93             
   94             ///     END OF SYSTEM CONFIGURATION PARAMETERS

      /TSS/8 CONFIGURATION FOR UWM                                        Page 3


   95                96             /PARAMETERS - UWM VERSION 23
   97             /
   98             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
   99             /                               MAYNARD, MASSACHUSETTS
  100             /
  101             /
  102       0027  VERNUM= 27      /SYSTEM VERSION NUMBER
  103             /
  104       0005  STOMIN= 5       /MINIMUM # FREE STORAGE BLOCKS FOR NEW JOB
  105                     IFZERO RK8E <
  106                     IFZERO RF08-40 <
  107             DSKSIZ= RS08^10
  108                     >
  109                     IFZERO RF08 <
  110       0100  DSKSIZ= RS08^100        /# OF 4K DISC TRACKS
  111                     >
  112                     >
  113                     IFNZRO RK8E <
  114             DSKSIZ= 400     /# OF 4K DISC TRACKS
  115                     >
  116       0062  CLOCKR= 62      /50 MILLISECONDS
  117       2260  TICMIN= 2260    /1200
  118       0645  INCLK2= 0645    /1,728,000 TICKS PER DAY
  119       7000  INCLK1= 7000
  120       0024  TICSPS= 24      /NUMBER OF SYSTEM TICKS PER SECOND
  121       0010  INIDEX= 10      /INIT DISC EXTENSION
  122       0030  TS8DEX= 30      /FIELD 0 DISC EXTENSION*2^3
  123       0000  ERPDEX= 0       /ERP DISC EXTENSION*4
  124       0000  ERPWC=  0       /ERP WORD COUNT
  125       0004  FIPDEX= 4       /FIP DISC EXTENSION*4
  126       0000  FIPWC=  0       /FIP WORD COUNT
  127       0000  SIDEX=  ERPDEX  /SI DISC EXTENSION*4
  128       0000  SIWC=   ERPWC   /SI WORD COUNT
  129       0002  LIBACT= 2       /LIBRARY ACCOUNT #
  130       4000  BRKINI= 4000    /INITIAL USER BREAK MASK
  131       0400  WRDSEG= 400     /#WORDS PER DISC SEGMENT
  132             
  133             /IOT DEFINITIONS
  134             
  135                     IFZERO D680-2 <
  136             TTINCR= 6401    /INCREMENT LINE REGISTER
  137             TTI=    6402    /TELETYPE INPUT COMMAND
  138             TTO=    6404    /TELETYPE OUTPUT COMMAND
  139             TTCL=   6411    /CLEAR LINE REGISTER
  140             TTSL=   6412    /SET LINE REGISTER, CLEAR AC
  141             TTRL=   6414    /READ LINE REGISTER
  142             T8SKP=  6421    /SKIP ON CLOCK FLAG
  143             T8OFF=  6422    /TURN CLOCK OFF
  144             TT8ON=  6424    /TURN CLOCK ON
  145             TTRINC= 6461    /INCREMENT THE R REG.
  146             TT8CLR= 6473    /CLEAR AND LOAD THE R REG.
  147                     >

      /TSS/8 CONFIGURATION FOR UWM                                        Page 4


  148             /EXTENDED MEMORY
  149             
  150       6201  CDF=    6201    /CHANGE TO DATA FIELD 0
  151       6202  CIF=    6202    /CHANGE TO INSTRUCTION FIELD 0
  152       6204  CIOT=   6204    /CLEAR USER IOT
  153             
  154       6214  RDF=    6214    /READ DATA FIELD
  155       6224  RIF=    6224    /READ INSTRUCTION FIELD
  156       6234  RIB=    6234    /READ INTERRUPT BUFFER
  157       6244  RMF=    6244    /RESTORE MEMORY FIELD
  158       6254  SKPIOT= 6254    /SKIP ON USER IOT
  159       6264  UFF=    6264    /USER FLAG OFF
  160       6274  UFN=    6274    /USER FLAG ON
  161             
  162             /EAE
  163                     IFZERO EAE-20 <
  164             MUY=    7405    /MULTIPLY
  165             DVI=    7407    /DIVIDE
  166             NMI=    7411    /NORMALIZE
  167             SHL=    7413    /SHIFT ARITHMETIC LEFT
  168             ASR=    7415    /ARITHMETIC SHIFT RIGHT
  169             LSR=    7417    /LOGICAL SHIFT RIGHT
  170             MQL=    7421    /LOAD MQ
  171             SCL=    7403    /STEP COUNTER LOAD FROM MEMORY
  172             SCA=    7441    /STEP COUNTER TO AC
  173             MQA=    7501    /MQ TO AC
  174             
  175                     IFZERO CPU-2 <
  176             SAM=    7453    /SUBTRACT AC FROM MQ
  177             SKB=    7671    /SKIP IF MODE B (MESSES UP AC AND MQ)
  178             SWBA=   7447    /CHANGE MODE TO A
  179             SWAB=   7431    /CHANGE MODE TO B (ALSO DOES MQL)
  180             ACS=    7403    /AC(7:11) TO SC; AC CLEARED 
  181                     >>
  182       6006  SGT=    6006    /SKIP ON GT FLAG
  183                             /SOMEDAY FIX 'WHERE' COMMAND TO PRINT MODE & GT
  184             
  185             /LINE PRINTER IOTS
  186       6661  LSF=    6661    /SKIP ON CHAR FLAG SET
  187       6662  LCF=    6662    /CLEAR CHAR FLAG
  188       6663  LSRP=   6663    /SKIP ON NOT READY OR ON ERROR
  189       6664  LLC=    6664    /TRANSMIT CHAR TO PRINTER
  190       6665  LSP=    6665    /SET PROGRAM INTERRUPT
  191       6666  LPC=    6666    /TRANSMIT CHAR & CLEAR FLAG
  192       6667  LCP=    6667    /CLEAR PROGRAM INTERRUPT

      /TSS/8 CONFIGURATION FOR UWM                                        Page 5


  193             /CTY
  194             
  195       6044  TPC=    6044    /LOAD TELEPRINTER AND PRINT
  196             
  197             /DISC (DF32)
  198             
  199       6601  DCMA=   6601    /CLEAR
  200       6603  DMAR=   6603    /READ
  201       6605  DMAW=   6605    /WRITE
  202       6611  DCEA=   6611    /CLEAR DISC EXTENDED ADDRESS
  203       6615  DEAL=   6615    /LOAD EXTENDED ADDRESS
  204       6621  DFSE=   6621    /SKIP ON ERROR
  205       6622  DFSC=   6622    /SKIP ON COMPLETION
  206       6616  DEAC=   6616    /READ EXTENDED ADDRESS
  207             
  208             /DISC (RF08)
  209             
  210       6615  DIML=   6615
  211       6616  DIMA=   6616
  212       6643  DXAL=   6643
  213             
  214                     IFNZRO RK8E <
  215             DCLR=   6742    /CLEAR THE CONTROLLER
  216             DLAG=   6743    /LOAD DISC ADDRESS & GO
  217             DLDC=   6746    /LOAD THE COMMAND REGISTER
  218             DRST=   6745    /READ THE STATUS
  219             DSKP=   6741    /SKIP IF DONE OR ERROR
  220             DLCA=   6744    /LOAD CURRENT CORE ADDRESS
  221                     >
  222             
  223             /
  224             /STANDARD DECTAPE CONTROLLER IOTS
  225       6761  DTRA=   6761    /READ A-REGISTER
  226       6762  DTCA=   6762    /CLEAR A-REGISTER
  227       6764  DTXA=   6764    /XOR INTO A-REGISTER
  228       6771  DTSF=   6771    /SKIP ON DECTAPE FLAG
  229       6772  DTRB=   6772    /READ STATUS-REGISTER (B)
  230       6774  DTLB=   6774    /LOAD STATUS-REGISTER (B)
  231             
  232                     IFZERO CPU-3 <
  233             CLAB=   6133
  234             CLLR=   6132
  235             CLEN=   6134
  236             CLSA=   6135
  237             CLSK=   6131
  238             
  239             MTPF=   6113
  240             MINT=   6115
  241             MTON=   6117
  242             MKTF=   6123
  243             MINS=   6125
  244             MTRS=   6127
  245             
  246             MKSF=   6111
  247             MKCC=   6112
  248             MKRS=   6114
  249             MKRB=   6116

      /TSS/8 CONFIGURATION FOR UWM                                        Page 6


  250             
  251             MTSF=   6121
  252             MTCF=   6122
  253             MTPC=   6124
  254             MTLS=   6126
  255                     >
  256             
  257                     IFZERO CPU <
  258             /KW8I           REAL TIME CLOCK
  259             
  260             CECI=   6137    /CLEAR AND ENABLE CLOCK AND INTERRUPT
  261             CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  262                     >
  263             
  264                     IFZERO CPU-1 <
  265             CECI=   6315    /CLOCK ENABLE
  266             CSCF=   6301    /SKIP ON CLOCK FLAG
  267             CCF=    6302    /CLEAR CLOCK FLAG, CLEAR ENABLE AND CLEAR BUFFER
  268             CLB=    6304    /LOAD BUFFER FROM AC
  269                     >
  270             
  271                     IFZERO CPU-2 <
  272       6131  CECI=   6131    /CLOCK ENABLE
  273       6133  CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  274       6007  CAF=    6007    /CLEAR ALL FLAGS
  275                     >
  276             
  277                     IFZERO D689-4 <
  278             /689AG
  279             
  280             SRF=    6701    /SKIP IF RING FLAG
  281             SCF=    6711    /SKIP IF CARRIER FLAG
  282             DFCRF=  6742    /CLEAR RING FLAG
  283             CTG=    6721    /CLEAR GROUP COUNTER
  284             RRS=    6702    /READ RING STATUS
  285             ITG=    6731    /INCREMENT GROUP COUNTER
  286             STR=    6722    /SET TERMINAL READY
  287             EDF=    6704    /ENABLE DATAPHONE FEATURES
  288             DDF=    6714    /DISABLE DATAPHONE FEATURES
  289             CTR=    6724    /CLEAR TERMINAL FLAG
  290             CCF=    6741    /CLEAR CARRIER FLAG
  291             RCS=    6712    /READ CARRIER STATUS
  292                     >

      /TSS/8 CONFIGURATION FOR UWM                                        Page 7


  293             /TSS/8 IOTS
  294       0406  SEGS=   406     /RETURN NUMBER OF FREE SEGMENTS ON DISC
  295       0440  ASD=    440     /ASSIGN DEVICE
  296       0442  REL=    442     /RELEASE DEVICE
  297       0600  REN=    600     /RENAME FILE
  298       6601  OPEN=   6601    /OPEN FILE
  299       0602  CLOS=   602     /CLOSE
  300       6603  RFILE=  6603    /READ FILE
  301       0604  PROT=   604     /PROTECT
  302       6605  WFILE=  6605    /WRITE FILE
  303       6606  XOPEN=  6606    /OPEN FILE WITH EXCLUSIVE USE
  304       0607  CPASS=  607     /CHANGE A USER'S PASSWORD
  305       0610  CRF=    610     /CREATE
  306       0611  EXT=    611     /EXTEND
  307       0612  RED=    612     /REDUCE
  308       6613  FINF=   6613    /FILE INFORMATION
  309       0614  LIN=    614     /LOGIN
  310       0615  LOUT=   615     /LOGOUT
  311       0620  BCLR=   620     /CLEAR MFD BILLING INFORMATION
  312             
  313             /DEVICE DATA BLOCK
  314             
  315       0000  DDBSTS= 0               /WORD 1.  STATUS AND UNIT NUMBER
  316       2000          DXON=   2000    /XOFF SENT FLAG
  317       1000          DSI=    1000    /DESTINATION IS S.I. FLAG
  318       0400          DXOUT=  400     /BIT TO CAUSE 'XOFF' TO GO OUT
  319       0200          DUPL=   200     /CONSOLE IN DUPLEX MODE
  320       0100          SICOM=  100     /COMMAND WAITING
  321       0040          CTRLC=  40      /USER TYPED CTRL/C
  322             
  323                     /DEVICE UNIT NUMBER IS IN BITS 6-11
  324             
  325       0001  DDBJN=  1       /WORD 2. JOB NUMBER IN 7-11
  326       0002  DDBBRK= 2       /BREAK MASK
  327       0204  SIBRKM= 204     /SI BREAK MASK
  328       0003  DDBTIM= 3       /TIME THAT DEVICE WAS ASSIGNED
  329       0004  DDBINP= 4       /BUFFER FILL POINTER
  330       0005  DDBINC= 5       /BUFFER FILL COUNT
  331       0006  DDBOUP= 6       /BUFFER EMPTY POINTER
  332       0007  DDBOUC= 7       /BUFFER EMPTY COUNT

      /TSS/8 CONFIGURATION FOR UWM                                        Page 8


  333             /JOB DATA AREA
  334             
  335       0000  JOBSTS= 0               /STATUS
  336                     /STR0
  337       4000          JSRUN=  4000    /RUN BIT
  338       2000          JSEREN= 2000    /USER ERROR ENABLE
  339       1000          JCOMBD= 1000    /LAST TIME THE JOB RAN AS COMPUTE BOUND
  340       0400          JSHLT=  400     /PROGRAM EXECUTED 'HLT'
  341       0200          JSPRIV= 200     /LIBRARY PROGRAM (HAS PRIVILEGES)
  342       0100          JSIOT=  100     /NON-RESIDENT IOT
  343       0040          JSIOTC= 40      /COPY IOT RESULT TO USER
  344       0020          JSEXON= 20      /EXECUTE ONLY
  345                     /BITS 9-11 ARE SYSTEM ERROR CODE
  346       0001          UUOERF= 1       /IOT ERROR
  347       0002          SWPRER= 2       /SWAP READ ERROR
  348       0003          SWPWER= 3       /SWAP WRITE ERROR
  349       0005          DSKERR= 5       /DISC ERROR
  350       0006          HUNGDV= 6       /HUNG DEVICE
  351             
  352                     /STR1
  353       4000          JSTIME= 4000    /TIME IS UP
  354       2000          JSF0=   2000    /FILE 0 NOT BUSY
  355       1000          JSF1=   1000    /FILE 1 IS NOT BUSY
  356       0400          JSF2=   400     /FILE 2 IS NOT BUSY
  357       0200          JSF3=   200     /FILE 3 IS NOT BUSY
  358       0100          JSDEL=  100     /DELIMITER SEEN
  359       0020          JSTEL=  20      /OUTPUT BUFFER NOT FULL
  360       0010          JSPTR=  10      /CHARACTER IN READER BUFFER
  361       0004          JSPTP=  4       /PUNCH BUFFER IS NOT FULL
  362       0002          JSERR=  2       /SYSTEM ERROR DETECTED
  363       0001          JSWAIT= 1       /JOB NOT IN WAIT STATE
  364             
  365       0001  STR2=   1       /TC01&1!PUNCH&1!PLOTTER&1!LPT&1!CDR&1
  366             
  367       1000          JSPLT=  1000    /PLOTTER DONE
  368       0400          JSCDR=  400     /CHARACTER IN CDR BUFFER
  369       0200          JSCRNR= 200     /CDR NOT READY
  370       0100          JSCREF= 100     /CDR END FILE
  371       0004          JSDTC=  4       /DECTAPE CONTROLLER FLAG
  372       0002          JSDTE=  2       /DT ERROR FLAG
  373       0001          JSDTF=  1       /DT DONE FLAG
  374             
  375       0003  JOBWMK= 2+STR2          /WAIT MASK
  376       0005  JOBSRA= JOBWMK+1+STR2   /JOB RESTART ADDRESS
  377       0006  JOBERR= JOBSRA+1        /JOB ERROR RESTART ADDRESS
  378       0007  JOBLNK= JOBERR+1        /IOT LINKAGE
  379       0010  JOBSWR= JOBLNK+1        /SWITCH REGISTER
  380       0011  JOBREG= JOBSWR+1        /PC, AC, & LINK (W/MODE, GT, & SC)
  381       0014  JOBEAE= JOBREG+3        /MQ REGISTER
  382       0015  JOBACT= JOBEAE+1        /USER'S ACCOUNT #
  383       0016  JOBRTM= JOBACT+1        /LOW ORDER RUN TIME
  384       0017  JOBRTH= JOBRTM+1        /HIGH ORDER RUN TIME
  385       0020  JOBF0=  JOBRTH+1        /POINTER TO FILE 0 CONTROL
  386       0021  JOBF1=  JOBF0+1         /POINTER TO FILE 1 CONTROL
  387       0022  JOBF2=  JOBF1+1         /POINTER TO FILE 2 CONTROL
  388       0023  JOBF3=  JOBF2+1         /POINTER TO FILE 3 CONTROL
  389       0024  JOBSTB= JOBF3+1         /DECTAPE STATUS REGISTER B

      /TSS/8 CONFIGURATION FOR UWM                                        Page 9


  390             
  391             /TUNING PARAMETERS
  392             
  393       0010  MAXBUF= 10      /MAXIMUM PERMITTED # OF OUTPUT BUFFERS
  394       0003  MINBUF= 3       /RESTART JOB WHEN ONLY MINBUF BUFFERS ARE STILL FULL
  395             
  396             /FILE CONTROL BLOCK - POINTED TO BY JOBFX, X=0,1,2,3
  397             
  398       0000  FILWPT= 0       /POINTER TO FILE RETRIEVAL WINDOW
  399       0001  FILSCT= 1       /SEGMENT NUMBER OF FIRST WINDOW ENTRY
  400       0002  FILPRO= 2       /FILE PROTECTION - BIT 9
  401       0003  FILPAR= 3       /POINTER TO RFILE OR WFILE PARAMETER BLOCK
  402       0004  FILDA=  4       /DISC ADDRESS OF RFILE OR WFILE
  403       0006  FILWC=  6       /-WORD COUNT OF RFILE OR WFILE
  404       0007  FILRES= 7       /POINTER TO FILPIF IN USER AREA
  405             
  406             /FILE  RETRIEVAL WINDOW
  407             /WORD 0:        UFD LINK TO NEXT GROUP OF 7 SEGMENT POINTERS
  408             /WORDS 1-7:     SEVEN SEGMENT ADDRESSES
  409             
  410             /RFILE OR WFILE PARAMETER BLOCK - POINTED AT BY FILPAR
  411             
  412       0000  FILPFN= 0       /FUNCTION: 0603 OR 0605
  413       0001  FILPDX= 1       /DISC EXTENSION
  414       0002  FILPIF= 2       /INTERNAL FILE # (BITS 10-11) AND FIELD # (BITS 7-9)
  415       0003  FILPWC= 3       /-WORD COUNT FOR THIS TRANSFER
  416       0004  FILPCA= 4       /CORE ADDRESS FOR THIS TRANSFER
  417       0005  FILPDA= 5       /DISC ADDRESS
  418       0006  FILPRA= 6       /EXEC RETURN ADDRESS FOR THIS TRANSFER
  419       0007  FILPCT= 7       /POINTER TO FILE CONTROL BLOCK
  420             
  421             /CORE TABLE CONTROL FLAGS
  422             
  423       4000  FSWP=   4000    /SWAP REQUEST
  424       2000  LOCK=   2000    /LOCK IN CORE
  425       1000  NOTRUN= 1000    /HAS NOT BEEN SCHEDULED TO RUN
  426       0400  FIP=    400     /FILE PHANTOM (NOTE: FIP HAS BEEN ASSUMED EQUAL TO SEGISZ)
  427       0200  SI=     200     /SYSTEM COMMAND INTERPRETER PHANTOM
  428       0100  FIX=    100     /JUST FINISHED DISC TRANSFER
  429             /BITS 7-11 CONTAIN THE JOB #
  430             
  431             /FIP TABLE DEFINITIONS
  432             
  433       0530  SATSIZ= 530
  434       5600  ENTABL= 5600
  435       6040  UTABLE= ENTABL+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX
  436       6160  RTABLE= UTABLE+JOBMAX+JOBMAX+JOBMAX+JOBMAX

      /TSS/8 CONFIGURATION FOR UWM                                       Page 10


  437       0020  SIDATA=20       /SYSTEM INTERPRETER DATA
  438       0020          *SIDATA
  439             
  440 00020 0020  COMPTR, .       /POINTER TO LAST DEVTBL ENTRY SCANNED. INITIALIZE TO DEVTBL-1
  441 00021 0021  SIBUF,  .       /BUFFER STATE
  442 00022 0022  SICNT,  .
  443 00023 0023  COMDSP, .       /FIP RETURN DISPATCH
  444 00024 0024  SIFLG,  .       /COMMAND FLAGS
  445 00025 0025  SICHAR, .       /SAVE LAST CHAR FROM COMMAND SCAN
  446 00026 0026  SIREG,  .       /USER AC, LINK, PC
  447 00027 0027          .
  448 00030 0030          .
  449 00031 0031  TTCHAR, .       /TTY CHARACTER
  450             
  451       0032  CONSTANTS=SIDATA+12
  452       0032  *CONSTANTS
  453 00032 0002  C0002,  2
  454 00033 0003  C0003,  3
  455 00034 0004  C0004,  4
  456 00035 0007  C0007,  7
  457 00036 0037  C0037,  37
  458 00037 0100  C0100,  100
  459 00040 1000  C1000,  1000
  460 00041 7770  C7770,  7770
  461             
  462       0043  JOBCON=CONSTANTS+11     /JOB CONTROL
  463       0043  *JOBCON
  464             
  465 00043 0043  JOBTIM, .       /-#TICKS REMAINING TO RUN
  466 00044 3256  JOBTBA, JOBTBL  /JOB TABLE ADDRESS
  467             
  468       0046  FRSTOR=JOBCON+3
  469       0046  *FRSTOR
  470             
  471 00046 0046  FREE,   .       /POINTER TO HEAD OF FREE STORAGE
  472 00047 0047  FRECNT, .       /# FREE BLOCKS AVAILABLE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 11


  473       0050  TIMDAT= FRSTOR+2        /CLOCK AND DATE
  474       0050  *TIMDAT
  475             
  476             /CLOCK
  477 00050 0050  CLK2,   .
  478 00051 0051  CLK1,   .
  479             
  480       0052  SCHDAT=TIMDAT+2
  481       0052  *SCHDAT         /SCHEDULING DATA
  482             
  483 00052 0052  COMCNT, .       /NUMBER OF COMMANDS WAITING EXECUTION
  484 00053 0053  SQREQ,  .       /SWAP REQUEST FLAG
  485 00054 0054  FINISH, .       /+(I)-(O) FIELD OF JOB BEING SWAPPED
  486 00055 0055  FIT,    .       /JOB # TO BE SWAPPED IN
  487 00056 0056  FORCE,  .       /FIELD TO BE SWAPPED OUT
  488             
  489       0060  DATEND= 60      /END OF FIELD 0 PAGE 0 DATA
  490             
  491       0156  FIPDAT=156      /DATA REFERENCED BY FIP
  492       0156          *FIPDAT
  493             
  494 00156 0400  C0400,  400
  495                     IFNZRO WRDSEG-400       <GLITCH>
  496       0156  SEGSIZ= C0400   /WRDSEG
  497 00157 0031  FIBASE, SWDEX+JOBMAX    /BASE ADDRESS OF ALLOCATABLE DISC STORAGE
  498 00160 0160  JOB,    .       /# OF CURRENT JOB
  499 00161 0161  JOBDAT, .       /ADDRESS OF CURRENT JOB DATA LIST. MUST RESIDE IN DATA FIELD.
  500 00162 7077  CORTBA, CORTBL-1        /CORE ALLOCATION TABLE
  501 00163 3200  DEVTBA, DEVTBL  /DEVICE TABLE
  502 00164 3451  DSUTBA, DSUTBL  /USER DISC REQUEST QUEUE
  503 00165 0165  DSBUSY, .       /DISC BUSY COUNT
  504             
  505             /THE DATE IS KEPT AS A 12 BIT NUMBER IN THE FORMAT
  506             /DATE=((YEAR-1974)*12+(MONTH-1))*31+DAY-1
  507             
  508 00166 0166  DATE,   .

      /TSS/8 CONFIGURATION FOR UWM                                       Page 12


  509       0167  FISUBR=FIPDAT+11        /INST FIELD INDEPENDENT SUBROUTINES
  510       0167          *FISUBR
  511             
  512       0400  FISUBL=400
  513             
  514       1600  BLT0=   FISUBL+1200
  515 00167 1600  BLTA,   BLT0            /BLOCK TRANSFER
  516       4567  BLT=    JMS I Z BLTA
  517 00170 1302  CORSRA, CORSRC
  518       4570  CORE=   JMS I CORSRA
  519 00171 1400  GETBA,  GETB
  520       4571  GETBLK= JMS I GETBA
  521 00172 1451  GETDBA, GETDB0          /GET A DATA BLOCK
  522       4572  GETDDB= JMS I GETDBA
  523 00173 2200  TOFA,   TOF             /FETCH CHARACTER
  524       4573  FETCH=  JMS I Z TOFA
  525 00174 6600  GETJT0, GETJTB          /GET JOB DATA TABLE ADDRESS
  526       4574  GETJTA= JMS I Z GETJT0
  527 00175 0404  GIRSCA, GIRSC           /STORE CHARACTER IN BUFFER
  528       4575  STORE=  JMS I Z GIRSCA
  529 00176 0600  RETBA,  RETB            /RETURN BLOCK TO FREE STORAGE
  530       4576  RETBLK= JMS I Z RETBA
  531 00177 2455  WAITA,  WSCHED
  532       5577  WAIT=   JMP I WAITA
  533             
  534             /TABLES
  535                     IFNZRO CPU-3 <
  536       7100  DATA=   7100    /START OF FIELD 0 TABLES AND BUFFERS
  537                     >
  538             
  539                     IFZERO CPU-3 <
  540             DATA=   7200    /IF DC02 THERE LEAVE ROOM FOR THE CODE
  541                     >
  542       7100  CORTBL= DATA    /CORE ASSIGNMENT TABLE
  543       7107  L2QTB=  CORTBL+7
  544                     IFZERO D680-2 <
  545             T8OBF=  L2QTB+20        /TTY CHAR OUT BUFFER 1. # LINES
  546             T8OBF2= T8OBF+NULINE    /TTY CHAR OUT BUFFER 2.  # LINES
  547             T8IBF=  T8OBF2+NULINE   /TTY CHAR IN BUFFER. 2*# LINES
  548             T8IN=   T8IBF+NULINE+NULINE     /TTI LIST. 4*#LINES+1
  549             TYBEND= T8IN+NULINE+NULINE+NULINE+NULINE+1
  550                     >
  551                     IFZERO D680 <
  552       7127  TIBUFF= L2QTB+20                /TTY INPUT BUFFER. # LINES
  553       7147  TOBUFF= TIBUFF+NULINE+1 /TTY OUTPUT BUFFER. # LINES
  554       7167  TIDEV=  TOBUFF+NULINE+1 /DEVICE CODES (INPUT)
  555                             IFNZRO CPU-3 <
  556       7207  TODEV=  TIDEV+NULINE+1  /DEVICE CODES (OUTPUT)
  557       7227  TYBEND= TODEV+NULINE+1
  558                             >
  559             
  560                             IFZERO CPU-3 <
  561             TODEV=  TIDEV+1
  562             TYBEND= TODEV+1
  563                             >
  564                     >
  565             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 13


  566             IFZERO TC01     <DTASIZ=0>      /SIZE OF DTA CODE+BUFFERS
  567       1400  IFZERO TC01-1   <DTASIZ=1400>
  568             
  569       0000  IFZERO D689     <D689SIZ=0>     /SIZE OF 689AG CODE
  570             IFZERO D689-4   <D689SIZ=200>
  571             
  572       0200  PTRSIZ= 200
  573       0200  PTPSIZ= 200
  574       0200  PTPBUF= 200                     /START OF DEVICE BUFFERS
  575       0400  PTRBUF= PTPBUF+PTPSIZ
  576       0600  DTBUF1= PTRBUF+PTRSIZ
  577       1001  DTBUF2= DTBUF1+201
  578             
  579       6211  DATFLD=6211                     /MONITOR DATA FIELD SELECT
  580             
  581             IFZERO EAE-20   <MQREG=1>
  582       0001  IFZERO EAE      <IFZERO CPU-2 <MQREG=1>
  583                              IFNZRO CPU-2 <MQREG=0>>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 14


  584             /SUPER CRITICAL LOCATIONS
  585             /THESE LOCATIONS ARE USED TO LINK TS8 AND TS8II
  586             
  587             /IT MAY BE NECESSARY TO ADJUST THEM ACCORDINGLY
  588             
  589             /DEFINED IN TS8:
  590             
  591       1600  BLT0=   1600
  592       1302  CORSRC= 1302    /SEARCH CORE TABLE
  593       0166  DATE=   166
  594       0300  DISMI0= 300     /DISMIS
  595       0273  DTINT=  273     /DECTAPE SLOT IN INTERRUPT CHAIN
  596       2375  IFNZRO CPU-3  <DTL20=   2375>
  597             IFZERO CPU-3   <DTL20=  6575>
  598       1400  GETB=   1400    /GET A BLOCK OF FREE CORE
  599       1451  GETDB0= 1451    /GET A DDB
  600       6600  GETJTB= 6600    /GETJTA
  601       0404  GIRSC=  404     /STORE A CHARACTER
  602       6013  GIR00=  6013    /ENTRY TO GIR (GENERAL INPUT ROUTINE)
  603       5770  INTCOM= 5770    /COMPLETION OF INTERRUPT CODE
  604       0354  L2EXIT= 354     /LEAVE LEVEL 2
  605       0104  L2SV0=  104     /LEVEL 2 SAVED PC
  606       2175  OVERLA= 2175    /FILE STUFF
  607       0576  OVRLA1= 0576
  608       5333  NFSEGS= 5333    /NUMBER OF FREE DISC SEGMENTS
  609       7420  PTPEMP= 7420    /PTP BUFFER EMPTY PTR
  610       7457  PTPFIL= 7457    /PTP BUFFER FILL PTR
  611       0211  IFZERO D680     <PTP1=  211>    /IOTS TO BE OVERLAYED
  612             IFZERO D680-2   <PTP1=  234>
  613       7477  PTP2=   7477
  614       7531  PTP3=   7531
  615       7533  PTP4=   7533
  616       7537  PTP5=   7537
  617       3604  READFI= 3604    /MORE FILE STUFF
  618       3400  RELOAD= 3400    /AUTOMATIC SYSTEM RESTART
  619       0600  RETB=   600     /RETURN A BLOCK TO FREE CORE
  620       0112  SOURCE= 112     /CHARACTER SOURCE FOR GIR
  621       6402  T8K9=   6402
  622       6401  T8LC=   6401
  623       6400  T8MNC=  6400    /DC08 COMMON STORAGE LOCATIONS
  624       0151  UUDF=   151     /USER DATA FIELD SELECT
  625       5172  UUOERR= 5172
  626       0326  UUOEX1= 326     /UUO (RESIDENT IOT HANDLERS) EXIT
  627       2455  WSCHED= 2455    /ADDRESS FOR WAIT
  628             
  629             /DEFINED IN TS8II
  630             
  631       0032  DTBST1= 32      /DT BUFFER 1 STATUS
  632       2000  DTL21=  PTRSIZ+PTPSIZ+DTASIZ    /DT LEVEL 2 DISPATCH
  633       7720  FIPBLK= 7720    /FIXED BLOCK FOR FIP I/O
  634       0151  F1OFFJ= 151     /FOR OFF /ON COMMANDS USED BY SI
  635       1400  UDTXA=  DTL21-400       /DT UUO SERVICE
  636       0174  UPTIM1= 174     /UPTIME COUNTER IN FIELD 1
  637       0173  UPTIM2= 173
  638       7730  WINBAS= 7730    /ADDRESS OF THE BASIC WINDOW
  639             
  640                     IFNZRO CPU-3 <

      /TSS/8 CONFIGURATION FOR UWM                                       Page 15


  641       2001  DTL11=  DTL21+1 /DT LEVEL 1 DISPATCH
  642                     >
  643             
  644                     IFZERO CPU-3 <
  645             DTL11=  DTL21+1+1       /DT LEVEL 1 DISPATCH; TO ALLOW FOR DISPLAY CHARACTERS
  646                     >
  647       2200  TOF=    DTL21+200       /FETCH A CHARACTER
  648       2316  BUFTST= TOF+116
  649       2400  CRASH=  TOF+200
  650       2401  CNTRLC= CRASH+1 /DECTAPE CTRL/C HANDLER
  651       2505  BRKTST= CRASH+105
  652       2600  TIMER0= CRASH+200
  653       2700  UPEEK1= TIMER0+100
  654       2734  DFINT1= UPEEK1+34
  655       3000  SWK1=   UPEEK1+D689SIZ+100
  656       3200  IFNZRO CPU-3    <DATA1= SWK1+200>
  657             
  658                     IFZERO CPU-3 <
  659             PDPBAS= SWK1
  660             DATA1=  PDPBAS+1000
  661             PDPEXT= PDPBAS
  662             PDPIDE= PDPEXT+2
  663             DSCX=   PDPBAS&6000+1
  664                     >
  665       3000  DEVCHK= DATA1-200
  666       3100  KSFPRA= DATA1-100
  667       3200  DEVTBL= DATA1
  668       3240  DEVTBE= DEVTBL+NULINE+NULINE+2
  669       3256  JOBTBL= DEVTBE+16
  670       3303  CLKTBL= JOBTBL+JOBMAX+1
  671       3330  TTYTBL= CLKTBL+JOBMAX+1
  672       3355  PRGTBL= TTYTBL+JOBMAX+1
  673       3451  DSUTBL= PRGTBL+JOBMAX+JOBMAX+JOBMAX
  674             
  675       4201  AUTOST= 4201    /SYSTEM RESTART ADDRESS IN INIT
  676             
  677             ///     END OF PARAMETERS & COMMON DATA

      /TSS/8 CONFIGURATION FOR UWM                                       Page 16


  678               679             /TS8II - UWM VERSION 23
  680             /
  681             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
  682             /                               MAYNARD, MASSACHUSETTS
  683             /
  684             /
  685             
  686             FIELD 4                         /FORCE TS8II INTO TRACK 4 AT BUILD TIME
  687       0000          *0
  688 40000 0000          ZBLOCK 7        / (IN CASE ANYONE REFERENCES JOB 0
      40001 0000
      40002 0000
      40003 0000
      40004 0000
      40005 0000
      40006 0000
  689 40007 4547          REBOOT          / OR JUMPS TO LOC. ZERO)
  690       0010  AXS1=   10
  691       0011  AXS2=   11
  692       0010  IX0=    10
  693       0011  IX1=    11
  694       0012  IX2=    12
  695             
  696                     IFZERO TC01-1 <
  697       0020          *20             /DTA CONSTANTS
  698 40020 0000  DTDB,   0               /PTR TO DDB AT UUO LEVEL
  699 40021 0000  DTDDB,  0               /PTR TO DDB AT INTERRUPT LEVEL
  700 40022 0000  DTQ,    0               /PTR TO DDB OF QUEUED DTA REQUEST
  701 40023 0000  DTBSP,  0               /PTR TO BUFFER STATUS WORD; UUO LEVEL
  702 40024 0000  DTBSPI, 0               /PTR TO BUFFER STATUS WORD; INTERRUPT LEVEL
  703 40025 0000  DTBLK,  0               /BLOCK# WE WANT; UUO LEVEL
  704 40026 0000  DTBLKI, 0               /BLOCK# WE WANT; INTERRUPT LEVEL
  705 40027 0000  DTCORA, 0               /PTR TO USER ARES
  706 40030 7777  DTABSY, -1              /CONTROLLER STATUS; -1 IF FREE
  707 40031 0000  DTERCT, 0               /NUMBER OF TIMES RECOVERY HAS BEEN ATTEMPTED
  708                     >
  709       0032          *DTBST1
  710 40032 0000          0               /BUFFER 1 STATUS
  711 40033 0577  DTBFA1, DTBUF1-1        /BUFFER 1 ADDRESS
  712 40034 0000  DTBST2, 0               /BUFFER 2 STATUS
  713 40035 1000  DTBFA2, DTBUF2-1        /BUFFER 2 ADDRESS
  714             
  715                     IFZERO TC01-1 <
  716 40036 0000  DTSTAB, 0               /TEMPORARY FOR STATUS REGISTER B
  717 40037 0273  DTSFP,  DTINT           /PTR TO DTSF POSITION IN INTERRUPT CHAIN
  718 40040 0000  DTINTD, 0               /FIELD 1 DTA INTERRUPT DISPATCH
  719 40041 0000  DTL2D,  0               /FIELD 1 L2Q DISPATCH
  720 40042 7577  DTBFF,  DTBUF1-DTBUF2   /RELCATIVE ORIGIN OF BUF1
  721 40043 0000  DTBFAI, 0               /BUFFER ADDRESS FOR CURRENT TRANSFER
  722 40044 0032  DTBS1A, DTBST1  /PTR TO BUFFER #1 STATUS
  723 40045 0214  DTSFN,  0214            /SEARCH FWD-CLEAR FLAGS-INTERRUPT
  724             
  725 40046 2076  DTUSE,  DTUSER          /START DTA REQUEST
  726 40047 1600  DTAGO,  DTAGO0          /START DTA SEARCH
  727 40050 0034  DTBS2A, DTBST2  /PTR TO BUFFER # 2 STATUS
  728 40051 2066  DTXONF, DTXNF0          /TURN OFF "EXECUTE ONLY" BIT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 17


  729             
  730 40052 2042  REDO1,  REDO1A          /EQUIVALENT TO FIELD 0 REDO
  731 40053 2011  DTWATA, DTWAIT          /CLEAR DT FLAGS + WAIT
  732                     >
  733 40054 3256  JOBTB0, JOBTBL
  734             
  735       0057          *57
  736 40057 0020  K0020,  20
  737 40060 0040  K0040,  40
  738 40061 3777  K3777,  3777
  739 40062 0006  K0006,  6
  740 40063 0005  K0005,  5
  741 40064 7755  K7755,  7755            /CURRENT ADDRESS REGISTER
  742 40065 7754  K7754,  7754            /WORD COUNT REGISTER
  743 40066 0400  K0400,  400
  744 40067 7577  K7577,  -201
  745 40070 0060  K0060,  60
  746 40071 4410  K4410,  4410            /SIMULATE SELECT ERROR
  747                     
  748             
  749 40072 0000  TEMP0,  0               /WORKING STORAGE
  750 40073 0000  TEMP1,  0
  751 40074 0000  TEMP2,  0
  752 40075 0000  TEMP3,  0
  753 40076 0000  TEMP4,  0
  754 40077 7677  K7677,  7677
  755 40100 7000  K7000,  7000
  756 40101 0204  K0204,  204
  757 40102 0007  K0007,  7
  758 40103 0010  K0010,  10
  759 40104 0004  K0004,  4
  760 40105 7773  K7773,  7773
  761 40106 7774  K7774,  7774
  762 40107 0070  K0070,  70
  763 40110 0003  K0003,  3
  764 40111 0106  L2SAP,  L2SV0+2         /POINTS TO L2SA IN FIELD 0
  765 40112 0000  UDF1,   0               /SELECT USER FIELD
  766 40113 0000          0
  767 40114 5512          JMP I .-2
  768             
  769 40115 7754  JOBCNT, -JOBMAX
  770 40116 0151  UDFP,   UUDF
  771             
  772             K6203,
  773 40117 6203  DISMIS, CIF CDF
  774 40120 5521          JMP I .+1
  775 40121 0300          DISMI0          /DISMIS
  776             
  777 40122 2450  GETTBA, GETTB0          /GET PTR TO JOB STATUS
  778 40123 0000  DFCLSI, 0
  779 40124 0000  DFCNWI, 0
  780             
  781 40125 2467  DFCLST, DFCLS0
  782 40126 2473  DFCNOW, DFCNO0
  783       2777  DFCARR=UPEEK1+77
  784             
  785 40127 0000  DFCNTR, 0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 18


  786             
  787 40130 1140  TIMPAT, TAD DFTIMER     /SHOULD WE CHECK CARRIER STATUS OF PHONES?
  788 40131 7650          SNA CLA
  789 40132 5537          JMP I TIMOUP    /NOTHING PENDING WITH PHONES...
  790 40133 2140          ISZ DFTIMER     /SOMETHING PENDING; NOW?
  791 40134 5537          JMP I TIMOUP    /NO
  792 40135 5536          JMP I DFCARA    /YES, GO CHECK STATUS
  793             
  794 40136 2777  DFCARA, DFCARR
  795 40137 2643  TIMOUP, TIMOUT
  796 40140 0000  DFTIMER,0       /-#SECONDS UNTIL PHONE SERVICE WIL BE RUN
  797 40141 2200  BUG2,   TOF
  798 40142 2316  BUG4,   BUFTST
  799 40143 1451  DFGDDB, GETDB0
  800 40144 6203  CONT,   CIF CDF         /CHECK FOR LPT INTERRUPT
  801 40145 5546          JMP I .+1
  802 40146 5770          INTCOM
  803       4547  REBOOT= JMS I .
  804 40147 3042          RBOOT   /INITIATE AUTOMATIC RESTART
  805             
  806                     IFNZRO D689-4 <
  807                     IFZERO TC01-1 <
  808                     IFZERO TD8E <
  809                     IFNZRO CPU-3 <
  810 40150 2734  CBOOTA, CBOOT   /POINTER TO CRASHDUMP BOOTSTRAP ROUTINE
  811                     >>>>
  812             
  813                     IFNZRO F1OFFJ-.&4000    <GLITCH>
  814       0151          *F1OFFJ
  815 40151 7754  F1OFFJ, -JOBMAX /USED BY SI TO IMPLEMENT 'ON' & 'OFF'
  816 40152 0037  K0037,  37
  817 40153 0000  BUG3,   0
  818             
  819       0161          *161
  820 40161 0000  CJOBDA, 0               /POINTER TO JOB STATUS BLOCK, CURRENT JOB
  821             
  822       0170          *170
  823 40170 0017          NULINE          /SYSTEM PARAMETERS CONVENIENT FOR SYSTAT
  824 40171 0024          JOBMAX
  825 40172 3200          DATA1
  826 40173 0000  UPTIM2, 0               /HIGH ORDER UPTIME IN SECONDS
  827 40174 0000  UPTIM1, 0               /LOW ORDER UPTIME IN SECONDS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 19


  828                     IFZERO TC01-1 <
  829             
  830       1202  DTORG1= DTBUF1+201+201
  831       1202          *DTORG1
  832             /ROUTINE TO GET A BUFFER STATUS WORD IF POSSIBLE
  833             /CALL JMS DTBFRE
  834             /       RETURN (PTR TO WD IN AC; AC=0 IF NONE)
  835             
  836 41202 0000  DTBFRE, 0
  837 41203 1032          TAD DTBST1
  838 41204 7650          SNA CLA         /BUFFER # 1 FREE?
  839 41205 5212          JMP .+5         /YES
  840 41206 1034          TAD DTBST2
  841 41207 7640          SZA CLA         /NO - BUFFER # 2 FREE?
  842 41210 5602          JMP I DTBFRE    /NO - RETURN A ZERO
  843 41211 7326          CLA CLL CML RTL
  844 41212 1044          TAD DTBS1A      /RETURN THE STATUS-WORD ADDRESS
  845 41213 5602          JMP I DTBFRE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 20


  846             /DECTAPE LEVEL 2 COMPLETION ROUTINE
  847             /ENTERED FROM L2Q VIA DTL21
  848             
  849 41214 4704  DTFIN,  JMS I GETBSA    /GET THE BUFFER STATUS WORD
  850 41215 5242          JMP DTEND1      /HE'S GONE - JUST EXIT
  851 41216 0060          AND K0040       /   READ OR WRITE?
  852 41217 7640          SZA CLA
  853 41220 3424          DCA I DTBSPI    /IT WAS A WRITE, SO RELEASE BUFFER
  854 41221 2021          ISZ DTDDB       /POINTS TO JOB# IN DDB
  855 41222 1421          TAD I DTDDB     /JOB#
  856 41223 4522          JMS I GETTBA    /GET THE STATUS-REGISTER # 2
  857 41224 0002           JOBSTS+2
  858 41225 7201          CLA IAC         /SIMULATE DECTAPE COMPLETION FLAG
  859 41226 3472          DCA I TEMP0     /  IN STATUS REGISTER 2
  860 41227 1421  DTEND,  TAD I DTDDB     /GET JOB# AGAIN
  861 41230 4522          JMS I GETTBA    /GET POINTER TO JOB DT STATUS B
  862 41231 0024           JOBSTB
  863 41232 1036          TAD DTSTAB      /STATUS B AT END OF OPERATION
  864 41233 3472          DCA I TEMP0     /SAVE IT
  865 41234 2021          ISZ DTDDB       /POINTS T0 WORD 3 OF DDB
  866 41235 1026          TAD DTBLKI      /BLOCK # JUST READ OR WRITTEN
  867 41236 3421          DCA I DTDDB     /REMEMBER WHERE WE'VE BEEN
  868 41237 4704          JMS I GETBSA    /GET THE STATUS-WORD AGAIN
  869 41240 7410          SKP             /HE'S TERMINATED - JUST CLEAR IT
  870 41241 1104          TAD K0004       /OTHERWISE SET THE 'READ - PASS 2' FLAG
  871             
  872 41242 3424  DTEND1, DCA I DTBSPI    /CLEAR THE STATUS-WORD COMPLETELY
  873 41243 6201          CDF
  874 41244 1100          TAD K7000       /PLACE NOP IN INTERRUPT CHAIN TO PROTECT
  875 41245 3437          DCA I DTSFP     / AGAINST FUTURE SELECT-ERRORS
  876 41246 6211          DATFLD
  877             
  878                     /THERE IS A SMALL PROBLEM IN ALLOCATING THE TWO DECTAPE BUFFERS
  879                     /AMONG MORE THAN TWO DRIVES.  IF AN IOT IS PROCESSED WHICH
  880                     /CANNOT BE HANDLED DUE TO A LACK OF BUFFERS, THEN THE
  881                     /DECTAPE CONTROLLER WAIT BIT (BIT 9 OF STR2) IS CLEARED
  882                     /AND THE CORRESPONDING BIT IS SET IN THE WAIT MASK
  883                     /WHEN THE CURRENT DTA REQUEST FINISHES; WE TURN ON THE BIT
  884                     /IN ALL JOBS--THE JOBS NOT USING DTA'S ARE UNAFFECTED AND
  885                     /THE JOBS AWAITING THE CONTROLLER ALL MAKE A MAD DASH FOR
  886                     /IT.  HOPEFULLY SOMEBODY WILL GET IT EVENTUALLY.
  887 41247 1115          TAD JOBCNT      /-JOBMAX
  888 41250 3072          DCA TEMP0       /#JOBS TO CHECK
  889 41251 1054          TAD JOBTB0      /JOBTBL-1
  890 41252 3010          DCA IX0
  891 41253 1410  DTEND2, TAD I IX0       /IS THIS JOB  DEFINED?
  892 41254 7450          SNA
  893 41255 5264          JMP DTEND3      /NO; HE CAN'T BE WAITING
  894 41256 1110          TAD K0003       /YES; BUILD POINTER TO STR2
  895 41257 3073          DCA TEMP1
  896 41260 1473          TAD I TEMP1     /GET STR2
  897 41261 0105          AND K7773       /CLEAR THE CONTROLLER WAIT FLAG
  898 41262 1104          TAD K0004       /SET IT
  899 41263 3473          DCA I TEMP1     /SAVE IT
  900 41264 2072  DTEND3, ISZ TEMP0       /DONE?
  901 41265 5253          JMP DTEND2      /NO
  902 41266 1022          TAD DTQ         /ANYTHING WAITING TO RUN?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 21


  903 41267 7450          SNA
  904 41270 5301          JMP DTFIN1      /NO-GO INDICATE CONTROLLER IS FREE
  905 41271 3024          DCA DTBSPI      /YES-SET IT UP TO RUN
  906 41272 3022          DCA DTQ         /CLEAR QUEUE
  907 41273 1106          TAD K7774       /INITIALIZE ERROR COUNT FOR NEW JOB
  908 41274 3031          DCA DTERCT
  909 41275 4447          JMS I DTAGO     /START NEW SEARCH
  910 41276 6203  DTEXIT, CIF CDF
  911 41277 5700          JMP I .+1
  912 41300 0354          L2EXIT
  913             
  914 41301 7240  DTFIN1, STA             /INDICATE CONTROLLER IS FREE
  915 41302 3030          DCA DTABSY
  916 41303 5276          JMP DTEXIT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 22


  917             /DECTAPE LEVEL 2 ERROR ROUTINE
  918             /ENTERED FROM L2Q VIA DTL21
  919             /RETRIES MOST ERRORS UP TO "K7774" TIMES
  920             /ENTERED SPECIALLY FOR SELECT ERRORS-NO RECOVERY
  921             
  922 41304 2365  GETBSA, GETBST
  923             
  924 41305 2031  DTERR,  ISZ DTERCT      /EXHAUSTED RECOVERY ATTEMPTS
  925 41306 5341          JMP DTRCVR      /NO-TRY AGAIN
  926 41307 4704  DTERR2, JMS I GETBSA    /GET THE CURRENT BUFFER STATUS
  927 41310 5242          JMP DTEND1      /HE'S TERMINATED - JUST QUIT
  928 41311 0057          AND K0020
  929 41312 7650          SNA CLA         /IS HE DOING A READ?
  930 41313 5331          JMP DTERR1      /NO, SO WE'RE OK
  931 41314 1021          TAD DTDDB       /YES, NOW WE HAVE TO ADJUST HIS PC
  932 41315 7001          IAC
  933 41316 3073          DCA TEMP1       /POINTS TO JOB # IN DDB
  934 41317 1473          TAD I TEMP1     /GET HIS JOB
  935 41320 4522          JMS I GETTBA    /GET PTR TO HIS PC
  936 41321 0011           JOBREG
  937 41322 2472          ISZ I TEMP0     /BUMP HIS PC (DOESN'T AFFECT HIM IF WE'RE
  938 41323 7000          NOP             / STILL PROCESSING THE INITIAL IOT)
  939 41324 1473          TAD I TEMP1     /JOB # AGAIN
  940 41325 4451          JMS I DTXONF    /TURN OFF 'EXECUTE ONLY' BIT
  941 41326 2072          ISZ TEMP0
  942 41327 2072          ISZ TEMP0       /NOW IT POINTS TO HIS AC
  943 41330 3472          DCA I TEMP0     /CLEAR IT
  944             
  945 41331 3424  DTERR1, DCA I DTBSPI    /CLEAR THE BUFFER STATUS-WORD
  946 41332 2021          ISZ DTDDB       /POINTS TO JOB#
  947 41333 1421          TAD I DTDDB     /JOB#
  948 41334 4522          JMS I GETTBA    /GET PTR TO STR2
  949 41335 0002           JOBSTS+2
  950 41336 7326          CLA CLL CML RTL /AC=2,DT ERROR FLAG =2
  951 41337 3472          DCA I TEMP0
  952 41340 5227          JMP DTEND
  953             
  954             /ERROR RECOVERY ROUTINE
  955             /STARTS SEARCH AGAIN
  956                     IFNZRO CPU-3   <
  957             
  958 41341 4704  DTRCVR, JMS I GETBSA    /CHECK FOR TERMINATION
  959 41342 5242          JMP DTEND1      /HE'S QUIT
  960 41343 7200          CLA
  961 41344 1036          TAD DTSTAB
  962 41345 0375          AND K1000
  963 41346 7640          SZA CLA         /ARE WE IN AN END-ZONE?
  964 41347 5352          JMP .+3         /YES - WHICH END?
  965 41350 4447  DTRCV1, JMS I DTAGO     /NO - GO RESTART SEARCH
  966 41351 5276          JMP DTEXIT      /LEVEL 2 EXIT
  967             
  968 41352 7326          CLA CLL CML RTL /AC=2
  969 41353 1021          TAD DTDDB
  970 41354 3072          DCA TEMP0       /POINTS TO LAST BLOCK REFERENCE
  971 41355 6761          DTRA            /WHICH DIRECTION WERE WE GOING
  972 41356 0066          AND K0400       /REVERSE=400
  973 41357 7640          SZA CLA

      /TSS/8 CONFIGURATION FOR UWM                                       Page 23


  974 41360 1377          TAD DTFRNT      /REVERSE - NOW AT BLOCK -10
  975 41361 1376          TAD DTBACK      /FORWARD - NOW AT BLOCK 2703
  976 41362 3472          DCA I TEMP0
  977 41363 5350          JMP DTRCV1
  978             
  979 41364 6761  DTSEL1, DTRA            /GET THE A-REGISTER
  980 41365 0101          AND K0204       /CLEAR THE MOTION-BIT & INTERRUPT ENABLE
  981 41366 1110          TAD K0003       / BUT LEAVE ANY ERROR FLAGS SHOWING
  982 41367 6764          DTXA
  983 41370 6001          ION
  984 41371 6211          DATFLD
  985 41372 1071          TAD K4410       /SIMULATE STATUS REGISTER B
  986 41373 3036          DCA DTSTAB
  987 41374 5307          JMP DTERR2
  988             
  989 41375 1000  K1000,  1000
  990 41376 2703  DTBACK, 2703
  991 41377 5065  DTFRNT, -10-2703        /FORCE DTAGO TO START FORWARD
  992                             >
  993             
  994                     IFZERO CPU-3    <
  995             
  996             DTRCVR, JMS I   DTAGO
  997                     JMP     DTEXIT
  998             
  999             DTSEL1, CLA                     /CLEAR THE AC IN 8 MODE FIRST.
 1000                     6141                    /GET INTO LINC MODE
 1001                     1                       /AXO--  CLEAR THE TAPE CONDITIONS
 1002                     2                       /PDP--  GET BACK INTO 8 MODE
 1003                     ION                     /TURN ON THE INTERUPTS AGAIN
 1004                     DATFLD
 1005                     TAD     K4410           /SIMULATE STATUS REGISTER B
 1006                     DCA     DTSTAB
 1007                     JMP     DTERR2
 1008                             >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 24


 1009                     PAGE
 1010             /ROUTINE TO PICK UP USERS PARAMETERS & FIGURE OUT WHAT TO DO
 1011             /PICKS UP SECOND PASS OF READS AND XFERS DATA TO USER
 1012             /ALSO XFERS DATA TO DT BUFFER FOR WRITES
 1013             
 1014 41400 6201  UDTXA,  CDF             /FIRST PICK UP USEFUL INFORMATION
 1015 41401 1511          TAD I L2SAP     /LIKE USER AC
 1016 41402 3374          DCA L2SA1
 1017 41403 1516          TAD I UDFP      / AND HIS FIELD
 1018 41404 3113          DCA UDF1+1
 1019 41405 4112          JMS UDF1        /SELECT USER'S FIELD
 1020 41406 7240          STA
 1021 41407 1374          TAD L2SA1       /ADDRESS OF PARAMETERS-1
 1022 41410 3010          DCA IX0
 1023 41411 1410          TAD I IX0       /UNIT + FUNCTIONS
 1024 41412 3363          DCA DTUNFN
 1025 41413 1410          TAD I IX0       /BLOCK TO READ/WRITE
 1026 41414 3025          DCA DTBLK
 1027 41415 1410          TAD I IX0       /CORE ADDRESS-1
 1028 41416 3027          DCA DTCORA
 1029 41417 1363          TAD DTUNFN      /NOW SEE IF HE OWNS UNIT
 1030 41420 7006          RTL
 1031 41421 7006          RTL
 1032 41422 0102          AND K0007       /SELECT UNIT
 1033 41423 1364          TAD DTDEVA      /START OF DT PART OF DEVTBL
 1034 41424 3227          DCA .+3
 1035 41425 6211          DATFLD
 1036 41426 4765          JMS I DTCHKA    /FIELD 0 ENTRY FOR DEVCHK
 1037 41427 0000           0
 1038 41430 7000          NOP
 1039 41431 1627          TAD I .-2       /ASSIGNMENT OK; GET PTR TO DDB
 1040 41432 3020          DCA DTDB        /...AND SAVE IN DTDB
 1041 41433 7320          CLA CLL CML
 1042 41434 1025          TAD DTBLK
 1043 41435 1373          TAD KM2701
 1044 41436 7660          SZA SNL CLA     /BLOCK # <= 2701?
 1045 41437 5352          JMP UDTXA3      /NO - RETURN END-OF-TAPE ERROR CODE
 1046 41440 1363          TAD DTUNFN      /READ OR WRITE?
 1047 41441 0107          AND K0070
 1048 41442 1371          TAD K7760       /READ = 20
 1049 41443 7440          SZA             /IS THIS A 'READ' FUNCTION?
 1050 41444 5313          JMP DTXAW       /NO - GO CHECK FOR 'WRITE'
 1051 41445 1363          TAD DTUNFN      /YES - HAS HE BEEN HERE BEFORE?
 1052 41446 0100          AND K7000
 1053 41447 7041          CIA
 1054 41450 3366          DCA DTUN        /-DT UNIT
 1055 41451 1032          TAD DTBST1
 1056 41452 0106          AND K7774
 1057 41453 7450          SNA             /ANYONE OWN BUFFER 1?
 1058 41454 5261          JMP UDTXA1      /NO, SO HE DOESN'T OWN IT
 1059 41455 0100          AND K7000       /UNIT OWNING BUFFER1
 1060 41456 1366          TAD DTUN        /BUFFER 1?
 1061 41457 7650          SNA CLA
 1062 41460 5761          JMP I DTRTR1    /YES-MOVE BUFFER 1 TO USER AREA
 1063 41461 1034  UDTXA1, TAD DTBST2      /NO-BUFFER 2?
 1064 41462 0106          AND K7774
 1065 41463 7450          SNA             /DOES ANY0NE OWN BUFFER TWO?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 25


 1066 41464 5271          JMP UDTXA2      /NO, SO THIS GUY CAN'T OWN IT EITHER
 1067 41465 0100          AND K7000       /UNIT OWNING BUFFER 1
 1068 41466 1366          TAD DTUN        /-UNIT WE WANT
 1069 41467 7650          SNA CLA
 1070 41470 5762          JMP I DTRTR2    /MOVE BUFFER 2 TO USER
 1071             
 1072 41471 4757  UDTXA2, JMS I DTBUFF    /THIS MUST BE FIRST PASS OF READ
 1073 41472 7450          SNA             /IS A BUFFER AVAILABLE?
 1074 41473 5452          JMP I REDO1     /NO-TRY AGAIN LATER
 1075 41474 3023          DCA DTBSP       /YES-SAVE PTR TO BUFFER STATUS WD.
 1076 41475 1363          TAD DTUNFN      /ASSIGN BUFFER
 1077 41476 0370          AND K7070       /UNIT+READ
 1078 41477 1367          TAD K0002       /INDICATE 'ACTIVE'
 1079 41500 3423          DCA I DTBSP     /NOW WE OWN IT
 1080 41501 1020          TAD DTDB        /PREVENT HIM FROM DIDDLING IOT FROM KEYBOARD
 1081 41502 7001          IAC
 1082 41503 3072          DCA TEMP0
 1083 41504 1472          TAD I TEMP0     /GET HIS JOB #
 1084 41505 4451          JMS I DTXONF    /CLEAR HIS "EXECUTE ONLY BIT"
 1085 41506 1472          TAD I TEMP0     /NOW SET IT
 1086 41507 1057          TAD K0020
 1087 41510 3472          DCA I TEMP0
 1088 41511 4446          JMS I DTUSE     /NOW START THE TRANSFER OR QUEUE IT
 1089 41512 5760          JMP I DTREDA    / AND WAIT FOR PASS 2
 1090             
 1091 41513 1371  DTXAW,  TAD K7760       /WRITE = 40
 1092 41514 7640          SZA CLA
 1093 41515 5353          JMP DTXAW1      /IT'S NOT; SIMULATE A SELECT ERROR
 1094 41516 4757          JMS I DTBUFF    /GO GET A DECTAPE BUFFER
 1095 41517 7450          SNA
 1096 41520 5452          JMP I REDO1     /NONE NOW; TRY LATER
 1097 41521 3023          DCA DTBSP       /BUFFER STATUS POINTER
 1098 41522 1363          TAD DTUNFN      /ASSIGN BUFFER
 1099 41523 0370          AND K7070       /SAVE UNIT + WRITE
 1100 41524 1367          TAD K0002       / AND INDICATE 'ACTIVE'
 1101 41525 3423          DCA I DTBSP     /WE OWN BUFFER
 1102 41526 1023          TAD DTBSP       /NOW COPY USER DATA INTO BUFFER
 1103 41527 7001          IAC             /POINTS TO BUFFER ADDRESS
 1104 41530 3072          DCA TEMP0
 1105 41531 1472          TAD I TEMP0     /BUFFER ADDRESS
 1106 41532 3010          DCA IX0
 1107 41533 1027          TAD DTCORA      /ADDRESS IN USER AREA
 1108 41534 3011          DCA IX1
 1109 41535 1067          TAD K7577       /-201
 1110 41536 3072          DCA TEMP0
 1111 41537 4112          JMS UDF1        /SELECT USER FIELD
 1112 41540 1411          TAD I IX1       /GET WORD
 1113 41541 6211          DATFLD
 1114 41542 3410          DCA I IX0       /PLACE IN BUFFER
 1115 41543 2072          ISZ TEMP0       /DONE YET?
 1116 41544 5337          JMP .-5         /NO
 1117 41545 4446          JMS I DTUSE     /NOW GO PUT BUFFER ON TAPE
 1118 41546 6201          CDF
 1119 41547 3511          DCA I L2SAP     /CLEAR USER AC
 1120 41550 6211          DATFLD
 1121 41551 5453          JMP I DTWATA    /WAIT FOR TAPE TO FINISH
 1122             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 26


 1123 41552 1066  UDTXA3, TAD K0400       /BAD BLOCK NUMBER - RETURN 5010 (END-OF-TAPE)
 1124 41553 1071  DTXAW1, TAD K4410       /ILLEGAL FUNCTION - RETURN 4410 (SELECT ERROR)
 1125 41554 3073          DCA TEMP1
 1126 41555 5756          JMP I .+1
 1127 41556 2055          DTSEL2
 1128             
 1129 41557 1202  DTBUFF, DTBFRE  /GET A DECTAPE BUFFER
 1130 41560 2010  DTREDA, DTREDO  /BACK UP HIS PC & WAIT
 1131 41561 2123  DTRTR1, DTRTRN
 1132 41562 2124  DTRTR2, DTRTRN+1
 1133 41563 0000  DTUNFN, 0
 1134 41564 3245  DTDEVA, DEVTBE+5
 1135 41565 3000  DTCHKA, DEVCHK
 1136 41566 0000  DTUN,   0               /-DT UNIT
 1137 41567 0002  K0002,  2
 1138 41570 7070  K7070,  7070
 1139 41571 7760  K7760,  7760
 1140 41572 5010  K5010,  5010
 1141 41573 5077  KM2701, -2701
 1142 41574 0000  L2SA1,  0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 27


 1143                     PAGE
 1144             /ROUTINE TO START DECTAPE SEARCH (LEVEL-2)
 1145 41600 0000  DTAGO0, 0
 1146 41601 4774          JMS I GETBSB    /GET THE BUFFER-STATUS
 1147 41602 5772          JMP I DTFINA    /HE'S GONE - JUST EXIT
 1148 41603 7106          CLL RTL
 1149 41604 7006          RTL
 1150 41605 0102          AND K0007       /GET THE DRIVE UNIT #
 1151 41606 1274          TAD DTDEVP
 1152 41607 3072          DCA TEMP0       /NOW POINTS TO THE DEVTBL ENTRY
 1153 41610 1472          TAD I TEMP0
 1154 41611 7450          SNA             /IS IT STILL ASSIGNED?
 1155 41612 4547          REBOOT          /NO - ERROR *****
 1156 41613 3021          DCA DTDDB
 1157 41614 1021          TAD DTDDB       /ADDRESS OF DDB OWNING CONTROLLER
 1158 41615 1062          TAD K0006
 1159 41616 3026          DCA DTBLKI      /POINTS TO DESIRED BLOCK#
 1160 41617 1426          TAD I DTBLKI
 1161 41620 3026          DCA DTBLKI      /BLOCK WE WANT
 1162             
 1163                     IFNZRO CPU-3    <
 1164 41621 7326          CLA CLL CML RTL /AC=2
 1165 41622 1021          TAD DTDDB
 1166 41623 3072          DCA TEMP0       /POINTS TO LAST BLOCK REFERENCE
 1167 41624 1472          TAD I TEMP0     /LAST BLOCK USED
 1168 41625 1103          TAD DTSLID      /#BLOCKS MISSED ON STOP-START
 1169 41626 7041          CIA
 1170 41627 1026          TAD DTBLKI      /BLOCK .GE. LAST BLOCK + SLIP?
 1171 41630 7700          SMA CLA
 1172 41631 5236          JMP .+5         /YES - START FORWARD
 1173 41632 1343          TAD DTSRVA      /NO - SET UP FOR REVERSE SEARCH
 1174 41633 3040          DCA DTINTD
 1175 41634 1066          TAD K0400       /REVERSE BIT IN STATUS A
 1176 41635 5240          JMP DTAGO1
 1177                             >
 1178 41636 1342          TAD DTSFDA
 1179 41637 3040          DCA DTINTD      /SET INTERRUPT DISPATCH FOR FORWARD SEARCH
 1180 41640 3275  DTAGO1, DCA DTDIR       /DTDIR:=0 (FORWARD)
 1181             
 1182                     IFNZRO CPU-3    <
 1183 41641 4774          JMS I GETBSB    /GET THE BUFFER STATUS
 1184 41642 5772          JMP I DTFINA    /HE'S GONE - JUST QUIT
 1185 41643 0100          AND K7000       /GET UNIT
 1186 41644 1045          TAD DTSFN       /SEARCH-NORMAL-INTERRUPT-CLEAR
 1187 41645 1275          TAD DTDIR       /0-FORWARD; 400-REVERSE
 1188 41646 3275          DCA DTDIR
 1189 41647 1103          TAD K0010       /DATA TO FIELD 1
 1190 41650 6774          DTLB
 1191 41651 6002          IOF             / (SO WE CAN TRAP ANY SELECT ERROR)
 1192 41652 1275          TAD DTDIR
 1193 41653 6766          DTCA DTXA       /LOAD SEARCH FUNCTION
 1194 41654 6201          CDF
 1195 41655 1272          TAD DTSBKA      /ADDRESS AT WHICH TO DUMP BLOCK#'S
 1196 41656 3464          DCA I K7755     /CA (FIELD 0)
 1197 41657 6771          DTSF            /A SELECT ERROR WILL SHOW UP NOW
 1198 41660 7410          SKP             /NO ERROR?
 1199 41661 5673          JMP I DTSL1A    /REPORT SELECT ERROR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 28


 1200 41662 1257          TAD .-3
 1201 41663 3437          DCA I DTSFP     /SET UP DTSF IN INTERRUPT CHAIN
 1202 41664 6001          ION
 1203 41665 6211          DATFLD
 1204 41666 1024          TAD DTBSPI      /FIGURE OUT ADDRESS OF BUFFER NOW
 1205 41667 7001          IAC             / SINCE WE'LL NEED TO KNOW LATER
 1206 41670 3043          DCA DTBFAI      /SET PTR TO BUFFER ADDRESS
 1207 41671 5600          JMP I DTAGO0    / & RETURN
 1208             
 1209 41672 1737  DTSBKA, DTSBLK  /ADDRESS TO STORE BLOCK #'S
 1210 41673 1364  DTSL1A, DTSEL1  /CODE TO HANDLE IMMEDIATE SELECT-ERROR
 1211                     >
 1212             
 1213                     IFZERO CPU-3    <
 1214                     IOF
 1215                     JMS I GETBSB    /GET THE BUFFER STATUS
 1216                     JMP I DTFINA    /HE'S GONE - JUST EXIT
 1217                     DCA     DTDIR           /SAVE AWAY FOR NOW
 1218                     TAD     DTBLKI          /GET THE BLOCK NUMBER
 1219                     DCA     DTBLKJ          /STASH IN CORRECT POSITION.
 1220                     6141                    /GO OVER TO SUPER MODE
 1221                     2000+DTDIR              /GET STATUS REGISTER A
 1222                     240+20+3                /DO AN ROL I 3(ROTATE RIGHT THREE
 1223                     1560                    /BCL I
 1224                     7774                    /JUST LEAVE THE UNITS BITS
 1225                     1620                    /BSE I
 1226                     1130                    /SET D.F.=1,NO PAUSE AND EXTENDED ADDRESSING
 1227                     0001                    /AXO. SEND TO THE CONTROLLER.
 1228                     1000                    /LDA
 1229                     DTDIR                   /PUT STATUS REGISTER A BACK IN THE AC.
 1230                     240+6                   /ROL 6. BIT 0 IS NOW THE FUNCTION(R OR W).
 1231                     1560                    /CHOP OFF BITS 1-11. LINK STILL HOLDS THE UNIT BIT.
 1232                     3777                    /ZAP OUT EVERYTHING EXCEPT BIT 0.
 1233                     240+20+4                /ROTATE 4 PLACES SO WE HAVE A CORRECT INST.
 1234                     1620                    /NOW STICK IN THE BASIC INSTRUCTION.
 1235                     702                     /READ WITHOUT CHECKING.
 1236                     4000+DTSTCI             /SAVE IN THE CORRECT PLACE NOW FOR THE INSTRUCTION.
 1237                     2                       /GET BACK OVER INTO 8 MODE
 1238                     TAD DTBSPI      /FIGURE OUT WHAT BUFFER WE'LL USE.
 1239                     IAC
 1240                     DCA DTBFAI      /SET PTR TO BUFFER ADDRESS
 1241                     TAD I DTBFAI    /GET THE BUFFER POINTER NOW.
 1242                     IAC                     /ADD ONE BECAUSE LINC TAPES TAKE THE CORRECT ADDRESS.
 1243                     6141                    /GET BACK INTO SUPER MODE.
 1244                     23                      /SEND TO THE SUPER CONTROLLER
 1245             DTSTCI, 0                       /DO THE FANTASTIC OPERATION
 1246             DTBLKJ, 0                       /ON THE FANTASTIC BLOCK NUMBER
 1247                     1020                    /PLACE A SKIP IN THE AC NOW.
 1248                     SKP                     /ALWAYS SKIP ON THIS CONDITION.
 1249                     2                       /GET OVER INTO 8-MODE NOW.
 1250                     CDF                     /STORE AWAY THE SKIP INSRUCTION NW.
 1251                     DCA I   DTSFP
 1252                     TAD I   DTTCK           /GET THE CLOCK NOW.
 1253                     DCA     DTTCKH          /SAVE NOW FOR A SECOND. (FOR TIMEOUT)
 1254                     DATFLD
 1255                     TAD     DTTS10          /SET THE STATUS TO SHOW NOT DONE.
 1256                     DCA     DTSTAB          /SAVE NOW.

      /TSS/8 CONFIGURATION FOR UWM                                       Page 29


 1257                     ION
 1258                     JMP I   DTAGO0
 1259             
 1260             DTTCK,  CLK1                    /THE FAST CLOCK REGISTER(50 MS.)
 1261             DTTCKH, 0                       /THE "OLD" TIME NOW.
 1262             DTTS10, 10                      /DUMMY FOR STATUS REGISTER B.
 1263                             >
 1264             
 1265 41674 3245  DTDEVP, DEVTBE+5        /START OF DECTAPE ENTRIES
 1266 41675 0000  DTDIR,  0       /BUILD DTXA FUNCTION
 1267       0110  DTOVER= K0003   /DESIRED OVERSHOOT DURING REVERSE SEARCH
 1268       0103  DTSLID= K0010
 1269             
 1270                     IFZERO CPU-3 <
 1271             DTSFDA, DTLITI
 1272                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 30


 1273                     IFNZRO CPU-3    <
 1274             
 1275             /DECTAPE LEVEL 1 INTERRUPT HANDLERS
 1276             /ENTERED FROM HARD INTERRUPT VIA DTL11
 1277             
 1278             /REVERSE SEARCH
 1279 41676 1337  DTSRV,  TAD DTSBLK      /BLOCK# AT HEAD
 1280 41677 1110          TAD DTOVER      /OVERSHOOT BEYOND SOUGHT BLOCK
 1281 41700 7041          CIA
 1282 41701 1026          TAD DTBLKI      /BLOCK WE WANT
 1283 41702 7710          SPA CLA         /DESIRED BLK-(CURPENT BLK+OVER) .GT.0
 1284 41703 5307          JMP DTDMIS      /NO-KEEP GOING
 1285 41704 1342          TAD DTSFDA      /YES - NOW SEARCH FORWARD
 1286 41705 3040  DTOOPS, DCA DTINTD      /CHANGE DISPATCH
 1287 41706 1066          TAD K0400       /TOGGLE DIRECTION FLIP-FLOP
 1288 41707 6764  DTDMIS, DTXA
 1289 41710 4774          JMS I GETBSB    /CHECK THE BUFFER STATUS
 1290 41711 5324          JMP DTCOMP      /HE'S GONE - STOP THE DRIVE
 1291 41712 7200          CLA
 1292 41713 6771          DTSF            /IS THE DARN FLAG STILL UP?
 1293 41714 5117          JMP DISMIS      /NO - JUST DISMISS THE INTERRUPT
 1294 41715 6772          DTRB            /YES - MUST BE ERROR; GET THE STATUS
 1295 41716 3036          DCA DTSTAB
 1296             
 1297             /HARDWARE ERROR - LEVEL-1 INTERRUPT
 1298 41717 1036  DTERL1, TAD DTSTAB
 1299 41720 0066          AND K0400
 1300 41721 7640          SZA CLA         /WAS THIS A SELECT ERROR?
 1301 41722 1341          TAD DTSERR      /YES - DON'T TRY TO RECOVER
 1302 41723 1373          TAD DTERRA      /NO - TRY UP TO 4 TIMES
 1303             
 1304             /READ/WRITE COMPLETION
 1305 41724 1372  DTCOMP, TAD DTFINA      /SCHEDULE LEVEL 2 SERVICE
 1306 41725 3041          DCA DTL2D       /FIELD 1 DISPATCH
 1307 41726 6761          DTRA
 1308 41727 0101          AND K0204       /CLEAR THE MOTION BIT & INTERRUPT ENABLE
 1309 41730 1110          TAD K0003       / BUT LEAVE ANY ERROR BITS SHOWING
 1310 41731 6764          DTXA
 1311 41732 1100          TAD K7000
 1312 41733 6201          CDF
 1313 41734 3437          DCA I DTSFP     /DISABLE THE SKIP ON DECTAPE FLAG
 1314 41735 1371          TAD DTL2A0      /SET DISPATCH-FIELD 0
 1315 41736 5117          JMP DISMIS      / AND DISMIS
 1316             
 1317 41737 0000  DTSBLK, 0               /DUMP BLOCK #'S HERE WHEN SEARCHING
 1318 41740 1724  DTCMPA, DTCOMP          /READ-WRITE COMPLETION
 1319 41741 0002  DTSERR, DTERR2-DTERR    /SPECIAL HANDLING FOR SELECT-ERROR
 1320 41742 1744  DTSFDA, DTSFD           /FORWARD SEARCH
 1321 41743 1676  DTSRVA, DTSRV           /REVERSE SEARCH
 1322             
 1323             /FORWARD SEARCH
 1324 41744 1337  DTSFD,  TAD DTSBLK      /BLOCK WE'VE GOT
 1325 41745 7041          CIA
 1326 41746 1026          TAD DTBLKI      /BLOCK WE WANT
 1327 41747 7450          SNA             /ARE WE THERE?
 1328 41750 5355          JMP DTFND       /YES
 1329 41751 7700          SMA CLA         /NO-HAVE WE GONE TOO FAR?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 31


 1330 41752 5307          JMP DTDMIS      /NO-DISMIS
 1331 41753 1343          TAD DTSRVA      /YES-REVERSE
 1332 41754 5305          JMP DTOOPS
 1333             
 1334             /WE'VE REACHED THE DESIRED BLOCK AND ARE GOING 
 1335             /IN THE RIGHT DIRECTION, NOW START THE TRANSFER.
 1336 41755 1443  DTFND,  TAD I DTBFAI    /GET THE BUFFER ADDRESS
 1337 41756 6201          CDF             / TO SET UP DATA BREAK LOCATIONS
 1338 41757 3464          DCA I K7755     / CA = BUFFER - 1
 1339 41760 1067          TAD K7577
 1340 41761 3465          DCA I K7754     / WC = -201
 1341 41762 1340          TAD DTCMPA      /SET THE COMPLETION HANDLER ADDRESS
 1342 41763 3040          DCA DTINTD
 1343 41764 4774          JMS I GETBSB    /GET THE BUFFER STATUS
 1344 41765 5324          JMP DTCOMP      /HE'S GONE - NO NEED TO TRANSFER DATA
 1345 41766 0070          AND K0060       /GET FUNCTION
 1346 41767 1103          TAD K0010       /XOR SEARCH OUT, FUNCTION IN
 1347 41770 5307          JMP DTDMIS      /NOW SET THE COMMAND & CHECK FOR ERRORS
 1348                             >
 1349             
 1350                             IFZERO  CPU-3   <
 1351             DTLITI, TAD     DTI11           /SET TO SHOW DONE CONDITION
 1352                     DCA     DTSTAB          /AND PLACE IN STATUS REGISTER B.
 1353                     6141
 1354                     3                       /PLACE THE CHECKSUM IN THE AC.
 1355                     2                       /GET OVER INTO 8 MODE.
 1356                     7040                    /COMPLEMENT IT.
 1357                     SNA CLA                 /IS IT OK?
 1358                     JMP     DTLITO          /IT'S OK FOR NOW.
 1359                     TAD I   .+2             /WAS THE INSTRUCTION A READ OR WRITE?
 1360                     SKP
 1361                     DTSTCI                  /POINTER TO THE OPERATION
 1362                     RTR
 1363                     RAR
 1364                     SZL CLA                 /WAS IT A WRITE
 1365                     JMP     DTLITO          /YEP. IGNORE THE BAD CHECKSUM.
 1366                     TAD     DTI411          /SHOW PARITY ERROR
 1367             DTLTE,  DCA     DTSTAB          /BY STORING IN STATUS REGISTER B.
 1368                     TAD     DTERRA
 1369             DTLITO, TAD     DTFINA
 1370                     DCA     DTL2D
 1371                     6141
 1372                     1
 1373                     2                       /CLEAR OUT INTERUPT CODES FOR THE TAPE.
 1374                     TAD     DTT200          /SET BIT 4 ON TO CLEAR THE TAPE FLAG.
 1375                     6151                    /CLEAR THE TAPE FLAG NOW.
 1376                     CLA
 1377                     CDF     0
 1378                     TAD     K7000           /GET A NOP IN THE AC.
 1379                     DCA I   DTSFP           /DESTROY THE SKIP INSTRUCTION.
 1380                     TAD     DTL2A0
 1381                     JMP DISMIS
 1382             
 1383             DCREDR, CLA CLL CML RAR         /AC=4000 FOR TAPE PRESET
 1384                     6152                    /DO IT,BUBBY
 1385                     CLA
 1386                     TAD     DCC441          /GET THE SELECT ERROR CONDTION IN THE AC.

      /TSS/8 CONFIGURATION FOR UWM                                       Page 32


 1387                     JMP     DTLTE           /GIVE THE ERROR MESSAGE NOW.
 1388             
 1389             DCC441, 4410                    /SELECT ERROR.
 1390             DTI11,  11
 1391             DTT200, 200
 1392             DTI411, 4111
 1393                             >
 1394 41771 2375  DTL2A0, DTL20   /FIELD 0 DISPATCH FOR L2Q
 1395 41772 1214  DTFINA, DTFIN   /FINISH UP AT LEVEL 2
 1396 41773 0071  DTERRA, DTERR-DTFIN     /ATTEMPT RECOVERY (LEVEL 2)
 1397 41774 2365  GETBSB, GETBST

      /TSS/8 CONFIGURATION FOR UWM                                       Page 33


 1398                     PAGE
 1399             /FIELD 1 LEVEL 2 DISPATCHER
 1400 42000 5441  DTL21,  JMP I DTL2D
 1401             
 1402       2001          *DTL11
 1403             
 1404             /FIELD 1 LEVEL 2 DISPATCHER
 1405                             IFNZRO  CPU-3   <
 1406 42001 6772  DTL12,  DTRB            /CHECK FOR ERROR
 1407 42002 3036          DCA DTSTAB      /SAVE STATUS B
 1408 42003 1036          TAD DTSTAB
 1409 42004 7700          SMA CLA
 1410 42005 5440          JMP I DTINTD    /OK
 1411 42006 5607          JMP I .+1       /ERROR
 1412 42007 1717          DTERL1          /LEVEL 1 ERROR HANDLER
 1413                             >
 1414             
 1415                             IFZERO  CPU-3   <
 1416             DTL12,  6141
 1417                     416
 1418                     17
 1419                     2
 1420                     SNA CLA                 /IF AC IS NOT 0 THEN FLAG ISN'T UP YET.
 1421                     JMP I   DTINTD
 1422                     CDF     0               /PREPARE TO PICK UP THE CLOCK NOW.
 1423                     TAD I   DCCK            /GET THE NEW CLOCK
 1424                     DATFLD                  /RESET THE DATA FIELD NOW.
 1425                     CMA                     /NEGATE IT.
 1426                     TAD I   DCCOLD          /GET THE OLD VALUE
 1427                     CLL
 1428                     TAD     DCC640          /ADD IN THE TIME FACTOR
 1429                     SNL CLA                 /TEST LINC FOR ERROR CONDTION.
 1430                     JMP I   DCCERR          /IT TOOK TOO LONG. SORRY ABOUT THAT.
 1431                     CDF CIF 0               /GO BACK AND CONTINUE WITH THE INTERUPT CRAP.
 1432                     JMP I   .+1
 1433                     DTINT+1
 1434             
 1435             DCCERR, DCREDR
 1436                     DECIMAL
 1437             DCC640, 640
 1438                     OCTAL
 1439             DCCOLD, DTTCKH
 1440             DCCK,   CLK1
 1441                             >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 34


 1442 42010 4232  DTREDO, JMS DTRPT       /BACK UP HIS PC
 1443 42011 2020  DTWAIT, ISZ DTDB        /POINTS TO JOB# IN DDB
 1444 42012 1420          TAD I DTDB      /JOB#
 1445 42013 4522          JMS I GETTBA    /CLEAR NOT WAITING BIT IN STR1
 1446 42014 0001           JOBSTS+1
 1447 42015 7344          CLA CLL CMA RAL /AC = 7776
 1448 42016 0472          AND I TEMP0
 1449 42017 3472          DCA I TEMP0
 1450 42020 2072          ISZ TEMP0       /POINTS TO STR2
 1451 42021 3472          DCA I TEMP0     /CLEAR DECTAPE FLAGS
 1452 42022 2072          ISZ TEMP0
 1453 42023 7001          IAC
 1454 42024 3472          DCA I TEMP0     /SET 'NOT WAITING BIT' IN WAIT 1
 1455 42025 2072          ISZ TEMP0
 1456 42026 1110          TAD K0003       /DT ERROR, COMPLETION FLAGS SET IN WAIT 2
 1457 42027 3472          DCA I TEMP0
 1458 42030 6203  REDO1B, CIF CDF
 1459 42031 5577          WAIT
 1460             
 1461             /ROUTINE TO BACK UP THIS USER'S PC SO WE RE-TRY THIS IOT.
 1462 42032 0000  DTRPT,  0
 1463 42033 6201          CDF
 1464 42034 7240          STA
 1465 42035 1641          TAD I L2SV0P    /SUBTRACT ONE FROM HIS PC
 1466 42036 3641          DCA I L2SV0P
 1467 42037 6211          DATFLD
 1468 42040 5632          JMP I DTRPT
 1469             
 1470 42041 0104  L2SV0P, L2SV0
 1471             
 1472 42042 4232  REDO1A, JMS DTRPT       /BACK UP HIS PC
 1473 42043 1161          TAD CJOBDA      /ADDRESS OF JOB STATUS BLOCK 1
 1474 42044 1110          TAD K0003       /BUILD POINTER TO STR2
 1475 42045 3072          DCA TEMP0
 1476 42046 3472          DCA I TEMP0     /CLEAR ALL (DTA) FLAGS IN STR2
 1477 42047 2072          ISZ TEMP0       /POINTS TO WAIT 1
 1478 42050 3472          DCA I TEMP0     /CLEAR WAIT 1
 1479 42051 2072          ISZ TEMP0       /POINTS TO WAIT 2
 1480 42052 1102          TAD K0007       /ANY DECTAPE FLAG WILL DO
 1481 42053 3472          DCA I TEMP0     /FOR PURPOSES OF WAIT
 1482 42054 5230          JMP REDO1B      /AND AWAY....

      /TSS/8 CONFIGURATION FOR UWM                                       Page 35


 1483             /ROUTINE TO SET STATUS REGISTER B FOR DUMMY ERRORS
 1484             /USED WHEN DTA FUNCTION IS NOT 2 OR 4
 1485             /OR WHEN IMPOSSIBLE BLOCK # IS SOUGHT
 1486             /ALL WE HAVE TO DO IS SET STATUS B
 1487             /NO BUFFERS OR ANYTHING TO RELEASE. AREN'T WE LUCKY!
 1488             
 1489 42055 2020  DTSEL2, ISZ DTDB        /POINTS TO JOB #
 1490 42056 1420          TAD I DTDB      /JOB "
 1491 42057 4522          JMS I GETTBA    /GET PTR TO STATUS B
 1492 42060 0024           JOBSTB
 1493 42061 1073          TAD TEMP1       /DUMMY ERROR
 1494 42062 3472          DCA I TEMP0     /PUT IT AWAY
 1495 42063 6203          CIF CDF
 1496 42064 5665          JMP I .+1
 1497 42065 0326          UUOEX1          /AND BACK TO THE USER
 1498             
 1499 42066 0000  DTXNF0, 0               /ROUTINE TO TURN OFF JSEXON
 1500 42067 4522          JMS I GETTBA    /CALLED WITH JOB # IN AC
 1501 42070 0000           JOBSTS
 1502 42071 1472          TAD I TEMP0
 1503 42072 0275          AND DTEXON
 1504 42073 3472          DCA I TEMP0
 1505 42074 5666          JMP I DTXNF0
 1506             
 1507 42075 7757  DTEXON, -JSEXON-1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 36


 1508             /THIS ROUTINE TAKES THE SERVICE REQUEST POINTED AT
 1509             /BY DTDB AND EITHER STORES IT IN DTQ OR CALLS
 1510             /DTAGO TO START PROCESSING
 1511             
 1512 42076 0000  DTUSER, 0
 1513 42077 1023          TAD DTBSP       /POINTER TO BUFFER CONTROL-WORD
 1514 42100 3022          DCA DTQ
 1515 42101 1104          TAD K0004       /AC=4
 1516 42102 1020          TAD DTDB
 1517 42103 3010          DCA IX0         /SET TO REFERENCE WORD 6 OF DDB
 1518 42104 1023          TAD DTBSP
 1519 42105 3410          DCA I IX0       /PTR TO PTR TO BUF STATUS WD
 1520 42106 1025          TAD DTBLK
 1521 42107 3410          DCA I IX0       /BLOCK TO SEARCH FOR
 1522 42110 1027          TAD DTCORA
 1523 42111 3410          DCA I IX0       /CORE ADDRESS-1 (IN USER AREA)
 1524 42112 2030          ISZ DTABSY      /CONTROLLER BUSY?
 1525 42113 5676          JMP I DTUSER    /YES - LEAVE REQUEST IN QUEUE
 1526 42114 1022          TAD DTQ         /NO - START IT UP
 1527 42115 3024          DCA DTBSPI      /POINTER TO BUFFER CONTROL-WORD
 1528 42116 3022          DCA DTQ         /QUE IS EMPTY
 1529 42117 1106          TAD K7774       /-# TIMES TO ATTEMPT RECOVERY
 1530 42120 3031          DCA DTERCT      /GO START SEARCH
 1531 42121 4447          JMS I DTAGO
 1532 42122 5676          JMP I DTUSER    /RETURN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 37


 1533 42123 1042  DTRTRN, TAD DTBFF       /MOVE DATA - BUFFER 1 TO USER
 1534 42124 1035          TAD DTBFA2      / -BUFFER 2 TO USER
 1535 42125 3010          DCA IX0         /START OF BUFFER-1
 1536 42126 1027          TAD DTCORA
 1537 42127 3011          DCA IX1         /POINTS TO USER AREA
 1538 42130 1067          TAD K7577       /-201
 1539 42131 3072          DCA TEMP0
 1540 42132 1410          TAD I IX0       /WORD FROM BUFFER
 1541 42133 4112          JMS UDF1
 1542 42134 3411          DCA I IX1       /---TO USER
 1543 42135 6211          DATFLD
 1544 42136 2072          ISZ TEMP0       /DONE YET?
 1545 42137 5332          JMP .-5         /NO
 1546 42140 2020          ISZ DTDB        /POINTS TO JOB #
 1547 42141 1420          TAD I DTDB
 1548 42142 4451          JMS I DTXONF    /NOW THAT HE'S BEEN HERE TWICE, TURN OFF JSEXON
 1549 42143 1104          TAD K0004       /YES-NOW RELEASE BUFFER
 1550 42144 1020          TAD DTDB        /START OF DDB+2
 1551 42145 3072          DCA TEMP0       /POINTS TO PTR TO TO BUF STAT WD
 1552 42146 1472          TAD I TEMP0     /PTR TO BUFF STATUS WD.
 1553 42147 3072          DCA TEMP0
 1554 42150 3472          DCA I TEMP0     /BUFF STATUS:=0
 1555 42151 6203          CIF CDF         /NOW DOWN TO FIELD 1
 1556 42152 3511          DCA I L2SAP     /CLEAR USER AC
 1557 42153 5754          JMP I .+1       /RETURN TO USER
 1558             
 1559                     /IN ORDER TO AVOID THIS USER FROM INITIATING ANOTHER
 1560                     /REQUEST WHILE OTHERS MAY BE LOCKED OUT FROM THE CONTROLLER,
 1561                     /WE PUT HIM TEMPORARILLY TO REST IF THERE ARE MORE THAN
 1562                     /2 DRIVES ON THE SYSTEM.
 1563 42154 0326          IFZERO TU55     <UUOEX1 >
 1564                     IFZERO TU55-1   <WSCHED >
 1565                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 38


 1566                     IFNZRO TOF-.&4000       <GLITCH>
 1567       2200          *TOF
 1568             /FETCH CHARACTER
 1569             /CALL   WITH DDB ADDRESS IN AC
 1570             /       FETCH
 1571             /       -#CHAR/BUFFER FOR FRONT END FETCH,+#CHAR/BUFFER FOR TAIL END
 1572             /       END OF BLOCK RETURN
 1573             /       BUFFER EMPTY RETURN
 1574             /       CHAR IN AC
 1575             
 1576 42200 0000  TOF,    0
 1577 42201 3313          DCA TOFBP
 1578 42202 1600          TAD I TOF
 1579 42203 3312          DCA TOFSIZ
 1580 42204 2200          ISZ TOF
 1581 42205 6214          RDF
 1582 42206 1117          TAD K6203
 1583 42207 3263          DCA TOF7
 1584 42210 1313          TAD TOFBP
 1585 42211 6211          DATFLD          /SO IT KNOWS WHEREOF WE CAME
 1586 42212 4316          JMS BUFTST
 1587 42213 5263          JMP TOF7
 1588 42214 5262          JMP TOF5
 1589 42215 1312          TAD TOFSIZ      /FRONT END?
 1590 42216 7510          SPA
 1591 42217 5230          JMP TOF9        /YES
 1592 42220 7200          CLA
 1593 42221 1315          TAD TOFT1       /NO. TAIL END
 1594 42222 3311          DCA TOFBCT
 1595 42223 7240          STA
 1596 42224 1311          TAD TOFBCT
 1597 42225 3313          DCA TOFBP
 1598 42226 1312          TAD TOFSIZ
 1599 42227 7041          CIA
 1600 42230 1102  TOF9,   TAD K0007
 1601 42231 7700          SMA CLA         /PACKING?
 1602 42232 5240          JMP .+6         /NO
 1603 42233 1711          TAD I TOFBCT    /GET CHAR
 1604 42234 1110          TAD K0003
 1605 42235 7500          SMA             /COUNT>3?
 1606 42236 5265          JMP TOF3        /NO
 1607 42237 7410          SKP
 1608 42240 1711          TAD I TOFBCT
 1609 42241 7041          CIA             /YES
 1610 42242 1713          TAD I TOFBP
 1611 42243 3315          DCA TOFT1
 1612 42244 1715          TAD I TOFT1
 1613 42245 0306          AND C0377
 1614 42246 3314          DCA TOFT2
 1615 42247 2200  TOF4,   ISZ TOF
 1616 42250 1312          TAD TOFSIZ
 1617 42251 7710          SPA CLA
 1618 42252 5257          JMP .+5
 1619 42253 7240          STA
 1620 42254 1711          TAD I TOFBCT
 1621 42255 3711          DCA I TOFBCT
 1622 42256 7410          SKP

      /TSS/8 CONFIGURATION FOR UWM                                       Page 39


 1623 42257 2711          ISZ I TOFBCT
 1624 42260 7000          NOP
 1625 42261 1314          TAD TOFT2
 1626 42262 2200  TOF5,   ISZ TOF
 1627 42263 0000  TOF7,   0
 1628 42264 5600          JMP I TOF
 1629 42265 7124  TOF3,   STL RAL
 1630 42266 1713          TAD I TOFBP
 1631 42267 3315          DCA TOFT1
 1632 42270 1715          TAD I TOFT1
 1633 42271 7012          RTR
 1634 42272 7012          RTR
 1635 42273 0307          AND C360
 1636 42274 3314          DCA TOFT2
 1637 42275 2315          ISZ TOFT1
 1638 42276 1715          TAD I TOFT1
 1639 42277 7106          CLL RTL
 1640 42300 7006          RTL
 1641 42301 7004          RAL
 1642 42302 0310          AND C17
 1643 42303 1314          TAD TOFT2
 1644 42304 3314          DCA TOFT2
 1645 42305 5247          JMP TOF4
 1646             
 1647       0104  TOFIP=K0004     /DDBINP
 1648 42306 0377  C0377,  377
 1649 42307 0360  C360,   360
 1650 42310 0017  C17,    17
 1651 42311 0000  TOFBCT, 0
 1652 42312 0000  TOFSIZ, 0
 1653 42313 0000  TOFBP,  0
 1654 42314 0000  TOFT2,  0
 1655 42315 0000  TOFT1,  0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 40


 1656             /BUFFER TEST
 1657             /CALL   TAD ADDSESS OF DDB
 1658             /       JMS BUFTST
 1659             /       END OF BLOCK
 1660             /       EMPTY
 1661             /       NOT EMPTY
 1662             
 1663 42316 0000  BUFTST, 0
 1664 42317 3072          DCA TEMP0       /SAVE DDB ADDRESS
 1665 42320 6214          RDF
 1666 42321 1117          TAD K6203       /FIGURE OUT WHERE WE CAME FROM
 1667 42322 3354          DCA BUFTS5      /SO WE CAN GET BACK
 1668 42323 1072          TAD TEMP0       /NOW THE DDB ADDRESS AGAIN
 1669 42324 6211          DATFLD
 1670 42325 1104          TAD TOFIP
 1671 42326 3315          DCA TOFT1       /FILL POINTER
 1672 42327 7326          CLA CLL CML RTL /AC=2
 1673 42330 1315          TAD TOFT1
 1674 42331 3313          DCA TOFBP       /ADDRESS OF EMPTY POINTER
 1675 42332 1313          TAD TOFBP
 1676 42333 7001          IAC
 1677 42334 3311          DCA TOFBCT      /ADDRESS OF EMPTY COUNT
 1678 42335 1713          TAD I TOFBP
 1679 42336 7450          SNA             /BUFFER SET UP?
 1680 42337 5353          JMP  BUFTS1     /NO
 1681 42340 7041          CIA
 1682 42341 1715          TAD I TOFT1     /FILL POINTER=EMPTY POINTER
 1683 42342 2315          ISZ TOFT1
 1684 42343 7640          SZA CLA
 1685 42344 5356          JMP BUFTS2      /NO
 1686 42345 1715          TAD I TOFT1
 1687 42346 7040          CMA
 1688 42347 1711  BUFTS3, TAD I TOFBCT
 1689 42350 7650  BUFTS4, SNA CLA         /BLOCK EMPTY?
 1690 42351 5354          JMP BUFTS5
 1691 42352 2316          ISZ BUFTST
 1692 42353 2316  BUFTS1, ISZ BUFTST
 1693 42354 0000  BUFTS5, 0
 1694 42355 5716          JMP I BUFTST
 1695             
 1696 42356 1312  BUFTS2, TAD TOFSIZ
 1697 42357 7710          SPA CLA
 1698 42360 5347          JMP BUFTS3
 1699 42361 1312          TAD TOFSIZ
 1700 42362 7001          IAC
 1701 42363 1715          TAD I TOFT1
 1702 42364 5350          JMP BUFTS4
 1703             
 1704                     IFZERO TC01-1 <
 1705             /ROUTINE TO PICK UP THE DECTAPE BUFFER STATUS-WORD
 1706             /CURRENTLY IN USE BY THE CONTROLLER AND SKIP IF THE USER
 1707             /IS STILL ACTIVE.
 1708 42365 0000  GETBST, 0
 1709 42366 6211          DATFLD
 1710 42367 1424          TAD I DTBSPI    /GET THE CONTROL-WORD
 1711 42370 7110          CLL RAR
 1712 42371 7670          SNA SZL CLA     /ZERO OR 'TERMINATED' SET?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 41


 1713 42372 5765          JMP I GETBST    /YES - JUST RETURN
 1714 42373 2365          ISZ GETBST      /NO - SKIP ON RETURN
 1715 42374 1424          TAD I DTBSPI
 1716 42375 5765          JMP I GETBST    /RETURN WITH THE STATUS
 1717                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 42


 1718                     IFNZRO CRASH-.&4000     <GLITCH>
 1719       2400          *CRASH
 1720             /CRASH-DUMP PROGRAM HAS BEEN RE-INSTALLED BY UWM.
 1721                     IFNZRO D689-4 <
 1722                     IFZERO TC01-1 <
 1723                     IFZERO TD8E <
 1724                     IFNZRO CPU-3 <
 1725 42400 5550          JMP I CBOOTA    /GO LOAD THE DUMP ROUTINE
 1726                     >>>>
 1727                     IFZERO CRASH-. <
 1728                     HLT             /IF CRASHDUMP NOT CONFIGURED, JUST HALT
 1729                     >
 1730                     IFZERO TC01-1   <
 1731             /THIS FIXES THE CTRL/C (^C) PROBLEM WHEN DECTAPE IS IN MOTION.
 1732 42401 0000  CNTRLC, 0
 1733 42402 3250          DCA CNC1        /ENTERED WITH JOB # TO CHECK
 1734 42403 6214          RDF
 1735 42404 1117          TAD K6203
 1736 42405 3214          DCA CNTRL1      /SET THE EXIT FIELD SELECT
 1737 42406 6211          DATFLD
 1738 42407 1044          TAD DTBS1A
 1739 42410 4216          JMS CHECK       /CHECK IF BUFFER 1 BELONGS TO HIM
 1740 42411 1050          TAD DTBS2A
 1741 42412 4216          JMS CHECK       /CHECK IF BUFFER 2 BELONGS TO HIM
 1742 42413 1250          TAD CNC1        /PICK UP THE -JOB #
 1743 42414 7402  CNTRL1,  HLT
 1744 42415 5601          JMP I CNTRLC    /RETURN TO FIELD 0 - AC = JOB #
 1745                     >
 1746             
 1747 42416 0000  CHECK,  0
 1748 42417 3261          DCA CNC2
 1749 42420 1661          TAD I CNC2
 1750 42421 7110          CLL RAR
 1751 42422 7670          SNA SZL CLA     /IS THIS BUFFER ACTIVE?
 1752 42423 5616          JMP I CHECK     /NO - THEN HE CAN'T HAVE IT
 1753 42424 1661          TAD I CNC2
 1754 42425 7006          RTL; RTL
      42426 7006
 1755 42427 0102          AND K0007       /YES - GET THE UNIT NUMBER
 1756 42430 1247          TAD SRELTB      / AND FIND THE 'DEVTBL' ENTRY
 1757 42431 3350          DCA CNC3
 1758 42432 1750          TAD I CNC3      /GET THE DDB
 1759 42433 3010          DCA AXS1        / & THE PTR TO THE JOB #
 1760 42434 1410          TAD I AXS1      /JOB # OF THE OWNER OF THIS DECTAPE
 1761 42435 7041          CIA
 1762 42436 1250          TAD CNC1
 1763 42437 7640          SZA CLA         /IS IT OWNED BY THIS USER?
 1764 42440 5616          JMP I CHECK
 1765 42441 1661          TAD I CNC2      /YES - GET THE BUFFER STATUS-WORD AGAIN
 1766 42442 0104          AND K0004
 1767 42443 7650          SNA CLA         /IS HE IN PASS 2 OF 'READ'?
 1768 42444 7201          CLA IAC         /NO - JUST SET THE 'TERMINATED' FLAG
 1769 42445 3661          DCA I CNC2      /YES - CLEAR THE STATUS-WORD
 1770 42446 5616          JMP I CHECK
 1771             
 1772 42447 3245  SRELTB, DEVTBE+5        /START OF DECTAPE ENTRIES IN 'DEVTBL'

      /TSS/8 CONFIGURATION FOR UWM                                       Page 43


 1773             /JOB TABLE ADDRESS TO TEMP0
 1774             /CALL TAD JOB#
 1775             /       JMS GETTB0
 1776             /       TABLE ENTRY
 1777             /       RETURN WITH ADDRESS IN TEMP0
 1778             
 1779             CNC1,
 1780 42450 0000  GETTB0, 0
 1781 42451 3072          DCA TEMP0       /SAVE JOB#
 1782 42452 1650          TAD I GETTB0    /PICK UP ARGUMENT
 1783 42453 2250          ISZ GETTB0      / AND INCREMENT THE RETURN
 1784 42454 3261          DCA .+5
 1785 42455 1072          TAD TEMP0       /JOB#
 1786 42456 1054          TAD JOBTB0      /START OF JOBTBL
 1787 42457 6202          CIF
 1788 42460 4666          JMS I GETTB1    /GETJTA
 1789             CNC2,
 1790 42461 0000  BRKCNT,  0
 1791 42462 7450          SNA             /LEGAL ADDRESS?
 1792 42463 4547          REBOOT          /NO - ERROR *****
 1793 42464 3072          DCA TEMP0       /ADDRESS TO TEMP0
 1794 42465 5650          JMP I GETTB0
 1795             
 1796 42466 6600  GETTB1, GETJTB
 1797             
 1798 42467 0000  DFCLS0, ZBLOCK 4
      42470 0000
      42471 0000
      42472 0000
 1799 42473 0000  DFCNO0, ZBLOCK 4
      42474 0000
      42475 0000
      42476 0000
 1800 42477 0000  DFL2S0, ZBLOCK 4
      42500 0000
      42501 0000
      42502 0000
 1801 42503 7777          -1              /TO END TABLE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 44


 1802                     IFNZRO BRKTST-.&4000    <GLITCH>
 1803       2505          *BRKTST
 1804             
 1805             /TEST FOR BREAK CHAR
 1806             /CALL   TAD BREAK MASK, CHARACTER IN 'TTCHAR'
 1807             /       BREAK
 1808             /       BREAK RETURN
 1809             /       NON-BREAK RETURN
 1810             
 1811 42505 0000  BRKTST, 0
 1812 42506 7550          SPA SNA         /ANY CHARACTER A BREAK?
 1813 42507 5341          JMP BRKEXT      /YES
 1814 42510 3350          DCA BRKMSK      /NO, SAVE MASK
 1815 42511 3261          DCA BRKCNT      /ZERO COUNTER
 1816 42512 1352          TAD BRKTBA      /START OF RANGE VECTOR
 1817 42513 3010          DCA AXS1
 1818             
 1819 42514 1410  BRK0,   TAD I AXS1      /-LOW END OF RANGE
 1820 42515 7450          SNA             /END OF LIST
 1821 42516 5327          JMP BRK3        /YES
 1822 42517 6201          CDF             /DOWN TO FIELD 0
 1823 42520 1751          TAD I TTKARA    /IS CHAR .GT. LOW END?
 1824 42521 6211          DATFLD
 1825 42522 7510          SPA
 1826 42523 5344          JMP BRK1        /NO-FORGET IT
 1827 42524 1410          TAD I AXS1      /YES- IS CHAR <= HIGH END?
 1828 42525 7740          SMA SZA CLA
 1829 42526 5346          JMP BRK2        /NO
 1830             
 1831 42527 1261  BRK3,   TAD BRKCNT      /YES- ITS'S IN THIS CLASS
 1832 42530 7040          CMA
 1833 42531 3261          DCA BRKCNT      /-# TIMES TO SHIFT BIT
 1834 42532 7330          CLA CLL CML RAR /SET A BIT
 1835 42533 7010          RAR             / & SHIFT IT INTO POSITION
 1836 42534 2261          ISZ BRKCNT
 1837 42535 5333          JMP .-2
 1838             
 1839 42536 0350          AND BRKMSK      /IS THIS ABREAK CHARACTER?
 1840 42537 7650          SNA CLA         /DOES THE MASK COVER THIS CHARACTER?
 1841 42540 2305          ISZ BRKTST      /NO - TAKE SECOND EXIT
 1842 42541 7300  BRKEXT, CLA CLL
 1843 42542 6203          CIF CDF
 1844 42543 5705          JMP I BRKTST    /RETURN
 1845             
 1846 42544 7200  BRK1,   CLA
 1847 42545 2010          ISZ AXS1        /SKIP NEXT VALUE IN LIST
 1848 42546 2261  BRK2,   ISZ BRKCNT      /BUMP COUNTER
 1849 42547 5314          JMP BRK0        /TRY NEXT TYPE
 1850             
 1851             CNC3,
 1852 42550 0000  BRKMSK, 0
 1853 42551 0031  TTKARA, TTCHAR
 1854             
 1855 42552 2552  BRKTBA, .
 1856 42553 7477          -"A; "A-"Z      /LETTERS
      42554 7747
 1857 42555 7520          -"0; "0-"9      /NUMERALS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 45


      42556 7767
 1858 42557 7567          -211; 0         /HORIZONTAL TAB
      42560 0000
 1859 42561 7566          -212; 212-215   /LF, VT, FF, RETURN
      42562 7775
 1860 42563 7537          -"!; "!-";      /! " # $ % & ' ( ) * + , - . / : ;
      42564 7746
 1861 42565 7540          -240; 0         /SPACE
      42566 0000
 1862 42567 7504          -"<; "<-"@      /<=>?@
      42570 7774
 1863 42571 7445          -"[; "[-"_      /[\]^_
      42572 7774
 1864 42573 7401          -377; 0         /RUBOUT
      42574 0000
 1865 42575 7403          -375; 375-376   /ALTMODE (FOR ASR 33 & 35)
      42576 7777
 1866 42577 0000          0               /END OF THE LIST

      /TSS/8 CONFIGURATION FOR UWM                                       Page 46


 1867                     IFNZRO TIMER0-.&4000    <GLITCH>
 1868       2600          *TIMER0
 1869             /ROUTINE TO DECREMENT TIMERS
 1870             /THEY ARE BUMPED ONCE EACH SECOND
 1871             /THUS A USER CAN MEASURE UP TO 4096 SECONDS
 1872             
 1873 42600 0000  TIMER0, 0
 1874 42601 5254          JMP DISPLA
 1875       2601          *.-1
 1876 42601 7000          NOP             /REPLACE THIS NOP WITH 'JMP DISPLA' TO ENABLE IT
 1877 42602 2245  TIMER4, ISZ TIMBIG      /HAVE WE GONE THROUGH A SECOND YET?
 1878 42603 5243          JMP TIMOUT      /NO
 1879 42604 1246          TAD TICSEC      /REFRESH SECOND TIMER
 1880 42605 3245          DCA TIMBIG
 1881 42606 1247          TAD TIMEMJ
 1882 42607 3073          DCA TIMET1
 1883 42610 1252          TAD TIMTB1      /START OF CLKTBL
 1884 42611 3251          DCA TIMET2
 1885 42612 6211  TIMER1, DATFLD
 1886 42613 1651          TAD I TIMET2
 1887 42614 7650          SNA CLA         /IS THIS TIMER RUNNING?
 1888 42615 5233          JMP TIMER2      /NO
 1889 42616 2651          ISZ I TIMET2    /YES - DECREMENT IT
 1890 42617 5233          JMP TIMER2
 1891 42620 1250          TAD TIMEJM      /IT RAN OUT - SET TIMER FLAG
 1892 42621 1073          TAD TIMET1
 1893 42622 4522          JMS I GETTBA    /GET PTR TO STATUS 1
 1894 42623 0001           JOBSTS+1
 1895 42624 1072          TAD TEMP0
 1896 42625 7650          SNA CLA         /DOES THE JOB STILL EXIST?
 1897 42626 4547          REBOOT          /NO - 'CLKTBL' ENTRY NOT CLEARED, SO ERROR *****
 1898 42627 1472          TAD I TEMP0     /YES, SET JSTIME IN STR1
 1899 42630 7004          RAL
 1900 42631 7130          STL RAR
 1901 42632 3472          DCA I TEMP0
 1902 42633 2251  TIMER2, ISZ TIMET2
 1903 42634 2073          ISZ TIMET1
 1904 42635 5212          JMP TIMER1
 1905 42636 2174          ISZ UPTIM1      /INDEX LOW ORDER UPTIME
 1906 42637 7410          SKP
 1907 42640 2173          ISZ UPTIM2      /INDEX HI ORDER UPTIME
 1908 42641 7000          NOP
 1909             
 1910                     IFZERO CPU-2 <
 1911 42642 4653          JMS I TIMKFX    /FIX ROUTINE FOR KL8E BUG
 1912                     >
 1913                     IFZERO D689-4 <
 1914                     JMP TIMPAT      /CHECK FOR PHONE SERVICE REQUIREMENT
 1915                     >
 1916 42643 6203  TIMOUT, CIF CDF         /BACK TO FIELD 0
 1917 42644 5600          JMP I TIMER0    /RETURN
 1918             
 1919 42645 7754  TIMBIG, -TICSPS         /ACTIVE COUNTER
 1920 42646 7754  TICSEC, -TICSPS         /STARTING VALUE OF TIMEBIG
 1921 42647 7754  TIMEMJ, -JOBMAX
 1922 42650 0025  TIMEJM, JOBMAX+1
 1923       0073  TIMET1= TEMP1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 47


 1924 42651 0000  TIMET2, 0
 1925 42652 3304  TIMTB1, CLKTBL+1
 1926                     IFZERO CPU-2 <
 1927 42653 3050  TIMKFX, FXPT08
 1928                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 48


 1929             /ROUTINE TO DUMP VALUE OF ONE CORE CELL INTO MQ 
 1930             /RUNS AT EACH SYSTEM TICK
 1931             /TO USE, SET THE DESIRED CORE ADDRESS IN THE SWITCH REGISTER
 1932             /TO SELECT FIELDS, CLEAR TO SR TO 0, AND SET THE DESIRED
 1933             /FIELD IN THE LOW ORDER BITS OF THE SR.
 1934             
 1935             /THIS MEANS THAT YOU CANNOT ADDRESS LOCATIONS 0,1,2,OR 3
 1936             /BY THE SR.  WHEN DOING A FIELD SELECT, LOCATION 1
 1937             /OF THE SELECTED FIELD IS AUTOMATICALLY CHOSEN
 1938             
 1939             /IF THIS ROUTINE IS RUNNING, THE EAE IS NOT MUCH USE
 1940             /TO USER PROGRAMS.  SORRY ABOUT THAT.
 1941             
 1942 42654 7604  DISPLA, LAS             /GET ADDRESS FROM SR
 1943 42655 0275          AND C7774       /TRYING A FIELD SELECT?
 1944 42656 7450          SNA
 1945 42657 5266          JMP DISPL1      /YES, GO CHANGE THE FIELD
 1946 42660 7604          LAS             /NO; WHAT WAS THAT ADDRESS AGAIN
 1947 42661 3072          DCA TEMP0
 1948 42662 6201  DISFLD, CDF             /ASSUME FIELD 0 TO START
 1949 42663 1472          TAD I TEMP0     /PICK UP CONTENTS OF SPECIFIED ADDRESS
 1950 42664 7421          MQL             /DUMP IT IN THE MQ
 1951 42665 5202          JMP TIMER4      /BACK TO MORE IMPORTANT THINGS
 1952             
 1953 42666 7604  DISPL1, LAS             /WHAT WAS THAT FIELD AGAIN?
 1954 42667 7104          CLL RAL
 1955 42670 7006          RTL
 1956 42671 1276          TAD DISCDF      /BUILD FIELD SELECT
 1957 42672 3262          DCA DISFLD
 1958 42673 7001          IAC             /LOOK AT LOCATION 1 OF CHOSEN FIELD
 1959 42674 5261          JMP DISFLD-1    /NOW GO LOOK
 1960             
 1961 42675 7774  C7774,  7774
 1962                     
 1963 42676 6201  DISCDF, CDF
 1964 42677 0000  DFCNT,  0
 1965             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 49


 1966       2700          *UPEEK1
 1967             
 1968             /UPEEK1,
 1969 42700 7240          STA             /ROUTINE TO ALLOW USER TO INSPECT MONITOR
 1970 42701 1511          TAD I L2SAP     /GET USER AC FROM FIELD 0
 1971 42702 3012          DCA IX2         /POINTS TO WORD BEFORE USER'S FOUR WORD BLOCK
 1972 42703 1516          TAD I UDFP      /GET USER FIELD SELECT
 1973 42704 3113          DCA UDF1+1      /AND SET IT UP HERE
 1974 42705 4112          JMS UDF1        /USER FIELD SELECT
 1975 42706 1412          TAD I IX2       /PICK UP MONITOR FIELD
 1976 42707 0107          AND K0070       /DON'T LET HIM SCREW US
 1977 42710 1276          TAD DISCDF      /DATA FIELD SELECT
 1978 42711 3322          DCA UPEMF       /MONITOR FIELD SELECT
 1979 42712 7240          STA
 1980 42713 1412          TAD I IX2       /MONITOR CORE ADDRESS-1
 1981 42714 3010          DCA IX0
 1982 42715 7240          STA
 1983 42716 1412          TAD I IX2       /USER AREA CORE ADDRESS
 1984 42717 3011          DCA IX1         /-1
 1985 42720 1412          TAD I IX2       /-#WORDS TO TRANSFER
 1986 42721 3012          DCA IX2
 1987             
 1988 42722 0000  UPEMF,  0               /SELECT MONITOR FIELD
 1989 42723 1410          TAD I IX0       /PICK UP WORD
 1990 42724 4112          JMS UDF1        /SELECT USER FIELD
 1991 42725 3411          DCA I IX1       /PASS IT ON TO USER
 1992 42726 2012          ISZ IX2         /DONE?
 1993 42727 5322          JMP .-5
 1994 42730 6203          CIF CDF         /YES
 1995 42731 3511          DCA I L2SAP     /CLEAR USER AC
 1996 42732 5733          JMP I .+1
 1997 42733 0326          UUOEX1
 1998             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 50


 1999       2734          *DFINT1
 2000             
 2001                     IFZERO D689-4   <
 2002             /DFINT1,
 2003                     SRF             /RINGING?
 2004                     SKP
 2005                     JMP DFRING      /YES
 2006                     SCF             /CHANGED CARRIER?
 2007                     JMP CONT                /KEEP GOING IN THE INTERRUPT CHAIN
 2008                     CLA CLL         /YES, CLEAR FLAG AND COME BACK LATER
 2009                     CCF
 2010                     TAD K7774       /FOR SOME PRDEFINED INTERVAL
 2011                     DCA DFTIMER
 2012                     JMP DISMIS      /THAT'S ALL TO DO FOR NOW
 2013             
 2014             DFCSET, 0
 2015                     TAD DFCLST
 2016                     DCA DFCLSI      /POINTER TO STATUS AT LAST INTERRUPT
 2017                     TAD DFCNOW
 2018                     DCA DFCNWI      /POINTER TO STATUS AT THIS INTERRUPT
 2019                     TAD K7774
 2020                     DCA DFCNTR      /COUNTER FOR COMPARISONS
 2021                     CTG             /CLEAR GROUP COUNTER
 2022                     JMP I DFCSET
 2023             
 2024             DFRING, CLA CLL
 2025                     DFCRF           /CLEAR RING FLAG
 2026                     CTG             /CLEAR THE GROUP COUNTER
 2027                     TAD K7774
 2028                     DCA DFCNT       /COUNTER FOR GROUP SEARCH
 2029             DFRNG1, RRS             /READ RING STATUS
 2030                     SZA
 2031                     JMP DFRNG2      /ACKNOWLEDGE RING(S)
 2032             DFRNG3, ITG             /INCREMENT THE GROUP COUNTER
 2033                     ISZ DFCNT       /LOOKED AT ALL LINES?
 2034                     JMP DFRNG1      /NO, KEEP LOOKING
 2035                     JMP DISMIS      /YES, RETURN
 2036             
 2037             DFRNG2, STR             /SET TERMINAL READY
 2038                     CLA
 2039                     JMP DFRNG3      /LOOK AT REST OF LINES
 2040                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 51


 2041                     IFNZRO D689-4 <
 2042                     IFZERO TC01-1 <
 2043                     IFZERO TD8E <
 2044                     IFNZRO CPU-3 <
 2045             ///     TSS/8 CRASH-DUMP BOOTSTRAP LOADER
 2046             /IT SAVES THE FIRST 1000 WORDS OF TS8II IN THE
 2047             /DISC COPY OF TS8II, STARTING AT DISC LOCATION
 2048             /47000; IT THEN READS THE MAIN PART OF THE CRASH-
 2049             /DUMP PROGRAM FROM DISC LOCATION 46000 (IN TS8II)
 2050             /INTO CORE, STARTING AT LOCATION 0.
 2051             /
 2052 42734 7300  CBOOT,  CLA CLL
 2053 42735 6002          IOF             /JUST TO BE SURE
 2054 42736 6201          CDF             /FOR DISC CTRL
 2055 42737 1372          TAD CRFLD
 2056             
 2057                     IFZERO RF08 <
 2058 42740 6615          DIML            /SET THE CORE FIELD
 2059 42741 7307          CLA CLL IAC RTL
 2060 42742 6643          DXAL            /DISC EXT = 4
 2061                     >
 2062                     IFZERO RF08-40 <
 2063                     DEAL            /SET THE TRACK & THE FIELD
 2064                     CLA
 2065                     >
 2066 42743 1374          TAD CR6605
 2067 42744 4352          JMS CRDISC      /SAVE PART OF TS8II
 2068 42745 1373          TAD CR6603      / (LINK=1 HERE)
 2069 42746 4352          JMS CRDISC      /GET REST OF CRASHDUMP
 2070 42747 6212          CIF+10          /GET TO TS8II FIELD
 2071 42750 5751          JMP I .+1       / & START THE DUMP
 2072 42751 0200          CDUMP
 2073             /
 2074             /SUBROUTINE TO DO THE DISC I/O
 2075 42752 0000  CRDISC, 0
 2076 42753 3362          DCA CRIOT       /SET THE IOT
 2077 42754 7240          CLA CMA
 2078 42755 3777          DCA I CR7751    /SET ADDR-1
 2079 42756 1375          TAD CR7000
 2080 42757 3776          DCA I CR7750    /SET -(WORD-COUNT)
 2081 42760 7033          CML IAC RTR     /AC=7000 OR 6000,
 2082 42761 7031          CML IAC RAR     / DEPENDING ON LINK
 2083 42762 7402  CRIOT,  HLT             / (ACTUAL IOT)
 2084             
 2085                     IFZERO RF08 <
 2086 42763 6623          DFSC DFSE       /NOW WAIT FOR A SIGN
 2087                     >
 2088                     IFZERO RF08-40 <
 2089                     DFSC            /WAIT FOR ANY DF32 INTERRUPTS
 2090                     >
 2091 42764 5363          JMP .-1
 2092 42765 6621          DFSE            /ANY ERRORS?
 2093             
 2094                     IFZERO RF08-40 <
 2095                     SKP             / (SENSE OF DF32 CHECK IS REVERSED)
 2096                     >
 2097 42766 5752          JMP I CRDISC    /NO - RETURN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 52


 2098 42767 1362          TAD CRIOT       /YES - RESET THE LINK
 2099 42770 7012          RTR             / (FUDGE)
 2100 42771 5354          JMP CRDISC+2    / & TRY IT AGAIN
 2101             /
 2102                     IFZERO RF08 <
 2103 42772 0010  CRFLD,  10      /FIELD OF TS8II
 2104                     >
 2105                     IFZERO RF08-40 <
 2106             CRFLD,  410     /TRACK & RESIDENT FIELD OF TS8II
 2107                     >
 2108 42773 6603  CR6603, 6603
 2109 42774 6605  CR6605, 6605
 2110 42775 7000  CR7000, 7000
 2111 42776 7750  CR7750, 7750
 2112 42777 7751  CR7751, 7751
 2113                     >>>>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 53


 2114                     IFZERO D689-4   <
 2115                     *UPEEK1+77
 2116             DFCARR, JMS DFCSET      /INITIALIZE STATUS
 2117             DFCAR1, RCS             /READ CARRIER STATUS
 2118                     DCA I DFCNWI    /PLACE ON TABLE
 2119                     ISZ DFCNWI
 2120                     ITG             /INCREMENT THE GROUP COUNTER
 2121                     ISZ DFCNTR      /READ ALL FOUR GROUPS?
 2122                     JMP DFCAR1      /NO, READ NEXT
 2123                     JMS I DFCSTI
 2124                     TAD DFL2ST
 2125                     DCA DFL2SI
 2126             DFCAR2, TAD I DFCNWI
 2127                     CMA
 2128                     AND I DFCLSI
 2129                     SZA             /ANY LINES CLEARED?
 2130                     JMP DFCAR3      /YES,ACKNOWLEDGE
 2131             DFCAR5, TAD I DFCLSI
 2132                     CMA
 2133                     AND I DFCNWI
 2134                     SZA
 2135                     JMS DFCAR6
 2136                     ISZ DFCLSI
 2137                     ISZ DFCNWI
 2138                     ISZ DFL2SI
 2139                     ITG             /INCREMENT THE GROUP COUNTER
 2140                     ISZ DFCNTR      /ALL LINES CHECKED?
 2141                     JMP DFCAR2      /NO
 2142                     JMS I DFCSTI
 2143             DFCAR4, TAD I DFCNWI    /TRANSFER THIS STATUS TABLE TO LAST
 2144                     DCA I DFCLSI
 2145                     ISZ DFCNWI
 2146                     ISZ DFCLSI
 2147                     ISZ DFCNTR
 2148                     JMP DFCAR4
 2149                     JMP DFL200
 2150             
 2151             DFCAR3, CTR             /CLEAR TERMINAL READY
 2152                     JMS DFCAR6
 2153                     JMP DFCAR5      /LOOK AT OTHER GROUPS
 2154             
 2155             DFCSTI, DFCSET
 2156             
 2157             DFTMP,  0
 2158             
 2159             DFCAR6, 0
 2160                     DCA DFTMP       /BIT TO SET
 2161                     TAD DFTMP
 2162                     CMA
 2163                     AND I DFL2SI
 2164                     TAD DFTMP
 2165                     DCA I DFL2SI
 2166                     JMP I DFCAR6

      /TSS/8 CONFIGURATION FOR UWM                                       Page 54


 2167             DFL200, TAD DFL2ST      /INITIALIZE PSEUDO GROUP CTR
 2168                     DCA DFL2SG
 2169             
 2170             DFL22,  TAD K7770               /EIGHT PHONES
 2171                     DCA TEMP0
 2172                     IAC
 2173                     DCA TEMP1               /SELECT EACH LINE I GROUP
 2174             
 2175             DFL21,  TAD I DFL2SG
 2176                     SNA
 2177                     JMP DFL23
 2178                     SPA
 2179                     JMP DFL24
 2180                     AND TEMP1
 2181                     SZA CLA
 2182                     JMP DFL25
 2183             
 2184             DFL26,  TAD TEMP1
 2185                     CLL RAL
 2186                     DCA TEMP1
 2187                     ISZ TEMP0
 2188                     JMP DFL21
 2189             DFL23,  DCA I DFL2SG
 2190                     ISZ DFL2SG
 2191                     JMP DFL22
 2192             
 2193             DFL24,  CLA
 2194                     JMP I DFLXT     /ALL DONE
 2195             
 2196             DFL25,  TAD DFL2SG
 2197                     TAD DFL2C
 2198                     DCA TEMP2
 2199                     TAD I TEMP2
 2200                     TAD TEMP0
 2201                     TAD  K0010
 2202                     DCA TEMP2
 2203                     CDF             /SET UP SOURCE FOR GETDDB
 2204                     TAD TEMP2
 2205                     DCA I DFSORC
 2206                     DATFLD
 2207                     TAD TEMP2
 2208                     TAD TEMP2
 2209                     TAD DFVTBA
 2210                     DCA TEMP3
 2211                     TAD I TEMP3
 2212                     SZA CLA
 2213                     JMP .+5         /YES
 2214                     TAD TEMP3
 2215                     CIF
 2216                     JMS I DFGDDB
 2217                     JMP DFL26
 2218                     TAD TEMP2
 2219                     CIF
 2220                     JMS I DFUMES
 2221                     MES1
 2222                     JMP DFL26
 2223             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 55


 2224             DFL2SG, 0
 2225             DFL2C,  DFL2DL-DFL2S0
 2226             DFVTBA=DEVTBA
 2227             DFL2SI, 0
 2228             DFL2ST, DFL2S0
 2229             K7770,  7770
 2230             DFSORC, SOURCE
 2231             DFUMES, UMES
 2232             DFLXT,  TIMOUT
 2233             MES1,   202
 2234                     "S
 2235                     ";
 2236                     "K
 2237                     215
 2238                     0
 2239             
 2240                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 56


 2241                     IFZERO CPU-3    <
 2242                     *PDPEXT         /ENTRY POINT FOR THE EXTENDED IOT'S
 2243                     0
 2244                     JMP DISDCI      /GO PROCESS THE INSTRUCTION NOW.
 2245             
 2246                     *PDPIDE         /IDLE PROCESSOR NOW.
 2247             
 2248                     0
 2249                     JMP I   .+1             /GO TO THE IDLE PROCESSOR.
 2250                     PDPWAT
 2251             
 2252             
 2253             DISDCI, TAD     DISBAS          /ADD IN THE TABLE POINTER NOW.
 2254                     DCA     DISTMP          /SAVE AWAY NOW.
 2255                     TAD I   DISTMP          /NOW GET WHERE TO GO
 2256                     DCA     DISTMP          /AND PLACE AWAY FOR THE JUMP TO USE.
 2257                     JMP I   DISTMP          /GO THERE NOW.
 2258             
 2259             DISBAS, .+1
 2260                     DISNOT                  /IOT NOT YET THERE
 2261                     DISNOT
 2262                     DISNOT
 2263                     DISNOT
 2264                     DISREL                  /A RELAY OPERATION
 2265                     DISSAM                  /SAMPLE IOT
 2266                     DISPNT                  /POINT DISPLAY IOT
 2267                     DISCHR                  /CHARACTER DISPLAY IOT
 2268             
 2269             DSCY,   0                       /THE Y POSITION FOR ALL DISPLAYS
 2270             DDSCX,  DSCX
 2271             
 2272             DISTMP, 0
 2273             
 2274             
 2275             DISEXT, ISZ     PDPEXT          /GOOD IOT IS NOW DONE. EXIT
 2276             DISNOT, CDF CIF 0               /SET UP FOR LOWER CORE RETURN NOW.
 2277                     JMP I   PDPEXT          /GO BACK DOWN THERE NOW.
 2278             
 2279             DISPNT, CDF     0               /POINT DISPLAY. SET TO PICK UP AC.
 2280                     TAD I   L2SAP           /WE'VE GOT THE AC NOW.
 2281                     DCA     DISAC           /SAVE AWAY FOR A SECOND.
 2282                     TAD I   UDFP            /GET THE USERS DATA FIELD
 2283                     DCA     UDF1+1          /SAVE AWAY IN THE LITTLE SUBROUTINE NOW
 2284                     JMS     DISIAC          /GET THE NUMBER OF POINTS TO DO NOW.
 2285                     AND     DS1777          /MAKE BETWEEN 1 AND 1024
 2286                     CIA
 2287                     SNA                     /IS IT NON-ZERO???
 2288                     JMP     DISEXT          /IT ISN'T. WE'RE DONE. RETURN TO HIM NOW.
 2289                     DCA     DISCNT          /SAVE AWAY IN THE COUNT REGISTER NOW.
 2290             
 2291             DCLP2,  JMS     DISIAC          /GET THE USERS X POINT NOW
 2292                     DCA I   DDSCX           /SAVE AWAY RIGHT NOW
 2293                     JMS     DISIAC          /GET THE USERS Y POINT NOW.
 2294                     IOF                     /TURN OFF INTERUPTS SO WE DON'T BOMB
 2295                     6141                    /GET OVER INTO LINC MODE RIGHT NOW.
 2296                     -PDPBAS+1777&6000+140+DSCX              /DO A DIS X
 2297                     2                       /GET BACK INTO THE SUPER MODE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 57


 2298                     ION                     /TURN BACK ON INTERUPTS.
 2299                     CLA                     /GET RID OF THE RANDOM Y NOW.
 2300                     ISZ     DISCNT          /BOP UP THE COUND NOW
 2301                     JMP     DCLP2           /NOT YET DONE. LOOP AGAIN
 2302                     JMP     DISEXT          /ALL DONE. RETURN TO THE USER NOW.
 2303             
 2304             
 2305             DISIAC, 0                       /ROUTINE TO GET WHAT THE USERS AC POINTS TO
 2306                     JMS     UDF1            /SET TO THE USERS DATA FIELD
 2307                     TAD I   DISAC           /GET IT NOW
 2308                     DATFLD                  /RESET TO THIS FIELD
 2309                     ISZ     DISAC           /BOP HIS AC NOW
 2310                     JMP I   DISIAC          /RETURN
 2311                     JMP I   DISIAC          /RETURN EVEN IF ERROR
 2312             
 2313             
 2314             
 2315             DS1777, 1777
 2316             DISAC,  0
 2317             DISCNT, 0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 58


 2318             DISCHR, CDF     0               /ROUTINE TO DISPLAY CHARACTERS FOR THE USER
 2319                     TAD I   L2SAP           /GET HIS AC NOW.
 2320                     DCA     DISAC           /SAVE AWAY FOR HIM
 2321                     TAD I   UDFP            /GET HIS DATA FIELD TOO
 2322                     DCA     UDF1+1          /STASH AWAY SO WE CAN RETRIEVE FOR HIM
 2323                     JMS     DISIAC          /GET THE NUMBER OF CHARACTERS TO DISPLAY
 2324                     AND     DIS77           /MAKE BETWEEN 0 AND 63
 2325                     CIA
 2326                     SNA                     /IS IT ZERO?
 2327                     JMP     DISEXT          /RETURN IF ZERO
 2328                     DCA     DISCNT          /SAVE THE COUNT FOR NOW
 2329                     JMS     DISIAC          /GET THE NEXT WORD(CHARACTER SIZE)
 2330                     AND     DIS200          /JUST USE THE CHARACTER SIZE BIT
 2331                     DCA     DISSFR          /SAVE AWAY FOR NOW.
 2332                     JMS     DISIAC          /GET THE X VALUE NOW
 2333                     DCA I   DDSCX           /STASH AWAY
 2334                     JMS     DISIAC          /GETTHE Y VALUE NOW.
 2335                     DCA     DSCY            /AND SAVE IT AWAY ALSO.
 2336                     JMS     DISIAC          /GET THE STRING POINTER
 2337                     DCA     DISAC           /AND SAVE IT AWAY TOO
 2338             DCLOOP, JMS     UDF1            /SET TO THE USERS DATA FIELD
 2339                     TAD I   DISAC           /PICK UP THE CHARACTER WITH NO BOP
 2340                     DATFLD                  /RESET THE DATA FIELD TO HERE
 2341                     RTR                     /NOW ROTATE THE CHARACTER TO BITS 6-11
 2342                     RTR
 2343                     RTR
 2344                     IOF                     /TURN OFF THE INTERUPTS SO NO LINC MODE BOMB
 2345                     JMS     DSCHAR          /DISPLAY THE CHARACTER NOW
 2346                     ION
 2347                     JMS     DISIAC          /GET THE RIGHT HALF AND BOP
 2348                     IOF
 2349                     JMS     DSCHAR
 2350                     ION                     /WE'RE BACK AGAIN
 2351                     JMP     DCLOOP          /AND GO UP TO GET THE NEXT WORD
 2352             
 2353             DIS200, 200
 2354             DISSFR, 0
 2355             
 2356             DSCHAR, 0                       /ROUTINE TO DISPLAY A CHAR IN THE AC.
 2357                     AND     DIS77           /CHOP OFF BAD CRAP
 2358                     CLL RAL                 /MULTIPLY BY 2
 2359                     TAD     DISTAB          /ADD IN THE BASE TABLE ADDRESS
 2360                     DCA     IX1             /SAVE IN AN AUTO INDEX
 2361                     JMS     DSC2            /DISPLAY HALF
 2362                     TAD I   .               /DELAY A LITTLE TO AVOID DATA BREAK
 2363                     TAD I   .               /PROBLEMS BECAUSE OF DSC HANGING UP
 2364                     TAD I   .               /THE CPU IF WE EXECUTE ANOTHER
 2365                     TAD I   .               /ONE AND IT'S NOT FINISHED THE FIRST HALF YET.
 2366                     CLA                     /THEN CLEAR THE AC. 4 TAD'S SHOULD BE ENOUGH.
 2367                     JMS     DSC2            /DISPLAY THE OTHER HALF
 2368                     ISZ I   DDSCX           /ADD TWO TO THE X POSITION
 2369                     ISZ I   DDSCX
 2370             DIS77,  77                      /A GOOD PLACE FOR A NOP
 2371                     ISZ     DISCNT          /TEST THE COUNT NOW
 2372                     JMP I   DSCHAR          /RETURN NOW
 2373                     ION                     /TURN THEM ON
 2374                     JMP     DISEXT          /AND GO BACK, BECASUE WE'RE DONE NOW.

      /TSS/8 CONFIGURATION FOR UWM                                       Page 59


 2375             
 2376             DISTAB, DSCTAB-1                /CHARACTER TABLE-1
 2377             
 2378             DSC2,   0                       /HALF CHARACTER ROUTINE
 2379                     TAD I   IX1             /GET A HALF
 2380                     DCA     DSCOUT          /SAVE FOR A SECOND
 2381                     TAD     DISSFR          /GET THE SPECIAL FUNCTION REGISTER
 2382                     6141
 2383                     4                       /SEND IT OUT. IOF IS ON HERE.
 2384                     1000                    /NOW GET THE Y INTO THE AC.
 2385                     -PDPBAS+1777&6000+DSCY                  /Y SHOULD BE HOT NOW
 2386                     1760                    /DSC I
 2387             DSCOUT, 0                       /THE CHARACTER IN THE AC.
 2388                     2                       /GET OVER IN TO THE GOOD MODE
 2389                     CLA                     /CLEAR OUT THE Y VALUE NOW
 2390                     JMP I   DSC2            /AND RETURN TO THE CALLER

      /TSS/8 CONFIGURATION FOR UWM                                       Page 60


 2391                     PAGE
 2392             
 2393             DISREL, CDF     0               /SET TO LOWER CORE TO PICK UP HIS AC.
 2394                     TAD I   L2SAP           /GET HIS AC.
 2395                     IOF                     /TURN OFF INTERUPTS NOW.
 2396                     6141                    /GET OVER INTO THE GOOD MODE
 2397                     471                     /SKIP IF THE AC IS MINUS
 2398                     14                      /SEND OUT DATA TO THE RELAYS.
 2399                     451                     /IF THE AC IS POSITIVE SKIP NOW.
 2400                     15                      /READ IN THE RELAYS.
 2401                     2                       /GET INTO 8 MODE
 2402                     ION                     /TURN ON THE INTERUPTS NOW.
 2403                     DCA I   L2SAP           /STORE BACK INTO THE AC NOW.
 2404                     JMP I   DRELX           /RETURN NOW
 2405             
 2406             DISSAM, CDF     0               /SET TO LOWER CORE
 2407                     TAD I   L2SAP           /GET THE USERS AC
 2408                     AND     DSC37           /JUST GET THE LOW ORDER CHANNEL BITS
 2409                     TAD     DSC100          /MAKE INTO A SAM INSTRUCTION
 2410                     DCA     DSAM1           /AND SAVE AWAY FOR A SECOND
 2411                     TAD     DSC100          /PREPARE TO TURN ON FAST SAMPLE MODE
 2412                     IOF                     /TURN OFF THE INTERUPTS NOW
 2413                     6141                    /GET OVER INTO THE GOOD MODE
 2414                     4                       /ESF
 2415             DSAM1,  0                       /SAMPLE THE CHANNEL
 2416                     1000                    /GET THE SAM INSTRUCTION INTO THE AC
 2417                     -PDPBAS+1777&6000+DSAM1
 2418                     -PDPBAS+1777&6000+4000+.+1              /STC .+1 [OR DCA .+1 FOR YOU 8'ERS]
 2419                     0                       /DO THE SAM AGAIN TO READ IN THE VALUE NOW
 2420                     2                       /GET OVER INTO GODS MODE
 2421                     ION                     /TURN BACK ON INTERUPTS
 2422                     DCA I   L2SAP           /DCA BACK INTO THE USERS AC.
 2423                     JMP I   .+1             /NOW CLEAN UP AND RETURN
 2424             DRELX,  DISEXT
 2425             
 2426             DSC37,  37
 2427             DSC100, 100
 2428             
 2429             PDPWAT, SZA CLA                 /IS IT FIRST TIME THROUGH?
 2430                     JMP     PDPLOP          /NOPE. CONTINUE.
 2431                     TAD     PPIDLE          /RESET THE MESSAGE POINTER NOW.
 2432                     DCA     PPMP            /SAVE AWAY
 2433                     DCA I   PDPCNT          /CLEAR THE COUNT NOW
 2434                     TAD     PDP200          /SET FOR LARGE LETTERS
 2435                     DCA I   PDPSFR          /AND SAVE AWAY.
 2436                     DCA I   PDPY            /SET UP THE Y
 2437                     TAD     PDPLFT          /SET UP THE X
 2438                     DCA I   CDSCX           /THE X LOC
 2439                     ISZ     IDLMVC          /TIME TO MOVE THE X?
 2440                     JMP     PDPLOP          /NOPE. DON'T MOVE IT NOW.
 2441                     CLA CMA                 /YEP. MOVE IT IN FROM THE LEFT
 2442                     TAD     PDPLFT          /THE GOOD X
 2443                     DCA     PDPLFT          /THE NEWER X.
 2444                     TAD     PDPMVS          /AND RESET THE COUNTER NOW.
 2445                     DCA     IDLMVC          /AND STASH BACK.
 2446             PDPLOP, TAD I   PPMP            /GET THE NEXT CHARACTER?
 2447                     SNA                     /ZERO?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 61


 2448                     JMP     PDPOVR          /YES. SET TO RESTART SOON.
 2449                     JMS I   PDPDSC          /DISPLAY IT NOW
 2450                     ISZ     PPMP            /BOP THE POINTER.
 2451                     TAD I   PDPRET          /GET THE RETURN ADDRESS
 2452                     DCA     PDPTMP          /SAVE FOR SECOND
 2453                     CLA CMA                 /MAKE SURE WE CONTINUE NOW.
 2454                     CDF CIF 0               /SET UP FIELDS NOW
 2455                     JMP I   PDPTMP          /RETURN NOW.
 2456             
 2457             PPIDLE, IDLEMS
 2458             PPMP,   0
 2459             PDP200, 200
 2460             PDPCNT, DISCNT
 2461             PDPSFR, DISSFR
 2462             PDPDSC, DSCHAR
 2463             PDPTMP, 0
 2464             CDSCX,  DSCX
 2465             PDPY,   DSCY
 2466             PDPLFT, 300                     /INITAL X POSITION
 2467             IDLMVC, 0                       /INITALLY ZERO. WILL BE RESET SHORTLY.
 2468             PDPMVS, -10                     /BASIC MOVING CONSTANT ONCE FIRST ONE OVERFLOWS.
 2469             PDPRET, PDPIDE
 2470             
 2471             PDPOVR, TAD I   PDPRET
 2472                     DCA     PDPTMP
 2473                     CDF CIF 0               
 2474                     JMP I   PDPTMP
 2475             
 2476             IDLEMS, "C;"P;"U;" ;"I;"S;" ;"I;"D;"L;"E;0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 62


 2477                     PAGE
 2478             /
 2479             DSCTAB, 5136            /00=AT SIGN
 2480                     3565
 2481                     4477            /01=A
 2482                     7744
 2483                     5177            /02=B
 2484                     2651
 2485                     4136            /03=C
 2486                     2241
 2487                     4177            /04=D
 2488                     3641
 2489                     4577            /05=E
 2490                     4145
 2491                     4477            /06=F
 2492                     4044
 2493                     4136            /07=G
 2494                     2645
 2495                     1077            /10=H
 2496                     7710
 2497                     7741            /11=I
 2498                     0041
 2499                     4142            /12=J
 2500                     4076
 2501                     1077            /13=K
 2502                     4324
 2503                     0177            /14=L
 2504                     0301
 2505                     3077            /15=M
 2506                     7730
 2507                     3077            /16=N
 2508                     7706
 2509                     4177            /17=O
 2510                     7741
 2511                     4477            /20=P
 2512                     3044
 2513                     4276            /21=Q
 2514                     0376
 2515                     4477            /22=R
 2516                     3146
 2517                     5121            /23=S
 2518                     4651
 2519                     4040            /24=T
 2520                     4077
 2521                     0177            /25=U
 2522                     7701
 2523                     0176            /26=V
 2524                     7402
 2525                     0677            /27=W
 2526                     7701
 2527                     1463            /30=X
 2528                     6314
 2529                     0770            /31=Y
 2530                     7007
 2531                     4543            /32=Z
 2532                     6151
 2533                     4177            /33=[

      /TSS/8 CONFIGURATION FOR UWM                                       Page 63


 2534                     0000
 2535                     3040            /34=\
 2536                     0106
 2537                     0000            /35=]
 2538                     7741
 2539                     2000            /36=^
 2540                     2076
 2541                     2516            /37=BACK-ARROW
 2542                     0404
 2543                     0000            /40=SPACE
 2544                     0000
 2545                     7500            /41=!
 2546                     0000
 2547                     7000            /42="
 2548                     0070
 2549                     7714            /43=NUMBER SIGN
 2550                     1477
 2551                     5721            /44=DOLLAR SIGN
 2552                     4671
 2553                     6661            /45=PERCENT SIGN
 2554                     4333
 2555                     5166            /46=&
 2556                     0526
 2557                     6400            /APOSTROPHE
 2558                     0070
 2559                     3600            /50=(
 2560                     0041
 2561                     4100            /51=)
 2562                     0036
 2563                     2050            /52=*
 2564                     0050
 2565                     0404            /53=+
 2566                     0437
 2567                     0500            /54=,
 2568                     0006
 2569                     0404            /55=-
 2570                     0404
 2571                     0001            /56=.
 2572                     0000
 2573                     0601            /57=/
 2574                     4030
 2575                     4536            /60=0
 2576                     3651
 2577                     2101            /61=1
 2578                     0177
 2579                     4523            /62=2
 2580                     2151
 2581                     4122            /63=3
 2582                     2651
 2583                     2414            /64=4
 2584                     0477
 2585                     5172            /65=5
 2586                     0651
 2587                     1506            /66=6
 2588                     4225
 2589                     4443            /67=7
 2590                     6050

      /TSS/8 CONFIGURATION FOR UWM                                       Page 64


 2591                     5126            /70=8
 2592                     2651
 2593                     5122            /71=9
 2594                     3651
 2595                     2200            /72=:
 2596                     0000
 2597                     4601            /73=;
 2598                     0000
 2599                     1000            /74=LEFT ANGLE-BRACKET
 2600                     4224
 2601                     1212            /75==
 2602                     1212
 2603                     2442            /76=RIGHT ANGLE-BRACKET
 2604                     0010
 2605                     4020            /77=?
 2606                     2055
 2607                             >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 65


 2608                     IFNZRO DEVCHK-.&4000    <GLITCH>
 2609       3000          *DEVCHK
 2610             /CHECK DEVICE ASSIGNMENT AND ASSIGN IF AVAILABLE
 2611             /CALLING SEQUENCE
 2612             /       JMS DEVCHK
 2613             /        DEVTBL ENTRY POINTER
 2614             /       ASSIGNED BUT NOT YET USED
 2615             /       PREVIOUSLY USED
 2616             
 2617 43000 0000  DEVCHK, 0
 2618 43001 1600          TAD I DEVCHK    /GET DEVTBL POINTER
 2619 43002 2200          ISZ DEVCHK      /INDEX PAST PARAMETER
 2620 43003 3241          DCA WS1         /DEVTBL ADDRESS
 2621 43004 6214          RDF             /THE FIELD FROM WHERE WE CAME
 2622 43005 1117          TAD K6203
 2623 43006 3234          DCA DEVEXT
 2624 43007 6211          DATFLD
 2625 43010 1641          TAD I WS1       /DDB ADDRESS
 2626 43011 7450          SNA             /IS IT ASSIGNED TO ANYONE?
 2627 43012 5236          JMP DEVERR      /NO - THEN HE CAN'T BE USING IT
 2628 43013 3010          DCA AXS1        /NOW POINTS TO WORD 0 OF DDB
 2629 43014 6201          CDF
 2630 43015 1560          TAD I JOB
 2631 43016 6211          DATFLD
 2632 43017 0152          AND K0037
 2633 43020 7041          CIA
 2634 43021 1410          TAD I AXS1      /DOES THIS JOB OWN DEVICE?
 2635 43022 7640          SZA CLA
 2636 43023 5236          JMP DEVERR      /NOT THE RIGHT OWNER
 2637 43024 1641          TAD I WS1
 2638 43025 3241          DCA WS1         /POINTS TO WORD 0 AGAIN
 2639 43026 1641          TAD I WS1
 2640 43027 7006          RTL             /SHIFT INITIALIZED BIT INTO LINK
 2641 43030 7430          SZL             /HAS IT BEEN INITIALIZED?
 2642 43031 2200          ISZ DEVCHK      /YES, INDEX RETURN
 2643 43032 7132          STL RTR         /NO, BUT IT HAS BEEN NOW
 2644 43033 3641          DCA I WS1
 2645 43034 0000  DEVEXT, 0
 2646 43035 5600          JMP I DEVCHK    /RETURN
 2647             
 2648 43036 6202  DEVERR, CIF
 2649 43037 5640          JMP I .+1
 2650 43040 5172          UUOERR
 2651 43041 0000  WS1,    0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 66


 2652             /
 2653             /CODE TO INITIATE THE AUTOMATIC RESTART PROCEDURE.
 2654 43042 0000  RBOOT,  0
 2655                     IFNZRO CPU-2    <CLA>
 2656 43043 6007          IFZERO CPU-2    <CAF>
 2657 43044 1242          TAD RBOOT
 2658 43045 6203          CIF CDF
 2659 43046 5647          JMP I .+1       /USE THE FIELD 0 BOOTSTRAP
 2660 43047 3400          RELOAD
 2661             
 2662                     IFZERO CPU-2 <
 2663             /
 2664             /ROUTINE TO FIX LOCK-OUT PROBLEM OF KL8E BOARDS.
 2665             /WE JUST RE-ENABLE THE INTERRUPT FOR EACH TERMINAL
 2666             /ONCE A SECOND.
 2667 43050 0000  FXPT08, 0
 2668 43051 1270          TAD FXPTBL
 2669 43052 3010          DCA AXS1        /SET THE INPUT DEVICE TABLE POINTER
 2670 43053 1271          TAD FXPCNT
 2671 43054 3241          DCA WS1         /AND THE KEYBOARD COUNTER (REAL KEYBOARDS ONLY)
 2672 43055 6201          CDF
 2673 43056 1410  FXP1,   TAD I AXS1      /GET AN INPUT DEVICE SELECT
 2674 43057 1272          TAD FX6005      / AND MAKE A 'KIE' INSTRUCTION
 2675 43060 3262          DCA .+2
 2676 43061 7201          CLA IAC         /SET AC SO INTERRUPTS ARE ENABLED
 2677 43062 7402           HLT
 2678 43063 7300          CLA CLL
 2679 43064 2241          ISZ WS1
 2680 43065 5256          JMP FXP1        /CONTINUE
 2681 43066 6211          DATFLD          /ALL DONE - RESET DATA FIELD
 2682 43067 5650          JMP I FXPT08    / AND RETURN
 2683             
 2684 43070 7166  FXPTBL, TIDEV-1
 2685 43071 7766  FXPCNT, -TRUKBD-1
 2686 43072 6005  FX6005, 6005
 2687                     >
 2688                     IFZERO D689-4 <
 2689             DFL2DL, 1; 11; 21; 31
 2690                     >

      /TSS/8 CONFIGURATION FOR UWM                                       Page 67


 2691       3100          *KSFPRA
 2692             /ROUTIN TO TAKE CARE OF KRB IOT
 2693             /CALLING SEQUENCE
 2694             /       JMS KSFBUG
 2695             /       RETURN WITH CHAR IN AC
 2696             /       NO CHAR, BUFFER EMPTY RETURN
 2697             
 2698 43100 0000  KSFBUG, 0
 2699 43101 3364          DCA BUG1        /STORE DDB ADDRESS
 2700 43102 1364  BUG7,   TAD BUG1        /CALL FETCH
 2701 43103 4541          JMS I BUG2
 2702 43104 7766  M12,     -12            /FIRST IN FIRST OUT
 2703 43105 5361          JMP BLKRET      /END OF BLOCK
 2704 43106 5316          JMP BACK        /BUFFER EMPTY
 2705 43107 3153          DCA BUG3        /CHAR IN AC   SAVE IT
 2706 43110 1364  BUG6,   TAD BUG1
 2707 43111 4542          JMS I BUG4      /TEST BUFFER
 2708 43112 5356          JMP RETBL1      /END OF BLOCK
 2709 43113 5322          JMP CLRFLG      /EMPTY
 2710 43114 1153  RET,    TAD BUG3        /NOT EMPTY
 2711 43115 7410          SKP
 2712 43116 2300  BACK,   ISZ KSFBUG      /NO CHAR RETURN
 2713 43117 6203          CIF CDF         /PREPARE TO RETURN TO FIELD 0
 2714 43120 5700          JMP I KSFBUG            /RETURN
 2715             
 2716 43121 0000  BUG5,   0
 2717             
 2718 43122 7126  CLRFLG, CLL CML RTL     /GET TWO IN AC
 2719 43123 1161          TAD CJOBDA      /ADDRESS OF JOBSTATUS OF THIS JOB
 2720 43124 3321          DCA BUG5        /POINTS TO STR1
 2721 43125 1721          TAD I BUG5      /GET CONTENTS OF STR1
 2722 43126 0077          AND K7677       /CLEAR DELIMITER FLAG
 2723 43127 3721          DCA I BUG5      /STORE IT BACK
 2724 43130 5314          JMP RET
 2725             
 2726 43131 0000  RETURN, 0
 2727 43132 1364          TAD BUG1        /ADDRESS OF DDB
 2728 43133 1062          TAD K0006       /....+6
 2729 43134 3321          DCA BUG5        /POINTS TO EMPTY POINTER
 2730 43135 1721          TAD I BUG5      /RETURN EMPTY BLOCK
 2731 43136 6202          CIF
 2732 43137 4576          RETBLK
 2733 43140 3721          DCA I BUG5      /AND SAVE POINTER TO NEXT BLOCK IN DDB
 2734 43141 1721          TAD I BUG5      /IS THERE ANOTHER BLOCK?
 2735 43142 7650          SNA CLA
 2736 43143 5350          JMP .+5         /NO
 2737 43144 1304          TAD M12         /YES RESET EMPTY COUNTER
 2738 43145 2321          ISZ BUG5
 2739 43146 3721          DCA I BUG5      /SAVE IT IN DDB
 2740 43147 5731          JMP I RETURN    /AND RETURN
 2741 43150 1364          TAD BUG1        /ADDRESS OF DDB
 2742 43151 1104          TAD K0004       /....+4
 2743 43152 3321          DCA BUG5        /POINTS TO FILL POINTER
 2744 43153 3721          DCA I BUG5      /CLEAR FILL POINTE      
 2745 43154 2331          ISZ RETURN      /EMPTY RETURN
 2746 43155 5731          JMP I RETURN
 2747 43156 4331  RETBL1, JMS RETURN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 68


 2748 43157 5310          JMP BUG6        /BUFFER NOT EMPTY
 2749 43160 5322          JMP CLRFLG      /EMPTY BUFFER
 2750             
 2751 43161 4331  BLKRET, JMS RETURN
 2752 43162 5302          JMP BUG7        /BUFFER NOT EMPTY
 2753 43163 5316          JMP BACK        /BUFFER EMPTY
 2754             
 2755 43164 0000  BUG1,   0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 69


 2756                     IFNZRO D689-4 <
 2757                     IFZERO TC01-1 <
 2758                     IFZERO TD8E <
 2759                     IFNZRO CPU-3 <
 2760             ///     TSS/8 DECTAPE CRASH-DUMP
 2761             /THIS IS LOADED FROM DISC BY THE CRASH-DUMP
 2762             /BOOTSTRAP LOADER. IT ASSUMES A FORMATTED
 2763             /DECTAPE IS MOUNTED ON UNIT 0. WHEN THE DUMP
 2764             /IS FINISHED, TSS/8 INIT IS LOADED & STARTED.
 2765             /
 2766       6000          *6000
 2767                     NOPUNCH
 2768       0000          *0
 2769                     ENPUNCH
 2770             /
 2771       0010  QAX0=   10
 2772       0020  QWS0=   20      /SCRATCH STORAGE
 2773       0021  QWS1=   21
 2774       0022  QWS2=   22
 2775       0023  QWS3=   23
 2776       0024  QWS4=   24
 2777       0025  QWS5=   25
 2778       0026  QWS6=   26
 2779       0027  QWS7=   27
 2780       0030  QWBLK=  30
 2781       0031  QWFLD=  31
 2782       0032  QRTRK=  32      /EXTENDED DISC ADDRESS
 2783       0033  QRADR=  33      /DISC ADDRESS
 2784             /
 2785       6034          *6000+QRADR+1
 2786                     NOPUNCH
 2787       0034          *QRADR+1
 2788                     ENPUNCH
 2789       4434  WTAPE=  JMS I .         /DECTAPE WRITE
 2790 40034 0400          WTENT
 2791       4435  RDISC=  JMS I .         /DISC READ
 2792 40035 0515          RDENT
 2793       4436  SPEAK=  JMS I .         /MESSAGE TYPING
 2794 40036 0600          SPENT
 2795             /
 2796       6150          *6000+CBOOTA
 2797                     NOPUNCH
 2798       0150          *CBOOTA
 2799                     ENPUNCH
 2800 40150 0200  CBOOTA, CDUMP   /TO OVERLAY IN CASE RESTARTED AT 'CRASH'

      /TSS/8 CONFIGURATION FOR UWM                                       Page 70


 2801       6200          *6200
 2802                     NOPUNCH
 2803       0200          *200
 2804                     ENPUNCH
 2805             ///     BEGIN CRASH-DUMP
 2806 40200 7300  CDUMP,  CLA CLL
 2807 40201 6002          IOF
 2808 40202 1322          TAD QK600
 2809 40203 6766          DTCA DTXA       /REWIND THE DECTAPE
 2810 40204 3030          DCA QWBLK       /FIRST DT BLOCK IS ZERO
 2811 40205 7240          CLA CMA
 2812 40206 3022          DCA QWS2        /SET CORE-1
 2813 40207 1320          TAD QK10        /SET MEMORY FIELD
 2814 40210 3031          DCA QWFLD
 2815 40211 7240          CLA CMA
 2816 40212 3023          DCA QWS3        /SET -(# BLOCKS)
 2817 40213 4434          WTAPE           /WRITE OUT BLOCK ZERO
 2818 40214 1326          TAD QM40        
 2819 40215 3023          DCA QWS3        /SET BLK COUNT FOR 1 FLD
 2820 40216 3031          DCA QWFLD       /SET MEM FLD TO ZERO
 2821 40217 7240          CLA CMA
 2822 40220 3022          DCA QWS2        / & CORE ADDR - 1
 2823 40221 4434          WTAPE           / AND WRITE OUT FIELD ZERO
 2824 40222 1315          TAD QDADR
 2825 40223 3033          DCA QRADR       /SET SAVED DATA ADDRESS
 2826 40224 1316          TAD QDTRK
 2827 40225 3032          DCA QRTRK
 2828 40226 4435          RDISC           /GET THE SAVED TS8II PIECE
 2829 40227 1317          TAD QF1
 2830 40230 3030          DCA QWBLK       /SET TS8II BLOCK NUMBER
 2831 40231 1323          TAD QM4
 2832 40232 3023          DCA QWS3        /SET -(# BLOCKS TO WRITE)
 2833 40233 4434          WTAPE           /WRITE OUT THE SAVED DATA
 2834 40234 1320          TAD QK10
 2835 40235 3031          DCA QWFLD       /SET MEMORY FIELD
 2836 40236 1324          TAD QM34
 2837 40237 3023          DCA QWS3        /# BLOCKS FOR REST OF TS8II
 2838             /
 2839             /NOW WRITE OUT EACH REMAINING MEMORY FIELD.
 2840 40240 4434  QMEMD,  WTAPE
 2841 40241 1031          TAD QWFLD
 2842 40242 1320          TAD QK10        /UPDATE THE FIELD
 2843 40243 3031          DCA QWFLD       / NUMBER
 2844 40244 1326          TAD QM40
 2845 40245 3023          DCA QWS3        /RESET BLOCK COUNT
 2846 40246 1031          TAD QWFLD
 2847 40247 1330          TAD QXFLD       /ARE WE PAST THE END
 2848 40250 7710          SPA CLA         / OF THE REQUIRED CORE?
 2849 40251 5240          JMP QMEMD       /NO - CONTINUE
 2850             /
 2851             /NOW, USING FLD 2 FOR SCRATCH, READ A 4K BLOCK FROM
 2852             /DISC AND WRITE IT TO DECTAPE.
 2853 40252 1321          TAD QK20
 2854 40253 3031          DCA QWFLD       /SET THE FIELD
 2855 40254 1325          TAD QM37
 2856 40255 1030          TAD QWBLK       /SET QWS6 TO THE FIRST
 2857 40256 3026          DCA QWS6        / BLOCK OF THE LAST FLD

      /TSS/8 CONFIGURATION FOR UWM                                       Page 71


 2858 40257 3033          DCA QRADR       /CLEAR DISC ADDRESS
 2859 40260 3032          DCA QRTRK
 2860 40261 1331          TAD QXTBK
 2861 40262 3027          DCA QWS7        /SET 4K BLOCK-COUNTER
 2862             /
 2863 40263 4302  QDSCD,  JMS QADVB       /LEAVE ROOM BETWEEN BLOCKS
 2864 40264 4435          RDISC           /GET A 4K BLOCK
 2865 40265 4434          WTAPE           / & WRITE IT OUT
 2866 40266 2032          ISZ QRTRK       /INCRE. THE TRACK ADDR.
 2867 40267 2027          ISZ QWS7        /ARE WE DONE?
 2868 40270 5263          JMP QDSCD       /NO - CONTINUE
 2869 40271 6766          DTCA DTXA       /STOP THE TAPE
 2870 40272 7326          CLA CLL CML RTL
 2871 40273 3032          DCA QRTRK       /SET FOR TRACK 2
 2872 40274 1314          TAD QCORM
 2873 40275 3031          DCA QWFLD       / & PROPER FIELD
 2874 40276 4435          RDISC           /THEN READ 'INIT'
 2875 40277 6223          CIF CDF INFLD
 2876 40300 5701          JMP I .+1       / & START UP TSS/8
 2877 40301 4201          AUTOST
 2878             /
 2879             /SUBROUTINE TO ADJUST THE BLOCK ADDRESS TO ALLOW
 2880             /ROOM FOR THE TAPE TO STOP & START.
 2881 40302 0000  QADVB,  0
 2882 40303 7200          CLA
 2883 40304 1026          TAD QWS6        /GET LAST STARTING BLOCK
 2884 40305 1327          TAD QSKIP       / ADD THE SKIP COUNT
 2885 40306 3030          DCA QWBLK       / & SAVE IT
 2886 40307 1030          TAD QWBLK
 2887 40310 3026          DCA QWS6
 2888 40311 1326          TAD QM40        /ALSO, RESET THE BLOCK
 2889 40312 3023          DCA QWS3        / COUNT
 2890 40313 5702          JMP I QADVB     /THEN RETURN
 2891             /
 2892 40314 0020  QCORM,  INFLD
 2893 40315 7000  QDADR,  7000    /DISC ADDR. OF TS8II PIECE
 2894 40316 0004  QDTRK,  4
 2895 40317 0044  QF1,    44      /BLOCK NUMBER FOR TS8II
 2896 40320 0010  QK10,   10
 2897 40321 0020  QK20,   20
 2898 40322 0600  QK600,  600
 2899 40323 7774  QM4,    -4
 2900 40324 7744  QM34,   -34
 2901 40325 7741  QM37,   -37
 2902 40326 7740  QM40,   -40
 2903 40327 0050  QSKIP,  50      /INTER-BLOCK GAP + BLOCK-SIZE
 2904 40330 7740  QXFLD,  -40     /DUMP FIELDS 0 - 3
 2905 40331 7747  QXTBK,  -SWDEX-JOBMAX   / -(# OF DISC TRACKS TO DUMP)

      /TSS/8 CONFIGURATION FOR UWM                                       Page 72


 2906       6400          *6400
 2907                     NOPUNCH
 2908       0400          *400
 2909                     ENPUNCH
 2910             /
 2911             /DECTAPE WRITE SUBROUTINE - DUMPS ALL OR PART OF
 2912             /A MEMORY FIELD ONTO DECTAPE
 2913 40400 0000  WTENT,  0
 2914 40401 6201          CDF             /FOR DT CTRL/WORDS
 2915 40402 7346  WTX1,   CLA CLL CMA RTL
 2916 40403 3020          DCA QWS0        /SET -(ERROR LIMIT)
 2917 40404 7346          CLA CLL CMA RTL
 2918 40405 3314          DCA WX          /SET -(MAX REVERSALS)
 2919 40406 6761          DTRA
 2920 40407 0354          AND QK7174
 2921 40410 6764          DTXA            /CLEAR STATUS REG 'A'
 2922 40411 6774          DTLB            / & CLEAR FIELD BITS
 2923 40412 1312          TAD WTWC
 2924 40413 3713          DCA I WTCA
 2925 40414 6761          DTRA
 2926 40415 1352          TAD QK210       /ESTABLISH SEARCH GO MODE
 2927 40416 0352          AND QK210
 2928 40417 5222          JMP WTX4
 2929 40420 7420  WTX3,   SNL             /CHANGE DIRECTION?
 2930 40421 5260          JMP WTX5        /YES
 2931 40422 4264  WTX4,   JMS WTOPR
 2932 40423 6761          DTRA
 2933 40424 7006          RTL
 2934 40425 7006          RTL
 2935 40426 7630          SZL CLA         /GOING FORWARD?
 2936 40427 1346          TAD QK2         /NO - ALLOW FOR SLIP
 2937 40430 1712          TAD I WTWC      /GET THE LAST BLOCK SEEN
 2938 40431 7040          CMA
 2939 40432 1030          TAD QWBLK       / & COMPARE TO THE BLK WE WANT
 2940 40433 7040          CMA
 2941 40434 7640          SZA CLA         /ARE WE THERE?
 2942 40435 5220          JMP WTX3        /NO - CONTINUE SEARCH
 2943 40436 7430          SZL             /GOING FORWARD?
 2944 40437 5260          JMP WTX5        /NO - CHANGE TO FORWARD
 2945 40440 1031          TAD QWFLD       /SET THE FIELD BITS
 2946 40441 6774          DTLB
 2947 40442 1355          TAD QM200
 2948 40443 3712          DCA I WTWC      / & SET FOR 200 WORDS
 2949 40444 1022          TAD QWS2
 2950 40445 3713          DCA I WTCA      / & SET CORE ADDR - 1
 2951 40446 1350          TAD QK50
 2952 40447 4264          JMS WTOPR       /THEN DO THE TRANSFER
 2953 40450 1347          TAD QK40
 2954 40451 6764          DTXA
 2955 40452 1713          TAD I WTCA      /GET THE UPDATED CORE ADDR.
 2956 40453 3022          DCA QWS2
 2957 40454 2030          ISZ QWBLK       /UPDATE THE BLOCK-COUNT
 2958 40455 2023          ISZ QWS3        /ARE WE DONE?
 2959 40456 5202          JMP WTX1        /NO - DO ANOTHER BLOCK
 2960 40457 5600          JMP I WTENT     /YES - RETURN
 2961             /
 2962             /HERE WE REVERSE THE TAPE DIRECTION AND CHECK TO

      /TSS/8 CONFIGURATION FOR UWM                                       Page 73


 2963             /SEE IF WE HAVE DONE MORE THAN A REASONABLE NUMBER
 2964             /OF REVERSES.
 2965 40460 1353  WTX5,   TAD QK400
 2966 40461 2314          ISZ WX          /INCRE. THE COUNT
 2967 40462 5222          JMP WTX4        /OK - CONTINUE
 2968 40463 5304          JMP WT01        /BAD - PRINT ERROR
 2969             /
 2970             /SUBROUTINE TO PERFORM A 'DTXA' AND WAIT FOR
 2971             /COMPLETION OF THE OPERATION.
 2972 40464 0000  WTOPR,  0
 2973 40465 6764          DTXA
 2974 40466 6773          DTSF DTRB
 2975 40467 5266          JMP .-1
 2976 40470 7700          SMA CLA         /ANY ERRORS?
 2977 40471 5664          JMP I WTOPR     /NO - RETURN
 2978 40472 6772          DTRB            /GET THE STATUS AGAIN
 2979 40473 7006          RTL
 2980 40474 7004          RAL
 2981 40475 7710          SPA CLA         /SELECT ERROR?
 2982 40476 5307          JMP WTSELC      /YES
 2983 40477 7430          SZL             /END-ZONE ERROR?
 2984 40500 1353          TAD QK400       /YES - CHANGE TAPE DIRECTION
 2985 40501 6764          DTXA
 2986 40502 2020          ISZ QWS0        /INCRE. ERROR LIMIT
 2987 40503 5204          JMP WTX1+2      / & TRY IT AGAIN
 2988 40504 4436  WT01,   SPEAK; WTHELP   /PUSH THE PANIC BUTTON
      40505 0665
 2989 40506 5751          JMP I QK200     /RESTART (MAYBE EVEN SUCCEED)
 2990 40507 4436  WTSELC, SPEAK; WTSMS    /SELECT ERROR
      40510 0702
 2991 40511 5202          JMP WTX1        /TRY AGAIN
 2992             /
 2993 40512 7754  WTWC,   7754    /DT WORD COUNT
 2994 40513 7755  WTCA,   7755    /DT BUFFER ADDRESS
 2995 40514 7777  WX,     -1      /REVERSAL COUNTER
 2996             /
 2997             /SUBROUTINE TO READ ALL OR PART OF A 4K DISC TRACK.
 2998 40515 0000  RDENT,  0
 2999 40516 7346          CLA CLL CMA RTL
 3000 40517 3020          DCA QWS0        /SET -(ERROR LIMIT)
 3001 40520 6201          CDF
 3002 40521 7240  RDX1,   CLA CMA
 3003 40522 3745          DCA I RDCA      /SET CORE ADDR - 1
 3004 40523 1033          TAD QRADR
 3005 40524 3744          DCA I RDWC      /USE DISC ADDR. AS COUNT
 3006             
 3007                     IFZERO RF08 <
 3008 40525 1032          TAD QRTRK
 3009 40526 6643          DXAL            /SET DISC EXTENSION
 3010 40527 1031          TAD QWFLD
 3011 40530 6615          DIML            /SET MEMORY FIELD
 3012                     >
 3013                     IFZERO RF08-40 <
 3014                     TAD QRTRK       /GET THE DISC EXTENSION
 3015                     CLL RTL; RTL; RTL
 3016                     TAD QWFLD       / & ADD IN THE FIELD SELECT
 3017                     DEAL

      /TSS/8 CONFIGURATION FOR UWM                                       Page 74


 3018                     CLA
 3019                     >
 3020 40531 1033          TAD QRADR
 3021 40532 6603          DMAR            /SET THE ADDR. & READ
 3022 40533 6623          DFSC DFSE       / & WAIT FOR A FLAG
 3023 40534 5333          JMP .-1
 3024 40535 6621          DFSE            /ANY ERRORS?
 3025 40536 5715          JMP I RDENT     /NOPE - RETURN
 3026 40537 2020          ISZ QWS0        /TOO MANY ERRORS?
 3027 40540 5321          JMP RDX1        /NOPE - TRY AGAIN
 3028 40541 4436          SPEAK; RDHELP   /YES - PRINT A MSG
      40542 0650
 3029 40543 5751          JMP I QK200     /THEN TRY A RESTART
 3030             /
 3031 40544 7750  RDWC,   7750    /DISC WORD COUNT
 3032 40545 7751  RDCA,   7751    /DISC BUFFER ADDRESS
 3033             /
 3034 40546 0002  QK2,    2
 3035 40547 0040  QK40,   40
 3036 40550 0050  QK50,   50
 3037 40551 0200  QK200,  200
 3038 40552 0210  QK210,  210
 3039 40553 0400  QK400,  400
 3040 40554 7174  QK7174, 7174
 3041 40555 7600  QM200,  -200

      /TSS/8 CONFIGURATION FOR UWM                                       Page 75


 3042       6600          *6600
 3043                     NOPUNCH
 3044       0600          *600
 3045                     ENPUNCH
 3046             /
 3047             /SUBROUTINE TO PRINT A MESSAGE AND WAIT FOR A RESPONSE.
 3048 40600 0000  SPENT,  0
 3049 40601 7300          CLA CLL
 3050 40602 6211          DATFLD          /GET TO OUR DATA FIELD
 3051 40603 1246          TAD QK215
 3052 40604 4237          JMS QTOUT       /TYPE <CR>
 3053 40605 1245          TAD QK212
 3054 40606 4237          JMS QTOUT       / & <LF>
 3055 40607 7240          CLA CMA
 3056 40610 1600          TAD I SPENT     /GET THE MESSAGE ADDR.
 3057 40611 2200          ISZ SPENT
 3058 40612 3010          DCA QAX0
 3059 40613 1410  SPRNT,  TAD I QAX0      /GET A CHARACTER
 3060 40614 7450          SNA             /DONE?
 3061 40615 5220          JMP QTX         /YES
 3062 40616 4237          JMS QTOUT       /NO - TYPE THE CHARACTER
 3063 40617 5213          JMP SPRNT       / & DO IT AGAIN
 3064 40620 6032  QTX,    KCC             /CLEAR THE KEYBOARD
 3065 40621 6031          KSF
 3066 40622 5221          JMP .-1
 3067 40623 6036          KRB
 3068 40624 3021          DCA QWS1        /SAVE THE CHAR
 3069 40625 1021          TAD QWS1
 3070 40626 4237          JMS QTOUT       / & ECHO IT
 3071 40627 1021          TAD QWS1
 3072 40630 1247          TAD QM215
 3073 40631 7640          SZA CLA         /CARRIAGE RETURN?
 3074 40632 5220          JMP QTX         /NO - TRY AGAIN
 3075 40633 1245          TAD QK212
 3076 40634 4237          JMS QTOUT       /YES - TYPE <LF>
 3077 40635 6201          CDF
 3078 40636 5600          JMP I SPENT     /THEN RETURN
 3079             /
 3080             /SUBROUTINE TO TYPE ONE CHARACTER.
 3081 40637 0000  QTOUT,  0
 3082 40640 6046          TLS             /TYPE THE CHAR
 3083 40641 7200          CLA             / & CLEAR THE AC
 3084 40642 6041          TSF
 3085 40643 5242          JMP .-1
 3086 40644 5637          JMP I QTOUT     /RETURN
 3087             /
 3088 40645 0212  QK212,  212
 3089 40646 0215  QK215,  215
 3090 40647 7563  QM215,  -215
 3091             /
 3092             /CRASH-DUMP ERROR MESSAGES.
 3093 40650 0304  RDHELP, "D;"I;"S;"C;" ;"F;"A;"I;"L;"U;"R;"E;0
      40651 0311
      40652 0323
      40653 0303
      40654 0240
      40655 0306

      /TSS/8 CONFIGURATION FOR UWM                                       Page 76


      40656 0301
      40657 0311
      40660 0314
      40661 0325
      40662 0322
      40663 0305
      40664 0000
 3094 40665 0302  WTHELP, "B;"A;"D;" ;"D;"E;"C;"T;"A;"P;"E;"?;0
      40666 0301
      40667 0304
      40670 0240
      40671 0304
      40672 0305
      40673 0303
      40674 0324
      40675 0301
      40676 0320
      40677 0305
      40700 0277
      40701 0000
 3095 40702 0304  WTSMS,  "D;"E;"C;"T;"A;"P;"E;" ;"S;"E;"L;"E;"C;"T;" ;"E;"R;"R;"O;"R;0
      40703 0305
      40704 0303
      40705 0324
      40706 0301
      40707 0320
      40710 0305
      40711 0240
      40712 0323
      40713 0305
      40714 0314
      40715 0305
      40716 0303
      40717 0324
      40720 0240
      40721 0305
      40722 0322
      40723 0322
      40724 0317
      40725 0322
      40726 0000
 3096                     >>>>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 77


 3097       7720          *FIPBLK
 3098 47720 0000  FIPBLK, ZBLOCK 10       /FIP I/O PARAMETER BLOCK
      47721 0000
      47722 0000
      47723 0000
      47724 0000
      47725 0000
      47726 0000
      47727 0000
 3099 47730 0000  WINBAS, ZBLOCK -.       /SPECIAL BASIC WINDOW (TO END OF FIELD)
      47731 0000
      47732 0000
      47733 0000
      47734 0000
      47735 0000
      47736 0000
      47737 0000
      47740 0000
      47741 0000
      47742 0000
      47743 0000
      47744 0000
      47745 0000
      47746 0000
      47747 0000
      47750 0000
      47751 0000
      47752 0000
      47753 0000
      47754 0000
      47755 0000
      47756 0000
      47757 0000
      47760 0000
      47761 0000
      47762 0000
      47763 0000
      47764 0000
      47765 0000
      47766 0000
      47767 0000
      47770 0000
      47771 0000
      47772 0000
      47773 0000
      47774 0000
      47775 0000
      47776 0000
      47777 0000
 3100             /////   $$$$$

      No detected errors
