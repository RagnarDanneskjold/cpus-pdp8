
      /TSS/8 CONFIGURATION FOR UWM                                        Page 1


    1             /TSS/8 CONFIGURATION FOR UWM
    2             /CONFIGURATION PARAMETERS FOR THE TSS/8 MONITOR
    3             /COPYRIGHT 1971
    4             /DIGITAL EQUIPMENT CORP. -MAYNARD, MASS
    5             /
    6             /TSS/8 PDP-8/E HARDWARE OPTIONS
    7             /THIS SECTION DEFINES THE HARDWARE CONFIGURATION ON
    8             /WHICH THIS TSS/8 MONITOR WILL BE RUN
    9             /FOR EACH STATEMENT THE COMMENT INDICATES THE
   10             /POSSIBLE RESPONSES
   11             
   12       0002  CPU=    2       /0 IF CPU IS PDP-8/I; 1 IF PDP-8
   13                             / 2 IF PDP-8/E; 3 IF PDP-12
   14             
   15       0000  EAE=    0       /20 IF CPU INCLUDES EAE; 0 IF NOT
   16             
   17       0070  CORMEM= 70      /HIGHEST DATA FIELD SELECT; FOR 12K SYS,
   18                             / RESPOND 20; FOR 16K, RESPOND 30; FOR 32K, 70
   19             
   20       0000  D680=   0       /2 IF TTY INTERFACING IS 680 OR DC08;
   21                             / 0 IF TTY INTERFACING IS PT08'S
   22             
   23       0000  D689=   0       /4 IF 680 OR DC08 INCLUDES 689 OR DC08F;
   24                             / 0 IF IT DOESN'T OR TTY INTERFACING IS PT08'S
   25             
   26       0000  RF08=   0       /40 IF SYSTEM DISC IS DF32; 0 IF RF08
   27             
   28       0001  RS08=   1       /# OF DISCS IN SYSTEM, WHETHER RF08 OR DF32
   29             
   30       0000  RK8E=   0       /# OF RK8E DRIVES; ONLY FIRST IS USED FOR SYSTEM
   31                             / THE REMAINDER ARE TREATED AS PERIPHERALS
   32             
   33       0001  READER= 1       /1 IF SYSTEM INCLUDES HIGH-SPEED READER; 0 IF NOT
   34             
   35       0001  PUNCH=  1       /1 IF SYS HAS HSP, 0 IF NOT
   36             
   37       0001  TC01=   1       /1 IF SYS HAS DECTAPES; 0 IF NOT
   38             
   39       0000  TU55=   0       /1 IF SYSTEM INCLUDES MORE THAN TWO DECTAPES
   40                             / 0 IF 0, 1, OR 2 DRIVES
   41             
   42       0000  TD8E=   0       /1 IF TD8E DECTAPES AVAILABLE FOR LOADING & DUMPING
   43                             / 0 IF NOT; NOTE THAT TD8E TAPES CANNOT BE USED UNDER
   44                             / TSS/8, THEY REQUIRE CONTINUOUS CPU ATTENTION
   45             
   46       0000  PLOTTER=0       /NO SYSTEMS CAN HAVE PLOTTER
   47             
   48       0000  LPT=    0       /0 IF NO PRINTER ON SYS; 1 IF LP08; 2 IF LS8E
   49             
   50       0000  CDR=    0       /NO SYS CAN HAVE CARD READER
   51             /
   52             /MONITOR OPTIONS 
   53             /FILL IN THE FOLLOWING LINES TO INDICATE THE 
   54             /MONITOR CAPACITY FOR THIS SYSTEM
   55             
   56                     DECIMAL
   57       0024  JOBMAX= 20      /NUMBER OF SIMULTANEOUS USERS (.LE. 20)

      /TSS/8 CONFIGURATION FOR UWM                                        Page 2


   58             
   59       0017  NULINE= 15      /NUMBER OF TTYS TO BE ATTACHED TO SYS.
   60                             / SIMULTANEOUSLY, NOT COUNTING CONSOLE (.LE. 19)
   61                             / GENERALLY .GE. JOBMAX; IF SYS. USES 680 OR DC08,
   62                             / NULINE MUST BE A MULTIPLE OF 5 (FIVE); IF CPU IS
   63                             / A PDP-12, NULINE MUST BE MULTIPLE OF 8 (EIGHT)
   64             
   65       0011  TRUKBD= 9       /NUMBER OF ACTUAL KEYBOARDS ON SYSTEM (NOT COUNTING
   66                             / CONSOLE TTY). THIS MUST BE .LE. NULINE; NULINE
   67                             / MAY INCLUDE DUMMY TERMINALS, THIS MAY NOT.
   68             
   69       0011  FRCMAX= TRUKBD  /THE HIGHEST KEYBOARD # A '00XX' ACCT # MAY FORCE
   70                             / NOTE THAT A '000X' ACCOUNT MAY FORCE UP TO 'NULINE'
   71             
   72       0011  TLKMAX= TRUKBD  /THE HIGHEST KEYBOARD # WHICH MAY BE 'TALK'ED TO
   73             
   74       0011  BRDMAX= TRUKBD  /THE HIGHEST KEYBOARD WHICH WILL RECEIVE BROADCASTS
   75                     OCTAL
   76             
   77       0002  DTAMIN= 2       /THE FIRST DECTAPE DRIVE WHICH WILL BE ASSIGNED
   78                             / FOR 'ASSIGN D' COMMAND; NORMALLY =0, BUT MAY
   79                             / VARY FOR SLIGHTLY RESTRICTED DRIVE USE.
   80             
   81       0007  BILLNG= 7       /THE ACCOUNT NUMBER OF THE BILLING SYSTEM
   82                             / 0, IF NO BILLING SYSTEM USED
   83             /
   84             /SYSTEM CONSTANTS
   85             
   86       37777777776  QUANT=  -2      /NUMBER OF SYSTEM TICKS PER TIME SLICE  (-)
   87       0005  SWDEX=  5       /DISC TRACK OF FIRST SWAP AREA
   88       0001  TTYEVEN=1       /1 INDICATES PARITY TTY MAY BE USED WITH SYS
   89                             / 0 ALLOWS ONLY DEC MODIFIED TTYS
   90       0020  INFLD=  20      /FIELD SELECT THAT 'INIT' SHOULD BE BOOTED INTO
   91                             / MAKING IT 20 AVOIDS PROBLEMS SHOULD A
   92                             / FIELD NEED REPAIR & SYSTEM IS RUN ON 12K
   93             
   94             ///     END OF SYSTEM CONFIGURATION PARAMETERS

      /TSS/8 CONFIGURATION FOR UWM                                        Page 3


   95                96             /PARAMETERS - UWM VERSION 23
   97             /
   98             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
   99             /                               MAYNARD, MASSACHUSETTS
  100             /
  101             /
  102       0027  VERNUM= 27      /SYSTEM VERSION NUMBER
  103             /
  104       0005  STOMIN= 5       /MINIMUM # FREE STORAGE BLOCKS FOR NEW JOB
  105                     IFZERO RK8E <
  106                     IFZERO RF08-40 <
  107             DSKSIZ= RS08^10
  108                     >
  109                     IFZERO RF08 <
  110       0100  DSKSIZ= RS08^100        /# OF 4K DISC TRACKS
  111                     >
  112                     >
  113                     IFNZRO RK8E <
  114             DSKSIZ= 400     /# OF 4K DISC TRACKS
  115                     >
  116       0062  CLOCKR= 62      /50 MILLISECONDS
  117       2260  TICMIN= 2260    /1200
  118       0645  INCLK2= 0645    /1,728,000 TICKS PER DAY
  119       7000  INCLK1= 7000
  120       0024  TICSPS= 24      /NUMBER OF SYSTEM TICKS PER SECOND
  121       0010  INIDEX= 10      /INIT DISC EXTENSION
  122       0030  TS8DEX= 30      /FIELD 0 DISC EXTENSION*2^3
  123       0000  ERPDEX= 0       /ERP DISC EXTENSION*4
  124       0000  ERPWC=  0       /ERP WORD COUNT
  125       0004  FIPDEX= 4       /FIP DISC EXTENSION*4
  126       0000  FIPWC=  0       /FIP WORD COUNT
  127       0000  SIDEX=  ERPDEX  /SI DISC EXTENSION*4
  128       0000  SIWC=   ERPWC   /SI WORD COUNT
  129       0002  LIBACT= 2       /LIBRARY ACCOUNT #
  130       4000  BRKINI= 4000    /INITIAL USER BREAK MASK
  131       0400  WRDSEG= 400     /#WORDS PER DISC SEGMENT
  132             
  133             /IOT DEFINITIONS
  134             
  135                     IFZERO D680-2 <
  136             TTINCR= 6401    /INCREMENT LINE REGISTER
  137             TTI=    6402    /TELETYPE INPUT COMMAND
  138             TTO=    6404    /TELETYPE OUTPUT COMMAND
  139             TTCL=   6411    /CLEAR LINE REGISTER
  140             TTSL=   6412    /SET LINE REGISTER, CLEAR AC
  141             TTRL=   6414    /READ LINE REGISTER
  142             T8SKP=  6421    /SKIP ON CLOCK FLAG
  143             T8OFF=  6422    /TURN CLOCK OFF
  144             TT8ON=  6424    /TURN CLOCK ON
  145             TTRINC= 6461    /INCREMENT THE R REG.
  146             TT8CLR= 6473    /CLEAR AND LOAD THE R REG.
  147                     >

      /TSS/8 CONFIGURATION FOR UWM                                        Page 4


  148             /EXTENDED MEMORY
  149             
  150       6201  CDF=    6201    /CHANGE TO DATA FIELD 0
  151       6202  CIF=    6202    /CHANGE TO INSTRUCTION FIELD 0
  152       6204  CIOT=   6204    /CLEAR USER IOT
  153             
  154       6214  RDF=    6214    /READ DATA FIELD
  155       6224  RIF=    6224    /READ INSTRUCTION FIELD
  156       6234  RIB=    6234    /READ INTERRUPT BUFFER
  157       6244  RMF=    6244    /RESTORE MEMORY FIELD
  158       6254  SKPIOT= 6254    /SKIP ON USER IOT
  159       6264  UFF=    6264    /USER FLAG OFF
  160       6274  UFN=    6274    /USER FLAG ON
  161             
  162             /EAE
  163                     IFZERO EAE-20 <
  164             MUY=    7405    /MULTIPLY
  165             DVI=    7407    /DIVIDE
  166             NMI=    7411    /NORMALIZE
  167             SHL=    7413    /SHIFT ARITHMETIC LEFT
  168             ASR=    7415    /ARITHMETIC SHIFT RIGHT
  169             LSR=    7417    /LOGICAL SHIFT RIGHT
  170             MQL=    7421    /LOAD MQ
  171             SCL=    7403    /STEP COUNTER LOAD FROM MEMORY
  172             SCA=    7441    /STEP COUNTER TO AC
  173             MQA=    7501    /MQ TO AC
  174             
  175                     IFZERO CPU-2 <
  176             SAM=    7453    /SUBTRACT AC FROM MQ
  177             SKB=    7671    /SKIP IF MODE B (MESSES UP AC AND MQ)
  178             SWBA=   7447    /CHANGE MODE TO A
  179             SWAB=   7431    /CHANGE MODE TO B (ALSO DOES MQL)
  180             ACS=    7403    /AC(7:11) TO SC; AC CLEARED 
  181                     >>
  182       6006  SGT=    6006    /SKIP ON GT FLAG
  183                             /SOMEDAY FIX 'WHERE' COMMAND TO PRINT MODE & GT
  184             
  185             /LINE PRINTER IOTS
  186       6661  LSF=    6661    /SKIP ON CHAR FLAG SET
  187       6662  LCF=    6662    /CLEAR CHAR FLAG
  188       6663  LSRP=   6663    /SKIP ON NOT READY OR ON ERROR
  189       6664  LLC=    6664    /TRANSMIT CHAR TO PRINTER
  190       6665  LSP=    6665    /SET PROGRAM INTERRUPT
  191       6666  LPC=    6666    /TRANSMIT CHAR & CLEAR FLAG
  192       6667  LCP=    6667    /CLEAR PROGRAM INTERRUPT

      /TSS/8 CONFIGURATION FOR UWM                                        Page 5


  193             /CTY
  194             
  195       6044  TPC=    6044    /LOAD TELEPRINTER AND PRINT
  196             
  197             /DISC (DF32)
  198             
  199       6601  DCMA=   6601    /CLEAR
  200       6603  DMAR=   6603    /READ
  201       6605  DMAW=   6605    /WRITE
  202       6611  DCEA=   6611    /CLEAR DISC EXTENDED ADDRESS
  203       6615  DEAL=   6615    /LOAD EXTENDED ADDRESS
  204       6621  DFSE=   6621    /SKIP ON ERROR
  205       6622  DFSC=   6622    /SKIP ON COMPLETION
  206       6616  DEAC=   6616    /READ EXTENDED ADDRESS
  207             
  208             /DISC (RF08)
  209             
  210       6615  DIML=   6615
  211       6616  DIMA=   6616
  212       6643  DXAL=   6643
  213             
  214                     IFNZRO RK8E <
  215             DCLR=   6742    /CLEAR THE CONTROLLER
  216             DLAG=   6743    /LOAD DISC ADDRESS & GO
  217             DLDC=   6746    /LOAD THE COMMAND REGISTER
  218             DRST=   6745    /READ THE STATUS
  219             DSKP=   6741    /SKIP IF DONE OR ERROR
  220             DLCA=   6744    /LOAD CURRENT CORE ADDRESS
  221                     >
  222             
  223             /
  224             /STANDARD DECTAPE CONTROLLER IOTS
  225       6761  DTRA=   6761    /READ A-REGISTER
  226       6762  DTCA=   6762    /CLEAR A-REGISTER
  227       6764  DTXA=   6764    /XOR INTO A-REGISTER
  228       6771  DTSF=   6771    /SKIP ON DECTAPE FLAG
  229       6772  DTRB=   6772    /READ STATUS-REGISTER (B)
  230       6774  DTLB=   6774    /LOAD STATUS-REGISTER (B)
  231             
  232                     IFZERO CPU-3 <
  233             CLAB=   6133
  234             CLLR=   6132
  235             CLEN=   6134
  236             CLSA=   6135
  237             CLSK=   6131
  238             
  239             MTPF=   6113
  240             MINT=   6115
  241             MTON=   6117
  242             MKTF=   6123
  243             MINS=   6125
  244             MTRS=   6127
  245             
  246             MKSF=   6111
  247             MKCC=   6112
  248             MKRS=   6114
  249             MKRB=   6116

      /TSS/8 CONFIGURATION FOR UWM                                        Page 6


  250             
  251             MTSF=   6121
  252             MTCF=   6122
  253             MTPC=   6124
  254             MTLS=   6126
  255                     >
  256             
  257                     IFZERO CPU <
  258             /KW8I           REAL TIME CLOCK
  259             
  260             CECI=   6137    /CLEAR AND ENABLE CLOCK AND INTERRUPT
  261             CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  262                     >
  263             
  264                     IFZERO CPU-1 <
  265             CECI=   6315    /CLOCK ENABLE
  266             CSCF=   6301    /SKIP ON CLOCK FLAG
  267             CCF=    6302    /CLEAR CLOCK FLAG, CLEAR ENABLE AND CLEAR BUFFER
  268             CLB=    6304    /LOAD BUFFER FROM AC
  269                     >
  270             
  271                     IFZERO CPU-2 <
  272       6131  CECI=   6131    /CLOCK ENABLE
  273       6133  CSCF=   6133    /SKIP AND CLEAR FLAG IF FLAG
  274       6007  CAF=    6007    /CLEAR ALL FLAGS
  275                     >
  276             
  277                     IFZERO D689-4 <
  278             /689AG
  279             
  280             SRF=    6701    /SKIP IF RING FLAG
  281             SCF=    6711    /SKIP IF CARRIER FLAG
  282             DFCRF=  6742    /CLEAR RING FLAG
  283             CTG=    6721    /CLEAR GROUP COUNTER
  284             RRS=    6702    /READ RING STATUS
  285             ITG=    6731    /INCREMENT GROUP COUNTER
  286             STR=    6722    /SET TERMINAL READY
  287             EDF=    6704    /ENABLE DATAPHONE FEATURES
  288             DDF=    6714    /DISABLE DATAPHONE FEATURES
  289             CTR=    6724    /CLEAR TERMINAL FLAG
  290             CCF=    6741    /CLEAR CARRIER FLAG
  291             RCS=    6712    /READ CARRIER STATUS
  292                     >

      /TSS/8 CONFIGURATION FOR UWM                                        Page 7


  293             /TSS/8 IOTS
  294       0406  SEGS=   406     /RETURN NUMBER OF FREE SEGMENTS ON DISC
  295       0440  ASD=    440     /ASSIGN DEVICE
  296       0442  REL=    442     /RELEASE DEVICE
  297       0600  REN=    600     /RENAME FILE
  298       6601  OPEN=   6601    /OPEN FILE
  299       0602  CLOS=   602     /CLOSE
  300       6603  RFILE=  6603    /READ FILE
  301       0604  PROT=   604     /PROTECT
  302       6605  WFILE=  6605    /WRITE FILE
  303       6606  XOPEN=  6606    /OPEN FILE WITH EXCLUSIVE USE
  304       0607  CPASS=  607     /CHANGE A USER'S PASSWORD
  305       0610  CRF=    610     /CREATE
  306       0611  EXT=    611     /EXTEND
  307       0612  RED=    612     /REDUCE
  308       6613  FINF=   6613    /FILE INFORMATION
  309       0614  LIN=    614     /LOGIN
  310       0615  LOUT=   615     /LOGOUT
  311       0620  BCLR=   620     /CLEAR MFD BILLING INFORMATION
  312             
  313             /DEVICE DATA BLOCK
  314             
  315       0000  DDBSTS= 0               /WORD 1.  STATUS AND UNIT NUMBER
  316       2000          DXON=   2000    /XOFF SENT FLAG
  317       1000          DSI=    1000    /DESTINATION IS S.I. FLAG
  318       0400          DXOUT=  400     /BIT TO CAUSE 'XOFF' TO GO OUT
  319       0200          DUPL=   200     /CONSOLE IN DUPLEX MODE
  320       0100          SICOM=  100     /COMMAND WAITING
  321       0040          CTRLC=  40      /USER TYPED CTRL/C
  322             
  323                     /DEVICE UNIT NUMBER IS IN BITS 6-11
  324             
  325       0001  DDBJN=  1       /WORD 2. JOB NUMBER IN 7-11
  326       0002  DDBBRK= 2       /BREAK MASK
  327       0204  SIBRKM= 204     /SI BREAK MASK
  328       0003  DDBTIM= 3       /TIME THAT DEVICE WAS ASSIGNED
  329       0004  DDBINP= 4       /BUFFER FILL POINTER
  330       0005  DDBINC= 5       /BUFFER FILL COUNT
  331       0006  DDBOUP= 6       /BUFFER EMPTY POINTER
  332       0007  DDBOUC= 7       /BUFFER EMPTY COUNT

      /TSS/8 CONFIGURATION FOR UWM                                        Page 8


  333             /JOB DATA AREA
  334             
  335       0000  JOBSTS= 0               /STATUS
  336                     /STR0
  337       4000          JSRUN=  4000    /RUN BIT
  338       2000          JSEREN= 2000    /USER ERROR ENABLE
  339       1000          JCOMBD= 1000    /LAST TIME THE JOB RAN AS COMPUTE BOUND
  340       0400          JSHLT=  400     /PROGRAM EXECUTED 'HLT'
  341       0200          JSPRIV= 200     /LIBRARY PROGRAM (HAS PRIVILEGES)
  342       0100          JSIOT=  100     /NON-RESIDENT IOT
  343       0040          JSIOTC= 40      /COPY IOT RESULT TO USER
  344       0020          JSEXON= 20      /EXECUTE ONLY
  345                     /BITS 9-11 ARE SYSTEM ERROR CODE
  346       0001          UUOERF= 1       /IOT ERROR
  347       0002          SWPRER= 2       /SWAP READ ERROR
  348       0003          SWPWER= 3       /SWAP WRITE ERROR
  349       0005          DSKERR= 5       /DISC ERROR
  350       0006          HUNGDV= 6       /HUNG DEVICE
  351             
  352                     /STR1
  353       4000          JSTIME= 4000    /TIME IS UP
  354       2000          JSF0=   2000    /FILE 0 NOT BUSY
  355       1000          JSF1=   1000    /FILE 1 IS NOT BUSY
  356       0400          JSF2=   400     /FILE 2 IS NOT BUSY
  357       0200          JSF3=   200     /FILE 3 IS NOT BUSY
  358       0100          JSDEL=  100     /DELIMITER SEEN
  359       0020          JSTEL=  20      /OUTPUT BUFFER NOT FULL
  360       0010          JSPTR=  10      /CHARACTER IN READER BUFFER
  361       0004          JSPTP=  4       /PUNCH BUFFER IS NOT FULL
  362       0002          JSERR=  2       /SYSTEM ERROR DETECTED
  363       0001          JSWAIT= 1       /JOB NOT IN WAIT STATE
  364             
  365       0001  STR2=   1       /TC01&1!PUNCH&1!PLOTTER&1!LPT&1!CDR&1
  366             
  367       1000          JSPLT=  1000    /PLOTTER DONE
  368       0400          JSCDR=  400     /CHARACTER IN CDR BUFFER
  369       0200          JSCRNR= 200     /CDR NOT READY
  370       0100          JSCREF= 100     /CDR END FILE
  371       0004          JSDTC=  4       /DECTAPE CONTROLLER FLAG
  372       0002          JSDTE=  2       /DT ERROR FLAG
  373       0001          JSDTF=  1       /DT DONE FLAG
  374             
  375       0003  JOBWMK= 2+STR2          /WAIT MASK
  376       0005  JOBSRA= JOBWMK+1+STR2   /JOB RESTART ADDRESS
  377       0006  JOBERR= JOBSRA+1        /JOB ERROR RESTART ADDRESS
  378       0007  JOBLNK= JOBERR+1        /IOT LINKAGE
  379       0010  JOBSWR= JOBLNK+1        /SWITCH REGISTER
  380       0011  JOBREG= JOBSWR+1        /PC, AC, & LINK (W/MODE, GT, & SC)
  381       0014  JOBEAE= JOBREG+3        /MQ REGISTER
  382       0015  JOBACT= JOBEAE+1        /USER'S ACCOUNT #
  383       0016  JOBRTM= JOBACT+1        /LOW ORDER RUN TIME
  384       0017  JOBRTH= JOBRTM+1        /HIGH ORDER RUN TIME
  385       0020  JOBF0=  JOBRTH+1        /POINTER TO FILE 0 CONTROL
  386       0021  JOBF1=  JOBF0+1         /POINTER TO FILE 1 CONTROL
  387       0022  JOBF2=  JOBF1+1         /POINTER TO FILE 2 CONTROL
  388       0023  JOBF3=  JOBF2+1         /POINTER TO FILE 3 CONTROL
  389       0024  JOBSTB= JOBF3+1         /DECTAPE STATUS REGISTER B

      /TSS/8 CONFIGURATION FOR UWM                                        Page 9


  390             
  391             /TUNING PARAMETERS
  392             
  393       0010  MAXBUF= 10      /MAXIMUM PERMITTED # OF OUTPUT BUFFERS
  394       0003  MINBUF= 3       /RESTART JOB WHEN ONLY MINBUF BUFFERS ARE STILL FULL
  395             
  396             /FILE CONTROL BLOCK - POINTED TO BY JOBFX, X=0,1,2,3
  397             
  398       0000  FILWPT= 0       /POINTER TO FILE RETRIEVAL WINDOW
  399       0001  FILSCT= 1       /SEGMENT NUMBER OF FIRST WINDOW ENTRY
  400       0002  FILPRO= 2       /FILE PROTECTION - BIT 9
  401       0003  FILPAR= 3       /POINTER TO RFILE OR WFILE PARAMETER BLOCK
  402       0004  FILDA=  4       /DISC ADDRESS OF RFILE OR WFILE
  403       0006  FILWC=  6       /-WORD COUNT OF RFILE OR WFILE
  404       0007  FILRES= 7       /POINTER TO FILPIF IN USER AREA
  405             
  406             /FILE  RETRIEVAL WINDOW
  407             /WORD 0:        UFD LINK TO NEXT GROUP OF 7 SEGMENT POINTERS
  408             /WORDS 1-7:     SEVEN SEGMENT ADDRESSES
  409             
  410             /RFILE OR WFILE PARAMETER BLOCK - POINTED AT BY FILPAR
  411             
  412       0000  FILPFN= 0       /FUNCTION: 0603 OR 0605
  413       0001  FILPDX= 1       /DISC EXTENSION
  414       0002  FILPIF= 2       /INTERNAL FILE # (BITS 10-11) AND FIELD # (BITS 7-9)
  415       0003  FILPWC= 3       /-WORD COUNT FOR THIS TRANSFER
  416       0004  FILPCA= 4       /CORE ADDRESS FOR THIS TRANSFER
  417       0005  FILPDA= 5       /DISC ADDRESS
  418       0006  FILPRA= 6       /EXEC RETURN ADDRESS FOR THIS TRANSFER
  419       0007  FILPCT= 7       /POINTER TO FILE CONTROL BLOCK
  420             
  421             /CORE TABLE CONTROL FLAGS
  422             
  423       4000  FSWP=   4000    /SWAP REQUEST
  424       2000  LOCK=   2000    /LOCK IN CORE
  425       1000  NOTRUN= 1000    /HAS NOT BEEN SCHEDULED TO RUN
  426       0400  FIP=    400     /FILE PHANTOM (NOTE: FIP HAS BEEN ASSUMED EQUAL TO SEGISZ)
  427       0200  SI=     200     /SYSTEM COMMAND INTERPRETER PHANTOM
  428       0100  FIX=    100     /JUST FINISHED DISC TRANSFER
  429             /BITS 7-11 CONTAIN THE JOB #
  430             
  431             /FIP TABLE DEFINITIONS
  432             
  433       0530  SATSIZ= 530
  434       5600  ENTABL= 5600
  435       6040  UTABLE= ENTABL+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX+JOBMAX
  436       6160  RTABLE= UTABLE+JOBMAX+JOBMAX+JOBMAX+JOBMAX

      /TSS/8 CONFIGURATION FOR UWM                                       Page 10


  437       0020  SIDATA=20       /SYSTEM INTERPRETER DATA
  438       0020          *SIDATA
  439             
  440 00020 0020  COMPTR, .       /POINTER TO LAST DEVTBL ENTRY SCANNED. INITIALIZE TO DEVTBL-1
  441 00021 0021  SIBUF,  .       /BUFFER STATE
  442 00022 0022  SICNT,  .
  443 00023 0023  COMDSP, .       /FIP RETURN DISPATCH
  444 00024 0024  SIFLG,  .       /COMMAND FLAGS
  445 00025 0025  SICHAR, .       /SAVE LAST CHAR FROM COMMAND SCAN
  446 00026 0026  SIREG,  .       /USER AC, LINK, PC
  447 00027 0027          .
  448 00030 0030          .
  449 00031 0031  TTCHAR, .       /TTY CHARACTER
  450             
  451       0032  CONSTANTS=SIDATA+12
  452       0032  *CONSTANTS
  453 00032 0002  C0002,  2
  454 00033 0003  C0003,  3
  455 00034 0004  C0004,  4
  456 00035 0007  C0007,  7
  457 00036 0037  C0037,  37
  458 00037 0100  C0100,  100
  459 00040 1000  C1000,  1000
  460 00041 7770  C7770,  7770
  461             
  462       0043  JOBCON=CONSTANTS+11     /JOB CONTROL
  463       0043  *JOBCON
  464             
  465 00043 0043  JOBTIM, .       /-#TICKS REMAINING TO RUN
  466 00044 3256  JOBTBA, JOBTBL  /JOB TABLE ADDRESS
  467             
  468       0046  FRSTOR=JOBCON+3
  469       0046  *FRSTOR
  470             
  471 00046 0046  FREE,   .       /POINTER TO HEAD OF FREE STORAGE
  472 00047 0047  FRECNT, .       /# FREE BLOCKS AVAILABLE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 11


  473       0050  TIMDAT= FRSTOR+2        /CLOCK AND DATE
  474       0050  *TIMDAT
  475             
  476             /CLOCK
  477 00050 0050  CLK2,   .
  478 00051 0051  CLK1,   .
  479             
  480       0052  SCHDAT=TIMDAT+2
  481       0052  *SCHDAT         /SCHEDULING DATA
  482             
  483 00052 0052  COMCNT, .       /NUMBER OF COMMANDS WAITING EXECUTION
  484 00053 0053  SQREQ,  .       /SWAP REQUEST FLAG
  485 00054 0054  FINISH, .       /+(I)-(O) FIELD OF JOB BEING SWAPPED
  486 00055 0055  FIT,    .       /JOB # TO BE SWAPPED IN
  487 00056 0056  FORCE,  .       /FIELD TO BE SWAPPED OUT
  488             
  489       0060  DATEND= 60      /END OF FIELD 0 PAGE 0 DATA
  490             
  491       0156  FIPDAT=156      /DATA REFERENCED BY FIP
  492       0156          *FIPDAT
  493             
  494 00156 0400  C0400,  400
  495                     IFNZRO WRDSEG-400       <GLITCH>
  496       0156  SEGSIZ= C0400   /WRDSEG
  497 00157 0031  FIBASE, SWDEX+JOBMAX    /BASE ADDRESS OF ALLOCATABLE DISC STORAGE
  498 00160 0160  JOB,    .       /# OF CURRENT JOB
  499 00161 0161  JOBDAT, .       /ADDRESS OF CURRENT JOB DATA LIST. MUST RESIDE IN DATA FIELD.
  500 00162 7077  CORTBA, CORTBL-1        /CORE ALLOCATION TABLE
  501 00163 3200  DEVTBA, DEVTBL  /DEVICE TABLE
  502 00164 3451  DSUTBA, DSUTBL  /USER DISC REQUEST QUEUE
  503 00165 0165  DSBUSY, .       /DISC BUSY COUNT
  504             
  505             /THE DATE IS KEPT AS A 12 BIT NUMBER IN THE FORMAT
  506             /DATE=((YEAR-1974)*12+(MONTH-1))*31+DAY-1
  507             
  508 00166 0166  DATE,   .

      /TSS/8 CONFIGURATION FOR UWM                                       Page 12


  509       0167  FISUBR=FIPDAT+11        /INST FIELD INDEPENDENT SUBROUTINES
  510       0167          *FISUBR
  511             
  512       0400  FISUBL=400
  513             
  514       1600  BLT0=   FISUBL+1200
  515 00167 1600  BLTA,   BLT0            /BLOCK TRANSFER
  516       4567  BLT=    JMS I Z BLTA
  517 00170 1302  CORSRA, CORSRC
  518       4570  CORE=   JMS I CORSRA
  519 00171 1400  GETBA,  GETB
  520       4571  GETBLK= JMS I GETBA
  521 00172 1451  GETDBA, GETDB0          /GET A DATA BLOCK
  522       4572  GETDDB= JMS I GETDBA
  523 00173 2200  TOFA,   TOF             /FETCH CHARACTER
  524       4573  FETCH=  JMS I Z TOFA
  525 00174 6600  GETJT0, GETJTB          /GET JOB DATA TABLE ADDRESS
  526       4574  GETJTA= JMS I Z GETJT0
  527 00175 0404  GIRSCA, GIRSC           /STORE CHARACTER IN BUFFER
  528       4575  STORE=  JMS I Z GIRSCA
  529 00176 0600  RETBA,  RETB            /RETURN BLOCK TO FREE STORAGE
  530       4576  RETBLK= JMS I Z RETBA
  531 00177 2455  WAITA,  WSCHED
  532       5577  WAIT=   JMP I WAITA
  533             
  534             /TABLES
  535                     IFNZRO CPU-3 <
  536       7100  DATA=   7100    /START OF FIELD 0 TABLES AND BUFFERS
  537                     >
  538             
  539                     IFZERO CPU-3 <
  540             DATA=   7200    /IF DC02 THERE LEAVE ROOM FOR THE CODE
  541                     >
  542       7100  CORTBL= DATA    /CORE ASSIGNMENT TABLE
  543       7107  L2QTB=  CORTBL+7
  544                     IFZERO D680-2 <
  545             T8OBF=  L2QTB+20        /TTY CHAR OUT BUFFER 1. # LINES
  546             T8OBF2= T8OBF+NULINE    /TTY CHAR OUT BUFFER 2.  # LINES
  547             T8IBF=  T8OBF2+NULINE   /TTY CHAR IN BUFFER. 2*# LINES
  548             T8IN=   T8IBF+NULINE+NULINE     /TTI LIST. 4*#LINES+1
  549             TYBEND= T8IN+NULINE+NULINE+NULINE+NULINE+1
  550                     >
  551                     IFZERO D680 <
  552       7127  TIBUFF= L2QTB+20                /TTY INPUT BUFFER. # LINES
  553       7147  TOBUFF= TIBUFF+NULINE+1 /TTY OUTPUT BUFFER. # LINES
  554       7167  TIDEV=  TOBUFF+NULINE+1 /DEVICE CODES (INPUT)
  555                             IFNZRO CPU-3 <
  556       7207  TODEV=  TIDEV+NULINE+1  /DEVICE CODES (OUTPUT)
  557       7227  TYBEND= TODEV+NULINE+1
  558                             >
  559             
  560                             IFZERO CPU-3 <
  561             TODEV=  TIDEV+1
  562             TYBEND= TODEV+1
  563                             >
  564                     >
  565             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 13


  566             IFZERO TC01     <DTASIZ=0>      /SIZE OF DTA CODE+BUFFERS
  567       1400  IFZERO TC01-1   <DTASIZ=1400>
  568             
  569       0000  IFZERO D689     <D689SIZ=0>     /SIZE OF 689AG CODE
  570             IFZERO D689-4   <D689SIZ=200>
  571             
  572       0200  PTRSIZ= 200
  573       0200  PTPSIZ= 200
  574       0200  PTPBUF= 200                     /START OF DEVICE BUFFERS
  575       0400  PTRBUF= PTPBUF+PTPSIZ
  576       0600  DTBUF1= PTRBUF+PTRSIZ
  577       1001  DTBUF2= DTBUF1+201
  578             
  579       6211  DATFLD=6211                     /MONITOR DATA FIELD SELECT
  580             
  581             IFZERO EAE-20   <MQREG=1>
  582       0001  IFZERO EAE      <IFZERO CPU-2 <MQREG=1>
  583                              IFNZRO CPU-2 <MQREG=0>>

      /TSS/8 CONFIGURATION FOR UWM                                       Page 14


  584             /SUPER CRITICAL LOCATIONS
  585             /THESE LOCATIONS ARE USED TO LINK TS8 AND TS8II
  586             
  587             /IT MAY BE NECESSARY TO ADJUST THEM ACCORDINGLY
  588             
  589             /DEFINED IN TS8:
  590             
  591       1600  BLT0=   1600
  592       1302  CORSRC= 1302    /SEARCH CORE TABLE
  593       0166  DATE=   166
  594       0300  DISMI0= 300     /DISMIS
  595       0273  DTINT=  273     /DECTAPE SLOT IN INTERRUPT CHAIN
  596       2375  IFNZRO CPU-3  <DTL20=   2375>
  597             IFZERO CPU-3   <DTL20=  6575>
  598       1400  GETB=   1400    /GET A BLOCK OF FREE CORE
  599       1451  GETDB0= 1451    /GET A DDB
  600       6600  GETJTB= 6600    /GETJTA
  601       0404  GIRSC=  404     /STORE A CHARACTER
  602       6013  GIR00=  6013    /ENTRY TO GIR (GENERAL INPUT ROUTINE)
  603       5770  INTCOM= 5770    /COMPLETION OF INTERRUPT CODE
  604       0354  L2EXIT= 354     /LEAVE LEVEL 2
  605       0104  L2SV0=  104     /LEVEL 2 SAVED PC
  606       2175  OVERLA= 2175    /FILE STUFF
  607       0576  OVRLA1= 0576
  608       5333  NFSEGS= 5333    /NUMBER OF FREE DISC SEGMENTS
  609       7420  PTPEMP= 7420    /PTP BUFFER EMPTY PTR
  610       7457  PTPFIL= 7457    /PTP BUFFER FILL PTR
  611       0211  IFZERO D680     <PTP1=  211>    /IOTS TO BE OVERLAYED
  612             IFZERO D680-2   <PTP1=  234>
  613       7477  PTP2=   7477
  614       7531  PTP3=   7531
  615       7533  PTP4=   7533
  616       7537  PTP5=   7537
  617       3604  READFI= 3604    /MORE FILE STUFF
  618       3400  RELOAD= 3400    /AUTOMATIC SYSTEM RESTART
  619       0600  RETB=   600     /RETURN A BLOCK TO FREE CORE
  620       0112  SOURCE= 112     /CHARACTER SOURCE FOR GIR
  621       6402  T8K9=   6402
  622       6401  T8LC=   6401
  623       6400  T8MNC=  6400    /DC08 COMMON STORAGE LOCATIONS
  624       0151  UUDF=   151     /USER DATA FIELD SELECT
  625       5172  UUOERR= 5172
  626       0326  UUOEX1= 326     /UUO (RESIDENT IOT HANDLERS) EXIT
  627       2455  WSCHED= 2455    /ADDRESS FOR WAIT
  628             
  629             /DEFINED IN TS8II
  630             
  631       0032  DTBST1= 32      /DT BUFFER 1 STATUS
  632       2000  DTL21=  PTRSIZ+PTPSIZ+DTASIZ    /DT LEVEL 2 DISPATCH
  633       7720  FIPBLK= 7720    /FIXED BLOCK FOR FIP I/O
  634       0151  F1OFFJ= 151     /FOR OFF /ON COMMANDS USED BY SI
  635       1400  UDTXA=  DTL21-400       /DT UUO SERVICE
  636       0174  UPTIM1= 174     /UPTIME COUNTER IN FIELD 1
  637       0173  UPTIM2= 173
  638       7730  WINBAS= 7730    /ADDRESS OF THE BASIC WINDOW
  639             
  640                     IFNZRO CPU-3 <

      /TSS/8 CONFIGURATION FOR UWM                                       Page 15


  641       2001  DTL11=  DTL21+1 /DT LEVEL 1 DISPATCH
  642                     >
  643             
  644                     IFZERO CPU-3 <
  645             DTL11=  DTL21+1+1       /DT LEVEL 1 DISPATCH; TO ALLOW FOR DISPLAY CHARACTERS
  646                     >
  647       2200  TOF=    DTL21+200       /FETCH A CHARACTER
  648       2316  BUFTST= TOF+116
  649       2400  CRASH=  TOF+200
  650       2401  CNTRLC= CRASH+1 /DECTAPE CTRL/C HANDLER
  651       2505  BRKTST= CRASH+105
  652       2600  TIMER0= CRASH+200
  653       2700  UPEEK1= TIMER0+100
  654       2734  DFINT1= UPEEK1+34
  655       3000  SWK1=   UPEEK1+D689SIZ+100
  656       3200  IFNZRO CPU-3    <DATA1= SWK1+200>
  657             
  658                     IFZERO CPU-3 <
  659             PDPBAS= SWK1
  660             DATA1=  PDPBAS+1000
  661             PDPEXT= PDPBAS
  662             PDPIDE= PDPEXT+2
  663             DSCX=   PDPBAS&6000+1
  664                     >
  665       3000  DEVCHK= DATA1-200
  666       3100  KSFPRA= DATA1-100
  667       3200  DEVTBL= DATA1
  668       3240  DEVTBE= DEVTBL+NULINE+NULINE+2
  669       3256  JOBTBL= DEVTBE+16
  670       3303  CLKTBL= JOBTBL+JOBMAX+1
  671       3330  TTYTBL= CLKTBL+JOBMAX+1
  672       3355  PRGTBL= TTYTBL+JOBMAX+1
  673       3451  DSUTBL= PRGTBL+JOBMAX+JOBMAX+JOBMAX
  674             
  675       4201  AUTOST= 4201    /SYSTEM RESTART ADDRESS IN INIT
  676             
  677             ///     END OF PARAMETERS & COMMON DATA

      /TSS/8 CONFIGURATION FOR UWM                                       Page 16


  678               679             /SI - UWM VERSION 23
  680             /
  681             /COPYRIGHT 1971                 DIGITAL EQUIPMENT CORPORATION
  682             /                               MAYNARD, MASSACHUSETTS
  683             /
  684             /EXTENSIVELY MODIFIED AND CORRECTED BY:
  685             /       RICHARD BARTLEIN, 1974
  686             /       UNIVERSITY OF WISCONSIN, MILWAUKEE
  687             /
  688       0000          *0
  689 00000 7300          CLA CLL
  690 00001 6201  C6201,  CDF             /CHANGE TO FIELD ZERO
  691 00002 5403          JMP I .+1
  692 00003 0200  SI1,    COM
  693       4404  SKIP=   JMS I .
  694 00004 1671          SKIPS
  695 00005 0112  SOURCA, SOURCE
  696             
  697       0010          *10
  698 00010 0000  IX1,    0       /SI AUTO-INDEX REGISTERS
  699 00011 0000  IX2,    0
  700 00012 0000  IX3,    0
  701 00013 0000  IX4,    0
  702 00014 4000  C4000,  4000
  703 00015 0200  C0200,  200
  704 00016 0010  C0010,  10
  705 00017 0006  C0006,  6
  706             
  707             
  708       0053          *SCHDAT+1
  709             
  710 00053 0000  SIJOB,  0
  711 00054 0000  CHDFA,  0       /TEMP LOC USED BY MANY ROUTINES
  712       6221  CHDF=   6221
  713 00055 0000  COMDB0, 0       /ADDRESS OF COMMAND DDB
  714 00056 0000  COMRDB, 0       /RESPONSE DDB ADDRESS
  715 00057 6205  COMBFA, COMBUF-1
  716 00060 0000  COMTBE, 0       /COMMAND TABLE ENTRY ADDRESS
  717 00061 0000  COMFLG, 0       /COMMAND CONTROL FLAGS
  718 00062 0062  IOTPAR, .       /IOT PARAMETER BLOCK
  719 00063 0000  IOTP0,  0
  720 00064 0000  IOTP1,  0
  721 00065 0000  IOTP2,  0
  722 00066 0000  IOTP3,  0
  723 00067 0000  IOTP4,  0
  724 00070 0000  IOTP5,  0
  725 00071 0000  IOTP6,  0
  726 00072 0000  IOTP7,  0
  727             
  728             /***** CHAR & NUMHO MUST REMAIN ADJACENT FOR 'ASCOUT' *****
  729 00073 0000  CHAR,   0       /CURRENT SCAN CHARACTER
  730 00074 0000  NUMHO,  0       /HIGH ORDER FOR NUMBIN
  731 00075 0000          0
  732 00076 0000          0
  733             
  734       4477  ACCTIN= JMS I .

      /TSS/8 CONFIGURATION FOR UWM                                       Page 17


  735 00077 2747          ACC0
  736       4500  ASCOUT= JMS I .
  737 00100 2145          ASCOU0  /ASCII OUTPUT
  738       4501  ASCSIX= JMS I .
  739 00101 2412          ASCSI0  /ASCII TO SIXBIT
  740       4502  ASSCOR= JMS I .
  741 00102 2547          ASSCO0
  742       4503  BUFDEL= JMS I .
  743 00103 2302          BUFDE0  /BUFFER DELETE
  744       5504  CALFIP= JMP I .
  745 00104 1113          CALFI0  /FIP OVERLAY
  746       4505  CHKACT= JMS I .
  747 00105 3717          CHKAC0  /CHECK TYPE OF USER
  748       4506  CLRPRV= JMS I .
  749 00106 0765          CLRPV0  /CLEAR JOB'S PRIVILEGE BIT
  750       4507  COMGET= JMS I .
  751 00107 1707          COMGE0  /GET COMMAND STRING CHARACTER
  752       5510  COMWAT= JMP I .
  753 00110 0241          COMWT0  /COMMAND WAIT
  754       4511  CORES=  JMS I .
  755 00111 1771          CORSER
  756       4512  DECRCT= JMS I .
  757 00112 2400          DECRC0  /DECREMENT COMCNT
  758       4513  ENDTST= JMS I .
  759 00113 2443          ENDTS0  /TEST FOR END OF COMMAND
  760       5514  EXIT=   JMP I .
  761 00114 0242  EXITA,  COMEXT
  762       4515  GETFBL= JMS I .
  763 00115 1756          GETFB0  /GET FREE BLOCK
  764       4516  GETTBA= JMS I .
  765 00116 2200          GETTB0  /GET JOB TABLE ADDRESS
  766       4517  GETWRD= JMS I .
  767 00117 2534          GETWR0  /GET STATUS WORD
  768       4520  NUMBIN= JMS I .
  769 00120 2012          NUMBI0  /NUMBER CONVERT
  770       4521  OCTASC= JMS I .
  771 00121 2506          OCTAS0  /OCTAL TO ASCII
  772       4522  REBOOT= JMS I .
  773 00122 3360          RBOOT   /INITIATE AUTOMATIC RESTART
  774       4523  RELCOR= JMS I .
  775 00123 2563          RELCO0
  776       4524  RESDDB= JMS I .
  777 00124 2220          RESPDB  /GET RESPONSE DDB
  778       4525  RETBKS= JMS I .
  779 00125 2501          RETBK0  /RETURN BLOCKS
  780       4526  RETDBL= JMS I .
  781 00126 2471          RETDB0  /RETURN BLOCK
  782       4527  RETPAR= JMS I .
  783 00127 2643          RETPA0  /RETURN PARAMETERS
  784       4530  SETJOB= JMS I .
  785 00130 6072          SETJB0  /SET UP 'JOBDAT'
  786       4531  SIERR=  JMS I .
  787 00131 7063          SYSER0
  788       4532  TEXTS=  JMS I .
  789 00132 1605          CTEXT   /ASCII READ
  790             
  791 00133 1210  COMERA, COMERR  /ERROR RETURN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 18


  792 00134 6121  COMES1, COMLGM
  793 00135 1224  COMEXA, COMRET  /OK RETURN
  794 00136 1224  COMEXP, COMRET  /FOR RESETTING COMEXA
  795 00137 2676  COMSET, RESTBP
  796 00140 7700  C7700,  7700
  797 00141 4541  DEVTND, -DEVTBE+1       /ADDRESS OF LAST KEYBOARD ENTRY
  798 00142 7213  IOTEND, FIPEND
  799 00143 3620  LNGIOT, FOPEN1  /LONG IOT
  800 00144 7777  P7777,  -1
  801 00145 3424  SHTIOT, ACSET   /SHORT IOT
  802 00146 0005  SWBASE, SWDEX   /START OF SWAPPING TRACKS
  803             
  804             /***** CRITICAL!!! THESE TWO WORDS MUST NOT BE MOVED!!! *****
  805                     IFNZRO 147-.&4000       <GLITCH>
  806       0147          *147    /MUST BE AT 0147 FOR BOOTSTRAP!!!
  807 00147 0150          150     / THIS OVERLAYS 7750 & 7751 DURING
  808 00150 0150          150     / BOOTSTRAP READ!!
  809             
  810 00151 3330  TTYTBA, TTYTBL  /START OF TTY TABLE
  811 00152 0000  CORJOB, 0       /JOB-WORD FOR SPECIAL CORE-ASSIGNS
  812 00153 7637  C7637,  7637    /MASK FOR CLEANING THE PROTECTION-CODE
  813 00154 0000  ERRFLG, 0       /NON-ZERO IF A COMMAND ENDED IN ERROR
  814 00155 6165  ILLMSG, ILLREQ  /"ILLEGAL REQUEST" MESSAGE
  815             
  816             /COMMAND CONTROL FLAGS
  817             
  818       4000  NOLOG=  4000    /LOGIN NOT REQUIRED
  819       2000  USERM=  2000    /REFERENCES USER MEMORY
  820       1000  USAVE=  1000    /SAVE USER REGISTERS
  821       0400  UREST=  400     /RESTORE USER REGISTERS
  822       0200  PRBUF=  200     /PRINT BUFFER
  823       0100  PRQM=   100     /PRINT ?
  824       0020  PRCRLF= 20      /PRINT CRLF
  825       0010  NOMESS= 10      /NO MESSAGE (NEVER USED)
  826             /
  827             /BITS 9-11 CONTAIN # FREE BLOCKS REQUIRED

      /TSS/8 CONFIGURATION FOR UWM                                       Page 19


  828                     PAGE
  829             
  830             /SI IS ENTERED HERE FOR EACH COMMAND PROCESSED. WE SCAN
  831             /ALL THE INPUT DDB'S FOR COMMANDS TO PROCESS. WHEN
  832             /WE CAN FIND NOTHING ELSE TO DO, WE ZERO 'COMCNT' IN
  833             /FIELD 0 (ALTHOUGH THIS SHOULDN'T BE NECESSARY) & EXIT.
  834 00200 3154  COM,    DCA ERRFLG      /CLEAR THE ERROR-FLAG
  835 00201 3056          DCA COMRDB
  836 00202 3061          DCA COMFLG
  837 00203 3152          DCA CORJOB
  838 00204 1560          TAD I JOB
  839 00205 0036          AND C0037
  840 00206 3053          DCA SIJOB
  841 00207 1053          TAD SIJOB
  842 00210 7640          SZA CLA         /DO WE ALREADY HAVE A JOB #?
  843 00211 5343          JMP COMFIP      /YES - WE HAVE AN ERROR OR ARE RETURNING FROM FIP
  844 00212 1420          TAD I COMPTR
  845 00213 3010          DCA IX1
  846 00214 1010          TAD IX1
  847 00215 3063          DCA IOTP0
  848 00216 6211          DATFLD
  849 00217 1141  COM1,   TAD DEVTND
  850 00220 1010          TAD IX1
  851 00221 7640          SZA CLA         /END OF TABLE?
  852 00222 5226          JMP COM2        /NO
  853 00223 7240          STA
  854 00224 1163          TAD DEVTBA      /YES. RESET TO BEGIN OF TABLE
  855 00225 3010          DCA IX1
  856 00226 1410  COM2,   TAD I IX1       /GET TABLE ENTRY
  857 00227 7440          SZA
  858 00230 5247          JMP COM3
  859 00231 1010  COM4,   TAD IX1         /SCANNED ENTIRE TABLE?
  860 00232 7041          CIA
  861 00233 1063          TAD IOTP0
  862 00234 7640          SZA CLA
  863 00235 5217          JMP COM1        /NO
  864 00236 6201          CDF
  865 00237 3452          DCA I COMCNT
  866 00240 7410          SKP
  867 00241 4537  COMWT0, JMS I COMSET    /RESET BUFFER POINTER
  868 00242 4523  COMEXT, RELCOR          /RELEASE COR
  869 00243 6201          CDF
  870 00244 3423          DCA I COMDSP
  871 00245 6202          CIF
  872 00246 5577          WAIT            /RESCHEDULE
  873             
  874 00247 3055  COM3,   DCA COMDB0      /SAVE THE INPUT-DDB LOC.
  875 00250 1455          TAD I COMDB0    /GET THE DDB STATUS-BITS
  876 00251 0040          AND COMDSI
  877 00252 7650          SNA CLA         /IS HE IN COMMAND MODE?
  878 00253 5231          JMP COM4        /NO
  879 00254 1055          TAD COMDB0
  880 00255 3011          DCA IX2
  881 00256 1411          TAD I IX2       /YES - GET OWNER'S JOB NUMBER
  882 00257 0036          AND C0037
  883 00260 3053          DCA SIJOB
  884 00261 6201          CDF

      /TSS/8 CONFIGURATION FOR UWM                                       Page 20


  885 00262 1010          TAD IX1
  886 00263 3420          DCA I COMPTR    / & SAVE THE COMMAND POINTER
  887 00264 6211          DATFLD
  888 00265 1053          TAD SIJOB
  889 00266 7450          SNA             /IS HE LOGGED IN?
  890 00267 5273          JMP COM31       /NO
  891 00270 1044          TAD JOBTBA      /YES - SET UP HIS JOB-DATA POINTER
  892 00271 3054          DCA CHDFA
  893 00272 1454          TAD I CHDFA
  894 00273 3561  COM31,  DCA I JOBDAT
  895 00274 1561          TAD I JOBDAT
  896 00275 6221          CHDF
  897 00276 7650          SNA CLA         /IS HE LOGGED IN?
  898 00277 5305          JMP .+6         /NO
  899 00300 4517          GETWRD          /YES - CHECK THE 'HLT' BIT
  900 00301 0000           JOBSTS
  901 00302 0156          AND COMSTP
  902 00303 7640          SZA CLA         /IS THIS A 'HLT' CALL?
  903 00304 5741          JMP I COMHLT    /YES
  904 00305 6211          DATFLD
  905 00306 1455          TAD I COMDB0    /NO - GET THE DDB STATUS-BITS
  906 00307 0337          AND COMBIT
  907 00310 7650          SNA CLA         /IS THERE A COMMAND OR A CTRL/C WAITING?
  908 00311 5231          JMP COM4        /NO
  909 00312 1055          TAD COMDB0
  910 00313 1017          TAD COMOUP
  911 00314 3060          DCA COMTBE      /YES - SET THE POINTER TO THE EMPTY-POINTERS
  912 00315 1460          TAD I COMTBE
  913 00316 6201          CDF
  914 00317 3421          DCA I SIBUF     /SAVE THE POINTER TO THE COMMAND STRING
  915 00320 2060          ISZ COMTBE
  916 00321 6211          DATFLD
  917 00322 1460          TAD I COMTBE
  918 00323 6201          CDF
  919 00324 3422          DCA I SICNT     / & ITS POSITION WITHIN THE BUFFER
  920 00325 1053          TAD SIJOB
  921 00326 1560          TAD I JOB
  922 00327 3560          DCA I JOB       /THEN SET UP 'JOB'
  923 00330 6211          DATFLD
  924 00331 1455          TAD I COMDB0
  925 00332 6221          CHDF
  926 00333 0037          AND COMSIC
  927 00334 7650          SNA CLA         /IS A COMMAND WAITING?
  928 00335 5740          JMP I COMCTC    /NO - MUST HAVE BEEN CTRL/C
  929 00336 5742          JMP I COM41A    /YES - GO SCAN THE ENTERED COMMAND
  930             
  931 00337 0140  COMBIT, SICOM+CTRLC
  932 00340 3742  COMCTC, SICTLC
  933 00341 3744  COMHLT, PRGHLT
  934                     IFNZRO JSHLT-400        <GLITCH>
  935       0156  COMSTP= C0400   /JSHLT
  936                     IFNZRO DSI-1000 <GLITCH>
  937       0040  COMDSI= C1000   /DSI
  938                     IFNZRO SICOM-100        <GLITCH>
  939       0037  COMSIC= C0100   /SICOM
  940       0072  COMFND= IOTP7   /COUNT OF SEARCH MATCHES
  941       0070  COMLNK= IOTP5

      /TSS/8 CONFIGURATION FOR UWM                                       Page 21


  942       0071  COMNXT= IOTP6
  943                     IFNZRO DDBOUP-6 <GLITCH>
  944       0017  COMOUP= C0006   /DDBOUP
  945 00342 0400  COM41A, COM41
  946       0072  RUBCNT= IOTP7

      /TSS/8 CONFIGURATION FOR UWM                                       Page 22


  947 00343 1423  COMFIP, TAD I COMDSP
  948 00344 7450          SNA             /RETURNING FROM SI CALL?
  949 00345 5375          JMP COMFI2      /NO - MUST BE ERROR
  950 00346 3063          DCA IOTP0       /YES - SAVE DISPATCH ADDRESS
  951 00347 3423          DCA I COMDSP
  952 00350 1424          TAD I SIFLG     /RESTORE CONTROL FLAGS
  953 00351 3061          DCA COMFLG
  954 00352 1425          TAD I SICHAR
  955 00353 3073          DCA CHAR
  956 00354 1420          TAD I COMPTR
  957 00355 3055          DCA COMDB0
  958 00356 6211          DATFLD
  959 00357 1455          TAD I COMDB0
  960 00360 3055          DCA COMDB0
  961 00361 1561          TAD I JOBDAT
  962 00362 7450          SNA             /JOB LOGGED-IN?
  963 00363 4522          REBOOT          /NO - ERROR *****
  964 00364 7001          IAC
  965 00365 3054          DCA CHDFA
  966 00366 6211          DATFLD
  967 00367 1454          TAD I CHDFA
  968 00370 0035          AND C0007
  969 00371 7650          SNA CLA         /WAS THERE A SYSTEM ERROR?
  970 00372 2063          ISZ IOTP0       /NO - SET TO NORMAL ADDRESS
  971 00373 6221          CHDF
  972 00374 5463          JMP I IOTP0     /NOW DISPATCH
  973 00375 6221  COMFI2, CHDF
  974 00376 5777          JMP I .+1
  975 00377 7023          SYSERR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 23


  976                     PAGE
  977             
  978 00400 3072  COM41,  DCA RUBCNT
  979 00401 7410          SKP
  980 00402 2072  COM32,  ISZ RUBCNT
  981 00403 4760          JMS I COM40A    /GET THE LAST CHARACTER TYPED
  982 00404 1375          TAD MRUB
  983 00405 1073          TAD CHAR
  984 00406 7650          SNA CLA         /RUBOUT?
  985 00407 5202          JMP COM32       /YES
  986 00410 1072          TAD RUBCNT      /NO. ANY RUBOUTS?
  987 00411 7450          SNA
  988 00412 5227          JMP COM39       /NO
  989 00413 7041          CIA             /YES - SAVE (-) THE COUNT
  990 00414 3072          DCA RUBCNT
  991 00415 7410          SKP
  992 00416 4760  COM34,  JMS I COM40A
  993 00417 4512          DECRCT          /DECREMENT COMCNT
  994 00420 7326          CLA CLL CML RTL /BREAK CHARACTER?
  995 00421 4513          ENDTST
  996 00422 4512          DECRCT          /YES. DECREMENT COMCNT
  997 00423 4764          JMS I COMECA    /ECHO CHARACTER
  998 00424 2072          ISZ RUBCNT      /DONE?
  999 00425 5216          JMP COM34       /NO
 1000 00426 5257          JMP COM43       /YES - CHECK FOR COMPLETE COMMAND
 1001             
 1002 00427 1073  COM39,  TAD CHAR
 1003 00430 1374          TAD MLF
 1004 00431 7640          SZA CLA         /IS THE LAST CHAR A <LF>?
 1005 00432 5252          JMP COM42       /NO
 1006 00433 4512          DECRCT          /YES - DECREMENT THE 'BREAK' COUNT
 1007 00434 1053          TAD SIJOB
 1008 00435 7650          SNA CLA         /IS HE LOGGED-IN?
 1009 00436 7346          CLA CLL CMA RTL /NO - FORM <LF>
 1010 00437 1370          TAD COMEQU      /YES - FORM <CR>
 1011 00440 3371          DCA COMEQU+1
 1012 00441 4500          ASCOUT          /THEN TYPE "="
 1013 00442 0570           COMEQU
 1014 00443 7000          NOP
 1015 00444 4766          JMS I COMPB     /NOW PRINT THE CURRENT LINE
 1016 00445 4537          JMS I COMSET    / & RESET THE BUFFER POINTERS
 1017 00446 7326          CLA CLL CML RTL
 1018 00447 4513          ENDTST          /LAST CHARACTER A LINE TERMINATOR?
 1019 00450 5200          JMP COM41       /YES - RESCAN THE LINE
 1020 00451 5257          JMP COM43       /NO - CHECK FOR COMPLETE COMMAND
 1021 00452 3074  COM42,  DCA CHAR+1      / *** CHAR+1 MUST BE SCRATCH ***
 1022 00453 1055          TAD COMDB0
 1023 00454 4500          ASCOUT          /RESTORE THE LAST CHARACTER
 1024 00455 0073           CHAR
 1025 00456 7000          NOP
 1026 00457 4507  COM43,  COMGET          /GET A CHARACTER
 1027 00460 5265          JMP COM44       /NONE LEFT - JUST EXIT
 1028 00461 7326          CLA CLL CML RTL
 1029 00462 4513          ENDTST          /END-OF-LINE?
 1030 00463 5267          JMP COM45       /YES - PROCESS THE COMMAND
 1031 00464 5257          JMP COM43       /NO - KEEP CHECKING
 1032 00465 4350  COM44,  JMS CLRSI       /COMMAND INCOMPLETE - CLEAR THE FLAG

      /TSS/8 CONFIGURATION FOR UWM                                       Page 24


 1033 00466 5510          COMWAT          / AND WAIT FOR THE REST
 1034             
 1035 00467 4537  COM45,  JMS I COMSET    /RESET THE POINTERS
 1036 00470 3073          DCA CHAR
 1037 00471 1057          TAD COMBFA      /GET COMMAND NAME
 1038 00472 4532          TEXTS
 1039 00473 7041          CIA
 1040 00474 1057          TAD COMBFA
 1041 00475 7650          SNA CLA         /NULL STRING?
 1042 00476 5340          JMP COM60       /YES
 1043 00477 3072          DCA COMFND      /CLEAR 'PARTIAL FIND' COUNTER
 1044 00500 1357          TAD COMTBA
 1045 00501 3070  COM6,   DCA COMLNK
 1046 00502 1470          TAD I COMLNK
 1047 00503 7450          SNA
 1048 00504 5762          JMP I COM9A     /END OF TABLE
 1049 00505 3071          DCA COMNXT
 1050 00506 1070          TAD COMLNK
 1051 00507 1033          TAD C0003
 1052 00510 3011          DCA IX2
 1053 00511 1057          TAD COMBFA
 1054 00512 3012          DCA IX3
 1055 00513 1011  COM5,   TAD IX2
 1056 00514 7040          CMA
 1057 00515 1071          TAD COMNXT
 1058 00516 7650          SNA CLA         /HAVE WE REACHED THE END OF THIS ENTRY?
 1059 00517 5334          JMP COM99       /YES - WE MAY HAVE AN EXACT MATCH
 1060 00520 1412          TAD I IX3       /NO - GET THE NEXT COMMAND CHARACTER
 1061 00521 7450          SNA             /END OF COMMAND?
 1062 00522 5327          JMP COM8        /YES - WE HAVE A PARTIAL MATCH
 1063 00523 1411          TAD I IX2
 1064 00524 7650          SNA CLA
 1065 00525 5313          JMP COM5
 1066 00526 5332          JMP COM7
 1067 00527 2072  COM8,   ISZ COMFND      /PARTIAL MATCH
 1068 00530 1070          TAD COMLNK
 1069 00531 3060          DCA COMTBE
 1070 00532 1071  COM7,   TAD COMNXT
 1071 00533 5301          JMP COM6
 1072             
 1073 00534 1412  COM99,  TAD I IX3
 1074 00535 7650          SNA CLA         /IS THERE ANY MORE TO THE COMMAND?
 1075 00536 5763          JMP I COM91A    /NO - WE HAVE AN EXACT MATCH
 1076 00537 5332          JMP COM7        /YES - THEN WE HAVE NO MATCH AT ALL
 1077             
 1078             /GETS HERE IF COMMAND IS NULL STRING.
 1079 00540 7344  COM60,  CLA CLL CMA RAL
 1080 00541 4513          ENDTST          /END OF COMMAND REACHED?
 1081 00542 5761          JMP I COM64A    /YES - JUST EXIT
 1082 00543 3061  COM12,  DCA COMFLG      /NO - CLEAR ANY OLD COMMAND FLAGS
 1083 00544 1053          TAD SIJOB
 1084 00545 7650          SNA CLA         /NO - IS HE LOGGED IN?
 1085 00546 1134          TAD COMES1      /NO - TYPE "LOGIN PLEASE"
 1086 00547 5533          JMP I COMERA    /YES - JUST ECHO THE COMMAND
 1087             
 1088             /ROUTINE TO CLEAR THE 'SICOM' IN THIS JOB'S DDB.
 1089             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 25


 1090 00550 0000  CLRSI,  0
 1091 00551 6211          DATFLD
 1092 00552 1455          TAD I COMDB0    /GET THE CONTROL-WORD
 1093 00553 0365          AND COMMSI      / & CLEAR THE BIT
 1094 00554 3455          DCA I COMDB0
 1095 00555 6221          CHDF
 1096 00556 5750          JMP I CLRSI     /THEN RETURN
 1097             
 1098 00557 6222  COMTBA, COMTBL
 1099 00560 0600  COM40A, COM40
 1100 00561 1223  COM64A, COM64
 1101 00562 1002  COM9A,  COM9
 1102 00563 1010  COM91A, COM91
 1103 00564 0665  COMECA, COMECO
 1104 00565 7637  COMMSI, -SICOM-CTRLC-1
 1105 00566 1324  COMPB,  COMPBF
 1106 00567 7577  COMPRV, -JSPRIV-1
 1107 00570 0215  COMEQU, 215;212;"=;0
      00571 0212
      00572 0275
      00573 0000
 1108 00574 7566  MLF,    -212
 1109 00575 7401  MRUB,   -377

      /TSS/8 CONFIGURATION FOR UWM                                       Page 26


 1110                     PAGE
 1111             
 1112       0017  COMEMP= C0006
 1113       0034  COMFPT= C0004   /DDBINP
 1114             
 1115             /ROUTINE TO FETCH THE LAST CHARACTER IN THE INPUT BUFFER.
 1116 00600 0000  COM40,  0
 1117 00601 1055          TAD COMDB0
 1118 00602 7450          SNA             /HAVE WE JUST LOGGED OUT?
 1119 00603 5253          JMP COM38       /YES
 1120 00604 6212          CIF+10
 1121 00605 4573          FETCH
 1122 00606 0012           12
 1123 00607 5213          JMP COM35       /BLOCK IS EMPTY
 1124 00610 5253          JMP COM38       /BUFFER IS EMPTY
 1125 00611 3073          DCA CHAR
 1126 00612 5600          JMP I COM40
 1127             
 1128             /DELETE THE LAST BLOCK FROM THE INPUT BUFFER;
 1129             /THEN GO TRY THE FETCH AGAIN
 1130 00613 1055  COM35,  TAD COMDB0
 1131 00614 1034          TAD COMFPT
 1132 00615 3063          DCA IOTP0       /FILL POINTER ADDRESS
 1133 00616 1055          TAD COMDB0
 1134 00617 1017          TAD COMEMP
 1135 00620 3066          DCA IOTP3       /EMPTY POINTER ADDRESS
 1136 00621 6211          DATFLD
 1137 00622 1463          TAD I IOTP0
 1138 00623 7041          CIA
 1139 00624 3065          DCA IOTP2
 1140 00625 1466          TAD I IOTP3
 1141 00626 1065          TAD IOTP2
 1142 00627 7650          SNA CLA         /LAST BLOCK?
 1143 00630 5253          JMP COM38       /YES
 1144 00631 1466  COM36,  TAD I IOTP3     /NO
 1145 00632 3066          DCA IOTP3
 1146 00633 1466          TAD I IOTP3
 1147 00634 1065          TAD IOTP2
 1148 00635 7640          SZA CLA         /END OF CHAIN
 1149 00636 5231          JMP COM36
 1150 00637 3466          DCA I IOTP3     /YES
 1151 00640 1066          TAD IOTP3
 1152 00641 3463          DCA I IOTP0     /SET FILL POINTER
 1153 00642 2063          ISZ IOTP0
 1154 00643 7240          STA
 1155 00644 3463          DCA I IOTP0
 1156 00645 1065          TAD IOTP2       /RETURN LAST BLOCK
 1157 00646 7041          CIA
 1158 00647 6221          CHDF
 1159 00650 4526          RETDBL
 1160 00651 7200          CLA
 1161 00652 5201          JMP COM40+1
 1162             
 1163             /NO CHARACTERS LEFT - JUST EXIT.
 1164 00653 3073  COM38,  DCA CHAR        /INDICATE END-OF-BUFFER
 1165 00654 6201          CDF
 1166 00655 1072          TAD RUBCNT      /RUBOUTS?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 27


 1167 00656 7500          SMA
 1168 00657 7041          CIA
 1169 00660 1452          TAD I COMCNT    /REDUCE THE BREAK-COUNT
 1170 00661 3452          DCA I COMCNT
 1171 00662 6221          CHDF
 1172 00663 5664          JMP I .+1       /THEN GO TYPE "."
 1173 00664 1223          COM64
 1174             
 1175             /ROUTINE TO ECHO THE LAST CHARACTER ON USER'S TTY.
 1176 00665 0000  COMECO, 0
 1177 00666 1073          TAD CHAR
 1178 00667 1303          TAD ECOMCR
 1179 00670 7650          SNA CLA
 1180 00671 5277          JMP COMEC1
 1181 00672 3074          DCA CHAR+1      /SET ZERO TO TERMINATE STRING
 1182 00673 4500          ASCOUT
 1183 00674 0073           CHAR
 1184 00675 7000          NOP
 1185 00676 5665          JMP I COMECO
 1186 00677 4500  COMEC1, ASCOUT          /ECHO A LINE-FEED IN PLACE OF <CR>
 1187 00700 6163           LINE
 1188 00701 7000          NOP
 1189 00702 5665          JMP I COMECO
 1190             
 1191 00703 7563  ECOMCR, -215

      /TSS/8 CONFIGURATION FOR UWM                                       Page 28


 1192             /ROUTINE TO SEE IF JOB IS RUNNING WHEN COMMAND REQUIRING FIP IS ISSUED.
 1193             /IF SO, WE CAN'T HONOR COMMAND
 1194             /THE MESSAGE "TYPE ^BS FIRST" IS GIVEN
 1195             
 1196             /CALL   TAD IOT ENTRY FROM COMMAND TABLE
 1197             /       JMS FIPCHK
 1198             /       RETURN IF OK TO PROCEED  [OTHERWISE RETURN IS TO COMERR]
 1199             
 1200 00704 0000  FIPCHK, 0
 1201 00705 3063          DCA IOTP0       /SAVE THE IOT
 1202 00706 1063          TAD IOTP0
 1203 00707 1343          TAD FIPCDR
 1204 00710 7440          SZA             /IS IT AN 'EXAM'?
 1205 00711 1344          TAD FIPCDW
 1206 00712 7640          SZA CLA         /OR A 'DEPOSIT'? (WE CAN DO THOSE)
 1207 00713 1053          TAD SIJOB       /NO - GET THE JOB NUMBER
 1208 00714 7650          SNA CLA         /IS HE LOGGED-IN?
 1209 00715 5704          JMP I FIPCHK    /NO - THEN HE CAN'T BE ACTIVE
 1210 00716 4517          GETWRD          /YES - IS HIS PROGRAM RUNNING?
 1211 00717 0000           JOBSTS         / IF SO HIS RUN BIT IS ON
 1212 00720 7710          SPA CLA
 1213 00721 5334          JMP FIPCH2      /HE'S TURNED ON SO DON'T HONOR COMMAND
 1214 00722 4517          GETWRD          /IS HE WAITING FOR FILE 3?
 1215 00723 0003           JOBWMK
 1216 00724 0015          AND C0200
 1217 00725 7650          SNA CLA
 1218 00726 5704          JMP I FIPCHK    /NO; OK
 1219 00727 4517          GETWRD          /YES; IS HE OUT OF THE WAIT?
 1220 00730 0001           JOBSTS+1
 1221 00731 0015          AND C0200
 1222 00732 7640          SZA CLA
 1223 00733 5704          JMP I FIPCHK    /YES; SO LET HIM PROCEED
 1224                     
 1225 00734 1061  FIPCH2, TAD COMFLG
 1226 00735 0342          AND FIMRST      /DON'T RESTORE UNSAVED REGISTERS
 1227 00736 3061          DCA COMFLG
 1228 00737 1341          TAD FIPTCB
 1229 00740 5533          JMP I COMERA    /"TYPE ^BS FIRST"
 1230             
 1231 00741 7446  FIPTCB, TYCRLB
 1232 00742 7377  FIMRST, -UREST-1
 1233 00743 1175  FIPCDR, -DMAR
 1234 00744 7776  FIPCDW, DMAR-DMAW

      /TSS/8 CONFIGURATION FOR UWM                                       Page 29


 1235             /
 1236             /THIS HANDLES THE 'PROTECT' COMMAND. WE ALTER
 1237             /THE PROTECTION CODE OF A FILE; THIS ALSO
 1238             /ALTERS THE FILE EXTENSION.
 1239 00745 4531          SIERR
 1240 00746 5542          JMP I IOTEND
 1241 00747 4520  PROTEC, NUMBIN          /FILE #
 1242 00750 7511           -"7
 1243 00751 5533          JMP I COMERA
 1244 00752 0033          AND C0003
 1245 00753 7106          CLL RTL
 1246 00754 7006          RTL
 1247 00755 7004          RAL
 1248 00756 3064          DCA IOTP1
 1249 00757 4520          NUMBIN
 1250 00760 7511           -"7
 1251 00761 5533          JMP I COMERA
 1252 00762 0153          AND C7637
 1253 00763 1064          TAD IOTP1
 1254 00764 5545          JMP I SHTIOT
 1255             /
 1256             /ROUTINE TO CLEAR THE 'PRIVILEGE' BIT FOR THIS JOB
 1257 00765 0000  CLRPV0, 0
 1258 00766 4517          GETWRD          /GET HIS STATUS-WORD
 1259 00767 0000           JOBSTS
 1260 00770 0375          AND CLRPV1      / AND ZAP THE BIT
 1261 00771 6211          DATFLD
 1262 00772 3472          DCA I IOTP7
 1263 00773 6221          CHDF
 1264 00774 5765          JMP I CLRPV0    /THEN RETURN
 1265             
 1266 00775 7577  CLRPV1, -JSPRIV-1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 30


 1267                     PAGE
 1268             
 1269 01000 4200  CSWAP,  FSWP+SI
 1270       7332  CUSERM= CLA CLL CML RTR /AC =2000
 1271 01001 0704  FIPCOM, FIPCHK
 1272             
 1273             /WE FOUND ONE OR MORE PARTIAL MATCHES ON OUR COMMAND.
 1274 01002 7240  COM9,   STA
 1275 01003 1072          TAD COMFND
 1276 01004 7650          SNA CLA         /WAS THERE EXACTLY ONE MATCH?
 1277 01005 5212          JMP COM92       /YES
 1278 01006 1307          TAD AUTOPK      /NO - ASSUME "R" COMMAND
 1279 01007 7410          SKP
 1280             
 1281             /WE FOUND AN EXACT MATCH ON THE COMMAND.
 1282 01010 1070  COM91,  TAD COMLNK
 1283 01011 3060          DCA COMTBE
 1284 01012 2060  COM92,  ISZ COMTBE      /GET COMMAND FLAGS
 1285 01013 1460          TAD I COMTBE
 1286 01014 3061          DCA COMFLG
 1287 01015 1061          TAD COMFLG      /ENOUGH FREE STORE?
 1288 01016 0035          AND C0007
 1289 01017 7041          CIA
 1290 01020 6201          CDF
 1291 01021 1447          TAD I FRECNT
 1292 01022 6221          CHDF
 1293 01023 7710          SPA CLA
 1294 01024 5510          COMWAT          /NO
 1295 01025 7332          CUSERM          /AC=2000
 1296 01026 0061          AND COMFLG      /USER MEMORY REFERENCE?
 1297 01027 7650          SNA CLA
 1298 01030 5236          JMP COM16       /NO
 1299 01031 1053          TAD SIJOB
 1300 01032 1200          TAD CSWAP
 1301 01033 4511          CORES
 1302 01034 7640          SZA CLA         /YES - IS HE BEING SWAPPED?
 1303 01035 5510          COMWAT          /YES - RE-TRY LATER
 1304 01036 2060  COM16,  ISZ COMTBE
 1305 01037 1062          TAD IOTPAR
 1306 01040 3010          DCA IX1
 1307 01041 1041          TAD C7770
 1308 01042 3054          DCA CHDFA
 1309 01043 3410          DCA I IX1
 1310 01044 2054          ISZ CHDFA
 1311 01045 5243          JMP .-2
 1312 01046 1460          TAD I COMTBE    /STORE IOT
 1313 01047 7440          SZA             /NON RESIDENT IOT?
 1314 01050 4601          JMS I  FIPCOM   /YES--IS HE RUNNING A PROGRAM?
 1315 01051 3072          DCA IOTP7       /GETWRD IN FIPCHK MESSES UP IOTP7
 1316 01052 2060          ISZ COMTBE
 1317 01053 1460          TAD I COMTBE
 1318 01054 3060          DCA COMTBE
 1319 01055 1061          TAD COMFLG
 1320 01056 7710          SPA CLA         /LOGIN REQUIRED?
 1321 01057 5460          JMP I COMTBE    /NO. DISPATCH
 1322 01060 1053          TAD SIJOB
 1323 01061 7650          SNA CLA         /NULL JOB?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 31


 1324 01062 5706          JMP I COM12A    /YES - TYPE "LOGIN PLEASE"
 1325 01063 1061          TAD COMFLG      /SAVE REGISTERS?
 1326 01064 0040          AND C1000
 1327 01065 7650          SNA CLA
 1328 01066 5460          JMP I COMTBE    /NO. DISPATCH
 1329 01067 4516          GETTBA
 1330 01070 0011           JOBREG
 1331 01071 3275          DCA COMREG
 1332 01072 6202          CIF
 1333 01073 4567          BLT
 1334 01074 6211           DATFLD
 1335 01075 0000  COMREG,  0
 1336 01076 6201           CDF
 1337 01077 0026           SIREG
 1338 01100 7775           -3
 1339 01101 6211          DATFLD          /PC:=-1
 1340 01102 7240          STA
 1341 01103 3675          DCA I COMREG
 1342 01104 6221          CHDF
 1343 01105 5460          JMP I COMTBE
 1344             
 1345 01106 0543  COM12A, COM12
 1346             
 1347             /DUMMY COMMAND PACKET FOR THE AUTOMATIC "R" COMMAND
 1348 01107 1107  AUTOPK, .
 1349 01110 2002          USERM+2
 1350 01111 6601          OPEN
 1351 01112 4615          AUTOR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 32


 1352             /WE COME HERE TO SET THE PARAMETERS FOR FIP AND START THE
 1353             /DISC ACCESS TO SWAP FIP IN. FIP IS THEN STARTED WHEN
 1354             /THE OVERLAY IS COMPLETE.
 1355             
 1356 01113 7344  CALFI0, STA CLL RAL     /SAVE RETURN ADDRESS
 1357 01114 1060          TAD COMTBE
 1358 01115 6201          CDF
 1359 01116 3423          DCA I COMDSP
 1360 01117 1061          TAD COMFLG      /SAVE FLAGS
 1361 01120 3424          DCA I SIFLG
 1362 01121 1073          TAD CHAR
 1363 01122 3425          DCA I SICHAR
 1364 01123 1352          TAD CALFBA
 1365 01124 3336  LOADUS, DCA CALFI2
 1366 01125 4502          ASSCOR          /ASSIGN CORE
 1367 01126 1355          TAD CALFI4
 1368 01127 1164          TAD DSUTBA
 1369 01130 4515          GETFBL
 1370 01131 5510          COMWAT
 1371 01132 3340          DCA CALFI1
 1372 01133 6202          CIF
 1373 01134 4567          BLT
 1374 01135 6221           CHDF           /SOURCE FIELD
 1375 01136 0000  CALFI2,  0              /SOURCE ADDR
 1376 01137 6211           DATFLD         /DESTINATION FLD
 1377 01140 0000  CALFI1,  0              /DESTINATION ADDR
 1378 01141 7770           -10
 1379 01142 6203          CIF CDF
 1380 01143 2565          ISZ I DSBUSY    /DISC ALREADY BUSY?
 1381 01144 5577          WAIT            /YES - JUST WAIT
 1382 01145 5746          JMP I .+1       /NO - START UP THE TRANSFER
 1383 01146 0576          OVRLA1
 1384 01147 1351  DEPEXA, TAD CALFI5
 1385 01150 5324          JMP LOADUS
 1386 01151 0063  CALFI5, IOTP0
 1387             
 1388 01152 1153  CALFBA, .+1
 1389 01153 6603          DMAR
 1390 01154 0004          FIPDEX
 1391 01155 0010  CALFI4, 10      /MEMORY EXT IN 7-9
 1392 01156 0000          -FIPWC
 1393 01157 7777          -1
 1394 01160 0000          0
 1395 01161 2175          OVERLA
 1396 01162 0000          0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 33


 1397             /'OFFLINE' COMMAND - REDUCES SYSTEM MAXIMUM TO 1 JOB.
 1398             /CAN ONLY BE USED BY SYSTEM MANAGER (ACCOUNT # 1)
 1399             /
 1400             
 1401             /'ONLINE' COMMAND - RESTORES ORIGINAL SYSTEM MAXIMUM.
 1402             /THEREBY RE-ENABLING SYSTEM. CAN ONLY BE DONE BY MANAGER.
 1403             /
 1404 01163 1376  ONLIN,  TAD ON1         /GET ORIGINAL # USERS
 1405 01164 7040  OFFLIN, CMA             /SET MAX # USERS TO 1
 1406 01165 3377          DCA OFF1        / (SHARED BY 'ONLIN')
 1407 01166 4505          CHKACT          /CHECK USER'S ACCOUNT #
 1408 01167 5533          JMP I COMERA    /ORDINARY USER - BAD!!
 1409 01170 5533          JMP I COMERA    /MERE SYSTEMS PERSONNEL
 1410 01171 1377          TAD OFF1        /MANAGER - GET NEW # USERS
 1411 01172 6211          DATFLD
 1412 01173 3775          DCA I OFFJOB    /SET JOBMAX IN FLD 1
 1413 01174 5535          JMP I COMEXA
 1414             
 1415 01175 0151  OFFJOB, F1OFFJ          /POINTER TO 'JOBMAX'
 1416 01176 0023  ON1,    JOBMAX-1        /ORIGINAL # OF USERS (WITH FUDGE)
 1417 01177 0000  OFF1,   0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 34


 1418                     PAGE
 1419             
 1420 01200 0020  COMCRF, PRCRLF
 1421 01201 0010  COMESF, NOMESS
 1422       1200  COMFLE= COMCRF  /FLAG FOR ERROR RETURN
 1423 01202 0100  COMQM,  PRQM
 1424 01203 0400  COMURE, UREST
 1425 01204 0300  COPBQM, PRBUF+PRQM      /MORE FLAGS IF NO ERROR MSG
 1426 01205 0200  COPRBF, PRBUF
 1427 01206 7505  MSEMI,  -";
 1428 01207 7563  MCR,    -215
 1429             
 1430 01210 3257  COMERR, DCA COMESA
 1431 01211 2154          ISZ ERRFLG      /INDICATE WE RETURNED IN ERROR
 1432 01212 1061          TAD COMFLG
 1433 01213 0140          AND C7700
 1434 01214 1200          TAD COMFLE      /SET FLAGS FOR ERROR MESSAGE
 1435 01215 3061          DCA COMFLG
 1436 01216 1257          TAD COMESA
 1437 01217 7640          SZA CLA         /ANY MESSAGE TO PRINT?
 1438 01220 5225          JMP COMRET+1    /YES
 1439 01221 1204          TAD COPBQM      /NO - ECHO THE COMMAND W/ "?"
 1440 01222 1061          TAD COMFLG
 1441 01223 3061  COM64,  DCA COMFLG      /GETS HERE ON 'NULL' COMMAND
 1442             
 1443 01224 3257  COMRET, DCA COMESA
 1444 01225 6221          CHDF
 1445 01226 1061          TAD COMFLG
 1446 01227 0203          AND COMURE
 1447 01230 7650          SNA CLA         /RESTORE REGISTERS?
 1448 01231 5244          JMP COMRE0      /NO
 1449 01232 4516          GETTBA
 1450 01233 0011           JOBREG
 1451 01234 3242          DCA COMRES
 1452 01235 6202          CIF
 1453 01236 4567          BLT             /RESTORE USER'S REGISTERS
 1454 01237 6201           CDF
 1455 01240 0026           SIREG
 1456 01241 6211           DATFLD
 1457 01242 0000  COMRES,  0
 1458 01243 7775           -3
 1459 01244 1061  COMRE0, TAD COMFLG      /MESSAGE?
 1460 01245 0201          AND COMESF
 1461 01246 7640          SZA CLA
 1462 01247 5315          JMP COM10       /NO
 1463 01250 4500          ASCOUT          /YES - TYPE <CR-LF>
 1464 01251 6162           CRLF
 1465 01252 5265          JMP COMRE3
 1466 01253 1257          TAD COMESA
 1467 01254 7650          SNA CLA         /ANY MESSAGE TO PRINT?
 1468 01255 5261          JMP .+4         /NO
 1469 01256 4500          ASCOUT          /OUTPUT MESSAGE
 1470 01257 0000  COMESA,  0
 1471 01260 5265          JMP COMRE3      /WON'T FIT
 1472 01261 1061          TAD COMFLG
 1473 01262 0205          AND COPRBF
 1474 01263 7640          SZA CLA         /ECHO-PRINT THE BUFFER?

      /TSS/8 CONFIGURATION FOR UWM                                       Page 35


 1475 01264 4324          JMS COMPBF      /YES - PRINT THE WHOLE LINE
 1476 01265 7200  COMRE3, CLA
 1477 01266 1154          TAD ERRFLG
 1478 01267 7640          SZA CLA         /DID WE HAVE AN ERROR?
 1479 01270 7326          CLA CLL CML RTL /YES - THEN ZAP THE WHOLE BUFFER
 1480 01271 4513          ENDTST          /IS THIS THE LAST CHARACTER IN THE COMMAND?
 1481 01272 5276          JMP COMRE4      /YES
 1482 01273 4507          COMGET          /NO - GET THE NEXT CHARACTER
 1483 01274 7410          SKP             /NONE THERE
 1484 01275 5265          JMP COMRE3      / OR CHECK AGAIN
 1485 01276 4503  COMRE4, BUFDEL          /DELETE TO CURRENT POINTER
 1486 01277 1061          TAD COMFLG
 1487 01300 0202          AND COMQM
 1488 01301 7650          SNA CLA         /PRINT "?" ?
 1489 01302 5306          JMP COM13       /NO
 1490 01303 4500          ASCOUT
 1491 01304 5773           QEST
 1492 01305 5315          JMP COM10
 1493 01306 1061  COM13,  TAD COMFLG
 1494 01307 0200          AND COMCRF
 1495 01310 7650          SNA CLA         /PRINT <CR-LF>?
 1496 01311 5315          JMP COM10       /NO
 1497 01312 4500          ASCOUT
 1498 01313 6162           CRLF
 1499 01314 7000          NOP
 1500 01315 1073  COM10,  TAD CHAR
 1501 01316 1206          TAD MSEMI
 1502 01317 7650          SNA CLA         /LAST CHAR A SEMI?
 1503 01320 5722          JMP I .+2       /YES
 1504 01321 5723          JMP I .+2       /NO
 1505 01322 1456          COM26
 1506 01323 1400          COM20
 1507             
 1508             /ROUTINE TO PRINT THE CURRENT COMMAND BUFFER.
 1509             
 1510 01324 0000  COMPBF, 0
 1511 01325 3242          DCA COMRES      /CLEAR THE 'FULL' FLAG
 1512 01326 3074          DCA CHAR+1      / *** CHAR+1 MUST BE SCRATCH ***
 1513 01327 4537          JMS I COMSET    /RE-SET THE BUFFER POINTERS
 1514 01330 4507  COMPB1, COMGET          /GET A CHARACTER
 1515 01331 5724          JMP I COMPBF    /NONE - RETURN
 1516 01332 1207          TAD MCR
 1517 01333 7650          SNA CLA         /IS IT <CR>?
 1518 01334 5724          JMP I COMPBF    /YES - RETURN
 1519 01335 1242          TAD COMRES
 1520 01336 7640          SZA CLA         /HAS 'ASCOUT' FAILED?
 1521 01337 5343          JMP .+4         /YES - SAVE TIME LOOKING FOR TERMINATOR
 1522 01340 4500          ASCOUT          /NO - TYPE IT
 1523 01341 0073           CHAR
 1524 01342 2242          ISZ COMRES      /WON'T FIT - SET 'FULL' FLAG
 1525 01343 7326          CLA CLL CML RTL
 1526 01344 4513          ENDTST          /IS IT A LINE TERMINATOR?
 1527 01345 5724          JMP I COMPBF    /YES - RETURN
 1528 01346 5330          JMP COMPB1      /NO - GET NEXT CHARACTER
 1529             
 1530 01347 0323  LOGE1,  "S;"Y;"S;"T;"E;"M;" ;"F;"U;"L;"L;";
      01350 0331

      /TSS/8 CONFIGURATION FOR UWM                                       Page 36


      01351 0323
      01352 0324
      01353 0305
      01354 0315
      01355 0240
      01356 0306
      01357 0325
      01360 0314
      01361 0314
      01362 0273
 1531 01363 0240          " ;"T;"R;"Y;" ;"L;"A;"T;"E;"R;".;0
      01364 0324
      01365 0322
      01366 0331
      01367 0240
      01370 0314
      01371 0301
      01372 0324
      01373 0305
      01374 0322
      01375 0256
      01376 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 37


 1532                     PAGE
 1533             
 1534             /WE GET HERE WHEN THE LAST CHARACTER OF A COMMAND HAS BEEN REACHED.
 1535             
 1536 01400 1073  COM20,  TAD CHAR
 1537 01401 1271          TAD COMCLN
 1538 01402 7640          SZA CLA         /LAST CHAR A COLON?
 1539 01403 5216          JMP COM22       /NO
 1540 01404 1053          TAD SIJOB
 1541 01405 7640          SZA CLA         /USER LOGGED IN?
 1542 01406 4277          JMS JOBATV      /YES - IS A PROGRAM RUNNING?
 1543 01407 5263          JMP COM28       /NO - THEN COLON ISN'T LEGAL
 1544 01410 6211          DATFLD          /YES - SET 'JSDEL' TO INDICATE
 1545 01411 2072          ISZ IOTP7       / A DELIMITER WAS FOUND
 1546 01412 1472          TAD I IOTP7
 1547 01413 0275          AND COMKEY
 1548 01414 1037          TAD COMKEF
 1549 01415 3472          DCA I IOTP7
 1550 01416 6221  COM22,  CHDF
 1551 01417 1055          TAD COMDB0
 1552 01420 7650          SNA CLA         /IS THERE AN INPUT DDB?
 1553 01421 5255          JMP COM25       /NOPE - JUST TYPE "."
 1554 01422 1053          TAD SIJOB
 1555 01423 7650          SNA CLA         /IS HE LOGGED IN?
 1556 01424 5235          JMP COM23       /NO - DELETE THE DDB IF EMPTY
 1557 01425 4277          JMS JOBATV      /IS A PROGRAM RUNNING?
 1558 01426 5251          JMP COM24       /NO - JUST TYPE "."
 1559 01427 6211          DATFLD          /YES - CLEAR 'DSI'
 1560 01430 1455          TAD I COMDB0
 1561 01431 0276          AND COMSIF
 1562 01432 3455          DCA I COMDB0
 1563 01433 4512          DECRCT          /DECREMENT THE COMMAND COUNT
 1564 01434 5514          EXIT            /ALL DONE - JUST EXIT
 1565 01435 1073  COM23,  TAD CHAR
 1566 01436 7640          SZA CLA         /LAST CHARACTER NULL?
 1567 01437 5256          JMP COM26       /NO
 1568 01440 6201          CDF             /YES - END-OF-BUFFER REACHED
 1569 01441 1420          TAD I COMPTR    /GET THE DEVTBL POINTER
 1570 01442 3054          DCA CHDFA
 1571 01443 6211          DATFLD
 1572 01444 3454          DCA I CHDFA     /ZERO THE DEVTBL ENTRY
 1573 01445 6221          CHDF
 1574 01446 1055          TAD COMDB0
 1575 01447 4526          RETDBL          /THEN RELEASE THE DDB
 1576 01450 5255          JMP COM25       /NO STATUS-BIT LEFT TO CLEAR
 1577             
 1578 01451 1073  COM24,  TAD CHAR
 1579 01452 7640          SZA CLA         /WAS THE END OF THE BUFFER REACHED?
 1580 01453 5256          JMP COM26       /NO
 1581 01454 4670          JMS I CLRSIA    /YES - CLEAR 'SICOM' BIT
 1582 01455 4512  COM25,  DECRCT          / AND DECREMENT THE COMMAND COUNT
 1583 01456 7200  COM26,  CLA
 1584 01457 4500          ASCOUT          /FINALLY, TYPE "."
 1585 01460 5770           PERIOD
 1586 01461 7000          NOP
 1587 01462 5514          EXIT            / AND EXIT
 1588             

      /TSS/8 CONFIGURATION FOR UWM                                       Page 38


 1589             /HERE WE FUDGE UP SOME FLAGS SO WE CAN PRINT A REASONABLE
 1590             /ERROR MESSAGE WHEN A COLON IS USED TO END A COMMAND
 1591             /AND THERE IS NO PROGRAM ACTIVE TO READ THE REMAINDER
 1592             /OF THE BUFFER.
 1593 01463 1267  COM28,  TAD CLNFLG
 1594 01464 3061          DCA COMFLG      /SET SPECIAL FLAGS FOR ERROR MESSAGE
 1595 01465 1272          TAD COMCMS
 1596 01466 5533          JMP I COMERA    /THEN TAKE ERROR EXIT
 1597             
 1598 01467 0320  CLNFLG, PRBUF+PRCRLF+PRQM
 1599 01470 0550  CLRSIA, CLRSI
 1600 01471 7506  COMCLN, -":
 1601 01472 1473  COMCMS, .+1;":;0
      01473 0272
      01474 0000
 1602 01475 7677  COMKEY, -JSDEL-1
 1603                     IFNZRO JSDEL-100        <GLITCH>
 1604       0037  COMKEF= C0100   /JSDEL
 1605 01476 6637  COMSIF, -DSI-SICOM-CTRLC-1
 1606             
 1607             /ROUTINE TO SEE IF THE CURRENT JOB IS ACTIVE AND
 1608             /SKIP IF IT IS.
 1609             
 1610 01477 0000  JOBATV, 0
 1611 01500 4517          GETWRD          /GET THE RUN-BIT
 1612 01501 0000           JOBSTS
 1613 01502 7710          SPA CLA         /IS IT SET?
 1614 01503 2277          ISZ JOBATV      /YES - SKIP NEXT INSTRUCTION
 1615 01504 5677          JMP I JOBATV

      /TSS/8 CONFIGURATION FOR UWM                                       Page 39


 1616             /
 1617             /END-CODE FOR 'ASSIGN'.
 1618 01505 4500  ASSIG9, ASCOUT          /TELL USER WHAT HE GOT
 1619 01506 6162           CRLF
 1620 01507 7000          NOP
 1621 01510 4324          JMS ASSUNI
 1622 01511 4500          ASCOUT
 1623 01512 3366           ASSIND         /TYPE "ASSIGNED"
 1624 01513 7000          NOP
 1625 01514 5535          JMP I COMEXA    /AND LEAVE
 1626             
 1627 01515 0000  ASSOUT, 0               /TYPE CHARACTER IN AC OUT; 
 1628 01516 7041          CIA             /FOLLOWED BY SPACE
 1629 01517 3355          DCA ASSBUF      /CALLED WITH - CHAR IN AC
 1630 01520 4500          ASCOUT
 1631 01521 1555           ASSBUF         /TYPE STRING
 1632 01522 7000          NOP
 1633 01523 5715          JMP I ASSOUT
 1634             
 1635 01524 0000  ASSUNI, 0       /ROUTINE TO TYPE OUT UNIT NAME
 1636 01525 4517          GETWRD          /FIRST FIGURE OUT WHAT HE WANTED
 1637 01526 0011           JOBREG         /PC CONTAINS ORIGINAL REQUEST
 1638 01527 0036          AND C0037
 1639 01530 3063          DCA IOTP0       /DEVICE #
 1640 01531 1063          TAD IOTP0       /WHAT KIND OF DEVICE
 1641 01532 1352          TAD C7773       /-5
 1642 01533 7510          SPA             /DEVICE #'S .GE. 5 ARE DTA
 1643 01534 5345          JMP ASSG10      /NOT DTA
 1644 01535 3063          DCA IOTP0       /UNIT #
 1645 01536 1351          TAD ASSDD
 1646 01537 4315          JMS ASSOUT      /TYPE "D SPACE"
 1647 01540 1063          TAD IOTP0
 1648 01541 1353          TAD C0260
 1649 01542 7041          CIA
 1650 01543 4315  ASSG11, JMS ASSOUT      /TYPE "N SPACE"; N=0,1,...,7
 1651 01544 5724          JMP I ASSUNI    /RETURN
 1652             
 1653 01545 1354  ASSG10, TAD ASSTBZ      /END OF ASSIGNMENT TABLE
 1654 01546 3063          DCA IOTP0       /    +UNIT # -5 = PTR TO ASSTBL
 1655 01547 1463          TAD I IOTP0
 1656 01550 5343          JMP ASSG11      /TYPE OUT DEVICE ASSIGNED
 1657             
 1658 01551 7474  ASSDD,  -304            /-D
 1659 01552 7773  C7773,  7773
 1660 01553 0260  C0260,  260
 1661 01554 3406  ASSTBZ, ASSD
 1662 01555 0000  ASSBUF, 0
 1663 01556 0240          240
 1664 01557 0000          0
 1665             
 1666 01560 0240  WHERMQ, " ;"M;"Q;"=;0
      01561 0315
      01562 0321
      01563 0275
      01564 0000
 1667 01565 0240  WHERSC, " ;"S;"C;"=;0
      01566 0323

      /TSS/8 CONFIGURATION FOR UWM                                       Page 40


      01567 0303
      01570 0275
      01571 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 41


 1668                     PAGE
 1669             
 1670             /GET A TEXT STRING
 1671             /CALL   TAD ADDRESS OF BUFFER -1
 1672             /       TEXTS
 1673             /       RETURN WITH POINTER TO LAST CHAR IN AC
 1674             
 1675 01600 7537  CTEXA,  -"!
 1676 01601 7441  CTEXZ,  -"_
 1677 01602 7506  CTEXCN, -":
 1678 01603 7772  CTEX6,  -6      /MAXIMUM LENGTH OF STRING
 1679 01604 0000  CTEXNU, 0       /NUMBER OF CHARACTERS
 1680             
 1681 01605 0000  CTEXT,  0
 1682 01606 3010          DCA IX1         /INITIALIZE INDEX
 1683 01607 3204          DCA CTEXNU
 1684 01610 4404          SKIP            /SKIP SPACES AND TABS
 1685 01611 5242          JMP CTEXT2      /NOTHING LEFT - EXIT
 1686 01612 1073          TAD CHAR
 1687 01613 4246  CTEXT1, JMS FIXLC       /CONVERT IT TO UPPER-CASE
 1688 01614 1202          TAD CTEXCN      /BLAME DOUG DYMENT FOR THIS ALTERATION
 1689 01615 7110          CLL RAR
 1690 01616 7650          SNA CLA         /COLON OR SEMICOLON?
 1691 01617 5242          JMP CTEXT2      /YES - END OF STRING
 1692 01620 1073          TAD CHAR
 1693 01621 1200          TAD CTEXA
 1694 01622 7710          SPA CLA         /NO - IS IT A LEGAL NON-BLANK CHARACTER?
 1695 01623 5242          JMP CTEXT2      /NO
 1696 01624 1073          TAD CHAR
 1697 01625 1201          TAD CTEXZ
 1698 01626 7740          SMA SZA CLA     /IS IT .GE. "!" AND .LE. "_"?
 1699 01627 5242          JMP CTEXT2      /NO - THEN IT'S THE END OF THE STRING
 1700 01630 1204          TAD CTEXNU
 1701 01631 1203          TAD CTEX6
 1702 01632 7700          SMA CLA         /YES - DO WE ALREADY HAVE 6 CHARACTERS?
 1703 01633 5236          JMP .+3         /YES - THEN JUST IGNORE THIS
 1704 01634 1073          TAD CHAR
 1705 01635 3410          DCA I IX1       /NO - STORE THE CHARACTER
 1706 01636 2204          ISZ CTEXNU      / & INCREMENT THE CHARACTER COUNT
 1707 01637 4507          COMGET          /GET ANOTHER CHAR
 1708 01640 7410          SKP             /NONE THERE - WE'RE DONE
 1709 01641 5213          JMP CTEXT1
 1710 01642 3410  CTEXT2, DCA I IX1       /STORE A ZERO TO INDICATE END
 1711 01643 7240          CLA CMA
 1712 01644 1010          TAD IX1         /NOW RETURN WITH AC = END OF STRING BUFFER
 1713 01645 5605          JMP I CTEXT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 42


 1714             /SUBROUTINE TO CONVERT THE CHARACTER IN THE AC TO UPPER-CASE.
 1715             
 1716 01646 0000  FIXLC,  0
 1717 01647 3073          DCA CHAR        /SAVE THE CHARACTER
 1718 01650 1073          TAD CHAR
 1719 01651 1265          TAD MLCA
 1720 01652 7510          SPA             /IS IT LOWER-CASE?
 1721 01653 5261          JMP FIXLC1      /NO
 1722 01654 1266          TAD MLCZ
 1723 01655 7540          SMA SZA
 1724 01656 5261          JMP FIXLC1      /NO
 1725 01657 1264          TAD KLCFIX      /YES - CONVERT IT TO UPPER
 1726 01660 3073          DCA CHAR
 1727 01661 7300  FIXLC1, CLA CLL
 1728 01662 1073          TAD CHAR
 1729 01663 5646          JMP I FIXLC     /RETURN W/ AC= CHARACTER
 1730             
 1731 01664 0332  KLCFIX, 372-40
 1732 01665 7437  MLCA,   -341    /LOWER-CASE "A"
 1733 01666 7747  MLCZ,   341-372 / AND "Z"
 1734             
 1735             /SKIP LEADING SPACES AND TABS
 1736             /CALL   JMS SKIPS
 1737             /       BUFFER EMPTY
 1738             /       NORMAL RETURN
 1739             
 1740 01667 7540  SKISPA, -240
 1741 01670 0027  SKITAB, 240-211
 1742             
 1743 01671 0000  SKIPS,  0
 1744 01672 1073          TAD CHAR
 1745 01673 5276          JMP .+3
 1746 01674 4507  SKIPS1, COMGET
 1747 01675 5671          JMP I SKIPS     /NONE LEFT
 1748 01676 7440          SZA             /NULL CHARACTER?
 1749 01677 1267          TAD SKISPA
 1750 01700 7440          SZA             /NO - SPACE?
 1751 01701 1270          TAD SKITAB
 1752 01702 7650          SNA CLA         /NO - TAB?
 1753 01703 5274          JMP SKIPS1      /YES - IGNORE IT
 1754 01704 2271          ISZ SKIPS
 1755 01705 5671          JMP I SKIPS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 43


 1756             /GET A CHARACTER FROM COMMAND STRING
 1757             /CALL   COMGET  (AC=0 FOR NON-DESTRUCTIVE READ)
 1758             /       NONE
 1759             /       RETURN WITH CHARACTER IN 'CHAR' & AC
 1760             
 1761                     IFNZRO DDBOUP-6 <GLITCH>
 1762       0017  COMGIP= C0006   /DDBOUP
 1763 01706 0000  COMGE2, 0
 1764             
 1765 01707 0000  COMGE0, 0
 1766 01710 3371          DCA COMGT1
 1767 01711 1055  COMGE3, TAD COMDB0      /ADDR OF FIELD 0 DDB
 1768 01712 7450          SNA             /HAS HE JUST LOGGED OUT?
 1769 01713 5322          JMP COMGEX      /YES
 1770 01714 6212          CIF+10
 1771 01715 4573          FETCH
 1772 01716 7766  COMG12,  -12
 1773 01717 5325          JMP COMGE1      /BLOCK EMPTY
 1774 01720 5322          JMP COMGEX      /BUFFER EMPTY
 1775 01721 2307          ISZ COMGE0
 1776 01722 3073  COMGEX, DCA CHAR        /SAVE THE CHARACTER
 1777 01723 1073          TAD CHAR
 1778 01724 5707          JMP I COMGE0    / AND RETURN W/ AC = CHARACTER
 1779             
 1780 01725 1055  COMGE1, TAD COMDB0      /ADVANCE BLOCK
 1781 01726 1017          TAD COMGIP
 1782 01727 3356          DCA COMGT0      /FIELD 0 ADDR OF DDBINP
 1783 01730 6211          DATFLD
 1784 01731 1756          TAD I COMGT0
 1785 01732 3306          DCA COMGE2
 1786 01733 1706          TAD I COMGE2
 1787 01734 7450          SNA
 1788 01735 5342          JMP COMGE5
 1789 01736 3756          DCA I COMGT0
 1790 01737 2356          ISZ COMGT0
 1791 01740 1316          TAD COMG12
 1792 01741 3756          DCA I COMGT0
 1793 01742 6221  COMGE5, CHDF
 1794 01743 1371          TAD COMGT1
 1795 01744 7650          SNA CLA         /DELETE?
 1796 01745 5350          JMP COMGE4      /NO
 1797 01746 1306          TAD COMGE2      /YES
 1798 01747 4526          RETDBL
 1799 01750 6211  COMGE4, DATFLD
 1800 01751 1706          TAD I COMGE2
 1801 01752 6221          CHDF
 1802 01753 7650          SNA CLA
 1803 01754 5322          JMP COMGEX
 1804 01755 5311          JMP COMGE3

      /TSS/8 CONFIGURATION FOR UWM                                       Page 44


 1805             /GET A FREE BLOCK AND RETURN ITS ADDRESS
 1806             /CALL   TAD FIELD 0 LINK
 1807             /       GETFBL
 1808             /       NONE AVAILABLE
 1809             /       ADDR IN AC
 1810             
 1811             COMGT0,
 1812 01756 0000  GETFB0, 0
 1813 01757 3054          DCA CHDFA
 1814 01760 1054          TAD CHDFA
 1815 01761 6202          CIF
 1816 01762 4571          GETBLK
 1817 01763 5756          JMP I GETFB0
 1818 01764 6211          DATFLD
 1819 01765 1454          TAD I CHDFA
 1820 01766 6221          CHDF
 1821 01767 2356          ISZ GETFB0
 1822 01770 5756          JMP I GETFB0
 1823             
 1824             
 1825             /SEARCH FOR JOB IN CORE
 1826             /CALL   TAD SEARCH ITEM
 1827             /       CORES
 1828             /       RETURN WITH CORE ARG IN AC
 1829             
 1830             COMGT1,
 1831 01771 0000  CORSER, 0
 1832 01772 6202          CIF
 1833 01773 4570          CORE
 1834 01774 4237           FSWP+SI+37
 1835 01775 7200          CLA
 1836 01776 5771          JMP I CORSER

      /TSS/8 CONFIGURATION FOR UWM                                       Page 45


 1837                     PAGE
 1838             
 1839             /NUMBER INPUT
 1840             /CALL   NUMBIN
 1841             /        -N     N=7,9 IN ASCII
 1842             /       NOT A NUMBER
 1843             /       # IN AC
 1844             
 1845 02000 0177  C0177,  177
 1846       0075  NUMAGN= NUMHO+1         /MAGNITUDE
 1847 02001 0017  NUMB17, 17
 1848 02002 0000  NUMCNT, 0       /DIGIT COUNT
 1849 02003 7764  NUMCOM, " -",
 1850                     IFNZRO NUMOCT-NUMDEC-10 <GLITCH>
 1851       0016  NUMDIF= C0010   /NUMOCT-NUMDEC
 1852 02004 5303  NUMDSP, JMP NUMDEC
 1853 02005 7523  NUMINU, -"-
 1854 02006 7773  NUMM5,  -5
 1855 02007 7525  NUMPLS, -"+
 1856 02010 7540  NUMSPC, -240
 1857 02011 7520  NUMZER, -"0
 1858             
 1859 02012 0000  NUMBI0, 0
 1860 02013 1612          TAD I NUMBI0    /SET CONVERSION DISPATCH
 1861 02014 0032          AND C0002
 1862 02015 7650          SNA CLA         /IS THE PARM A "7" OR "9"?
 1863 02016 1016          TAD NUMDIF      /"7" - OCTAL
 1864 02017 1204          TAD NUMDSP      /"9" - DECIMAL
 1865 02020 3302          DCA NUMDEC-1
 1866 02021 3345          DCA NUMSGN      /INITIALIZE
 1867 02022 3075          DCA NUMAGN
 1868 02023 3074          DCA NUMHO
 1869 02024 3202          DCA NUMCNT
 1870 02025 4404          SKIP            /SKIP SPACES AND TABS
 1871 02026 5343          JMP NUMBI4      /BUFFER EMPTY
 1872 02027 1073          TAD CHAR
 1873 02030 1207          TAD NUMPLS      /+?
 1874 02031 7650          SNA CLA
 1875 02032 5240          JMP NUMBI1      /YES
 1876 02033 1073          TAD CHAR
 1877 02034 1205          TAD NUMINU      /-?
 1878 02035 7640          SZA CLA
 1879 02036 5243          JMP NUMBI2      /NO
 1880 02037 2345          ISZ NUMSGN      /YES - SET (-) INDICATOR
 1881 02040 4507  NUMBI1, COMGET          /GET A CHARACTER
 1882 02041 5321          JMP NUMBI3
 1883 02042 7410          SKP
 1884 02043 1073  NUMBI2, TAD CHAR
 1885 02044 1211          TAD NUMZER
 1886 02045 7710          SPA CLA         /DIGIT?
 1887 02046 5321          JMP NUMBI3      /NO
 1888 02047 1073          TAD CHAR
 1889 02050 1612          TAD I NUMBI0
 1890 02051 7740          SMA SZA CLA     /CHAR <= PARAMETER?
 1891 02052 5321          JMP NUMBI3
 1892 02053 1073          TAD CHAR
 1893 02054 0201          AND NUMB17

      /TSS/8 CONFIGURATION FOR UWM                                       Page 46


 1894 02055 3054          DCA CHDFA
 1895 02056 2202          ISZ NUMCNT
 1896 02057 1202          TAD NUMCNT      /MORE THAT 4 DIGITS?
 1897 02060 1206          TAD NUMM5
 1898 02061 7710          SPA CLA
 1899 02062 5276          JMP NUMBI5      /NO
 1900 02063 1074          TAD NUMHO       /SHIFT HIGH ORDER
 1901 02064 7106          CLL RTL
 1902 02065 7004          RAL
 1903 02066 0041          AND C7770
 1904 02067 3074          DCA NUMHO
 1905 02070 1075          TAD NUMAGN
 1906 02071 7106          CLL RTL
 1907 02072 7006          RTL
 1908 02073 0035          AND C0007
 1909 02074 1074          TAD NUMHO
 1910 02075 3074          DCA NUMHO
 1911 02076 1075  NUMBI5, TAD NUMAGN
 1912 02077 7106          CLL RTL
 1913 02100 7004          RAL
 1914 02101 0041          AND C7770
 1915 02102 7402           HLT
 1916 02103 7100  NUMDEC, CLL
 1917 02104 1075          TAD NUMAGN
 1918 02105 7430          SZL
 1919 02106 2074          ISZ NUMHO
 1920 02107 7100          CLL
 1921 02110 1075          TAD NUMAGN
 1922 02111 7430          SZL
 1923 02112 2074          ISZ NUMHO
 1924 02113 7100  NUMOCT, CLL
 1925 02114 1054          TAD CHDFA
 1926 02115 7430          SZL
 1927 02116 2074          ISZ NUMHO
 1928 02117 3075          DCA NUMAGN
 1929 02120 5240          JMP NUMBI1
 1930             
 1931 02121 1073  NUMBI3, TAD CHAR
 1932 02122 1210          TAD NUMSPC
 1933 02123 7440          SZA             /WAS TERMINATOR A SPACE?
 1934 02124 1203          TAD NUMCOM
 1935 02125 7650          SNA CLA         / OR A COMMA?
 1936 02126 5332          JMP NUMBI6      /YES - IT'S OK THEN
 1937 02127 4513          ENDTST          /NO--WAS IT AN ACCEPTABLE END CHAR?
 1938 02130 7410          SKP             /YES, OK
 1939 02131 5343          JMP NUMBI4      /NO, COMPLAIN
 1940             
 1941 02132 1202  NUMBI6, TAD NUMCNT      /ANY VALID DIGITS IN STRING?
 1942 02133 7650          SNA CLA
 1943 02134 5343          JMP NUMBI4      /NOPE
 1944 02135 2212          ISZ NUMBI0      /YES, IT WAS A VALID STRING.
 1945 02136 1345          TAD NUMSGN
 1946 02137 7110          CLL RAR
 1947 02140 1075          TAD NUMAGN
 1948 02141 7430          SZL
 1949 02142 7041          CIA
 1950 02143 2212  NUMBI4, ISZ NUMBI0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 47


 1951 02144 5612          JMP I NUMBI0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 48


 1952             /OUTPUT ASCII MESSAGE
 1953             /CALL   TAD ADDR OF DDB OR 0 IF RESPONSE DDB
 1954             /       ASCOUT
 1955             /       POINTER TO MESSAGE (TERMINATED BY 0)
 1956             /       WON'T FIT
 1957             /       OK
 1958             
 1959       2002  ASCOT0= NUMCNT
 1960       2012  ASCOT1= NUMBI0
 1961             
 1962             NUMSGN,
 1963 02145 0000  ASCOU0, 0
 1964 02146 7440          SZA
 1965 02147 5352          JMP .+3
 1966 02150 4524          RESDDB          /GET THIS USER'S OUTPUT DDB
 1967 02151 5375          JMP ASCOU2      /NONE AVAILABLE
 1968 02152 3202          DCA ASCOT0
 1969 02153 1745          TAD I ASCOU0
 1970 02154 3212          DCA ASCOT1
 1971 02155 2345          ISZ ASCOU0
 1972 02156 1612  ASCOU1, TAD I ASCOT1    /GET NEXT CHAR
 1973 02157 7450          SNA             /END OF STRING?
 1974 02160 5375          JMP ASCOU2      /YES
 1975 02161 6201          CDF             /NO. STORE IT IN BUFFER
 1976 02162 3431          DCA I TTCHAR
 1977 02163 1200          TAD C0177
 1978 02164 3405          DCA I SOURCA    /LET STORE KNOW THIS IS SI
 1979 02165 3777          DCA I GIRDDB    / AND CLEAR GIR'S DDB POINTER
 1980 02166 6221          CHDF
 1981 02167 6202          CIF
 1982 02170 1202          TAD ASCOT0      /GET THE DDB ADDRESS
 1983 02171 4575          STORE           / AND STORE THE CHARACTER
 1984 02172 5745          JMP I ASCOU0    /WON'T FIT
 1985 02173 2212          ISZ ASCOT1
 1986 02174 5356          JMP ASCOU1
 1987 02175 2345  ASCOU2, ISZ ASCOU0
 1988 02176 5745          JMP I ASCOU0
 1989             
 1990 02177 6012  GIRDDB, GIR00-1 / GIRDBA= GIR00-1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 49


 1991                     PAGE
 1992             
 1993             /GET JOB TABLE ADDRESS
 1994             /CALL   GETTBA
 1995             /        RELATIVE ADDRESS
 1996             /       RETURN
 1997             
 1998 02200 0000  GETTB0, 0
 1999 02201 6211          DATFLD
 2000 02202 1561          TAD I JOBDAT
 2001 02203 7650          SNA CLA         /IS 'JOBDAT' DEFINED?
 2002 02204 4522          REBOOT          /NO - ERROR *****
 2003 02205 6221          CHDF
 2004 02206 1600          TAD I GETTB0
 2005 02207 3214          DCA GETTB1
 2006 02210 2200          ISZ GETTB0
 2007 02211 1161          TAD JOBDAT
 2008 02212 6202          CIF
 2009 02213 4574          GETJTA
 2010 02214 0000  GETTB1,  0
 2011 02215 7450          SNA             /REASONABLE ADDRESS?
 2012 02216 4522          REBOOT          /NO - ERROR *****
 2013 02217 5600          JMP I GETTB0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 50


 2014             /GET RESPONSE DDB ADDRESS
 2015             /CALL   RESDDB
 2016             /       NONE AVAILABLE
 2017             /       ADDR IN AC AND COMRDB
 2018             
 2019 02220 0000  RESPDB, 0
 2020 02221 1056          TAD COMRDB
 2021 02222 7640          SZA CLA         /DDB ALREADY SET UP?
 2022 02223 5270          JMP RESPD3      /YES
 2023 02224 6201          CDF
 2024 02225 1420          TAD I COMPTR    /DEVTBL ADDRESS IN COMMAND DDB
 2025 02226 7110          CLL RAR
 2026 02227 7630          SZL CLA         /INPUT SIDE?
 2027 02230 5266          JMP RESPD2      /NO - THEN 'COMDB0' IS OUTPUT
 2028 02231 7001          IAC             /YES - GET OUTPUT ENTRY
 2029 02232 1420          TAD I COMPTR
 2030 02233 3056          DCA COMRDB      /SET DEVTBL ENTRY ADDRESS
 2031 02234 6211          DATFLD
 2032 02235 1456          TAD I COMRDB
 2033 02236 7640          SZA CLA         /OUTPUT DDB SETUP?
 2034 02237 5246          JMP RESPD1      /YES - MAKE SURE IT'S INITIALIZED
 2035 02240 6221          CHDF            /NO. GET A DDB
 2036 02241 1056          TAD COMRDB
 2037 02242 6202          CIF
 2038 02243 4572          GETDDB
 2039 02244 5274          JMP RESPD4      /NONE
 2040 02245 6211          DATFLD
 2041 02246 7240  RESPD1, CLA CMA
 2042 02247 1055          TAD COMDB0
 2043 02250 3010          DCA IX1         /SET POINTER TO INPUT DDB
 2044 02251 7240          CLA CMA
 2045 02252 1456          TAD I COMRDB
 2046 02253 3011          DCA IX2         / AND POINTER TO OUTPUT DDB
 2047 02254 1410          TAD I IX1
 2048 02255 0036          AND C0037
 2049 02256 3411          DCA I IX2       /SET THE UNIT # IN THE OUTPUT DDB
 2050 02257 1410          TAD I IX1
 2051 02260 0036          AND C0037
 2052 02261 3411          DCA I IX2       / AND THE JOB #
 2053 02262 1410          TAD I IX1
 2054 02263 3411          DCA I IX2       / AND THE BREAK-MASK (IS THIS REALLY NECESSARY?)
 2055 02264 1456          TAD I COMRDB
 2056 02265 7410          SKP
 2057 02266 1055  RESPD2, TAD COMDB0
 2058 02267 3056          DCA COMRDB      /SET THE DDB ADDRESS
 2059 02270 6221  RESPD3, CHDF
 2060 02271 1056          TAD COMRDB
 2061 02272 2220          ISZ RESPDB
 2062 02273 5620          JMP I RESPDB
 2063             
 2064 02274 3056  RESPD4, DCA COMRDB
 2065 02275 5620          JMP I RESPDB

      /TSS/8 CONFIGURATION FOR UWM                                       Page 51


 2066             /DELETE BUFFER TO CURRRENT POINTER
 2067             /CALL   JMS BUFDEL
 2068             /       RETURN
 2069             
 2070                     IFNZRO DDBOUP-6 <GLITCH>
 2071       0017  BUFDOP= C0006           /DDBOUP
 2072 02276 0000  BUFDT0, 0
 2073 02277 0000  BUFDT1, 0
 2074 02300 0000  BUFDT2, 0
 2075 02301 0000  BUFDT3, 0
 2076                     IFNZRO DDBINP-4 <GLITCH>
 2077       0034  BUFINP= C0004   /DDBINP
 2078             
 2079 02302 0000  BUFDE0, 0
 2080 02303 1055          TAD COMDB0
 2081 02304 7450          SNA             /DOES IT EXIST?
 2082 02305 5345          JMP BUFDE1      /NO - NOTHING TO DELETE
 2083 02306 1017          TAD BUFDOP
 2084 02307 3276          DCA BUFDT0      /POINTER TO EMPTY-POINTER
 2085 02310 1055          TAD COMDB0
 2086 02311 1034          TAD BUFINP
 2087 02312 3277          DCA BUFDT1      /POINTER TO FILL-POINTER
 2088 02313 6211          DATFLD
 2089 02314 1676          TAD I BUFDT0
 2090 02315 7041          CIA
 2091 02316 1677          TAD I BUFDT1
 2092 02317 7640          SZA CLA         /ARE THE FILL- AND EMPTY-POINTERS EQUAL?
 2093 02320 5350          JMP BUFDE2      /NO - FREE BUFFERS ONLY UP TO THE EMPTY-POINTER
 2094 02321 1276          TAD BUFDT0
 2095 02322 7001          IAC
 2096 02323 3300          DCA BUFDT2      /YES - SET POINTER TO EMPTY-COUNT
 2097 02324 1277          TAD BUFDT1
 2098 02325 7001          IAC
 2099 02326 3301          DCA BUFDT3      / AND POINTER TO FILL-COUNT
 2100 02327 1701          TAD I BUFDT3
 2101 02330 7040          CMA
 2102 02331 1700          TAD I BUFDT2
 2103 02332 7640          SZA CLA         /IS THERE ANYTHING AT ALL IN THE BUFFER?
 2104 02333 5350          JMP BUFDE2      /YES - JUST SET NEW EMPTY-COUNT
 2105 02334 6201          CDF
 2106 02335 1421          TAD I SIBUF
 2107 02336 6221          CHDF
 2108 02337 4525          RETBKS          /NO - FREE UP ALL THE BUFFERS
 2109 02340 6201          CDF
 2110 02341 3421          DCA I SIBUF     / AND CLEAR THE SAVE-POINTER
 2111 02342 6211          DATFLD
 2112 02343 3676          DCA I BUFDT0    /CLEAR THE FILL- AND EMPTY-POINTERS
 2113 02344 3677          DCA I BUFDT1    / SO EVERYONE KNOWS THERE'S NOTHING
 2114 02345 6221  BUFDE1, CHDF
 2115 02346 3073          DCA CHAR        /CLEAR TO INDICATE EMPTY BUFFER
 2116 02347 5702          JMP I BUFDE0
 2117 02350 1676  BUFDE2, TAD I BUFDT0
 2118 02351 7041          CIA
 2119 02352 6201          CDF
 2120 02353 1421          TAD I SIBUF
 2121 02354 7650          SNA CLA         /ARE WE UP TO THE EMPTY-POINTER?
 2122 02355 5366          JMP BUFDE3      /YES

      /TSS/8 CONFIGURATION FOR UWM                                       Page 52


 2123 02356 1421          TAD I SIBUF
 2124 02357 6221          CHDF
 2125 02360 6202          CIF
 2126 02361 4576          RETBLK          /NO - FREE THIS BUFFER
 2127 02362 6201          CDF
 2128 02363 3421          DCA I SIBUF     / & SAVE THE LINK AS OUR NEW START-POINT
 2129 02364 6211          DATFLD
 2130 02365 5350          JMP BUFDE2
 2131 02366 2276  BUFDE3, ISZ BUFDT0
 2132 02367 6211          DATFLD
 2133 02370 1676          TAD I BUFDT0
 2134 02371 6201          CDF
 2135 02372 3422          DCA I SICNT     /SAVE THE NEW EMPTY-COUNT
 2136 02373 6221          CHDF
 2137 02374 5702          JMP I BUFDE0    / AND RETURN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 53


 2138                     PAGE
 2139             /DECREMENT COMCNT
 2140             /CALL   DECRCT
 2141             /       RETURN
 2142             
 2143 02400 0000  DECRC0, 0
 2144 02401 6201          CDF
 2145 02402 7240          STA
 2146 02403 1452          TAD I COMCNT    /BACK UP THE COMMAND COUNTER
 2147 02404 7510          SPA             / BUT IT CAN'T GO NEGATIVE
 2148 02405 7200          CLA
 2149 02406 3452          DCA I COMCNT
 2150 02407 6221          CHDF
 2151 02410 5600          JMP I DECRC0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 54


 2152             
 2153             /ASCII TO SIXBIT CONVERT
 2154             /CALL   ASCSIX
 2155             /        SOURCE-1       (TERMINATED BY 0)
 2156             /        DESTINATION-1
 2157             /       RETURN
 2158             
 2159 02411 7540  ASC240, -240
 2160             
 2161 02412 0000  ASCSI0, 0
 2162 02413 1612          TAD I ASCSI0
 2163 02414 3010          DCA IX1
 2164 02415 2212          ISZ ASCSI0
 2165 02416 1612          TAD I ASCSI0
 2166 02417 3011          DCA IX2
 2167 02420 2212          ISZ ASCSI0
 2168 02421 1410  ASCSI1, TAD I IX1
 2169 02422 7450          SNA
 2170 02423 5612          JMP  I ASCSI0   /THAT'S ALL
 2171 02424 1211          TAD ASC240      /CONVERT TO SIXBIT
 2172 02425 7106          CLL RTL         /NO
 2173 02426 7006          RTL
 2174 02427 7006          RTL
 2175 02430 3054          DCA CHDFA
 2176 02431 1410          TAD I IX1
 2177 02432 7450          SNA
 2178 02433 5240          JMP ASCSI2
 2179 02434 1211          TAD ASC240
 2180 02435 1054          TAD CHDFA
 2181 02436 3411          DCA I IX2
 2182 02437 5221          JMP ASCSI1
 2183 02440 1054  ASCSI2, TAD CHDFA
 2184 02441 3411          DCA I IX2
 2185 02442 5612          JMP I ASCSI0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 55


 2186             /TEST FOR END OF COMMAND STRING
 2187             /CALL   ENDTST  WITH CHARACTER IN CHAR
 2188             /       END RETURN
 2189             /       NOT END
 2190             
 2191 02443 0000  ENDTS0, 0
 2192 02444 1257          TAD ENDTBA
 2193 02445 3012          DCA IX3
 2194 02446 1412          TAD I IX3
 2195 02447 7450          SNA             /AND END OF LIST?
 2196 02450 5255          JMP .+5         /YES - THEN CHAR ISN'T A BREAK CHAR
 2197 02451 1073          TAD CHAR
 2198 02452 7640          SZA CLA         /IS THIS EQUAL TO CHAR?
 2199 02453 5246          JMP .-5         /NO - CONTINUE CHECKING
 2200 02454 7410          SKP
 2201 02455 2243          ISZ ENDTS0
 2202 02456 5643          JMP I ENDTS0
 2203             
 2204 02457 2461  ENDTBA, ENDTB0-1
 2205 02460 7576          -202    /^B
 2206 02461 7401          -377    /RUBOUT
 2207 02462 7505  ENDTB0, -273    /; (FIRST CHARACTER NORMALLY CHECKED)
 2208 02463 7506          -272    /:
 2209 02464 7563          -215    /CR
 2210 02465 7566          -212    /LF
 2211 02466 7565          -213    /VT
 2212 02467 7564          -214    /FF
 2213 02470 0000          0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 56


 2214             /RETURN BLOCK TO FREE STORAGE
 2215             /CALL   TAD ADDR OF BLOCK
 2216             /       RETDBL
 2217             /       RETURN
 2218             
 2219 02471 0000  RETDB0, 0
 2220 02472 3243          DCA ENDTS0      /SAVE THE BLOCK-ADDRESS
 2221 02473 1243          TAD ENDTS0
 2222 02474 7450          SNA             /IS IT REASONABLE?
 2223 02475 4522          REBOOT          /NO - ERROR *****
 2224 02476 6202          CIF
 2225 02477 4576          RETBLK          / AND RETURN IT TO THE FREE-LIST
 2226 02500 5671          JMP I RETDB0
 2227             
 2228             /RETURN LINKED BLOCKS TO FREE STORAGE
 2229             /CALL   TAD ADDRESS OF BLOCK
 2230             /       RETBKS
 2231             /       RETURN
 2232             
 2233 02501 0000  RETBK0, 0
 2234 02502 7450          SNA
 2235 02503 5701          JMP I RETBK0
 2236 02504 4526          RETDBL
 2237 02505 5302          JMP .-3

      /TSS/8 CONFIGURATION FOR UWM                                       Page 57


 2238             /OCTAL TO ASCII CONVERT
 2239             /CALL   TAD OCTAL #
 2240             /       OCTASC
 2241             /        BUFFER ADDR-1
 2242             /       RETURN
 2243             
 2244 02506 0000  OCTAS0, 0
 2245 02507 7104          CLL RAL
 2246 02510 3334          DCA OCTASN      /SAVE THE NUMBER
 2247 02511 1332          TAD OCTM4
 2248 02512 3341          DCA OCTACT      /SET THE DIGIT COUNTER
 2249 02513 1706          TAD I OCTAS0
 2250 02514 3010          DCA IX1         / & THE BUFFER POINTER
 2251 02515 2306          ISZ OCTAS0
 2252 02516 1334  OCTAS1, TAD OCTASN
 2253 02517 7006          RTL
 2254 02520 7004          RAL
 2255 02521 3334          DCA OCTASN
 2256 02522 1334          TAD OCTASN
 2257 02523 0035          AND C0007       /GET THE NEXT OCTAL DIGIT
 2258 02524 1333          TAD OCTZER      / & MAKE IT ASCII
 2259 02525 3410          DCA I IX1
 2260 02526 2341          ISZ OCTACT
 2261 02527 5316          JMP OCTAS1
 2262 02530 3410          DCA I IX1       /SET ZERO AS TERMINATOR
 2263 02531 5706          JMP I OCTAS0
 2264             
 2265 02532 7774  OCTM4,  -4
 2266 02533 0260  OCTZER, "0
 2267             
 2268             /GET USER STATE WORD
 2269             /CALL   GETWRD
 2270             /        RELATIVE ADDRESS
 2271             /       RETURN WITH USER WORD IN AC, ADDRESS IN IOTP7
 2272             
 2273 02534 0000  GETWR0, 0
 2274 02535 1734          TAD I GETWR0
 2275 02536 3341          DCA GETWR1
 2276 02537 2334          ISZ GETWR0
 2277 02540 4516          GETTBA
 2278 02541 0000  GETWR1,  0
 2279 02542 3072          DCA IOTP7
 2280 02543 6211          DATFLD
 2281 02544 1472          TAD I IOTP7
 2282 02545 6221          CHDF
 2283 02546 5734          JMP I GETWR0
 2284             /
 2285       2534  OCTASN= GETWR0
 2286       2541  OCTACT= GETWR1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 58


 2287             /ASSIGN THIS FIELD TO JOB
 2288             /CALL   ASSCOR
 2289             
 2290 02547 0000  ASSCO0, 0
 2291 02550 7326          CLL CLA CML RTL /ADD 2 TO CORTBL - SI IS ALWAYS IN FIELD 2
 2292 02551 1162          TAD CORTBA
 2293 02552 3054          DCA CHDFA
 2294 02553 6201          CDF
 2295 02554 1152          TAD CORJOB
 2296 02555 7450          SNA             /SPECIAL FIELD ASSIGNMENT?
 2297 02556 1560          TAD I JOB       /NO - SET FOR THIS JOB
 2298 02557 3454          DCA I CHDFA
 2299 02560 6221          CHDF
 2300 02561 5747          JMP I ASSCO0
 2301             
 2302             /RELEASE THIS FIELD
 2303             /CALL   RELCOR
 2304             
 2305 02562 5700  RELCOM, FSWP+NOTRUN+FIP+SI+FIX
 2306             
 2307 02563 0000  RELCO0, 0
 2308 02564 7326          CLL CLA CML RTL /ADD 2 TO CORTBL - SI IN FIELD 2
 2309 02565 1162          TAD CORTBA
 2310 02566 3054          DCA CHDFA
 2311 02567 6201          CDF
 2312 02570 1454          TAD I CHDFA
 2313 02571 0362          AND RELCOM
 2314 02572 3454          DCA I CHDFA
 2315 02573 6221          CHDF
 2316 02574 5763          JMP I RELCO0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 59


 2317                     PAGE
 2318             
 2319             /SIXBIT TO ASCII CONVERT
 2320             /CALL   JMS SIXASC
 2321             /        SIXBIT ADDR (TERMINATED BY 0 OR SIXTH CHAR)
 2322             /       ASCII BUFFER-1
 2323             /       RETURN
 2324             
 2325 02600 7775  SIXM6,  -3
 2326 02601 0000  SIXCNT, 0
 2327 02602 0000  SIXADR, 0
 2328 02603 0077  C0077,  77
 2329             
 2330 02604 0000  SIXASC, 0
 2331 02605 7450          SNA
 2332 02606 1200          TAD SIXM6       /COUNT
 2333 02607 3201          DCA SIXCNT
 2334 02610 1604          TAD I SIXASC
 2335 02611 3202          DCA SIXADR
 2336 02612 2204          ISZ SIXASC
 2337 02613 1604          TAD I SIXASC
 2338 02614 3011          DCA IX2
 2339 02615 2204          ISZ SIXASC
 2340 02616 1602  SIXAS2, TAD I SIXADR
 2341 02617 0140          AND C7700
 2342 02620 7450          SNA
 2343 02621 5240          JMP SIXAS1
 2344 02622 7112          CLL RTR
 2345 02623 7012          RTR
 2346 02624 7012          RTR
 2347 02625 1341          TAD SIX240
 2348 02626 3411          DCA I IX2
 2349 02627 1602          TAD I SIXADR
 2350 02630 0203          AND C0077
 2351 02631 7450          SNA
 2352 02632 5240          JMP SIXAS1
 2353 02633 1341          TAD SIX240
 2354 02634 3411          DCA I IX2
 2355 02635 2202          ISZ SIXADR
 2356 02636 2201          ISZ SIXCNT
 2357 02637 5216          JMP SIXAS2
 2358 02640 3411  SIXAS1, DCA I IX2       /CLEAR LAST WORD
 2359 02641 5604          JMP I SIXASC

      /TSS/8 CONFIGURATION FOR UWM                                       Page 60


 2360             /RETURN PARAMETERS
 2361             /CALL   RETPAR
 2362             /       RETURN
 2363             
 2364 02642 7737  FJSIOT, -JSIOTC-1
 2365             
 2366 02643 0000  RETPA0, 0
 2367 02644 4517          GETWRD
 2368 02645 0007           JOBLNK
 2369 02646 7001          IAC
 2370 02647 3253          DCA RETPA1
 2371 02650 6202          CIF
 2372 02651 4567          BLT
 2373 02652 6211           DATFLD         /SOURCE FLD
 2374 02653 0000  RETPA1,  0              /SOURCE ADDR
 2375 02654 6221           CHDF           /DESTINATION FIELD
 2376 02655 0063           IOTP0          /DEST ADDR
 2377 02656 7771           -7             /-COUNT
 2378 02657 7240          STA             /RETURN PARAMETER LBLOCK TO FREE STORAGE
 2379 02660 1253          TAD RETPA1
 2380 02661 6202          CIF
 2381 02662 4576          RETBLK
 2382 02663 7200          CLA
 2383 02664 6211          DATFLD
 2384 02665 3472          DCA I IOTP7     /JOBLNK:=0
 2385 02666 6221          CHDF
 2386 02667 4517          GETWRD          /JSIOTC:=0
 2387 02670 0000           JOBSTS
 2388 02671 0242          AND FJSIOT
 2389 02672 6211          DATFLD
 2390 02673 3472          DCA I IOTP7
 2391 02674 6221          CHDF
 2392 02675 5643          JMP I RETPA0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 61


 2393             /RESTORE BUFFER POINTERS
 2394             /CALL   JMS RESTBP
 2395             /       RETURN
 2396             
 2397                     IFNZRO DDBOUP-6 <GLITCH>
 2398       0017  RESTIP= C0006   /DDBOUP
 2399             
 2400 02676 0000  RESTBP, 0
 2401 02677 1055          TAD COMDB0
 2402 02700 7450          SNA             /DO WE HAVE A DDB?
 2403 02701 4522          REBOOT          /NO - ERROR *****
 2404 02702 1017          TAD RESTIP
 2405 02703 3054          DCA CHDFA
 2406 02704 6201          CDF
 2407 02705 1421          TAD I SIBUF
 2408 02706 6211          DATFLD
 2409 02707 3454          DCA I CHDFA
 2410 02710 2054          ISZ CHDFA
 2411 02711 6201          CDF
 2412 02712 1422          TAD I SICNT
 2413 02713 6211          DATFLD
 2414 02714 3454          DCA I CHDFA
 2415 02715 6221          CHDF
 2416 02716 5676          JMP I RESTBP

      /TSS/8 CONFIGURATION FOR UWM                                       Page 62


 2417 02717 4506  SAVNAM, CLRPRV          /CLEAR JOB'S "PRIVILEGE"
 2418 02720 1053          TAD SIJOB       /PRGTBL INDEX=3*JOB
 2419 02721 1053          TAD SIJOB
 2420 02722 1053          TAD SIJOB
 2421 02723 1340          TAD PRGTBA      /START OF PRGTBL-3 (NO ENTRY FOR JOB 0)
 2422 02724 3010          DCA IX1
 2423 02725 6211          DATFLD
 2424 02726 1066          TAD IOTP3       /TRANSFER 3 WORD BLOCK
 2425 02727 3410          DCA I IX1
 2426 02730 1067          TAD IOTP4
 2427 02731 3410          DCA I IX1
 2428 02732 1070          TAD IOTP5
 2429 02733 3410          DCA I IX1
 2430 02734 6221          CHDF
 2431 02735 1033          TAD C0003       /FILE 3
 2432 02736 3064          DCA IOTP1
 2433 02737 5543          JMP I LNGIOT    /GO DO OPEN
 2434             
 2435 02740 3351  PRGTBA, PRGTBL-3-1
 2436             
 2437       2741  SIX240= .       /FOR 'SIXASC'
 2438 02741 0240  HASITM, " ;"H;"A;"S;" ;0
      02742 0310
      02743 0301
      02744 0323
      02745 0240
      02746 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 63


 2439             /ROUTINE TO GET USER'S ACCOUNT # IN FORM M,N OR M
 2440             /CALL
 2441             /       ACCTIN
 2442             /       ILLEGAL CHARACTER IN STRING
 2443             /       RETURN WITH ACCOUNT # IN AC
 2444             
 2445 02747 0000  ACC0,   0
 2446 02750 3376          DCA ACC1        /CLEAR #
 2447 02751 4520  ACC3,   NUMBIN          /GET ONE COMPONENT
 2448 02752 7511           -"7
 2449 02753 5364          JMP ACC4        /COULDN'T DO IT
 2450 02754 1376          TAD ACC1        /ACCUMULATE INTO TOTAL
 2451 02755 3376          DCA ACC1
 2452 02756 1073          TAD CHAR        /TERMINATOR A COMMA
 2453 02757 1377          TAD ACCOMA
 2454 02760 7650          SNA CLA
 2455 02761 5365          JMP ACC2        /YES-- SO SHIFT NUMBER THUS FAR INTO LEFT HALF OF WORD
 2456 02762 1376          TAD ACC1        /NO- RETURN WHOLE #
 2457 02763 2347          ISZ ACC0        /SKIP TO INDICATE GOODNESS
 2458 02764 5747  ACC4,   JMP I ACC0
 2459             
 2460 02765 1376  ACC2,   TAD ACC1        /SHIFT IT LEFT 6 PLACES
 2461 02766 7106          CLL RTL
 2462 02767 7006          RTL
 2463 02770 7006          RTL
 2464 02771 3376          DCA ACC1        /SAVE IT
 2465 02772 4507          COMGET          /GET PAST THE OFFENDING COMMA
 2466 02773 5364          JMP ACC4        /NONE LEFT, BUT WE NEED ONE--ERROR
 2467 02774 7200          CLA
 2468 02775 5351          JMP ACC3        /GET NEXT PART OF NUMBER
 2469             
 2470 02776 0000  ACC1,   0
 2471 02777 7524  ACCOMA, -",

      /TSS/8 CONFIGURATION FOR UWM                                       Page 64


 2472                     PAGE
 2473             /
 2474             /HANDLER FOR THE 'LOGIN' COMMAND - WE PICK UP THE ACCOUNT
 2475             /NUMBER & PASSWORD AND BUILD THE JOB STATUS-BLOCKS; THEN
 2476             /WE CALL FIP TO CHECK THE ACCOUNT/PASSWORD COMBINATION.
 2477             /IF THE USER SPECIFIES A JOB NUMBER AFTER HIS PASSWORD,
 2478             /WE'LL LET HIM LOG IN AS A PARTICULAR JOB IF WE CAN;
 2479             /IF HE SPECIFIES A JOB NUMBER & WE CAN'T LET HIM HAVE IT,
 2480             /WE GIVE HIM A MESSAGE AND DON'T LET HIM IN AT ALL.
 2481             
 2482 03000 3200  LOGIEA, LOGINE
 2483 03001 3250  LOGIFA, LOGINF
 2484             
 2485 03002 5600          JMP I LOGIEA    /FIP ERROR RETURN
 2486 03003 5601          JMP I LOGIFA    /OK RETURN
 2487 03004 1053  LOGIN,  TAD SIJOB
 2488 03005 7640          SZA CLA         /ALREADY HAVE A JOB #?
 2489 03006 5243          JMP LOGER1      /YES - "ALREADY LOGGED IN"
 2490 03007 4477          ACCTIN          /NO - FETCH HIS ACCOUNT NUMBER
 2491 03010 5244          JMP LOGER3      /BAD NUMBER - SAY "ILLEGAL REQUEST"
 2492 03011 3065          DCA IOTP2
 2493 03012 1057          TAD COMBFA
 2494 03013 4532          TEXTS           /GET HIS PASSWORD IN ASCII
 2495 03014 7200          CLA
 2496 03015 4501          ASCSIX          / AND CONVERT IT TO TSS/8 6-BIT
 2497 03016 6205           COMBUF-1
 2498 03017 0065           IOTP3-1
 2499 03020 4520          NUMBIN          /PICK UP ANY JOB # SPECIFIED
 2500 03021 7511           -"7
 2501 03022 5246          JMP LOGIN1      /BAD JOB # - PICK ONE FOR HIM
 2502 03023 7450          SNA             /TRYING TO GET JOB 0?
 2503 03024 5244          JMP LOGER3      /YES - SHOOT HIM DOWN
 2504 03025 3072          DCA IOTP7
 2505 03026 7320          CLA CLL CML
 2506 03027 1072          TAD IOTP7
 2507 03030 6211          DATFLD
 2508 03031 1774          TAD I LOGMAX
 2509 03032 7660          SZA SNL CLA     /IS IT A LEGAL JOB #?
 2510 03033 5244          JMP LOGER3      /NO - "ILLEGAL REQUEST"
 2511 03034 7240          CLA CMA
 2512 03035 1072          TAD IOTP7
 2513 03036 1044          TAD JOBTBA
 2514 03037 3013          DCA IX4         /YES - GET THE 'JOBTBL' ENTRY
 2515 03040 1413          TAD I IX4
 2516 03041 7650          SNA CLA         /IS THERE ALREADY A JOB THERE?
 2517 03042 5266          JMP LOGIN4      /NO - HE CAN HAVE THE SLOT
 2518             
 2519 03043 1375  LOGER1, TAD LOGME0      /"ALREADY LOGGED IN"
 2520 03044 1155  LOGER3, TAD ILLMSG      /"ILLEGAL REQUEST"
 2521 03045 5533          JMP I COMERA
 2522             /
 2523             /HE DIDN'T SPECIFY A JOB # IN HIS LOGIN COMMAND SO
 2524             /WE USE THE FIRST AVAILABLE JOB SLOT.
 2525 03046 1044  LOGIN1, TAD JOBTBA
 2526 03047 3013          DCA IX4         /SET POINTER TO 'JOBTBL'
 2527 03050 6211          DATFLD
 2528 03051 1774          TAD I LOGMAX

      /TSS/8 CONFIGURATION FOR UWM                                       Page 65


 2529 03052 3054          DCA CHDFA       / & THE NUMBER OF SLOTS
 2530 03053 1413  LOGIN2, TAD I IX4
 2531 03054 7650          SNA CLA         /IS THIS JOB SLOT EMPTY?
 2532 03055 5262          JMP LOGIN3      /YES - WE HAVE A JOB NUMBER
 2533 03056 2054          ISZ CHDFA       /NO - DECREMENT COUNTER
 2534 03057 5253          JMP LOGIN2
 2535 03060 1376  LOGER2, TAD LOGME1      /TYPE "SYSTEM FULL"
 2536 03061 5533          JMP I COMERA
 2537             
 2538 03062 1044  LOGIN3, TAD JOBTBA
 2539 03063 7041          CIA
 2540 03064 1013          TAD IX4
 2541 03065 3072          DCA IOTP7       /SAVE THE JOB #
 2542             /
 2543             /AT THIS POINT, WE HAVE A JOB NUMBER IN 'IOTP7'.
 2544             /IF WE HAVE SUFFICIENT FREE-CORE TO BUILD HIS TABLES,
 2545             /THE ONLY THING THAT CAN STOP HIM NOW IS A BAD
 2546             /ACCOUNT NUMBER / PASSWORD COMBINATION.
 2547 03066 6201  LOGIN4, CDF
 2548 03067 1447          TAD I FRECNT    /GET THE NUMBER OF FREE-CORE BLOCKS
 2549 03070 1377          TAD LOGMIN
 2550 03071 7710          SPA CLA         /ENOUGH AVAILABLE TO LOG IN?
 2551 03072 5260          JMP LOGER2      /NO - SAY "SYSTEM FULL"
 2552 03073 1072          TAD IOTP7
 2553 03074 3053          DCA SIJOB       /SET OUR JOB NUMBER
 2554 03075 1053          TAD SIJOB
 2555 03076 1560          TAD I JOB
 2556 03077 3560          DCA I JOB
 2557 03100 1055          TAD COMDB0
 2558 03101 7001          IAC
 2559 03102 3054          DCA CHDFA       /POINTS TO JOB # IN DDB
 2560 03103 6211          DATFLD
 2561 03104 1454          TAD I CHDFA
 2562 03105 0140          AND C7700
 2563 03106 1053          TAD SIJOB
 2564 03107 3454          DCA I CHDFA     /SET THE JOB # IN THE INPUT DDB
 2565 03110 6221          CHDF
 2566 03111 4524          RESDDB          /GET AN OUTPUT DDB
 2567 03112 4522          REBOOT          /SHOULD NEVER HAPPEN *****
 2568 03113 7200          CLA
 2569 03114 6211          DATFLD
 2570 03115 1053          TAD SIJOB       /PUT ENTRY IN TTYTBL
 2571 03116 1151          TAD TTYTBA
 2572 03117 3054          DCA CHDFA
 2573 03120 1455          TAD I COMDB0    /GET CONSOLE #
 2574 03121 0036          AND C0037
 2575 03122 3454          DCA I CHDFA     /STORE UNIT # IN TTYTBL
 2576 03123 6221          CHDF
 2577 03124 1013          TAD IX4         /INITIALIZE JOB STATUS
 2578 03125 4515          GETFBL          /GET JOB STATUS BLOCK #0
 2579 03126 4522          REBOOT          /NO BLOCKS AVAILABLE *****
 2580 03127 3362          DCA LOGST0
 2581 03130 1362          TAD LOGST0
 2582 03131 2362          ISZ LOGST0
 2583 03132 4515          GETFBL          /GET JOB STATUS BLOCK #1
 2584 03133 4522          REBOOT
 2585 03134 4515          GETFBL          /GET JOB STATUS BLOCK #2

      /TSS/8 CONFIGURATION FOR UWM                                       Page 66


 2586 03135 4522          REBOOT          / ***** SHOULD NOT HAPPEN!! *****
 2587 03136 7240          CLA CMA         /GET THE LOCATION
 2588 03137 1362          TAD LOGST0      / OF STATUS BLK #0
 2589 03140 6211          DATFLD
 2590 03141 3561          DCA I JOBDAT    / AND SET 'JOBDAT'
 2591 03142 4516          GETTBA          /NOW STORE HIS ACCOUNT #
 2592 03143 0015           JOBACT
 2593 03144 3072          DCA IOTP7       /GET THE POINTER
 2594 03145 1065          TAD IOTP2       / & HIS ACCOUNT #
 2595 03146 6211          DATFLD
 2596 03147 3472          DCA I IOTP7     /THEN STORE IT
 2597 03150 4516          GETTBA
 2598 03151 0007           JOBLNK
 2599 03152 4515          GETFBL          /GET AN IOT LINKAGE BLOCK
 2600 03153 4522          REBOOT          / ***** SHOULD NOT HAPPEN!! *****
 2601 03154 3371          DCA LOGPMA
 2602 03155 6202          CIF
 2603 03156 4567          BLT             /NOW INITIALIZE JSB #0
 2604 03157 6221           CHDF           /SOURCE FLD
 2605 03160 4071           LOGSR0         /SOURCE ADDR
 2606 03161 6211           DATFLD         /DEST FLD
 2607 03162 0000  LOGST0,  0              /DEST ADDR
 2608 03163 7773           -5
 2609 03164 6202          CIF
 2610 03165 4567          BLT             /SET UP THE IOT LINKAGE
 2611 03166 6221           CHDF           /SOURCE FLD
 2612 03167 0063           IOTPAR+1       /SOURCE ADDR
 2613 03170 6211           DATFLD         /DEST FLD
 2614 03171 0000  LOGPMA,  0              /DEST ADDR
 2615 03172 7770           -10            /-COUNT
 2616 03173 5504          CALFIP          /GO CHECK HIS ACCOUNT # AND PASSWORD
 2617             
 2618 03174 0151  LOGMAX, F1OFFJ  /MAXIMUM # JOBS
 2619 03175 1225  LOGME0, LOGE0-ILLREQ
 2620 03176 1347  LOGME1, LOGE1
 2621 03177 7773  LOGMIN, -STOMIN /MINIMUM FREE STORAGE FOR NEW JOB

      /TSS/8 CONFIGURATION FOR UWM                                       Page 67


 2622                     PAGE
 2623             
 2624 03200 4203  LOGINE, JMS LOGIE0
 2625 03201 4531          SIERR
 2626 03202 5533          JMP I COMERA
 2627             
 2628 03203 0000  LOGIE0, 0
 2629 03204 1055          TAD COMDB0
 2630 03205 7450          SNA
 2631 03206 5216          JMP LOGIE1
 2632 03207 7001          IAC
 2633 03210 3063          DCA IOTP0
 2634 03211 6211          DATFLD
 2635 03212 1463          TAD I IOTP0
 2636 03213 0140          AND C7700
 2637 03214 3463          DCA I IOTP0
 2638 03215 6221          CHDF
 2639 03216 4524  LOGIE1, RESDDB          /GET THE OUTPUT DDB ADDRESS
 2640 03217 5226          JMP LOGIE2
 2641 03220 7001          IAC
 2642 03221 3063          DCA IOTP0       /SET POINTER TO JOB #
 2643 03222 6211          DATFLD
 2644 03223 1463          TAD I IOTP0
 2645 03224 0140          AND C7700       /CLEAR THE JOB #
 2646 03225 3463          DCA I IOTP0
 2647 03226 6201  LOGIE2, CDF
 2648 03227 1560          TAD I JOB       /SET JOB = 0
 2649 03230 0140          AND C7700
 2650 03231 3560          DCA I JOB
 2651 03232 1053          TAD SIJOB
 2652 03233 1044          TAD JOBTBA      /SET JOBTBL ENTRY=0
 2653 03234 3054          DCA CHDFA
 2654 03235 6211          DATFLD
 2655 03236 3454          DCA I CHDFA
 2656 03237 1561          TAD I JOBDAT    /RETURN JOB STATUS BLOCKS
 2657 03240 6221          CHDF
 2658 03241 4525          RETBKS
 2659 03242 6211          DATFLD
 2660 03243 3561          DCA I JOBDAT
 2661 03244 6221          CHDF
 2662 03245 3053          DCA SIJOB
 2663 03246 5603          JMP I LOGIE0
 2664             
 2665 03247 6136  LOGUNA, UNACCT
 2666             
 2667 03250 4517  LOGINF, GETWRD
 2668 03251 0013           JOBREG+2
 2669 03252 7650          SNA CLA         /ANY PROBLEM?
 2670 03253 5257          JMP LOGIF1      /NO
 2671 03254 4203          JMS LOGIE0      /YES - UN-BUILD OUR TABLES
 2672 03255 1247          TAD LOGUNA
 2673 03256 5533          JMP I COMERA    /"UNAUTHORIZED ACCOUNT"
 2674             
 2675 03257 4500  LOGIF1, ASCOUT          /FINISH TYPING MESSAGES ON LOGIN
 2676 03260 7534  VERSMA,  VERSIM         /FIRST OUTPUT VERSION #
 2677 03261 7000          NOP
 2678 03262 1053          TAD SIJOB       /NOW OUTPUT JOB#

      /TSS/8 CONFIGURATION FOR UWM                                       Page 68


 2679 03263 4717          JMS I LOGUSR    / AND THE 'USER' INFO
 2680 03264 7000          NOP
 2681 03265 4500          ASCOUT          /A FEW SPACES
 2682 03266 3572           SPACES
 2683 03267 7000          NOP
 2684 03270 1320          TAD LOGFA2      /FUDGE COMRET TO GO TO LOGIF2 ON COMPLETION
 2685 03271 3135          DCA COMEXA      /       OF TIME EVALUATION
 2686 03272 1053          TAD SIJOB       /PUT "LOGIN" IN PRGTBL FOR THIS JOB
 2687 03273 1053          TAD SIJOB
 2688 03274 1053          TAD SIJOB       /PRGTBL INDEX IS 3*JOB#
 2689 03275 1311          TAD LOGPRG      /START OF PRGTBL-3-1
 2690 03276 3010          DCA IX1
 2691 03277 6211          DATFLD
 2692 03300 1312          TAD LOGN5A      /LO
 2693 03301 3410          DCA I IX1
 2694 03302 1313          TAD LOGN5B      /GI
 2695 03303 3410          DCA I IX1
 2696 03304 1314          TAD LOGN5C      /N
 2697 03305 3410          DCA I IX1
 2698 03306 6221          CHDF
 2699 03307 5710          JMP I .+1       /NOW GO DO TIME EVALUATION
 2700 03310 5650          TIME3
 2701             
 2702 03311 3351  LOGPRG, PRGTBL-3-1
 2703 03312 5457  LOGN5A, 5457    /LO
 2704 03313 4751  LOGN5B, 4751    /GI
 2705 03314 5600  LOGN5C, 5600    /N
 2706             
 2707 03315 1260  VERSIN, TAD VERSMA      /TYPE OUT VERSION #
 2708 03316 5535          JMP I COMEXA
 2709             
 2710 03317 4515  LOGUSR, USER0   /PRINT USER # LINE
 2711 03320 4741  LOGFA2, LOGIF2
 2712             
 2713 03321 4516  IOTSET, GETTBA
 2714 03322 0007           JOBLNK
 2715 03323 3054          DCA CHDFA
 2716 03324 1063          TAD IOTP0
 2717 03325 6211          DATFLD
 2718 03326 3454          DCA I CHDFA
 2719 03327 6221          CHDF
 2720 03330 5504          CALFIP          /EXECUTE IOT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 69


 2721 03331 6221  EXAMI1, CHDF
 2722 03332 4500          ASCOUT
 2723 03333 6162           CRLF
 2724 03334 5757          JMP I EXAMI5
 2725 03335 1066          TAD IOTP3
 2726 03336 3074          DCA NUMHO
 2727 03337 1057          TAD COMBFA
 2728 03340 3011          DCA IX2
 2729 03341 3067          DCA IOTP4
 2730 03342 1411  EXAMI3, TAD I IX2       /GET A WORD
 2731 03343 4521          OCTASC          /CONVERT IT TO ASCII
 2732 03344 0062           IOTPAR
 2733 03345 4500          ASCOUT          / AND TYPE IT
 2734 03346 0063           IOTP0
 2735 03347 5757          JMP I EXAMI5
 2736 03350 2074          ISZ NUMHO
 2737 03351 7410          SKP
 2738 03352 5757          JMP I EXAMI5
 2739 03353 4500          ASCOUT
 2740 03354 3576           SPACE
 2741 03355 5757          JMP I EXAMI5
 2742 03356 5342          JMP EXAMI3
 2743             
 2744 03357 5265  EXAMI5, DEPOS3
 2745             /
 2746             /CODE TO INITIATE THE AUTOMATIC SYSTEM RESTART
 2747 03360 0000  RBOOT,  0
 2748                     IFNZRO CPU-2    <CLA>
 2749 03361 6007          IFZERO CPU-2    <CAF>
 2750 03362 1360          TAD RBOOT
 2751 03363 6203          CIF CDF
 2752 03364 5765          JMP I .+1       /USE FIELD 0 BOOTSTRAP
 2753 03365 3400          RELOAD
 2754             
 2755 03366 0301  ASSIND, "A;"S;"S;"I;"G;"N;"E;"D;0
      03367 0323
      03370 0323
      03371 0311
      03372 0307
      03373 0316
      03374 0305
      03375 0304
      03376 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 70


 2756                     PAGE
 2757             
 2758 03400 3400  ASSTBL, .
 2759 03401 7456          -322    /R
 2760 03402 7460          -320    /P
 2761 03403 7464          -314    /L
 2762 03404 7467          -311    /I
 2763 03405 7475          -303    /C
 2764 03406 7474  ASSD,   -304    /D
 2765 03407 0000          0
 2766 03410 3321  ASSCAL, IOTSET
 2767 03411 1572  ASSBFA, -COMBUF
 2768             
 2769 03412 4531          SIERR
 2770 03413 5322          JMP ASSIGF
 2771 03414 1057  ASSIGN, TAD COMBFA
 2772 03415 4532          TEXTS
 2773 03416 3054          DCA CHDFA       /POINTER TO LAST CHAR IN AC
 2774 03417 1211          TAD ASSBFA      /ONE CHARACTER ONLY?
 2775 03420 1054          TAD CHDFA
 2776 03421 7640          SZA CLA
 2777 03422 5317          JMP ASSIG5      /NO
 2778 03423 5241          JMP ASSIG1
 2779             
 2780 03424 3064  ACSET,  DCA IOTP1       /SAVE AC IN BOTH USER'S AC AND PC
 2781 03425 4516          GETTBA
 2782 03426 0011           JOBREG
 2783 03427 3054          DCA CHDFA
 2784 03430 1064          TAD IOTP1
 2785 03431 6211          DATFLD
 2786 03432 3454          DCA I CHDFA
 2787 03433 2054          ISZ CHDFA
 2788 03434 2054          ISZ CHDFA       /NOW POINTS TO USERS AC
 2789 03435 1064          TAD IOTP1
 2790 03436 3454          DCA I CHDFA
 2791 03437 6221          CHDF
 2792 03440 5610          JMP I ASSCAL
 2793             
 2794 03441 1200  ASSIG1, TAD ASSTBL
 2795 03442 3065          DCA IOTP2
 2796 03443 2065  ASSIG2, ISZ IOTP2
 2797 03444 1465          TAD I IOTP2
 2798 03445 7450          SNA
 2799 03446 5320          JMP ASSIG4
 2800 03447 1454          TAD I CHDFA
 2801 03450 7640          SZA CLA         /MATCH?
 2802 03451 5243          JMP ASSIG2      /NO
 2803 03452 1454          TAD I CHDFA     /YES. DECTAPE?
 2804 03453 1206          TAD ASSD
 2805 03454 7640          SZA CLA
 2806 03455 5266          JMP ASSIG3      /NO
 2807 03456 4520          NUMBIN          /YES. GET UNIT #
 2808 03457 7511           -"7
 2809 03460 5275          JMP ASSIG6      /HE WANTS US TO CHOOSE FOR HIM
 2810 03461 3064  ASSIG7, DCA IOTP1
 2811 03462 1064          TAD IOTP1       /IS UNIT # .LE. 7?
 2812 03463 0041          AND C7770

      /TSS/8 CONFIGURATION FOR UWM                                       Page 71


 2813 03464 7640          SZA CLA
 2814 03465 5320          JMP ASSIG4      /NO...ERROR
 2815 03466 1200  ASSIG3, TAD ASSTBL
 2816 03467 7001          IAC
 2817 03470 7041          CIA
 2818 03471 1065          TAD IOTP2
 2819 03472 1064          TAD IOTP1
 2820 03473 1014          TAD C4000
 2821 03474 5224          JMP ACSET
 2822             
 2823 03475 1360  ASSIG6, TAD ASSDTA      /POSITION OF DTA IN DRVTBL-1
 2824 03476 3011          DCA IX2
 2825 03477 1361          TAD ASSCNT      /(-) NUMBER OF DRIVES TO CHECK
 2826 03500 3010          DCA IX1
 2827 03501 6211          DATFLD
 2828 03502 1411          TAD I IX2       /PICK UP DEVTBL ENTRY
 2829 03503 7650          SNA CLA         /AVAILABLE?
 2830 03504 5313          JMP ASSG60      /YES
 2831 03505 2010          ISZ IX1         /NO...TRY THE NEXT ONE
 2832 03506 5302          JMP .-4
 2833 03507 6221          CHDF            /NO MORE TO TRY
 2834 03510 7200  ASSIG8, CLA
 2835 03511 1356          TAD ASSNON
 2836 03512 5533          JMP I COMERA    /"NO SUCH DEVICE"
 2837             
 2838 03513 6221  ASSG60, CHDF
 2839 03514 1010          TAD IX1         /GOT ONE; UNIT # IN BITS 8-11 OF IX1
 2840 03515 0035          AND C0007
 2841 03516 5261          JMP ASSIG7
 2842             
 2843 03517 7200  ASSIG5, CLA
 2844 03520 1155  ASSIG4, TAD ILLMSG      /"ILLEGAL REQUEST"
 2845 03521 5533          JMP I COMERA
 2846             
 2847             
 2848 03522 4517  ASSIGF, GETWRD          /HOW DID WE FARE IN FIP
 2849 03523 0013           JOBREG+2
 2850 03524 7450          SNA
 2851 03525 5757          JMP I ASSG9A    /WE GOT IT; NOW TELL USER
 2852 03526 7510          SPA
 2853 03527 5310          JMP ASSIG8      /ASSIGNMENT FAILED. TOUGH!
 2854 03530 3063          DCA IOTP0
 2855 03531 1063          TAD IOTP0
 2856 03532 1354          TAD C7701
 2857 03533 7650          SNA CLA         /IS THE OWNER JOB "77"?
 2858 03534 5310          JMP ASSIG8      /YES; IT REALLY DOESN'T EXIST
 2859 03535 4500          ASCOUT
 2860 03536 6162           CRLF
 2861 03537 7000          NOP
 2862 03540 1063          TAD IOTP0       /NO; SOMEONE REAL OWNS IT
 2863 03541 4753          JMS I ASSUPN    / SO TYPE INFO ABOUT HIM
 2864 03542 7000          NOP
 2865 03543 4500          ASCOUT
 2866 03544 2741           HASITM
 2867 03545 7000          NOP
 2868 03546 4755          JMS I ASSUNA    /TYPE OUT DEVICE NAME
 2869 03547 4500          ASCOUT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 72


 2870 03550 6162           CRLF
 2871 03551 7000          NOP
 2872 03552 5535          JMP I COMEXA
 2873             
 2874 03553 4515  ASSUPN, USER0
 2875             
 2876 03554 7701  C7701,  7701    /-77
 2877 03555 1524  ASSUNA, ASSUNI
 2878 03556 6772  ASSNON, NONSUC          /NO SUCH DEVICE
 2879 03557 1505  ASSG9A, ASSIG9
 2880 03560 3246  ASSDTA, DEVTBE+5-1+DTAMIN
 2881 03561 7772  ASSCNT, -10+DTAMIN
 2882             
 2883 03562 4531          SIERR
 2884 03563 5365          JMP RELF
 2885 03564 5214  RELEAS, JMP ASSIGN
 2886             
 2887 03565 4517  RELF,   GETWRD
 2888 03566 0013           JOBREG+2
 2889 03567 7450          SNA
 2890 03570 5535          JMP I COMEXA
 2891 03571 5317          JMP ASSIG5
 2892             
 2893 03572 0240  SPACES, 240;240;240;240
      03573 0240
      03574 0240
      03575 0240
 2894 03576 0240  SPACE,  240;0
      03577 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 73


 2895                     PAGE
 2896             
 2897 03600 4531          SIERR
 2898 03601 5542          JMP I IOTEND
 2899 03602 4520  FOPEN,  NUMBIN          /FILE #
 2900 03603 7511           -"7
 2901 03604 5533          JMP I COMERA
 2902 03605 0033          AND C0003
 2903 03606 3064          DCA IOTP1
 2904 03607 4273          JMS NULLNA
 2905 03610 4501          ASCSIX
 2906 03611 6205           COMBUF-1
 2907 03612 0065           IOTP3-1
 2908 03613 4513          ENDTST
 2909 03614 5220          JMP FOPEN1
 2910 03615 4477          ACCTIN          /ACCOUNT #
 2911 03616 7410          SKP
 2912 03617 3065          DCA IOTP2
 2913 03620 4516  FOPEN1, GETTBA
 2914 03621 0007           JOBLNK
 2915 03622 4515          GETFBL
 2916 03623 5510          COMWAT          /NONE. TRY LATER
 2917 03624 3232          DCA FOPEN2
 2918 03625 6202          CIF
 2919 03626 4567          BLT
 2920 03627 6221           CHDF   /SOURCE FLD
 2921 03630 0063           IOTPAR+1       /SOURCE ADDR
 2922 03631 6211           DATFLD /DEST FLD
 2923 03632 0000  FOPEN2,  0      /DEST ADDR
 2924 03633 7770           -10    /-COUNT
 2925 03634 5504          CALFIP

      /TSS/8 CONFIGURATION FOR UWM                                       Page 74


 2926 03635 4531          SIERR
 2927 03636 5542          JMP I IOTEND
 2928 03637 4520  CLOSE,  NUMBIN          /GET THE INTERNAL FILE INDEX
 2929 03640 7511           -"7
 2930 03641 5260          JMP CLOSE2      /NO MORE NUMBERS - DO THE CLOSE
 2931 03642 0033          AND C0003
 2932 03643 7040          CMA
 2933 03644 3065          DCA IOTP2
 2934 03645 7320          CLA CLL CML
 2935 03646 7010          RAR             /NOW POSITION A BIT FOR THIS FILE I.D.
 2936 03647 2065          ISZ IOTP2
 2937 03650 5246          JMP .-2
 2938 03651 3065          DCA IOTP2
 2939 03652 1065          TAD IOTP2
 2940 03653 7040          CMA
 2941 03654 0064          AND IOTP1       /CLEAR THE BIT
 2942 03655 1065          TAD IOTP2       / AND THEN SET IT
 2943 03656 3064          DCA IOTP1
 2944 03657 5237          JMP CLOSE       /GO SEE IF HE'S GIVEN ANOTHER I.D.
 2945             
 2946 03660 1064  CLOSE2, TAD IOTP1
 2947 03661 7450          SNA             /DID HE GIVE US ANYTHING TO CLOSE?
 2948 03662 7240          CLA CMA         /NO - THEN JUST CLOSE EVERYTHING
 2949 03663 5545          JMP I SHTIOT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 75


 2950 03664 4531          SIERR
 2951 03665 5542          JMP I IOTEND
 2952 03666 4273  CREATE, JMS NULLNA
 2953 03667 4501          ASCSIX
 2954 03670 6205           COMBUF-1
 2955 03671 0063           IOTP1-1
 2956 03672 5543          JMP I LNGIOT
 2957             
 2958 03673 0000  NULLNA, 0
 2959 03674 1057          TAD COMBFA
 2960 03675 4532          TEXTS           /READ IN THE NAME
 2961 03676 7041          CIA
 2962 03677 1057          TAD COMBFA      /WAS IT A NULL NAME
 2963 03700 7650          SNA CLA
 2964 03701 5533          JMP I COMERA    /YES - ERROR!
 2965 03702 5673          JMP I NULLNA
 2966             
 2967 03703 4531          SIERR
 2968 03704 5542          JMP I IOTEND
 2969 03705 4520  RENAME, NUMBIN          /FILE #
 2970 03706 7511           -"7
 2971 03707 5533          JMP I COMERA
 2972 03710 0033          AND C0003
 2973 03711 3064          DCA IOTP1
 2974 03712 4273          JMS NULLNA
 2975 03713 4501          ASCSIX
 2976 03714 6205           COMBUF-1
 2977 03715 0064           IOTP2-1
 2978 03716 5543          JMP I LNGIOT
 2979             
 2980             /ROUTINE TO CHECK THE TYPE OF ACCOUNT THIS USER HAS
 2981             /CALL:  CHKACT
 2982             /        --     /IF ORDINARY USER
 2983             /        --     /IF SYSTEMS PERSONNEL (I.E. 00XX)
 2984             /        --     /IF MANAGERIAL ACCOUNT (I.E. 000X)
 2985             
 2986 03717 0000  CHKAC0, 0
 2987 03720 4517          GETWRD          /GET HIS ACCOUNT NUMBER
 2988 03721 0015           JOBACT
 2989 03722 0041          AND C7770
 2990 03723 7450          SNA             /MANAGER'S ACCOUNT?
 2991 03724 5337          JMP CHKAC1      /YES
 2992 03725 0140          AND C7700
 2993 03726 7640          SZA CLA         /NO - IS IT AN OPERATOR ACCOUNT?
 2994 03727 5717          JMP I CHKAC0    /NO - JUST A NORMAL USER
 2995 03730 6211          DATFLD
 2996 03731 1455          TAD I COMDB0
 2997 03732 6221          CHDF
 2998 03733 0036          AND C0037       /GET HIS KEYBOARD NUMBER
 2999 03734 7640          SZA CLA         /IS HE ON K00?
 3000 03735 5717          JMP I CHKAC0    /NO - THEN HE CAN'T PLAY OPERATOR
 3001 03736 7410          SKP             /YES - THEN HE'S AN OPERATOR
 3002 03737 2317  CHKAC1, ISZ CHKAC0
 3003 03740 2317          ISZ CHKAC0
 3004 03741 5717          JMP I CHKAC0    /ALL DONE - RETURN

      /TSS/8 CONFIGURATION FOR UWM                                       Page 76


 3005             /THIS HANDLES THE CTRL/C TYPED BY A USER WHEN HE IS
 3006             /IN 'SI' MODE - WE SET THE 'ERRFLG' SO HIS INPUT BUFFER
 3007             /WILL BE RE-CLEARED AND THEN JUST EXIT & LET THE EXIT
 3008             /ROUTINE CLEAR THE CTRL/C FLAG & PRINT A CR-LF-PERIOD.
 3009 03742 2154  SICTLC, ISZ ERRFLG
 3010 03743 5535          JMP I COMEXA    /JUST EXIT
 3011             
 3012             /THIS HANDLES THE PROGRAMMATIC 'HLT'. WE JUST CALL
 3013             /THE SUBROUTINE TO EXECUTE THE 'S' COMMAND & CLEAR
 3014             /THE 'JSHLT' BIT IN HIS JOB STATUS WORD.
 3015 03744 4354  PRGHLT, JMS SCOMND      /STOP HIS PROGRAM
 3016 03745 4500          ASCOUT          /TYPE A <CR-LF>
 3017 03746 6162           CRLF
 3018 03747 7000          NOP
 3019 03750 5751          JMP I .+1       /THEN TAKE A SPECIAL EXIT
 3020 03751 1455          COM25
 3021             
 3022             /THIS HANDLES THE 'S' COMMAND. WE SIMPLY STOP THE
 3023             /EXECUTION OF THE CURRENTLY RUNNING PROGRAM.
 3024             
 3025 03752 4354  S,      JMS SCOMND      /JUST CALL OUR 'S' SUBROUTINE
 3026 03753 5535          JMP I COMEXA    /THEN EXIT
 3027             
 3028 03754 0000  SCOMND, 0
 3029 03755 4517          GETWRD          /OK, IS HE ACTIVE ALREADY?
 3030 03756 0000           JOBSTS
 3031 03757 0370          AND SBITS       /TURN OFF HIS RUN BITS
 3032 03760 6211          DATFLD
 3033 03761 3472          DCA I IOTP7
 3034 03762 6221          CHDF
 3035             
 3036                     IFZERO TC01-1   </IF THERE IS DECTAPE, WE HAVE TO CHECK BUFFERS
 3037 03763 1053          TAD SIJOB       /GET THE JOB NUMBER
 3038 03764 6212          CIF 10
 3039 03765 4771          JMS I SRELDT    /JUST USE ROUTINE IN FIELD 1
 3040 03766 7300          CLA CLL
 3041                     >
 3042 03767 5754          JMP I SCOMND    /RETURN
 3043             
 3044 03770 3157  SBITS,  -JSRUN-JSHLT-JSPRIV-JSEXON-1
 3045                     IFZERO TC01-1   <
 3046 03771 2401  SRELDT, CNTRLC  /ROUTINE USED BY CTRL/C HANDLING
 3047                     >
 3048 03772 0312  JOBNO,  "J;"O;"B;240;0
      03773 0317
      03774 0302
      03775 0240
      03776 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 77


 3049                     PAGE
 3050             
 3051 04000 3350  STBITS, -JSRUN-JSHLT-JSEXON-7-1
 3052 04001 0200  STCLR,  JSPRIV
 3053 04002 7774  STERF,  -JSWAIT-JSERR-1
 3054             
 3055 04003 4276  START,  JMS EXONCK      /CAN'T START IF DTA IN PROGRESS
 3056 04004 4516          GETTBA          /GET PC LOCATION
 3057 04005 0011           JOBREG
 3058 04006 3065          DCA IOTP2
 3059 04007 4506          CLRPRV          /CLEAR 'PRIVILEGE' HERE (NOT FOR 'R' OR 'RUN')
 3060 04010 4513          ENDTST          /IS THERE ANY MORE TO COMMAND?
 3061 04011 5246          JMP START1      /NO - JUST RE-START PROGRAM AT SAME LOCATION
 3062 04012 4520          NUMBIN          /YES - GET THE STARTING ADDRESS
 3063 04013 7511           -"7
 3064 04014 5533          JMP I COMERA    /NOT A NUMBER - ERROR!
 3065 04015 6211  START2, DATFLD
 3066 04016 3465          DCA I IOTP2     /SET NEW PC
 3067 04017 2065          ISZ IOTP2
 3068 04020 3465          DCA I IOTP2     /ZERO LINK, MODE 'B', GT, & SC
 3069 04021 2065          ISZ IOTP2
 3070 04022 3465          DCA I IOTP2     / AND THE AC
 3071 04023 2065          ISZ IOTP2
 3072 04024 3465          DCA I IOTP2     / AND THE MQ
 3073 04025 6221          CHDF
 3074 04026 4516          GETTBA          /GET START OF JSB #0
 3075 04027 0000           JOBSTS
 3076 04030 3244          DCA START3
 3077 04031 6211          DATFLD
 3078 04032 1644          TAD I START3    /GET 'STR0'
 3079 04033 0201          AND STCLR       / AND CLEAR EVERYTHING EXCEPT THE PRIVILEGE BIT
 3080 04034 3644          DCA I START3
 3081 04035 2244          ISZ START3      /THEN SET POINTER TO 'STR1'
 3082 04036 6221          CHDF
 3083 04037 6202          CIF
 3084 04040 4567          BLT             /RESET STATUS REGISTERS
 3085 04041 6221           CHDF   /SOURCE FLD
 3086 04042 4072           LOGSR0+1
 3087 04043 6211           DATFLD /DEST FLD
 3088 04044 0000  START3,  0      /DEST ADDR
 3089 04045 7774           -4
 3090 04046 4517  START1, GETWRD          /GET STATUS REGISTERS
 3091 04047 0000           JOBSTS
 3092 04050 0200          AND STBITS      /CLEAR THE ERROR CODE
 3093 04051 1014          TAD C4000       / & SET THE 'RUN' BIT
 3094 04052 6211          DATFLD
 3095 04053 3472          DCA I IOTP7     / AND PUT IT BACK
 3096 04054 2072          ISZ IOTP7
 3097 04055 1472          TAD I IOTP7     /GET STR1
 3098 04056 0202          AND STERF       /CLEAR THE 'ERROR' BIT
 3099 04057 7001          IAC             / & SET THE 'JSWAIT'
 3100 04060 3472          DCA I IOTP7
 3101 04061 2072          ISZ IOTP7
 3102 04062 2072          ISZ IOTP7
 3103 04063 7344          CLL CLA CMA RAL /JUST BE SURE THE 'JSWAIT'
 3104 04064 0472          AND I IOTP7     / IS SET IN WAIT MASK #1
 3105 04065 7001          IAC

      /TSS/8 CONFIGURATION FOR UWM                                       Page 78


 3106 04066 3472          DCA I IOTP7
 3107 04067 6221          CHDF
 3108 04070 5535          JMP I COMEXA    /THEN JUST EXIT
 3109             
 3110             /THIS IS USED SIMPLY TO INITIALIZE THE STATUS REGISTERS
 3111             /AND WAIT MASKS IN JOB STATUS BLOCK #0.
 3112 04071 0000  LOGSR0, 0       /STR0
 3113 04072 0001          JSWAIT  /STR1
 3114 04073 0000          0       /STR2
 3115 04074 0001          JSWAIT  /WAIT MASK 1
 3116 04075 0000          0       /WAIT MASK2
 3117             
 3118             /SUBROUTINE TO CHECK THE "EXECUTE ONLY" BIT.
 3119             /THIS BIT IS SET WHENEVER THE USER HAS A
 3120             /DECTAPE TRANSFER IN PROGRESS.
 3121             
 3122 04076 0000  EXONCK, 0
 3123 04077 4517          GETWRD          /GET HIS JOB STATUS
 3124 04100 0000           JOBSTS
 3125 04101 0306          AND EXONC1
 3126 04102 7650          SNA CLA         /IS 'EXECUTE ONLY' SET?
 3127 04103 5676          JMP I EXONCK    /NO - JUST RETURN
 3128 04104 1307          TAD EXONC2
 3129 04105 5533          JMP I COMERA    /YES - "TYPE ^BS FIRST"
 3130             
 3131 04106 0020  EXONC1, JSEXON
 3132 04107 7446  EXONC2, TYCRLB

      /TSS/8 CONFIGURATION FOR UWM                                       Page 79


 3133             /  SOMEDAY 8/E VERSION SHOULD PRINT OUT EAE MODE AS A OR B
 3134             /       AND ALSO THE GT FLAG.  FOR NOW MODE IS BIT 0 OF SC.
 3135             /       0-MODE A AND 1-MODE B.
 3136             /
 3137 04110 4500  WHERE,  ASCOUT
 3138 04111 6162           CRLF
 3139 04112 5535          JMP I COMEXA
 3140 04113 4315          JMS WHEPRT
 3141 04114 5535          JMP I COMEXA
 3142             
 3143 04115 0000  WHEPRT, 0
 3144 04116 1361          TAD WHEVEC
 3145 04117 3011          DCA IX2
 3146 04120 1411  WHERE1, TAD I IX2       /GET NEXT ITEM
 3147 04121 7450          SNA             /END OF LIST?
 3148 04122 5715          JMP I WHEPRT    /YES - RETURN
 3149 04123 3327          DCA WHERE2
 3150 04124 1411          TAD I IX2
 3151 04125 3332          DCA WHERE3
 3152 04126 4500          ASCOUT          /TYPE THE LABEL
 3153 04127 0000  WHERE2,  0
 3154 04130 5715          JMP I WHEPRT    /NO ROOM - JUST RETURN
 3155 04131 4517          GETWRD          /NOW GET THE WORD
 3156 04132 0000  WHERE3,  0
 3157 04133 3332          DCA WHERE3
 3158 04134 1327          TAD WHERE2
 3159 04135 7041          CIA
 3160 04136 1366          TAD WHEVL
 3161 04137 7640          SZA CLA         /IS IT THE LINK?
 3162 04140 5352          JMP WHERE5      /NO
 3163 04141 1332          TAD WHERE3      /YES - JUST GET ONE BIT
 3164 04142 7106          CLL RTL         / AWAY FROM MODE, GT, & SC
 3165 04143 7204          CLA RAL
 3166 04144 4521          OCTASC          /CONVERT IT TO ASCII
 3167 04145 6205           COMBUF-1
 3168 04146 4500          ASCOUT          / AND TYPE IT
 3169 04147 6211           COMBUF+3
 3170 04150 5715          JMP I WHEPRT    /NO ROOM
 3171 04151 5320          JMP WHERE1      /THEN GO GET THE NEXT
 3172 04152 1332  WHERE5, TAD WHERE3      /RE-GET THE VALUE
 3173 04153 4521          OCTASC          / AND CONVERT IT TO ASCII
 3174 04154 6205           COMBUF-1
 3175 04155 4500          ASCOUT          / AND TYPE IT
 3176 04156 6206           COMBUF
 3177 04157 5715          JMP I WHEPRT
 3178 04160 5320          JMP WHERE1      /THEN CONTINUE
 3179             
 3180 04161 4161  WHEVEC, .
 3181 04162 6750          WHERPC
 3182 04163 0011          JOBREG
 3183 04164 6754          WHERAC
 3184 04165 0013          JOBREG+2
 3185 04166 6761  WHEVL,  WHERLK
 3186 04167 0012          JOBREG+1
 3187 04170 6765          WHERSW
 3188 04171 0010          JOBSWR
 3189                     IFNZRO MQREG    <

      /TSS/8 CONFIGURATION FOR UWM                                       Page 80


 3190 04172 1560          WHERMQ
 3191 04173 0014          JOBEAE  >
 3192                     IFNZRO EAE      <
 3193                     WHERSC
 3194                     JOBREG+1        >
 3195 04174 0000          0

      /TSS/8 CONFIGURATION FOR UWM                                       Page 81


 3196                     PAGE
 3197             /
 3198             /ROUTINE TO FORCE A STRING INTO AN INPUT BUFFER
 3199             /USER MUST BE LOGGED-IN ON A SYSTEM ACCOUNT.
 3200             
 3201 04200 4505  FORSE,  CHKACT          /CHECK TYPE OF USER
 3202 04201 5533          JMP I COMERA    /ORDINARY USER - ERROR!
 3203 04202 1323          TAD FORDIF      /SYSTEM OPERATOR - ALLOW ONLY ACTUAL TTY'S
 3204 04203 1141          TAD DEVTND      /MANAGER - ALLOW ANY CONFIGURED LINE
 3205 04204 3064          DCA FORMX       /SAVE THE MAXIMUM ALLOWED LINE #
 3206 04205 4520          NUMBIN          /GET CONSOLE #
 3207 04206 7511           -"7
 3208 04207 5533          JMP I COMERA    /BAD CONVERSION, QUIT
 3209 04210 6201          CDF
 3210 04211 3405          DCA I SOURCA    /SAVE THE SOURCE FOR GETDDB & GIR
 3211 04212 1405          TAD I SOURCA
 3212 04213 7710          SPA CLA         /IS IT CLOSE?
 3213 04214 5533          JMP I COMERA    /NO - ERROR!!
 3214 04215 1405          TAD I SOURCA
 3215 04216 7104          CLL RAL
 3216 04217 1163          TAD DEVTBA      /GET THE DEVTBL POINTER
 3217 04220 3312          DCA FORDEV      / FOR THE INPUT DDB
 3218 04221 1312          TAD FORDEV
 3219 04222 1064          TAD FORMX
 3220 04223 7700          SMA CLA         /IS IT A LEGAL KEYBOARD # ?
 3221 04224 5533          JMP I COMERA    /NO
 3222 04225 6211          DATFLD
 3223 04226 1712          TAD I FORDEV
 3224 04227 6221          CHDF
 3225 04230 7640          SZA CLA         /DOES IT ALREADY HAVE AN INPUT DDB?
 3226 04231 5245          JMP FOR1        /YES
 3227 04232 1312          TAD FORDEV      /NO; GET ONE
 3228 04233 6202          CIF
 3229 04234 4572          GETDDB
 3230 04235 5533          JMP I COMERA    /NONE TO GET- NEVER HAPPENS
 3231 04236 6211          DATFLD
 3232 04237 1712          TAD I FORDEV    /GET THE DDB LOCATION
 3233 04240 3054          DCA CHDFA
 3234 04241 1454          TAD I CHDFA
 3235 04242 1040          TAD COMDSI      / & SET THE 'DSI' BIT
 3236 04243 3454          DCA I CHDFA
 3237 04244 5267          JMP FOR2        / (SAVE A WHOLE WORD THIS WAY)
 3238             /
 3239             /HERE WE CHECK TO PREVENT A MERE OPERATOR FROM FORCING
 3240             /A MANAGER'S ACCOUNT NUMBER.
 3241 04245 4505  FOR1,   CHKACT          /CHECK OUR OWN ACCOUNT FIRST
 3242 04246 4522          REBOOT
 3243 04247 7410          SKP             /OPERATOR - CHECK THE FORCEE
 3244 04250 5271          JMP FOR3        /MANAGER - HE CAN FORCE ANYONE
 3245 04251 6211          DATFLD
 3246 04252 1712          TAD I FORDEV    /GET THE DDB
 3247 04253 3010          DCA IX1
 3248 04254 1410          TAD I IX1       /GET THE JOB NUMBER
 3249 04255 4530          SETJOB          / AND SET UP FOR OUR CHECK
 3250 04256 5267          JMP FOR2        /NO JOB ACTIVE
 3251 04257 4505          CHKACT          /NOW CHECK THE OWNER'S ACCOUNT
 3252 04260 7000          NOP

      /TSS/8 CONFIGURATION FOR UWM                                       Page 82


 3253 04261 5267          JMP FOR2        /OK - HE'S MERELY MORTAL
 3254 04262 4530          SETJOB          /BAD - RESET 'JOBDAT'
 3255 04263 4522          REBOOT
 3256 04264 1266          TAD .+2
 3257 04265 5533          JMP I COMERA    /HE'S TRYING TO FORCE A MANAGER
 3258 04266 7467          FORMSG
 3259             
 3260 04267 4530  FOR2,   SETJOB          /RESTORE 'JOBDAT'
 3261 04270 4522          REBOOT
 3262 04271 4404  FOR3,   SKIP            /IGNORE ANY SPACES
 3263 04272 5535          JMP I COMEXA
 3264 04273 1073          TAD CHAR
 3265 04274 1325  FOR4,   TAD FORMSL
 3266 04275 7640          SZA CLA         /IS IT A SLASH (INDICATING CTRL)?
 3267 04276 5304          JMP FOR5        /NO
 3268 04277 4507          COMGET          /YES - GET THE NEXT CHARACTER
 3269 04300 5535          JMP I COMEXA    / (ALSO SHOULD NEVER HAPPEN)
 3270 04301 4724          JMS I FORFLC    /CONVERT THIS TO UPPER-CASE
 3271 04302 0322          AND FORCTL      / AND MAKE IT A CTRL-CHARACTER
 3272 04303 7410          SKP
 3273 04304 1073  FOR5,   TAD CHAR
 3274 04305 6201          CDF
 3275 04306 3431          DCA I TTCHAR    /STORE THE CHARACTER FOR GIR
 3276 04307 6221          CHDF
 3277 04310 6202          CIF
 3278 04311 4726          GIR             /NOW PROCESS THE CHARACTER
 3279 04312 0000  FORDEV,  0
 3280 04313 5533          JMP I COMERA    /NO ROOM - TAKE ERROR EXIT
 3281 04314 7326          CLA CLL CML RTL
 3282 04315 4513          ENDTST          /LINE TERMINATOR?
 3283 04316 5535          JMP I COMEXA    /YES - WE'RE DONE
 3284 04317 4507          COMGET          /NO - GET THE NEXT CHARACTER
 3285 04320 5535          JMP I COMEXA    / (SHOULD NEVER HAPPEN)
 3286 04321 5274          JMP FOR4
 3287             
 3288 04322 7677  FORCTL, -100-1
 3289 04323 0014  FORDIF, NULINE+NULINE-FRCMAX-FRCMAX     /FUDGE FACTOR FOR ACTUAL TTY'S
 3290 04324 1646  FORFLC, FIXLC
 3291 04325 7521  FORMSL, -"/     /INDICATES NEXT CHARACTER SHOULD BE CTRL
 3292       0064  FORMX=  IOTP1
 3293       4726  GIR=    JMS I .
 3294 04326 6013          GIR00

      /TSS/8 CONFIGURATION FOR UWM                                       Page 83


 3295             /ROUTINE TO TYPE A MESSAGE ON EVERYBODY'S CONSOLE AT ONCE
 3296             /THE USER MUST BE LOGGED-IN ON A SYSTEM ACCOUNT.
 3297             
 3298 04327 4505  BROAD,  CHKACT          /CHECK THE TYPE OF USER
 3299 04330 5533          JMP I COMERA    /MERE MORTAL - ERROR!!
 3300 04331 7000          NOP             /OPERATOR ACCOUNT
 3301 04332 1367          TAD BROBRK
 3302 04333 3064          DCA IOTP1       /POINTS TO END OF BUFFER
 3303 04334 4404          SKIP
 3304 04335 5351          JMP BROAD2      /NO CHARACTERS LEFT
 3305 04336 1073          TAD CHAR        /SAVE CHARACTER IN BUFFER
 3306 04337 3464  BROAD1, DCA I IOTP1
 3307 04340 2064          ISZ IOTP1       /READY FOR NEXT CHARACTER
 3308 04341 7410          SKP
 3309 04342 4522          REBOOT          /ERROR - 'VERBRK' BUFFER NOT LARGE ENOUGH *****
 3310 04343 7326          STL CLA RTL     /AC=2
 3311 04344 4513          ENDTST          /LOOK FOR CR, LF, FF, VT
 3312 04345 5351          JMP BROAD2      /FOUND ONE OF THE ABOVE
 3313 04346 4507          COMGET          /GET ANOTHER CHARACTER
 3314 04347 5351          JMP BROAD2      /NONE
 3315 04350 5337          JMP BROAD1      /AND LOOK AT IT
 3316             
 3317 04351 3464  BROAD2, DCA I IOTP1     /END THE STRING
 3318 04352 1376          TAD BROLN       /INITIALIZE FOR ALL CONSOLES
 3319 04353 3066          DCA IOTP3
 3320 04354 1163          TAD DEVTBA      /GET POINTER TO FIRST OUTPUT DDB
 3321 04355 3010          DCA IX1
 3322             
 3323 04356 6211  BROAD3, DATFLD
 3324 04357 1410          TAD I IX1       /GET DDB ADDRESS
 3325 04360 6221          CHDF
 3326 04361 7450          SNA             /DOES IT EXIST
 3327 04362 5372          JMP BROAD4      /NO; SO DON'T BOTHER
 3328 04363 3065          DCA IOTP2       /SAVE DDB ADDRESS FOR TALK5
 3329 04364 4777          JMS I BROTAK    /PUSH STRING CR-LF STARS THRU
 3330 04365 5760           STARS
 3331 04366 4777          JMS I BROTAK    /OUTPUT MESSAGE
 3332 04367 7650  BROBRK,  VERBRK
 3333 04370 4777          JMS I BROTAK    /CR-LF
 3334 04371 6162           CRLF
 3335 04372 2010  BROAD4, ISZ IX1         /ON TO NEXT CONSOLE
 3336 04373 2066          ISZ IOTP3       /ARE WE DONE?
 3337 04374 5356          JMP BROAD3      /NO, CONTINUE
 3338 04375 5535          JMP I COMEXA    /YES, GO AWAY
 3339             
 3340 04376 7766  BROLN,  -BRDMAX-1       /ONLY BROADCAST TO EXISTING TTY'S
 3341 04377 5533  BROTAK, TALK5

      /TSS/8 CONFIGURATION FOR UWM                                       Page 84


 3342                     PAGE
 3343             
 3344             /THIS HANDLES THE 'F' COMMAND - WE PRINT OUT SOME
 3345             /INFORMATION ABOUT THE FILE OPEN ON AN INTERNAL FILE #.
 3346 04400 4531          SIERR
 3347 04401 5210          JMP F2
 3348 04402 4520  F,      NUMBIN          /INTERNAL FILE #
 3349 04403 7511           -"7
 3350 04404 5533          JMP I COMERA    /NO NUMBER - ERROR!
 3351 04405 0033          AND C0003
 3352 04406 3064          DCA IOTP1
 3353 04407 5543          JMP I LNGIOT
 3354             
 3355 04410 4527  F2,     RETPAR
 3356 04411 4500          ASCOUT
 3357 04412 6162           CRLF
 3358 04413 7000          NOP
 3359 04414 1064          TAD IOTP1       /ACCT #
 3360 04415 7450          SNA
 3361 04416 5535          JMP I COMEXA    /FILE NOT OPEN
 3362 04417 1144          TAD P7777
 3363 04420 7640          SZA CLA         /IS THIS A UFD?
 3364 04421 5225          JMP F3          /NOPE
 3365 04422 1065          TAD IOTP2       /YES - TYPE "NNNN <UFD>"
 3366 04423 3064          DCA IOTP1
 3367 04424 1272          TAD FMSGAD
 3368 04425 1271  F3,     TAD FIOT2       /SET SIXBIT MESSAGE ADDRESS
 3369 04426 3242          DCA F4
 3370 04427 1063          TAD IOTP0       /GET THE FIRST 'FINF' WORD
 3371 04430 7700          SMA CLA         /WAS THE FILE EXCLUSIVELY ASSIGNED?
 3372 04431 5235          JMP .+4         /NO
 3373 04432 4500          ASCOUT          /YES - PRINT "X "
 3374 04433 4477           FXMSG
 3375 04434 7000          NOP
 3376 04435 1064          TAD IOTP1
 3377 04436 4521          OCTASC
 3378 04437 6205           COMBUF-1
 3379 04440 4260          JMS FOUT        /TYPE THE ACCOUNT NUMBER
 3380 04441 4673          JMS I FSIXAS    /FILE NAME OR "<UFD>"
 3381 04442 0000  F4,      0              / (6-BIT MESSAGE ADDRESS)
 3382 04443 6205           COMBUF-1
 3383 04444 4260          JMS FOUT        / & TYPE IT
 3384 04445 1070          TAD IOTP5
 3385 04446 4521          OCTASC
 3386 04447 6205           COMBUF-1
 3387 04450 4260          JMS FOUT        /TYPE THE EXTENSION & PROTECTION
 3388 04451 1071          TAD IOTP6
 3389 04452 4670          JMS I FDECOU    /CONVERT THE SIZE TO DECIMAL ASCII
 3390 04453 6205           COMBUF-1
 3391 04454 4500          ASCOUT          / AND TYPE IT
 3392 04455 6206           COMBUF
 3393 04456 5535          JMP I COMEXA
 3394 04457 5535          JMP I COMEXA    / & EXIT
 3395             
 3396             /ROUTINE TO TYPE 'COMBUF' FOLLOWED BY A SPACE.
 3397 04460 0000  FOUT,   0
 3398 04461 4500          ASCOUT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 85


 3399 04462 6206           COMBUF
 3400 04463 5660          JMP I FOUT
 3401 04464 4500          ASCOUT
 3402 04465 3576           SPACE
 3403 04466 5660          JMP I FOUT
 3404 04467 5660          JMP I FOUT
 3405             
 3406 04470 6020  FDECOU, DECOUT
 3407 04471 0065  FIOT2,  IOTP2
 3408 04472 4407  FMSGAD, FMSG-IOTP2
 3409 04473 2604  FSIXAS, SIXASC
 3410 04474 3465  FMSG,   3465; 4644; 3600        / "<UFD>" IN SIX-BIT
      04475 4644
      04476 3600
 3411 04477 0330  FXMSG,  "X;" ;0
      04500 0240
      04501 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 86


 3412             /'USER' COMMAND - WE TYPE OUT THIS (OR ANY) JOB'S
 3413             /JOB NUMBER AND ITS KEYBOARD NUMBER.
 3414             
 3415       4460  USEJOB= FOUT
 3416             
 3417 04502 4500  USER,   ASCOUT          /TELL USER WHERE HE IS
 3418 04503 6162           CRLF
 3419 04504 5535          JMP I COMEXA    /NO ROOM, SO SKIP IT
 3420 04505 4513          ENDTST          /ANY MORE TO COMMAND?
 3421 04506 5312          JMP .+4         /NO - ASSUME THIS JOB
 3422 04507 4520          NUMBIN          /NO; WHAT JOB THEN?
 3423 04510 7511           -"7            /OCTAL JOB #
 3424 04511 5533          JMP I COMERA    /ILLEGAL NUMBER - ERROR!
 3425 04512 4315          JMS USER0       /PRINT THE INFO
 3426 04513 5533          JMP I COMERA    /BAD NUMBER - ERROR
 3427 04514 5535          JMP I COMEXA    / AND EXIT
 3428             
 3429             /ROUTINE TO PRINT THE 'USER' COMMAND INFO.
 3430 04515 0000  USER0,  0
 3431 04516 3260          DCA USEJOB
 3432 04517 1260          TAD USEJOB
 3433 04520 1365          TAD USEMAX      /-HIGHEST JOB # - 1
 3434 04521 7700          SMA CLA         /LEGAL JOB NUMBER?
 3435 04522 5715          JMP I USER0     /NO - TAKE ERROR RETURN
 3436 04523 2315          ISZ USER0
 3437 04524 1260          TAD USEJOB
 3438 04525 4530          SETJOB          /SET UP 'JOBDAT'
 3439 04526 5362          JMP USER1       /NOT LOGGED IN - SAY NOTHING
 3440 04527 1072          TAD IOTP7       /GET THE JOB # SET BY 'SETJOB'
 3441 04530 3260          DCA USEJOB      / AND MAKE SURE WE USE THE SAME ONE
 3442 04531 4500          ASCOUT          /TYPE "JOB "
 3443 04532 3772           JOBNO
 3444 04533 5362          JMP USER1       /NO ROOM - JUST EXIT
 3445 04534 1260          TAD USEJOB
 3446 04535 4366          JMS USRPR       /PRINT 2 OCTAL DIGITS
 3447 04536 4500          ASCOUT
 3448 04537 7434           LBRACK
 3449 04540 5362          JMP USER1
 3450 04541 4517          GETWRD          /GET THE ACCOUNT NUMBER
 3451 04542 0015           JOBACT
 3452 04543 4521          OCTASC          / CONVERT IT TO ASCII
 3453 04544 6205           COMBUF-1
 3454 04545 4500          ASCOUT          / AND TYPE IT
 3455 04546 6206           COMBUF
 3456 04547 5362          JMP USER1
 3457 04550 4500          ASCOUT
 3458 04551 7437           RBRACK
 3459 04552 5362          JMP USER1
 3460 04553 1260          TAD USEJOB
 3461 04554 1151          TAD TTYTBA      /POINTS TO ENTRY IN TTYTBL
 3462 04555 3064          DCA IOTP1
 3463 04556 6211          DATFLD
 3464 04557 1464          TAD I IOTP1     /GET TTY #
 3465 04560 6221          CHDF
 3466 04561 4366          JMS USRPR       /TYPE THE 2 DIGIT KEYBOARD NUMBER
 3467 04562 4530  USER1,  SETJOB          /RESTORE 'JOBDAT'
 3468 04563 7000          NOP

      /TSS/8 CONFIGURATION FOR UWM                                       Page 87


 3469 04564 5715          JMP I USER0     / & RETURN
 3470             
 3471 04565 7753  USEMAX, -JOBMAX-1
 3472             
 3473             /ROUTINE TO TYPE 2-DIGIT OCTAL NUMBER FROM THE AC.
 3474 04566 0000  USRPR,  0
 3475 04567 0036          AND C0037
 3476 04570 4521          OCTASC
 3477 04571 6205           COMBUF-1       /SNEAKY WAY TO SUPPRESS LEADING 00
 3478 04572 4500          ASCOUT
 3479 04573 6210           COMBUF+2
 3480 04574 7000          NOP
 3481 04575 5766          JMP I USRPR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 88


 3482                     PAGE
 3483             
 3484             /THIS CODE HANDLES THE 'R' AND 'RUN' COMMANDS.
 3485             /CAUTION SHOULD BE EXERCISED WHEN CHANGING THIS CODE AS
 3486             /IT IS ENTERED BY THOSE COMMANDS WHICH LOAD AND START
 3487             /PARTICULAR SYSTEM PROGRAMS. ALSO, THIS CODE IS TIED CLOSELY
 3488             /TO THE 'LOAD', 'SAVE', AND 'START' COMMAND HANDLERS.
 3489 04600 4531  RERR,   SIERR
 3490 04601 5533          JMP I COMERA
 3491             
 3492             /THIS HANDLES THE "RUN" COMMAND.
 3493 04602 5200          JMP RERR
 3494 04603 5225          JMP R1
 3495 04604 5605  RUN,    JMP I .+1
 3496 04605 5010          LOAD
 3497             
 3498             /THIS HANDLES THE "R" COMMAND.
 3499 04606 5200          JMP RERR
 3500 04607 5225          JMP R1
 3501 04610 1317  R,      TAD RLIBAC
 3502 04611 5612          JMP I .+1
 3503 04612 5012          SAVE1
 3504             
 3505             /THIS HANDLES THE AUTOMATIC "R" PERFORMED FOR
 3506             /AN UNRECOGNIZED SYSTEM COMMAND.
 3507 04613 5200          JMP RERR
 3508 04614 5221          JMP AUTOR2
 3509 04615 1317  AUTOR,  TAD RLIBAC
 3510 04616 3065          DCA IOTP2       /SET FOR THE SYSTEM LIBRARY
 3511 04617 5620          JMP I .+1       / AND GO OPEN THE FILE
 3512 04620 5020          AUTOR1
 3513             
 3514 04621 4517  AUTOR2, GETWRD          /GET THE RETURNED AC
 3515 04622 0013           JOBREG+2
 3516 04623 7640          SZA CLA         /GOOD 'OPEN'?
 3517 04624 5533          JMP I COMERA    /NO - JUST ECHO THE COMMAND
 3518             
 3519 04625 3345  R1,     DCA RSTART      /SAVE START-ADDRESS (USUALLY ZERO)
 3520 04626 4517          GETWRD          /RETURN FROM OPEN
 3521 04627 0013           JOBREG+2
 3522 04630 7640          SZA CLA         /GOOD 'OPEN' STATUS?
 3523 04631 5542          JMP I IOTEND    /NO - PRINT ERROR MESSAGE
 3524 04632 4516          GETTBA
 3525 04633 0005           JOBSRA
 3526 04634 3072          DCA IOTP7       /SET A POINTER TO THE RESTART-ADDRESS
 3527 04635 1345          TAD RSTART
 3528 04636 6211          DATFLD
 3529 04637 3472          DCA I IOTP7     / AND INITIALIZE IT TO THE START-ADDR.
 3530 04640 6221          CHDF
 3531 04641 4516          GETTBA
 3532 04642 0007           JOBLNK
 3533 04643 4515          GETFBL          /NOW LINK ON A PARAMETER BLOCK
 3534 04644 5510          COMWAT
 3535 04645 3713          DCA I R4A
 3536 04646 4516          GETTBA
 3537 04647 0011           JOBREG
 3538 04650 3065          DCA IOTP2       /SET THE POINTER FOR 'START' CODE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 89


 3539 04651 1314          TAD R6A
 3540 04652 3114          DCA EXITA       /FUDGE EXIT ADDRESS
 3541 04653 1345          TAD RSTART      /NOW GET THE PROGRAM START-ADDRESS
 3542 04654 5655          JMP I .+1       / AND RUN THROUGH 'START' CODE
 3543 04655 4015          START2
 3544             
 3545             /WE RETURN FROM 'START' CODE HERE - JOB STATUS AND WAIT
 3546             /REGISTERS HAVE BEEN SET, ALONG WITH THE AC, PC, & MQ.
 3547 04656 4517  R6,     GETWRD          /GET THE STR1 STATUS WORD
 3548 04657 0001           JOBSTS+1
 3549 04660 0037          AND RJSDEL      / AND SAVE THE 'JSDEL' FLAG
 3550 04661 6211          DATFLD          /BUT CLEAR JSWAIT SO WE WON'T START RUNNING
 3551 04662 3472          DCA I IOTP7     / IF WE HAVE TO LOAD HIS SWAP AREA
 3552 04663 1033          TAD C0003
 3553 04664 1014          TAD C4000
 3554 04665 3065          DCA IOTP2       /FILE 3 & "RUN WHEN RDY" BIT
 3555 04666 7240          STA
 3556 04667 1345          TAD RSTART
 3557 04670 3067          DCA IOTP4       /CORE ADDRESS - 1
 3558 04671 1316          TAD RRFILE
 3559 04672 3063          DCA IOTP0       /SET THE 'RFILE' IOT
 3560 04673 1345          TAD RSTART
 3561 04674 7640          SZA CLA         /IS THE START-ADDRESS ZERO?
 3562 04675 5720          JMP I RLOAD4    /NO - GO LOAD HIS SWAP-AREA IF NEEDED
 3563 04676 4721          JMS I RLSA      /GO BUILD FILE-TRANSFER BLOCK
 3564 04677 1053          TAD SIJOB
 3565 04700 4511          CORES           /SEARCH FOR THE JOB IN CORE
 3566 04701 7640          SZA CLA         /IS THIS JOB ALREADY IN CORE?
 3567 04702 5307          JMP R8          /YES
 3568 04703 4502          ASSCOR          /NO - ASSIGN IT OUR FIELD
 3569 04704 6203  R7,     CIF CDF
 3570 04705 5706          JMP I .+1       /NOW GO TO FIELD 0 TO READ IN THE FILE
 3571 04706 3604          READFI
 3572             
 3573 04707 1315  R8,     TAD R6B         /RESTORE EXIT
 3574 04710 3114          DCA EXITA
 3575 04711 4523          RELCOR
 3576 04712 5304          JMP R7
 3577             
 3578 04713 5156  R4A,    R4
 3579 04714 4656  R6A,    R6
 3580 04715 0242  R6B,    COMEXT
 3581                     IFNZRO JSDEL-100        <GLITCH>
 3582       0037  RJSDEL= C0100   /JSDEL
 3583 04716 6603  RRFILE, RFILE
 3584 04717 0002  RLIBAC, LIBACT
 3585 04720 5077  RLOAD4, LOAD4
 3586 04721 5131  RLSA,   RLS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 90


 3587             /'SYSTAT' COMMAND - SAME AS TYPING 'R SYSTAT'.
 3588             
 3589 04722 5200          JMP RERR
 3590 04723 5225          JMP R1
 3591 04724 1340  SYSTAT, TAD SYSM        /SYSTAT COMMAND
 3592 04725 3010          DCA IX1         /POINTER TO FILE NAME
 3593 04726 1410          TAD I IX1       /PUT "SYSTAT" OR "LOGOUT" IN IOTP3,4,5
 3594 04727 3066          DCA IOTP3
 3595 04730 1410          TAD I IX1
 3596 04731 3067          DCA IOTP4
 3597 04732 1410          TAD I IX1
 3598 04733 3070          DCA IOTP5
 3599 04734 1317          TAD RLIBAC
 3600 04735 3065          DCA IOTP2
 3601 04736 5737          JMP I .+1
 3602 04737 2717          SAVNAM          /GO SAVE NAME; THEN OPEN FILE
 3603             
 3604 04740 5167  SYSM,   SYSMA-1
 3605             
 3606             /WE COME HERE TO FINISH UP THE 'LOGIN' - PRINT THE LAST
 3607             /OF THE SYSTEM INTRODUCTION & PREPARE TO START
 3608             /THE PROGRAM 'LOGIN' TO PRINT A MESSAGE-OF-THE-DAY.
 3609 04741 3345  LOGIF2, DCA .+4         /SAVE THE POINTER TO THE TIME MESSAGE
 3610 04742 1136          TAD COMEXP
 3611 04743 3135          DCA COMEXA      / AND RESTORE THE 'COMRET' POINTER
 3612 04744 4500          ASCOUT          /TYPE THE TIME
 3613 04745 0000  RSTART,  0
 3614 04746 7000  C7000,  NOP
 3615 04747 1073          TAD CHAR
 3616 04750 1363          TAD NSEMI
 3617 04751 7650          SNA CLA         /DID THE COMMAND END WITH A SEMI-COLON?
 3618 04752 5535          JMP I COMEXA    /YES - JUST EXIT
 3619             
 3620             /CODE TO FUDGE POINTERS TO START PROGRAM 'LOGIN'.
 3621             /WE SET UP 'SI' POINTERS TO THINK IT'S DOING 'SYSTAT'
 3622 04753 1362          TAD LOGPTR
 3623 04754 3340          DCA SYSM        /STORE POINTER TO 'LOGIN'
 3624 04755 1361          TAD CL40A       /FUDGE 'COMLNK'
 3625 04756 3070          DCA COMLNK
 3626 04757 5760          JMP I .+1       /THEN RE-ENTER 'SI'
 3627 04760 1010          COM91
 3628             
 3629 04761 6644  CL40A,  CL40    /COMMAND PACKET FOR 'SYSTAT'
 3630 04762 3311  LOGPTR, LOGN5A-1        /POINTER TO "LOGIN"
 3631 04763 7505  NSEMI,  -";
 3632             
 3633             /THIS HANDLES THE 'LOGOUT' COMMAND - ALL WE DO
 3634             /IS LOAD AND START THE LIBRARY PROGRAM 'LOGOUT'. IT
 3635             /DELETES THE USER'S TEMPORARY FILES & THEN LOGS HIM
 3636             /OUT USING THE 'LOGOUT' IOT.
 3637             
 3638 04764 5200          JMP RERR        /SYSTEM ERROR DURING 'OPEN'
 3639 04765 5225          JMP R1
 3640 04766 1370  LOGOUT, TAD LOGMA       /GET THE POINTER TO "LOGOUT" STRING
 3641 04767 5325          JMP SYSTAT+1    / & SHARE 'SYSTAT' CODE
 3642             
 3643 04770 5161  LOGMA,  LOGOMA-1

      /TSS/8 CONFIGURATION FOR UWM                                       Page 91


 3644             
 3645             /THIS HANDLES THE 'ODT' COMMAND; WE LOAD "ODTHI" AND START
 3646             /IT AT LOCATION 7000.
 3647 04771 5200          JMP RERR
 3648 04772 5376          JMP ODT1
 3649 04773 1375  ODT,    TAD .+2
 3650 04774 5325          JMP SYSTAT+1    /GO OPEN THE "ODTHI"
 3651 04775 5164          ODTMA-1
 3652             
 3653 04776 1346  ODT1,   TAD C7000       /GET 'ODTHI'S START-ADDRESS
 3654 04777 5225          JMP R1          / AND START IT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 92


 3655                     PAGE
 3656             /THIS HANDLES THE 'SAVE' COMMAND; NOTE THAT THIS COMMAND
 3657             /SHARES MUCH OF THE 'LOAD' COMMAND HANDLER.
 3658 05000 5713          JMP I LOADER    /ERROR DURING 'OPEN'
 3659 05001 5203          JMP SAVE2       /'OPEN' WORKED
 3660 05002 5210  SAVE,   JMP SAVE3       /GO PICK UP FILENAME & DO 'OPEN'
 3661             
 3662 05003 1205  SAVE2,  TAD SWFILE      /PICK UP THE 'WFILE' IOT
 3663 05004 5226          JMP LOAD2       / AND SHARE MORE 'LOAD' CODE
 3664 05005 6605  SWFILE, WFILE
 3665             
 3666             /THIS HANDLES THE 'LOAD' COMMAND; NOTE THAT MUCH OF THIS
 3667             /CODE IS SHARED BY OTHER COMMANDS.
 3668 05006 5713          JMP I LOADER
 3669 05007 5225          JMP LOAD1
 3670             LOAD,
 3671 05010 4477  SAVE3,  ACCTIN
 3672 05011 7410          SKP
 3673 05012 3065  SAVE1,  DCA IOTP2       /ACCOUNT #
 3674 05013 4513          ENDTST          /ANY MORE TO COMMAND?
 3675 05014 5533          JMP I COMERA    /NO - ERROR
 3676 05015 1057          TAD COMBFA
 3677 05016 4532          TEXTS           /READ IN THE FILENAME
 3678 05017 7200          CLA
 3679 05020 4501  AUTOR1, ASCSIX          /CONVERT THE FILENAME TO SIX-BIT
 3680 05021 6205           COMBUF-1
 3681 05022 0065           IOTP3-1
 3682 05023 5624          JMP I .+1       / AND SAVE THE PROGRAM NAME IN PRGTBL
 3683 05024 2717          SAVNAM
 3684             
 3685 05025 1315  LOAD1,  TAD LRFILE
 3686 05026 3063  LOAD2,  DCA IOTP0
 3687 05027 4517          GETWRD          /ERROR?
 3688 05030 0013           JOBREG+2
 3689 05031 7640          SZA CLA
 3690 05032 5542          JMP I IOTEND    /YES
 3691 05033 4516          GETTBA          /NO. SET UP RFILE OR WFILE
 3692 05034 0007           JOBLNK
 3693 05035 4515          GETFBL
 3694 05036 5510          COMWAT
 3695 05037 3356          DCA R4
 3696 05040 7132          CLL CML RTR     /AC=2000
 3697 05041 1033          TAD C0003       /FILE #
 3698 05042 3065          DCA IOTP2
 3699 05043 7240          STA             /DEFAULT CORE ADDRESS
 3700 05044 3067          DCA IOTP4
 3701 05045 4513          ENDTST          /ANY PARAMETERS?
 3702 05046 5274          JMP LOAD3       /NO
 3703 05047 4520          NUMBIN          /YES. FILE ADDRESS O2 CAN BE 6 DIGITS!
 3704 05050 7511           -"7
 3705 05051 5274          JMP LOAD3
 3706 05052 3070          DCA IOTP5       /LEAST SIGN. 12 BITS
 3707 05053 1074          TAD NUMHO
 3708 05054 3064          DCA IOTP1       /HIGH ORDER
 3709 05055 4513          ENDTST
 3710 05056 5274          JMP LOAD3
 3711 05057 4520          NUMBIN          /STARTING CORE ADDRESS

      /TSS/8 CONFIGURATION FOR UWM                                       Page 93


 3712 05060 7511           -"7
 3713 05061 5274          JMP LOAD3
 3714 05062 1067          TAD IOTP4
 3715 05063 3067          DCA IOTP4
 3716 05064 4513          ENDTST
 3717 05065 5274          JMP LOAD3
 3718 05066 4520          NUMBIN          /LAST CORE ADDRESS
 3719 05067 7511           -"7
 3720 05070 7240          CLA CMA
 3721 05071 7041          CIA
 3722 05072 1067          TAD IOTP4
 3723 05073 3066          DCA IOTP3       /WORD COUNT
 3724 05074 1316  LOAD3,  TAD LOAD4A
 3725 05075 3114          DCA EXITA
 3726 05076 5535          JMP I COMEXA
 3727             
 3728 05077 4331  LOAD4,  JMS RLS
 3729 05100 1053          TAD SIJOB       /SET UP XFER BLOCK TO LOAD USER AREA
 3730 05101 1325          TAD LOADM1
 3731 05102 1146          TAD SWBASE
 3732 05103 7106          CLL RTL
 3733 05104 3322          DCA LOADEX
 3734 05105 1053          TAD SIJOB
 3735 05106 4511          CORES
 3736 05107 7640          SZA CLA
 3737 05110 5717          JMP I LOAD6A    /JOB IS IN CORE
 3738 05111 1320          TAD LOADUB
 3739 05112 5714          JMP I LOADUA
 3740             
 3741 05113 4600  LOADER, RERR
 3742 05114 1124  LOADUA, LOADUS
 3743 05115 6603  LRFILE, RFILE
 3744 05116 5077  LOAD4A, LOAD4
 3745 05117 4707  LOAD6A, R8
 3746 05120 5121  LOADUB, .+1
 3747 05121 6603          DMAR
 3748 05122 0000  LOADEX, 0       /DISC EXTENSION
 3749 05123 0010          10
 3750 05124 0000          0       /DISC ADDRESS
 3751 05125 7777  LOADM1, -1      /CORE ADDRESS - 1
 3752 05126 0000          0       / (-) WORD COUNT
 3753 05127 2175          OVERLA
 3754 05130 3604          READFI

      /TSS/8 CONFIGURATION FOR UWM                                       Page 94


 3755             /SUBROUTINE CALLED BY "R", "RUN", "LOAD", & "SAVE" TO
 3756             /SET UP THE FILE TRANSFER BLOCK POINTED TO BY 'JOBLNK'.
 3757             
 3758 05131 0000  RLS,    0
 3759 05132 6221          CHDF
 3760 05133 4516          GETTBA          /GET JOB'S WAIT-MASK ADDRESS
 3761 05134 0003           JOBWMK
 3762 05135 3072          DCA IOTP7
 3763 05136 1361          TAD RJSF3
 3764 05137 6211          DATFLD
 3765 05140 3472          DCA I IOTP7     /SET WAIT FOR FILE # 3
 3766 05141 2072          ISZ IOTP7
 3767 05142 3472          DCA I IOTP7     / AND CLEAR WAIT-MASK 2
 3768 05143 1053          TAD SIJOB
 3769 05144 6201          CDF
 3770 05145 3426          DCA I SIREG     /SAVE JOB # FOR 'READFI' IN FIELD 0
 3771 05146 6221          CHDF
 3772 05147 1053          TAD SIJOB
 3773 05150 3152          DCA CORJOB      /SET FOR CORE-ASSIGNMENT
 3774 05151 6202          CIF
 3775 05152 4567          BLT             /COPY OVER THE 'RFILE' OR 'WFILE' PARAMETERS
 3776 05153 6221           CHDF
 3777 05154 0063           IOTP0
 3778 05155 6211           DATFLD
 3779 05156 0000  R4,      0
 3780 05157 7772           -6
 3781 05160 5731          JMP I RLS       /THEN JUST RETURN
 3782             
 3783 05161 0201  RJSF3,  JSF3+JSWAIT
 3784             
 3785 05162 5457  LOGOMA, 5457    /LO
 3786 05163 4757          4757    /GO
 3787 05164 6564          6564    /UT
 3788 05165 5744  ODTMA,  5744    /OD
 3789 05166 6450          6450    /TH
 3790 05167 5100          5100    /I
 3791 05170 6371  SYSMA,  6371    /SY
 3792 05171 6364          6364    /ST
 3793 05172 4164          4164    /AT

      /TSS/8 CONFIGURATION FOR UWM                                       Page 95


 3794                     PAGE
 3795             
 3796 05200 7766  C7766,  7766
 3797 05201 5265  DEPO3A, DEPOS3
 3798 05202 4076  DEPOEX, EXONCK
 3799             
 3800 05203 4602  DEPOSI, JMS I DEPOEX    /CHECK FOR DECTAPES ACTIVE
 3801 05204 4520          NUMBIN          /STARTING ADDRESS
 3802 05205 7511           -"7
 3803 05206 5533          JMP I COMERA
 3804 05207 3070          DCA IOTP5       /LOW ORDER DISC ADDRESS
 3805 05210 1200          TAD C7766
 3806 05211 3064          DCA IOTP1
 3807 05212 1057          TAD COMBFA
 3808 05213 3010          DCA IX1
 3809 05214 4520  DEPOS2, NUMBIN          /CONVERT ARGUMENT LIST
 3810 05215 7511           -"7
 3811 05216 5222          JMP DEPOS1
 3812 05217 3410          DCA I IX1
 3813 05220 2064          ISZ IOTP1
 3814 05221 5214          JMP DEPOS2
 3815 05222 1010  DEPOS1, TAD IX1
 3816 05223 7041          CIA
 3817 05224 1057          TAD COMBFA
 3818 05225 7450          SNA
 3819 05226 5533          JMP I COMERA    /NOTHING TO DEPOSIT
 3820 05227 3066          DCA IOTP3       /-WORD COUNT
 3821 05230 4506          CLRPRV          /HE'S CHANGING CORE, CLEAR HIS 'PRIVILEGE'
 3822 05231 1053          TAD SIJOB
 3823 05232 4511          CORES
 3824 05233 7440          SZA
 3825 05234 5273          JMP DEPOS4
 3826 05235 1201          TAD DEPO3A
 3827             
 3828 05236 3003  EXAMI2, DCA SI1         /RETURN ADDRESS
 3829 05237 1057          TAD COMBFA
 3830 05240 3067          DCA IOTP4       /CORE ADDRESS-1
 3831 05241 7240          CLA CMA         /-1 IN AC
 3832 05242 1053          TAD SIJOB
 3833 05243 1146          TAD SWBASE
 3834 05244 7106          CLL RTL
 3835 05245 3064          DCA IOTP1       /DISC EXTENSION
 3836 05246 1016          TAD C0010
 3837 05247 3065          DCA IOTP2
 3838 05250 1264          TAD DEPEX2
 3839 05251 3071          DCA IOTP6
 3840 05252 3072          DCA IOTP7
 3841 05253 1066          TAD IOTP3       /ARE WE GOING INTO NEXT JOB'S DISC IMAGE?
 3842 05254 7140          CLL CMA         /WORD COUNT -1
 3843 05255 1070          TAD IOTP5       /WC+ADDRESS>7777?
 3844 05256 7620          SNL CLA
 3845 05257 5663          JMP I DEPEX     /OK TO PROCEED
 3846 05260 1271          TAD COMA        /RESET DISPATCH ADDRESS
 3847 05261 3003          DCA SI1
 3848 05262 5533          JMP I COMERA    /EVIL ONCE AGAIN AVERTED
 3849 05263 1147  DEPEX,  DEPEXA
 3850 05264 2175  DEPEX2, OVERLA

      /TSS/8 CONFIGURATION FOR UWM                                       Page 96


 3851             
 3852             /RETURN AFTER READING OR WRITING USER AREA
 3853             
 3854 05265 1271  DEPOS3, TAD COMA
 3855 05266 3003          DCA SI1
 3856 05267 5535          JMP I COMEXA
 3857             
 3858 05270 6221  COMF,   CHDF
 3859             
 3860 05271 0200  COMA,   COM
 3861 05272 0070  C0070,  70
 3862             
 3863 05273 0272  DEPOS4, AND C0070
 3864 05274 1001          TAD C6201
 3865 05275 3315          DCA DEDEF
 3866 05276 1070          TAD IOTP5
 3867 05277 3316          DCA DEDEA
 3868 05300 1270          TAD COMF
 3869 05301 3313          DCA DESRF
 3870 05302 1350          TAD BUFFER
 3871 05303 3314          DCA DESRA
 3872 05304 4306          JMS DEMOVE
 3873 05305 5535          JMP I COMEXA
 3874             
 3875 05306 0000  DEMOVE, 0
 3876 05307 1066          TAD IOTP3
 3877 05310 3317          DCA DECNT
 3878 05311 6202          CIF
 3879 05312 4567          BLT
 3880 05313 0000  DESRF,   0      /FROM FLD
 3881 05314 0000  DESRA,   0      /FROM ADDR
 3882 05315 0000  DEDEF,   0      /TO FLD
 3883 05316 0000  DEDEA,   0      /TO ADDR
 3884 05317 0000  DECNT,   0      /-COUNT
 3885 05320 5706          JMP I DEMOVE

      /TSS/8 CONFIGURATION FOR UWM                                       Page 97


 3886 05321 4520  EXAMIN, NUMBIN          /STARTING ADDRESS
 3887 05322 7511           -"7
 3888 05323 5533          JMP I COMERA
 3889 05324 3070          DCA IOTP5
 3890 05325 4520          NUMBIN
 3891 05326 7507           -"9
 3892 05327 7001          IAC
 3893 05330 7450          SNA
 3894 05331 7001          IAC
 3895 05332 7041          CIA
 3896 05333 3066          DCA IOTP3
 3897 05334 1066          TAD IOTP3       /GET (-) THE COUNT
 3898 05335 7161          CLL CMA CML IAC
 3899 05336 1200          TAD C7766
 3900 05337 7660          SZA SNL CLA     /IS COUNT TOO LARGE?
 3901 05340 5533          JMP I COMERA
 3902 05341 1053          TAD SIJOB
 3903 05342 4511          CORES
 3904 05343 7440          SZA
 3905 05344 5351          JMP EXAMI4
 3906 05345 1347          TAD EXAM1A
 3907 05346 5236          JMP EXAMI2
 3908             
 3909 05347 3331  EXAM1A, EXAMI1
 3910 05350 6206  BUFFER, COMBUF
 3911             
 3912 05351 0272  EXAMI4, AND C0070
 3913 05352 1001          TAD C6201
 3914 05353 3313          DCA DESRF
 3915 05354 1070          TAD IOTP5
 3916 05355 3314          DCA DESRA
 3917 05356 1270          TAD COMF
 3918 05357 3315          DCA DEDEF
 3919 05360 1350          TAD BUFFER
 3920 05361 3316          DCA DEDEA
 3921 05362 4306          JMS DEMOVE
 3922 05363 5747          JMP I EXAM1A
 3923             
 3924 05364 0240  FORJOB, " ;"F;"O;"R;" ;"J;"O;"B;" ;0
      05365 0306
      05366 0317
      05367 0322
      05370 0240
      05371 0312
      05372 0317
      05373 0302
      05374 0240
      05375 0000

      /TSS/8 CONFIGURATION FOR UWM                                       Page 98


 3925                     PAGE
 3926             /THIS HANDLES THE 'SWITCH', 'RESTART', & 'BREAK' COMMANDS.
 3927             /THEY SET THE REGISTERS OR, IF NO PARAMETER IS GIVEN, THEY
 3928             /SIMPLY PRINT OUT THEIR CURRENT VALUES.
 3929             
 3930                     IFNZRO DDBBRK-2 <GLITCH>
 3931             
 3932 05400 4506  RESTRT, CLRPRV          /CLEAR HIS 'PRIVILEGE' BIT
 3933 05401 1236          TAD JBSRA       /GET THE RESTART-ADDRESS
 3934 05402 1237  SWITCH, TAD JBSWR       /GET THE SWITCH-REGISTER
 3935 05403 3205          DCA .+2
 3936 05404 4516          GETTBA          /GET THE REGISTER ADDRESS
 3937 05405 0000           0
 3938 05406 5211          JMP BRK1        /THEN SHARE THE BREAK CODE
 3939 05407 7326  BREAK,  CLA CLL CML RTL
 3940 05410 1055          TAD COMDB0      /GET THE BREAK-MASK LOCATION
 3941 05411 3064  BRK1,   DCA IOTP1
 3942 05412 4513          ENDTST          /IS THERE A PARAMETER?
 3943 05413 5222          JMP BRK2        /NO - PRINT THE CURRENT VALUE
 3944 05414 4520          NUMBIN          /YES - GET THE NEW VALUE
 3945 05415 7511           -"7
 3946 05416 5533          JMP I COMERA    /INVALID CHARACTER IN NUMBER
 3947 05417 6211          DATFLD
 3948 05420 3464          DCA I IOTP1     /SET THE NEW VALUE
 3949 05421 5535          JMP I COMEXA    / AND EXIT
 3950 05422 6211  BRK2,   DATFLD
 3951 05423 1464          TAD I IOTP1     /GET THE CURRENT VALUE
 3952 05424 6221          CHDF
 3953 05425 4521          OCTASC          /CONVERT IT TO ASCII
 3954 05426 0065           IOTP3-1        / IN IOTP3 - IOTP7
 3955 05427 4500          ASCOUT          /THEN TYPE <CR-LF>
 3956 05430 6162           CRLF
 3957 05431 7000          NOP
 3958 05432 4500          ASCOUT          / AND THE NUMBER
 3959 05433 0066           IOTP3
 3960 05434 7000          NOP
 3961 05435 5535          JMP I COMEXA    /THEN EXIT
 3962             
 3963 05436 7775  JBSRA,  JOBSRA-JOBSWR
 3964 05437 0010  JBSWR,  JOBSWR

      /TSS/8 CONFIGURATION FOR UWM                                       Page 99


 3965             /THIS HANDLES THE 'TALK' COMMAND. "TALK NN ...MSG..."
 3966             /CAUSES THE MESSAGE '...MSG...' TO BE SENT TO KEYBOARD 'NN'.
 3967             
 3968 05440 4520  TALK,   NUMBIN          /GET THE CONSOLE #
 3969 05441 7511           -"7
 3970 05442 5533          JMP I COMERA    /BAD CHARACTER - ERROR!!
 3971 05443 3063          DCA IOTP0
 3972 05444 7320          CLA CLL CML
 3973 05445 1063          TAD IOTP0
 3974 05446 1344          TAD TALKMX
 3975 05447 7620          SNL CLA         /IS THIS A LEGAL KEYBOARD?
 3976 05450 5533          JMP I COMERA    /NO - ERROR!!
 3977 05451 1063          TAD IOTP0
 3978 05452 7124          CLL CML RAL
 3979 05453 1163          TAD DEVTBA      /GET THE DDB POINTER
 3980 05454 3065          DCA IOTP2       /POINTS TO OUTPUT SIDE
 3981 05455 6211          DATFLD
 3982 05456 1465          TAD I IOTP2     /GET OUTPUT DDB ADDRESS
 3983 05457 7640          SZA CLA         /IS THERE REALLY ONE THERE?
 3984 05460 5267          JMP TALK2       /YES
 3985 05461 1065          TAD IOTP2       /NO - GET ONE
 3986 05462 6221          CHDF
 3987 05463 6202          CIF
 3988 05464 4572          GETDDB
 3989 05465 5533          JMP I COMERA    /CURSES! JUST TREAT AS ERROR
 3990 05466 6211          DATFLD
 3991 05467 1465  TALK2,  TAD I IOTP2
 3992 05470 3065          DCA IOTP2       /SET THE OUTPUT DDB ADDRESS
 3993 05471 1455          TAD I COMDB0    /GET # OF CALLING CONSOLE
 3994 05472 0036          AND C0037
 3995 05473 6221          CHDF
 3996 05474 4521          OCTASC          /CONVERT IT TO ASCII
 3997 05475 6205           COMBUF-1       / AND PUT IN COMBUF
 3998 05476 4333          JMS TALK5       /"CRLF** K"
 3999 05477 5545           TALKM1
 4000 05500 4333          JMS TALK5       /"MM"
 4001 05501 6210           COMBUF+2
 4002 05502 4517          GETWRD          /GET THE SENDER'S ACCOUNT NUMBER
 4003 05503 0015           JOBACT
 4004 05504 4521          OCTASC          / & CONVERT IT TO ASCII
 4005 05505 6205           COMBUF-1
 4006 05506 4333          JMS TALK5       /NOW TYPE "/"
 4007 05507 5555           TALKM2
 4008 05510 4333          JMS TALK5       / & THE ACCOUNT NUMBER
 4009 05511 6206           COMBUF
 4010 05512 4333          JMS TALK5       / AND ": "
 4011 05513 5557           TALKM3
 4012 05514 3074          DCA CHAR+1      / *** CHAR+1 MUST BE SCRATCHABLE ***
 4013 05515 7326          CLA CLL CML RTL
 4014 05516 4513          ENDTST          /END-OF-LINE BEFORE WE START?
 4015 05517 5330          JMP TALK4       /YES
 4016 05520 4507  TALK3,  COMGET          /GET MESSAGE CHARACTER
 4017 05521 5330          JMP TALK4       /NONE LEFT; SHOULDN'T HAPPEN
 4018 05522 7326          CLA CLL CML RTL /ALLOW ':' AND ';' IN MESSAGE
 4019 05523 4513          ENDTST          /TERMINATING MESSAGE?
 4020 05524 5330          JMP TALK4       /YES - SEND CRLF
 4021 05525 4333          JMS TALK5       /NO - SEND THE CHARACTER

      /TSS/8 CONFIGURATION FOR UWM                                      Page 100


 4022 05526 0073           CHAR
 4023 05527 5320          JMP TALK3       / AND GO FETCH THE NEXT
 4024 05530 4333  TALK4,  JMS TALK5       /SEND THE <CR-LF>
 4025 05531 6162           CRLF
 4026 05532 5535          JMP I COMEXA    /THEN JUST EXIT
 4027             
 4028             /ROUTINE TO TYPE A MESSAGE ON THE TELETYPE WHOSE DDB
 4029             /ADDRESS IS IN IOTP2.
 4030 05533 0000  TALK5,  0               /OUTPUT A CHARACTER
 4031 05534 1733          TAD I TALK5     /BUFFER ADDRESS
 4032 05535 3340          DCA .+3
 4033 05536 1065          TAD IOTP2       /DDB ADDRESS
 4034 05537 4500          ASCOUT
 4035 05540 0000           0
 4036 05541 5533          JMP I COMERA    /NO ROOM - JUST TREAT AS ERROR
 4037 05542 2333          ISZ TALK5       /SKIP ARGUMENT
 4038 05543 5733          JMP I TALK5
 4039             
 4040 05544 7766  TALKMX, -TLKMAX-1       /(-) FIRST ILLEGAL KEYBOARD
 4041             
 4042 05545 0215  TALKM1, 215;212;207;"*;"*;240;"K;0
      05546 0212
      05547 0207
      05550 0252
      05551 0252
      05552 0240
      05553 0313
      05554 0000
 4043 05555 0257  TALKM2, "/;0
      05556 0000
 4044 05557 0272  TALKM3, ":;" ;0
      05560 0240
      05561 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 101


 4045             /
 4046             /THIS HANDLES THE 'EXTEND' & 'REDUCE' COMMANDS.
 4047             /WE EXTEND OR REDUCE THE SPECIFIED FILE.
 4048 05562 4531          SIERR
 4049 05563 5542          JMP I IOTEND
 4050             EXTEND,
 4051 05564 4520  REDUCE, NUMBIN          /FILE #
 4052 05565 7511           -"7
 4053 05566 5533          JMP I COMERA
 4054 05567 0033          AND C0003
 4055 05570 3064          DCA IOTP1
 4056 05571 4520          NUMBIN
 4057 05572 7507           -"9
 4058 05573 5533          JMP I COMERA
 4059 05574 3065          DCA IOTP2
 4060 05575 5543          JMP I LNGIOT

      /TSS/8 CONFIGURATION FOR UWM                                      Page 102


 4061                     PAGE
 4062             
 4063 05600 0645  TICLK2, INCLK2
 4064 05601 7000  TICLK1, INCLK1
 4065 05602 7753  TIMJMX, -JOBMAX-1
 4066             
 4067 05603 4513  TIME,   ENDTST          /ARGUMENT?
 4068 05604 5245          JMP TIME1       /NO - ASSUME THIS JOB
 4069 05605 4520          NUMBIN
 4070 05606 7511           -"7
 4071 05607 5533          JMP I COMERA    /ILLEGAL PARAMETER - ERROR!
 4072 05610 3063          DCA IOTP0
 4073 05611 7320          CLA CLL CML
 4074 05612 1063          TAD IOTP0
 4075 05613 1202          TAD TIMJMX
 4076 05614 7620          SNL CLA         /LEGAL JOB #?
 4077 05615 5533          JMP I COMERA    /NO
 4078 05616 1063          TAD IOTP0
 4079 05617 7450          SNA             /JOB 0?
 4080 05620 5250          JMP TIME3       /YES - TYPE TIME OF DAY
 4081 05621 4530          SETJOB          /NO - SET UP 'JOBDAT'
 4082 05622 7410          SKP             /NO JOB - JUST EXIT
 4083 05623 5227          JMP TIME2
 4084 05624 4530          SETJOB          /RESTORE 'JOBDAT'
 4085 05625 7000          NOP
 4086 05626 5243          JMP TIME5       / AND EXIT
 4087             
 4088 05627 6221  TIME2,  CHDF
 4089 05630 4517          GETWRD
 4090 05631 0016           JOBRTM
 4091 05632 3075          DCA NUMHO+1
 4092 05633 4517          GETWRD
 4093 05634 0017           JOBRTH         /HI ORDER TIME
 4094 05635 3074  TIME4,  DCA NUMHO
 4095 05636 4263          JMS PTIME
 4096 05637 4530          SETJOB          /RESTORE 'JOBDAT' IF ALTERED
 4097 05640 7000          NOP             /NO MATTER IF NOT LOGGED IN
 4098 05641 1057          TAD COMBFA
 4099 05642 7001          IAC
 4100 05643 6221  TIME5,  CHDF
 4101 05644 5535          JMP I COMEXA
 4102             
 4103 05645 1053  TIME1,  TAD SIJOB
 4104 05646 7640          SZA CLA         /IS HE LOGGED IN?
 4105 05647 5227          JMP TIME2       /YES - TYPE HIS CPU TIME
 4106             
 4107 05650 6201  TIME3,  CDF
 4108 05651 1451          TAD I CLK1
 4109 05652 7100          CLL
 4110 05653 1201          TAD TICLK1
 4111 05654 3075          DCA NUMHO+1
 4112 05655 7430          SZL
 4113 05656 7001          IAC
 4114 05657 1450          TAD I CLK2
 4115 05660 1200          TAD TICLK2
 4116 05661 6221          CHDF
 4117 05662 5235          JMP TIME4

      /TSS/8 CONFIGURATION FOR UWM                                      Page 103


 4118             /ROUTINE TO CONVERT VALUE IN NUMHO AND NUMHO+1 (IN TICKS)
 4119             /TO HOURS, MINUTES AND SECONDS. 
 4120             /THE RESULT IS STORED IN COMBUF AS HH:MM:SS
 4121             
 4122 05663 0000  PTIME,  0               /ENTER WITH AC=0
 4123 05664 1057          TAD COMBFA      /START OF OUTPUT BUFFER
 4124 05665 3010          DCA IX1
 4125 05666 1335          TAD PTABX       /SET UP TABLE FETCH (LOW)
 4126 05667 3300          DCA PTIMX
 4127 05670 1336          TAD PTABX1      /SET UP TABLE FETCH (HIGH)
 4128 05671 3304          DCA PTIMX1
 4129 05672 1337          TAD PTFORM      /FORMAT MASK
 4130 05673 3343          DCA PTCONT
 4131             
 4132 05674 1340  PTLOOP, TAD PT0260      /INITIALIZE DIGIT COUNTER
 4133 05675 3342          DCA PTDIGI
 4134 05676 7100          CLL             /DIVIDE LOOP
 4135 05677 1075          TAD NUMHO+1     /DOUBLE PRECISION ADD
 4136 05700 7000  PTIMX,  NOP             /(TAD PTAB1+N)
 4137 05701 3076          DCA NUMHO+2     /SAVE LOW ORDER REMAINDER
 4138 05702 7004          RAL             /GET OVERFLOW
 4139 05703 1074          TAD NUMHO       /ADD HIGH ORDER
 4140 05704 7000  PTIMX1, NOP             /(TAD PTAB+N)
 4141 05705 7420          SNL
 4142 05706 5314          JMP PTIMA       /DIVIDE OVERFLOW
 4143 05707 3074          DCA NUMHO       /RESTORE REMAINDER
 4144 05710 1076          TAD NUMHO+2     /LOW ORDER RESTORE
 4145 05711 3075          DCA NUMHO+1
 4146 05712 2342          ISZ PTDIGI      /COUNT THIS SUBTRACTION
 4147 05713 5276          JMP PTIMX-2     /CONTINUE LOOP
 4148             
 4149 05714 2300  PTIMA,  ISZ PTIMX       /ADVANCE TABLE FETCH
 4150 05715 2304          ISZ PTIMX1      /ADVANCE TABLE FETCH
 4151 05716 7200          CLA             /CLEAR OUT REMAINDER
 4152 05717 1342          TAD PTDIGI
 4153 05720 3410          DCA I IX1       /STORE ASCII DIGIT
 4154 05721 1343          TAD PTCONT
 4155 05722 7440          SZA             /ARE WE ALL DONE?
 4156 05723 5326          JMP .+3         /NO
 4157 05724 3410          DCA I IX1       /YES - STORE A ZERO
 4158 05725 5663          JMP I PTIME     / AND RETURN
 4159 05726 7104          RAL CLL         /TEST FOR COLON PRINT
 4160 05727 3343          DCA PTCONT      /RESTORE FORMAT
 4161 05730 7430          SZL             /PRINT COLON?
 4162 05731 5274          JMP PTLOOP      /CONTINUE LOOP
 4163 05732 1341          TAD PTCOLN      /ADD COLON TO OUTPUT
 4164 05733 3410          DCA I IX1
 4165 05734 5274          JMP PTLOOP      /CONTINUE LOOP
 4166             
 4167 05735 1352  PTABX,  TAD PTAB1       /TABLE FETCH LOW
 4168 05736 1344  PTABX1, TAD PTAB        /TABLE FETCH HIGH
 4169 05737 5200  PTFORM, 5200            /FORMAT FOR OUTPUT
 4170 05740 0260  PT0260, 260
 4171 05741 0272  PTCOLN, 272             /ASCII COLON
 4172             
 4173 05742 0000  PTDIGI, 0               /ASCII DIGIT BUILT HERE
 4174 05743 0000  PTCONT, 0               /LOOP CONTROL

      /TSS/8 CONFIGURATION FOR UWM                                      Page 104


 4175             
 4176                     IFNZRO TICSPS-24        <GLITCH>
 4177             /DOUBLE PRECISION WORDS...HIGH ORDER BITS
 4178 05744 7520  PTAB,   7520            /-TICKS PER 10 HRS
 4179 05745 7756          7756            /-TICKS PER 1  HR
 4180 05746 7775          7775            /-TICKS PER 10 MIN
 4181 05747 7777          7777            /-TICKS PER 1  MIN
 4182 05750 7777          7777            /-TICKS PER 10 SEC
 4183 05751 7777          7777            /-TICKS PER 1  SEC
 4184             
 4185             /DOUBLE PRECISION WORDS...LOW ORDER BITS
 4186 05752 1600  PTAB1,  1600            /-TICKS PER 10 HRS
 4187 05753 3300          3300            /-TICKS PER 1 HR
 4188 05754 0440          0440            /-TICKS PER 10 MIN
 4189 05755 5520          5520            /-TICKS PER 1 MIN
 4190 05756 7470          7470            /-TICKS PER 10 SEC
 4191 05757 7754          7754            /-TICKS PER 1 SEC
 4192             
 4193 05760 0215  STARS,  215;212;207;"*;"*;"*;" ;0
      05761 0212
      05762 0207
      05763 0252
      05764 0252
      05765 0252
      05766 0240
      05767 0000
 4194 05770 0256  PERIOD, ".;0
      05771 0000
 4195 05772 0277  QQEST,  "?
 4196 05773 0277  QEST,   "?;0
      05774 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 105


 4197                     PAGE
 4198             /'SEGS' COMMAND - TYPE THE NUMBER OF FREE DISC SEGMENTS
 4199             
 4200 06000 4500  SEGS0,  ASCOUT
 4201 06001 6162           CRLF
 4202 06002 5535          JMP I COMEXA
 4203 06003 6201          CDF
 4204 06004 1617          TAD I SEGCNT    /GET THE NUMBER FROM FIELD 0
 4205 06005 6221          CHDF
 4206 06006 4220          JMS DECOUT      / CONVERT IT TO DECIMAL
 4207 06007 6205           COMBUF-1
 4208 06010 4500          ASCOUT          / AND TYPE IT
 4209 06011 6206           COMBUF
 4210 06012 5535          JMP I COMEXA
 4211 06013 4500          ASCOUT
 4212 06014 7515           FSEGMS
 4213 06015 5535          JMP I COMEXA
 4214 06016 5535          JMP I COMEXA    /THEN EXIT
 4215             /
 4216 06017 5333  SEGCNT, NFSEGS

      /TSS/8 CONFIGURATION FOR UWM                                      Page 106


 4217             /ROUTINE TO CONVERT CONTENTS OF AC INTO DECIMAL ASCII
 4218             /CALL:  TAD (VALUE)
 4219             /       JMS I (DECOUT
 4220             /        BUFFER-1
 4221             /
 4222 06020 0000  DECOUT, 0
 4223 06021 3265          DCA DECNUM      /SAVE THE VALUE
 4224 06022 1620          TAD I DECOUT
 4225 06023 3010          DCA IX1         /SET THE BUFFER POINTER
 4226 06024 2220          ISZ DECOUT
 4227 06025 1266          TAD DECTAD
 4228 06026 3233          DCA DECOT2      /SET TABLE FETCH
 4229 06027 7146          CLL CMA RTL     /AC:=-3
 4230 06030 3074          DCA NUMHO       /SET DIGIT COUNTER
 4231 06031 3272          DCA DECPRT      /CLEAR OUTPUT FLAG
 4232 06032 3264  DECOT1, DCA DECDIG      /ZERO THE DIGIT
 4233 06033 1267  DECOT2, TAD DECTAD+1
 4234 06034 7120          CLL CML
 4235 06035 1265          TAD DECNUM      /13-BIT SUBTRACT
 4236 06036 7430          SZL             /HAS IT GONE NEGATIVE?
 4237 06037 5244          JMP .+5         /YES - WE WENT TOO FAR
 4238 06040 3265          DCA DECNUM
 4239 06041 2264          ISZ DECDIG      /INCREMENT THE DIGIT
 4240 06042 2272          ISZ DECPRT      / & SET THE 'PRINT' FLAG
 4241 06043 5233          JMP DECOT2
 4242 06044 7200          CLA
 4243 06045 1272          TAD DECPRT
 4244 06046 7650          SNA CLA         /ARE WE PRINTING?
 4245 06047 5253          JMP .+4         /NO - NO NON-ZERO YET
 4246 06050 1264          TAD DECDIG
 4247 06051 1263          TAD DEC260
 4248 06052 3410          DCA I IX1       /YES - STORE THE DIGIT
 4249 06053 2233          ISZ DECOT2      /INCREMENT THE TABLE-FETCH
 4250 06054 2074          ISZ NUMHO
 4251 06055 5232          JMP DECOT1      /DO THE NEXT DIGIT
 4252 06056 1265          TAD DECNUM
 4253 06057 1263          TAD DEC260
 4254 06060 3410          DCA I IX1       /ALWAYS DO THE LAST DIGIT
 4255 06061 3410          DCA I IX1       / AND STORE A ZERO TERMINATOR
 4256 06062 5620          JMP I DECOUT
 4257             
 4258 06063 0260  DEC260, 260
 4259 06064 0000  DECDIG, 0
 4260 06065 0000  DECNUM, 0
 4261 06066 1267  DECTAD, TAD .+1
 4262 06067 6030          -1750   /1000
 4263 06070 7634          -144    /100
 4264 06071 7766          -12     /10

      /TSS/8 CONFIGURATION FOR UWM                                      Page 107


 4265             /ROUTINE TO SET UP 'JOBDAT' FOR DIFFERENT JOB NUMBERS
 4266             
 4267             DECPRT,
 4268 06072 0000  SETJB0, 0
 4269 06073 6211          DATFLD
 4270 06074 0036          AND C0037
 4271 06075 7450          SNA             /ANY PARAMETER PASSED?
 4272 06076 1053          TAD SIJOB       /NO - SET CURRENT JOB
 4273 06077 3072          DCA IOTP7
 4274 06100 7320          CLA CLL CML
 4275 06101 1072          TAD IOTP7
 4276 06102 7450          SNA             /IS HE LOGGED IN?
 4277 06103 5315          JMP SETJB1      /NO - CLEAR JOBDAT
 4278 06104 1320          TAD SETMAX
 4279 06105 7660          SZA SNL CLA     /LEGAL JOB #?
 4280 06106 5315          JMP SETJB1      /NO - JUST CLEAR 'JOBDAT'
 4281 06107 1072          TAD IOTP7
 4282 06110 1044          TAD JOBTBA      /START OF JOBTBL
 4283 06111 3220          DCA DECOUT
 4284 06112 1620          TAD I DECOUT
 4285 06113 7440          SZA             /IS THE JOB ACTIVE?
 4286 06114 2272          ISZ SETJB0      /YES - SKIP NEXT INSTRUCTION
 4287 06115 3561  SETJB1, DCA I JOBDAT
 4288 06116 6221          CHDF
 4289 06117 5672          JMP I SETJB0    /RETURN
 4290             
 4291 06120 7754  SETMAX, -JOBMAX

      /TSS/8 CONFIGURATION FOR UWM                                      Page 108


 4292 06121 0314  COMLGM, "L;"O;"G;"I;"N;240;"P;"L;"E;"A;"S;"E;0
      06122 0317
      06123 0307
      06124 0311
      06125 0316
      06126 0240
      06127 0320
      06130 0314
      06131 0305
      06132 0301
      06133 0323
      06134 0305
      06135 0000
 4293 06136 0325  UNACCT, "U;"N;"A;"U;"T;"H;"O;"R;"I;"Z;"E;"D;240
      06137 0316
      06140 0301
      06141 0325
      06142 0324
      06143 0310
      06144 0317
      06145 0322
      06146 0311
      06147 0332
      06150 0305
      06151 0304
      06152 0240
 4294 06153 0301          "A;"C;"C;"O;"U;"N;"T
      06154 0303
      06155 0303
      06156 0317
      06157 0325
      06160 0316
      06161 0324
 4295 06162 0215  CRLF,   215
 4296 06163 0212  LINE,   212
 4297 06164 0000          0
 4298 06165 0311  ILLREQ, "I;"L;"L;"E;"G;"A;"L;240;"R;"E;"Q;"U;"E;"S;"T;0
      06166 0314
      06167 0314
      06170 0305
      06171 0307
      06172 0301
      06173 0314
      06174 0240
      06175 0322
      06176 0305
      06177 0321
      06200 0325
      06201 0305
      06202 0323
      06203 0324
      06204 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 109


 4299             /
 4300             /COMMAND BUFFER AND ASCII OUTPUT BUFFER
 4301 06205 0000          0
 4302 06206 0000  COMBUF, 0
 4303 06207 0000          0
 4304 06210 0000          0
 4305 06211 0000          0
 4306 06212 0000          0
 4307 06213 0000          0
 4308 06214 0000          0
 4309 06215 0000          0
 4310 06216 0000          0
 4311 06217 0000          0
 4312 06220 0000          0
 4313 06221 0000          0
 4314             
 4315       1400  FIPFLS= USAVE+UREST     /CONTROL-BITS FOR 'FIP' COMMANDS
 4316             
 4317 06222 6233  COMTBL, CL1                     /LOGIN O1 S1;
 4318 06223 4020          NOLOG+PRCRLF            /IOTP2:=O1      ACCOUNT #
 4319 06224 0614          LIN                     /IOTP3-4:=S1    PASSWORD
 4320 06225 3004          LOGIN                   /RESP: VERSION #        HR:MIN
 4321 06226 7464          -"L                     /.
 4322 06227 7461          -"O
 4323 06230 7471          -"G
 4324 06231 7467          -"I
 4325 06232 7462          -"N
 4326 06233 6245  CL1,    CL2                     /LOGOUT;
 4327 06234 2002          USERM+2                 /RESP: .
 4328 06235 6601          OPEN                    /.
 4329 06236 4766          LOGOUT
 4330 06237 7464          -"L
 4331 06240 7461          -"O
 4332 06241 7471          -"G
 4333 06242 7461          -"O
 4334 06243 7453          -"U
 4335 06244 7454          -"T
 4336 06245 6255  CL2,    CL3                     /TIME;
 4337 06246 4020          NOLOG+PRCRLF    /RESP:  HR:MIN
 4338 06247 0000          0                       /.
 4339 06250 5603          TIME
 4340 06251 7454          -"T
 4341 06252 7467          -"I
 4342 06253 7463          -"M
 4343 06254 7473          -"E
 4344 06255 6267  CL3,    CL4                     /ASSIGN L1 O1;
 4345 06256 1402          FIPFLS+2                /AC0-5:=DEVICE # OF L1
 4346 06257 0440          ASD                     /AC6-11:=O1     UNIT #
 4347 06260 3414          ASSIGN                  /ERROR: AC NOT 0
 4348 06261 7477          -"A                     /RESP: .
 4349 06262 7455          -"S
 4350 06263 7455          -"S
 4351 06264 7467          -"I
 4352 06265 7471          -"G
 4353 06266 7462          -"N
 4354 06267 6301  CL4,    CL5                     /RELEAS L1 O1;
 4355 06270 1402          FIPFLS+2                /SAME AS ASSIGN

      /TSS/8 CONFIGURATION FOR UWM                                      Page 110


 4356 06271 0442          REL
 4357 06272 3564          RELEAS
 4358 06273 7456          -"R
 4359 06274 7473          -"E
 4360 06275 7464          -"L
 4361 06276 7473          -"E
 4362 06277 7477          -"A
 4363 06300 7455          -"S
 4364 06301 6311  CL5,    CL7                     /TALK C1 S1
 4365 06302 0000          0                       /C1=CONSOLE TO TALK TO
 4366 06303 0000          0                       /S1=MESAGE TO TRANSMIT
 4367 06304 5440          TALK                    /RESP: CR-LF .
 4368 06305 7454          -"T                     /ON RECEIVERS TTY: ** KXX/NNNN: S1
 4369 06306 7477          -"A                     / WHERE KXX IS SENDER'S TTY
 4370 06307 7464          -"L                     / AND NNNN IS SENDER'S ACCOUNT #
 4371 06310 7465          -"K
 4372 06311 6321  CL7,    CL8                     /OPEN O1 S1 O2;
 4373 06312 1402          FIPFLS+2                /IOTP1:=O1      INTERNAL FILE #
 4374 06313 6601          OPEN                    /IOTP2:=O2      ACCOUNT #
 4375 06314 3602          FOPEN                   /IOTP3-5:=S1    FILE NAME
 4376 06315 7461          -"O                     /ERROR: AC NOT 0
 4377 06316 7460          -"P                     /RESP: .
 4378 06317 7473          -"E
 4379 06320 7462          -"N
 4380 06321 6332  CL8,    CL9                     /CLOSE S1;
 4381 06322 1402          FIPFLS+2                /ACI:=1 I=0,1,2,3
 4382 06323 0602          CLOS                    /ERROR: AC NOT 0
 4383 06324 3637          CLOSE                   /RESP:
 4384 06325 7475          -"C                     /.
 4385 06326 7464          -"L
 4386 06327 7461          -"O
 4387 06330 7455          -"S
 4388 06331 7473          -"E
 4389 06332 6344  CL9,    CL10                    /CREATE S1;
 4390 06333 1402          FIPFLS+2                /IOTP1-3:=S1    FILE NAME
 4391 06334 0610          CRF                     /ERROR: AC NOT 0
 4392 06335 3666          CREATE                  /RESP:
 4393 06336 7475          -"C                     /.
 4394 06337 7456          -"R
 4395 06340 7473          -"E
 4396 06341 7477          -"A
 4397 06342 7454          -"T
 4398 06343 7473          -"E
 4399 06344 6356  CL10,   CL11                    /RENAME O1 S1;
 4400 06345 1402          FIPFLS+2                /IOTP1:=O1      INTERNAL FILE #
 4401 06346 0600          REN                     /IOTP2-4:=S1    NEW NAME
 4402 06347 3705          RENAME                  /ERROR: AC NOT 0
 4403 06350 7456          -"R                     /RESP: .
 4404 06351 7473          -"E
 4405 06352 7462          -"N
 4406 06353 7477          -"A
 4407 06354 7463          -"M
 4408 06355 7473          -"E
 4409 06356 6367  CL11,   CL12                    /XOPEN O1 S1 O2
 4410 06357 1402          FIPFLS+2                /OPEN FILE WITH EXCLUSIVE USE
 4411 06360 6606          XOPEN
 4412 06361 3602          FOPEN

      /TSS/8 CONFIGURATION FOR UWM                                      Page 111


 4413 06362 7450          -"X
 4414 06363 7461          -"O
 4415 06364 7460          -"P
 4416 06365 7473          -"E
 4417 06366 7462          -"N
 4418 06367 6401  CL12,   CL13                    /REDUCE O1 D1;
 4419 06370 1402          FIPFLS+2                /IOTP1:=O1      INTERNAL FILE #
 4420 06371 0612          RED                     /IOTP2:=D1      # SEGMENTS TO REMOVE
 4421 06372 5564          REDUCE                  /ERROR: AC NOT 0
 4422 06373 7456          -"R                     /RESP: .
 4423 06374 7473          -"E
 4424 06375 7474          -"D
 4425 06376 7453          -"U
 4426 06377 7475          -"C
 4427 06400 7473          -"E
 4428 06401 6413  CL13,   CL14                    /EXTEND O1 D1;
 4429 06402 1402          FIPFLS+2                /SAME AS REDUCE
 4430 06403 0611          EXT
 4431 06404 5564          EXTEND
 4432 06405 7473          -"E
 4433 06406 7450          -"X
 4434 06407 7454          -"T
 4435 06410 7473          -"E
 4436 06411 7462          -"N
 4437 06412 7474          -"D
 4438 06413 6425  CL14,   CL16                    /PROTECT O1 O2;
 4439 06414 1402          FIPFLS+2                /AC5-6:=O1      INTERNAL FILE #
 4440 06415 0604          PROT                    /AC7-11:=O2     NEW PROTECTION
 4441 06416 0747          PROTEC                  /ERROR: AC NOT 0
 4442 06417 7460          -"P                     /RESP: .
 4443 06420 7456          -"R
 4444 06421 7461          -"O
 4445 06422 7454          -"T
 4446 06423 7473          -"E
 4447 06424 7475          -"C
 4448 06425 6432  CL16,   CL17                    /F O1;
 4449 06426 1403          FIPFLS+3                /IOTP1:=O1      INTERNAL FILE #
 4450 06427 6613          FINF                    /ERROR: AC NOT 0
 4451 06430 4402          F                       /RESP: ACCT-# FILE-NAME PROT SIZE
 4452 06431 7472          -"F                     /.
 4453 06432 6442  CL17,   CL18                    /SAVE S1 O1 O2 O3;
 4454 06433 3402          USAVE+UREST+USERM+2
 4455 06434 6606          XOPEN
 4456 06435 5002          SAVE
 4457 06436 7455          -"S
 4458 06437 7477          -"A
 4459 06440 7452          -"V
 4460 06441 7473          -"E

      /TSS/8 CONFIGURATION FOR UWM                                      Page 112


 4461 06442 6452  CL18,   CL19                    /LOAD O1 S1 O2 O3 O4;
 4462 06443 3402          USAVE+UREST+USERM+2
 4463 06444 6601          OPEN
 4464 06445 5010          LOAD
 4465 06446 7464          -"L
 4466 06447 7461          -"O
 4467 06450 7477          -"A
 4468 06451 7474          -"D
 4469 06452 6463  CL19,   CL20                    /START O1;
 4470 06453 0000          0
 4471 06454 0000          0
 4472 06455 4003          START
 4473 06456 7455          -"S
 4474 06457 7454          -"T
 4475 06460 7477          -"A
 4476 06461 7456          -"R
 4477 06462 7454          -"T
 4478 06463 6470  CL20,   CL21                    /S;
 4479 06464 0000          0
 4480 06465 0000          0
 4481 06466 3752          S
 4482 06467 7455          -"S
 4483 06470 6501  CL21,   CL22                    /WHERE;
 4484 06471 0003          3
 4485 06472 0000          0
 4486 06473 4110          WHERE
 4487 06474 7451          -"W
 4488 06475 7470          -"H
 4489 06476 7473          -"E
 4490 06477 7456          -"R
 4491 06500 7473          -"E
 4492 06501 6511  CL22,   CL23                    /USER O1;
 4493 06502 4001          NOLOG+1
 4494 06503 0000          0
 4495 06504 4502          USER
 4496 06505 7453          -"U
 4497 06506 7455          -"S
 4498 06507 7473          -"E
 4499 06510 7456          -"R
 4500 06511 6523  CL23,   CL29                    /SWITCH 01;
 4501 06512 0000          0
 4502 06513 0000          0
 4503 06514 5402          SWITCH
 4504 06515 7455          -"S
 4505 06516 7451          -"W
 4506 06517 7467          -"I
 4507 06520 7454          -"T
 4508 06521 7475          -"C
 4509 06522 7470          -"H
 4510 06523 6535  CL29,   CL32            /DUPLEX;
 4511 06524 0000          0
 4512 06525 0000          0
 4513 06526 7255          DUPLEX
 4514 06527 7474          -"D
 4515 06530 7453          -"U
 4516 06531 7460          -"P
 4517 06532 7464          -"L

      /TSS/8 CONFIGURATION FOR UWM                                      Page 113


 4518 06533 7473          -"E
 4519 06534 7450          -"X

      /TSS/8 CONFIGURATION FOR UWM                                      Page 114


 4520 06535 6542  CL32,   CL33            /R S1
 4521 06536 2002          USERM+2         /S1=FILE NAME
 4522 06537 6601          OPEN
 4523 06540 4610          R
 4524 06541 7456          -"R
 4525 06542 6551  CL33,   CL34            /RUN C1 S1
 4526 06543 2002          USERM+2         /C1=ACCOUNT OF FILE OWNER (OPTIONAL)
 4527 06544 6601          OPEN            /S1=FILE NAME
 4528 06545 4604          RUN
 4529 06546 7456          -"R
 4530 06547 7453          -"U
 4531 06550 7462          -"N
 4532 06551 6563  CL34,   CL35            /EXAMINE C1 D1
 4533 06552 2001          USERM+1         /C1=STARTING ADDRESS
 4534 06553 6603          DMAR
 4535 06554 5321          EXAMIN          /D1=#OF LOCATIONS TO EXAMINE
 4536 06555 7473          -"E
 4537 06556 7450          -"X
 4538 06557 7477          -"A
 4539 06560 7463          -"M
 4540 06561 7467          -"I
 4541 06562 7462          -"N
 4542 06563 6575  CL35,   CL36            /DEPOSIT C1 C2 C3 ... C13
 4543 06564 2001          USERM+1         /C1=STARTING ADDRESS
 4544 06565 6605          DMAW            /C2,...,C13=NEW VALUES
 4545 06566 5203          DEPOSI
 4546 06567 7474          -"D
 4547 06570 7473          -"E
 4548 06571 7460          -"P
 4549 06572 7461          -"O
 4550 06573 7455          -"S
 4551 06574 7467          -"I
 4552 06575 6607  CL36,   CL37            /VERSION
 4553 06576 4020          NOLOG+PRCRLF            /RESP: TSS/8.C1
 4554 06577 0000          0
 4555 06600 3315          VERSIN          /C1=VERSION #
 4556 06601 7452          -"V
 4557 06602 7473          -"E
 4558 06603 7456          -"R
 4559 06604 7455          -"S
 4560 06605 7467          -"I
 4561 06606 7461          -"O
 4562 06607 6620  CL37,   CL38    /BREAK O1
 4563 06610 0000          0
 4564 06611 0000          0
 4565 06612 5407          BREAK
 4566 06613 7476          -"B
 4567 06614 7456          -"R
 4568 06615 7473          -"E
 4569 06616 7477          -"A
 4570 06617 7465          -"K
 4571             
 4572 06620 6632  CL38,   CL39    /RESTART O1
 4573 06621 0000          0
 4574 06622 0000          0
 4575 06623 5400          RESTRT
 4576 06624 7456          -"R

      /TSS/8 CONFIGURATION FOR UWM                                      Page 115


 4577 06625 7473          -"E
 4578 06626 7455          -"S
 4579 06627 7454          -"T
 4580 06630 7477          -"A
 4581 06631 7456          -"R
 4582 06632 6644  CL39,   CL40            /UNDUPLEX
 4583 06633 0000          0
 4584 06634 0000          0
 4585 06635 7256          UNDUPL
 4586 06636 7453          -"U
 4587 06637 7462          -"N
 4588 06640 7474          -"D
 4589 06641 7453          -"U
 4590 06642 7460          -"P
 4591 06643 7464          -"L
 4592 06644 6656  CL40,   CL41            /SYSTAT
 4593 06645 2002          USERM+2
 4594 06646 6601          OPEN
 4595 06647 4724          SYSTAT
 4596 06650 7455          -"S
 4597 06651 7447          -"Y
 4598 06652 7455          -"S
 4599 06653 7454          -"T
 4600 06654 7477          -"A
 4601 06655 7454          -"T
 4602 06656 6666  CL41,   CL42            /KJOB
 4603 06657 2002          USERM+2         /EQUIVALENT TO .R LOGOUT
 4604 06660 6601          OPEN
 4605 06661 4766          LOGOUT
 4606 06662 7465          -"K
 4607 06663 7466          -"J
 4608 06664 7461          -"O
 4609 06665 7476          -"B
 4610             
 4611 06666 6700  CL42,   CL43            /BROADCAST S1
 4612 06667 0000          0               /SEND MESSAGE S1 TO ALL LOGGED IN CONSOLES
 4613 06670 0000          0               /MUST BE LOGGED-IN ON SYSTEM ACCOUNT
 4614 06671 4327          BROAD
 4615 06672 7476          -"B
 4616 06673 7456          -"R
 4617 06674 7461          -"O
 4618 06675 7477          -"A
 4619 06676 7474          -"D
 4620 06677 7475          -"C
 4621 06700 6711  CL43,   CL44            /FORCE C1 ^ S1
 4622 06701 0000          0               /FORCE STRING S1 INTO INPUT BUFFER OF CONSOLE C1
 4623 06702 0000          0               /MUST BE LOGGED-IN ON SYSTEM ACCT
 4624 06703 4200          FORSE           /IF S1 BEGINS WITH ^, IT IS PRECEEDED BY ^B
 4625 06704 7472          -"F
 4626 06705 7461          -"O
 4627 06706 7456          -"R
 4628 06707 7475          -"C
 4629 06710 7473          -"E
 4630 06711 6717  CL44,   CL45            /ONLINE
 4631 06712 0000          0               /RE-ENABLES SYSTEM STOPPED BY OFFLINE
 4632 06713 0000          0
 4633 06714 1163          ONLIN

      /TSS/8 CONFIGURATION FOR UWM                                      Page 116


 4634 06715 7461          -"O
 4635 06716 7462          -"N
 4636 06717 6726  CL45,   CL46            /OFFLINE
 4637 06720 0000          0               /GRACEFULLY STOPS THE SYSTEM BY
 4638 06721 0000          0               / DISALLOWING MORE LOGINS - NO ONE IS
 4639 06722 1164          OFFLIN          / FORCED OUT - JOBMAX IS SET TO 1
 4640 06723 7461          -"O             /USER MUST BE SYSTEM MANAGER
 4641 06724 7472          -"F             / (MANAGER MUST BE LAST JOB LEFT IN OR
 4642 06725 7472          -"F             / LAST USER WILL FILL THE 1 JOB SLOT.)
 4643 06726 6737  CL46,   CL47            /ODT
 4644 06727 2002          USERM+2         /LOADS & STARTS 'ODTHI'
 4645 06730 6601          OPEN
 4646 06731 4773          ODT
 4647 06732 7461          -"O
 4648 06733 7474          -"D
 4649 06734 7454          -"T
 4650 06735 7470          -"H
 4651 06736 7467          -"I
 4652 06737 6747  CL47,   CL48            /SEGS
 4653 06740 4002          NOLOG+2         /TYPE THE NUMBER OF FREE SEGMENTS
 4654 06741 0000          0
 4655 06742 6000          SEGS0
 4656 06743 7455          -"S
 4657 06744 7473          -"E
 4658 06745 7471          -"G
 4659 06746 7455          -"S
 4660 06747 0000  CL48,   0

      /TSS/8 CONFIGURATION FOR UWM                                      Page 117


 4661 06750 0320  WHERPC, "P;"C;"=;0
      06751 0303
      06752 0275
      06753 0000
 4662 06754 0240  WHERAC, " ;"A;"C;"=;0
      06755 0301
      06756 0303
      06757 0275
      06760 0000
 4663 06761 0240  WHERLK, " ;"L;"=;0
      06762 0314
      06763 0275
      06764 0000
 4664 06765 0240  WHERSW, " ;"S;"W;"=;0
      06766 0323
      06767 0327
      06770 0275
      06771 0000
 4665             
 4666 06772 0304  NONSUC, "D;"E;"V;"I;"C;"E;" ;"N;"O;"T;" ;"A;"V;"A;"I;"L;"A;"B;"L;"E;0
      06773 0305
      06774 0326
      06775 0311
      06776 0303
      06777 0305
      07000 0240
      07001 0316
      07002 0317
      07003 0324
      07004 0240
      07005 0301
      07006 0326
      07007 0301
      07010 0311
      07011 0314
      07012 0301
      07013 0302
      07014 0314
      07015 0305
      07016 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 118


 4667 07017 1000  SYSDSI, DSI
 4668 07020 4115  SYSPRT, WHEPRT
 4669 07021 7775  SYJSER, -JSERR-1
 4670 07022 4566  SYSEJN, USRPR
 4671             
 4672 07023 1053  SYSERR, TAD SIJOB
 4673 07024 1151          TAD TTYTBA
 4674 07025 3055          DCA COMDB0      /POINTER TO TTYTBL
 4675 07026 6211          DATFLD
 4676 07027 1455          TAD I COMDB0
 4677 07030 7104          CLL RAL         /UNIT*2= POSITION IN DEVTBL
 4678 07031 1163          TAD DEVTBA
 4679 07032 3055          DCA COMDB0
 4680 07033 1055          TAD COMDB0
 4681 07034 6201          CDF
 4682 07035 3420          DCA I COMPTR    /SET SO 'RESDDB' WILL WORK
 4683 07036 3056          DCA COMRDB
 4684 07037 6211          DATFLD
 4685 07040 1455          TAD I COMDB0    /GET THE DDB ADDRESS
 4686 07041 7450          SNA             /IS THERE ONE?
 4687 07042 4522          REBOOT          /NO - ERROR *****
 4688 07043 3055          DCA COMDB0
 4689 07044 1217          TAD SYSDSI
 4690 07045 7040          CMA
 4691 07046 0455          AND I COMDB0
 4692 07047 1217          TAD SYSDSI
 4693 07050 3455          DCA I COMDB0    /SET JOB INTO 'SI' MODE
 4694 07051 6221          CHDF
 4695 07052 4263          JMS SYSER0
 4696 07053 4620          JMS I SYSPRT
 4697 07054 4500          ASCOUT
 4698 07055 6162           CRLF
 4699 07056 7000          NOP
 4700 07057 4500          ASCOUT
 4701 07060 5770           PERIOD
 4702 07061 7000          NOP
 4703 07062 5514          EXIT
 4704             
 4705 07063 0000  SYSER0, 0
 4706 07064 4723          JMS I SYSHLT    /CLEAR THE RUN-BIT & CHECK DECTAPES
 4707 07065 6211          DATFLD
 4708 07066 1472          TAD I IOTP7
 4709 07067 0035          AND C0007
 4710 07070 1324          TAD SYSETB
 4711 07071 3310          DCA SYSER1      /SAVE THE POINTER TO THE ERROR MESSAGE
 4712 07072 1472          TAD I IOTP7
 4713 07073 0041          AND C7770       /CLEAR THE ERROR-CODE
 4714 07074 3472          DCA I IOTP7
 4715 07075 2072          ISZ IOTP7
 4716 07076 1472          TAD I IOTP7
 4717 07077 0221          AND SYJSER      / AND CLEAR JSERR IN STR1
 4718 07100 3472          DCA I IOTP7
 4719 07101 6221          CHDF
 4720 07102 1710          TAD I SYSER1
 4721 07103 3310          DCA SYSER1
 4722 07104 4500          ASCOUT
 4723 07105 6162           CRLF

      /TSS/8 CONFIGURATION FOR UWM                                      Page 119


 4724 07106 5312          JMP SYSER2
 4725 07107 4500          ASCOUT          /NOW TYPE THE ERROR MESSAGE
 4726 07110 0000  SYSER1,  0
 4727 07111 7000          NOP
 4728 07112 4500  SYSER2, ASCOUT          / "FOR JOB"
 4729 07113 5364           FORJOB
 4730 07114 5322          JMP SYSER4
 4731 07115 1053          TAD SIJOB
 4732 07116 4622          JMS I SYSEJN    / AND THE 2-DIGIT JOB #
 4733 07117 4500          ASCOUT
 4734 07120 6162           CRLF
 4735 07121 7000          NOP
 4736 07122 5663  SYSER4, JMP I SYSER0
 4737             
 4738 07123 3754  SYSHLT, SCOMND
 4739 07124 7125  SYSETB, .+1
 4740 07125 5772          QQEST
 4741 07126 7135          SYSET1
 4742 07127 7151          SYSET2
 4743 07130 7151          SYSET3
 4744 07131 5772          QQEST
 4745 07132 7164          SYSET5
 4746 07133 7177          SYSET6
 4747 07134 5772          QQEST
 4748             
 4749 07135 0311  SYSET1, "I;"L;"L;"E;"G;"A;"L;" ;"I;"O;"T;0
      07136 0314
      07137 0314
      07140 0305
      07141 0307
      07142 0301
      07143 0314
      07144 0240
      07145 0311
      07146 0317
      07147 0324
      07150 0000
 4750             SYSET2,
 4751 07151 0323  SYSET3, "S;"W;"A;"P;" ;"E;"R;"R;"O;"R;0
      07152 0327
      07153 0301
      07154 0320
      07155 0240
      07156 0305
      07157 0322
      07160 0322
      07161 0317
      07162 0322
      07163 0000
 4752 07164 0304  SYSET5, "D;"I;"S;"C;" ;"E;"R;"R;"O;"R;0
      07165 0311
      07166 0323
      07167 0303
      07170 0240
      07171 0305
      07172 0322
      07173 0322

      /TSS/8 CONFIGURATION FOR UWM                                      Page 120


      07174 0317
      07175 0322
      07176 0000
 4753 07177 0310  SYSET6, "H;"U;"N;"G;" ;"D;"E;"V;"I;"C;"E;0
      07200 0325
      07201 0316
      07202 0307
      07203 0240
      07204 0304
      07205 0305
      07206 0326
      07207 0311
      07210 0303
      07211 0305
      07212 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 121


 4754             /RETURN FOR FILE COMMANDS
 4755             
 4756 07213 4517  FIPEND, GETWRD
 4757 07214 0013           JOBREG+2
 4758 07215 7450          SNA             /ANY ERROR CODE RETURNED?
 4759 07216 5535          JMP I COMEXA    /NO - JUST EXIT
 4760 07217 3064          DCA IOTP1
 4761 07220 1267          TAD FIPETB
 4762 07221 3010          DCA IX1
 4763 07222 1410  FIPEN1, TAD I IX1
 4764 07223 7450          SNA             /REACHED END OF TABLE?
 4765 07224 5235          JMP FIPEN2      /YES - MUST BE 'EXTEND' FAILURE
 4766 07225 1064          TAD IOTP1
 4767 07226 7640          SZA CLA         /THIS CODE?
 4768 07227 5222          JMP FIPEN1      /NO - KEEP LOOKING
 4769 07230 1010          TAD IX1         /GET MESSAGE ADDRESS
 4770 07231 1301          TAD FIPMTB
 4771 07232 3064          DCA IOTP1
 4772 07233 1464          TAD I IOTP1
 4773 07234 5533          JMP I COMERA
 4774             
 4775 07235 4500  FIPEN2, ASCOUT
 4776 07236 6162           CRLF
 4777 07237 7000          NOP
 4778 07240 4500          ASCOUT          / "FAILED BY N SEGMENTS"
 4779 07241 7650           FAILBY
 4780 07242 7000          NOP
 4781 07243 1064          TAD IOTP1
 4782 07244 4666          JMS I FIPDEC    /CONVERT THE NUMBER TO DECIMAL
 4783 07245 6205           COMBUF-1
 4784 07246 4500          ASCOUT          / AND TYPE IT
 4785 07247 6206           COMBUF
 4786 07250 7000          NOP
 4787 07251 4500          ASCOUT
 4788 07252 7522           SEGMTA
 4789 07253 7000          NOP
 4790 07254 5535          JMP I COMEXA
 4791             
 4792 07255 1015  DUPLEX, TAD C0200               /DUPLEX BIT
 4793 07256 3063  UNDUPL, DCA IOTP0
 4794 07257 6211          DATFLD
 4795 07260 1455          TAD I COMDB0            /WORD 1 OF DDB
 4796 07261 0265          AND MDUPL               /CLEAR BIT
 4797 07262 1063          TAD IOTP0               /SET BIT
 4798 07263 3455          DCA I COMDB0            /SAVE IT
 4799 07264 5535          JMP I COMEXA
 4800 07265 7577  MDUPL,  -DUPL-1
 4801             
 4802 07266 6020  FIPDEC, DECOUT
 4803             
 4804 07267 7267  FIPETB, .
 4805 07270 4000          -4000   /FILE NOT OPEN
 4806 07271 3400          -4400   /FILE IN USE
 4807 07272 3000          -5000   /DIRECTORY FULL
 4808 07273 2400          -5400   /BAD DIRECTORY
 4809 07274 2000          -6000   /PROTECTION VIOLATION
 4810 07275 1400          -6400   /BAD FILE NAME FOR RENAME

      /TSS/8 CONFIGURATION FOR UWM                                      Page 122


 4811 07276 1000          -7000   /FILE NOT FOUND
 4812 07277 0400          -7400   /DISC FULL
 4813 07300 0000          0
 4814 07301 0012  FIPMTB, .-FIPETB
 4815 07302 7312          FM4000
 4816 07303 7663          FM4400
 4817 07304 7677          FM5000
 4818 07305 7330          FM5400
 4819 07306 7346          FM6000
 4820 07307 7716          FM6400
 4821 07310 7373          FM7000
 4822 07311 7733          FM7400
 4823             
 4824 07312 0306  FM4000, "F;"I;"L;"E;" ;"N;"O;"T;" ;"O;"P;"E;"N;0
      07313 0311
      07314 0314
      07315 0305
      07316 0240
      07317 0316
      07320 0317
      07321 0324
      07322 0240
      07323 0317
      07324 0320
      07325 0305
      07326 0316
      07327 0000
 4825 07330 0302  FM5400, "B;"A;"D;" ;"D;"I;"R;"E;"C;"T;"O;"R;"Y;0
      07331 0301
      07332 0304
      07333 0240
      07334 0304
      07335 0311
      07336 0322
      07337 0305
      07340 0303
      07341 0324
      07342 0317
      07343 0322
      07344 0331
      07345 0000
 4826 07346 0320  FM6000, "P;"R;"O;"T;"E;"C;"T;"I;"O;"N;" ;"V;"I;"O;"L;"A;"T;"I;"O;"N;0
      07347 0322
      07350 0317
      07351 0324
      07352 0305
      07353 0303
      07354 0324
      07355 0311
      07356 0317
      07357 0316
      07360 0240
      07361 0326
      07362 0311
      07363 0317
      07364 0314
      07365 0301

      /TSS/8 CONFIGURATION FOR UWM                                      Page 123


      07366 0324
      07367 0311
      07370 0317
      07371 0316
      07372 0000
 4827 07373 0306  FM7000, "F;"I;"L;"E;" ;"N;"O;"T;" ;"F;"O;"U;"N;"D;0
      07374 0311
      07375 0314
      07376 0305
      07377 0240
      07400 0316
      07401 0317
      07402 0324
      07403 0240
      07404 0306
      07405 0317
      07406 0325
      07407 0316
      07410 0304
      07411 0000
 4828 07412 0301  LOGE0,  "A;"L;"R;"E;"A;"D;"Y;" ;"L;"O;"G;"G;"E;"D;" ;"I;"N;0
      07413 0314
      07414 0322
      07415 0305
      07416 0301
      07417 0304
      07420 0331
      07421 0240
      07422 0314
      07423 0317
      07424 0307
      07425 0307
      07426 0305
      07427 0304
      07430 0240
      07431 0311
      07432 0316
      07433 0000
 4829 07434 0240  LBRACK, " ;"[;0
      07435 0333
      07436 0000
 4830 07437 0335  RBRACK, "];" ;"O;"N;" ;"K;0
      07440 0240
      07441 0317
      07442 0316
      07443 0240
      07444 0313
      07445 0000
 4831 07446 0324  TYCRLB, "T;"Y;"P;"E;" ;"^;"B;"S;" ;"F;"I;"R;"S;"T;215;212;0
      07447 0331
      07450 0320
      07451 0305
      07452 0240
      07453 0336
      07454 0302
      07455 0323
      07456 0240

      /TSS/8 CONFIGURATION FOR UWM                                      Page 124


      07457 0306
      07460 0311
      07461 0322
      07462 0323
      07463 0324
      07464 0215
      07465 0212
      07466 0000
 4832 07467 0303  FORMSG, "C;"A;"N;"';"T;" ;"F;"O;"R;"C;"E;" ;"A
      07470 0301
      07471 0316
      07472 0247
      07473 0324
      07474 0240
      07475 0306
      07476 0317
      07477 0322
      07500 0303
      07501 0305
      07502 0240
      07503 0301
 4833 07504 0240          " ;"M;"A;"N;"A;"G;"E;"R;0
      07505 0315
      07506 0301
      07507 0316
      07510 0301
      07511 0307
      07512 0305
      07513 0322
      07514 0000
 4834 07515 0240  FSEGMS, " ;"F;"R;"E;"E
      07516 0306
      07517 0322
      07520 0305
      07521 0305
 4835 07522 0240  SEGMTA, " ;"S;"E;"G;"M;"E;"N;"T;"S;0
      07523 0323
      07524 0305
      07525 0307
      07526 0315
      07527 0305
      07530 0316
      07531 0324
      07532 0323
      07533 0000
 4836             
 4837       0002  VERDG1= VERNUM%12
 4838       0003  VERDG2= -VERDG1^12+VERNUM
 4839 07534 0215  VERSIM, 215;212;"U;"W;"M;"';"S;" ;"T;"S;"S;"-
      07535 0212
      07536 0325
      07537 0327
      07540 0315
      07541 0247
      07542 0323
      07543 0240
      07544 0324

      /TSS/8 CONFIGURATION FOR UWM                                      Page 125


      07545 0323
      07546 0323
      07547 0255
 4840                     IFNZRO CPU-3  <
 4841 07550 0270          "8
 4842                             IFZERO CPU      <"/;"I>
 4843 07551 0257                  IFZERO CPU-2    <"/;"E>
      07552 0305
 4844                     >
 4845                     IFZERO CPU-3  <"1;"2>
 4846 07553 0256          ".;"0+VERDG1;"0+VERDG2
      07554 0262
      07555 0263
 4847 07556 0240          " ;" ;" ;0
      07557 0240
      07560 0240
      07561 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 126


 4848       37777777650  VERBRK= -130    /SPACE FOR 'BROADCAST' TEXT (87 CHARACTERS)
 4849                     IFNZRO VERBRK-.&4000    <GLITCH>
 4850       7650          *VERBRK
 4851             /NOTE THAT THE 'VERBRK' BUFFER CAN OVERLAY
 4852             /ANYTHING FROM HERE TO THE END OF THIS FIELD.
 4853             /ANYTHING PLACED HERE SHOULD ONLY BE USED
 4854             /IMMEDIATELY AFTER SI IS LOADED. FOR EXAMPLE,
 4855             /THE 'FAILED BY N SEGMENTS' MESSAGE IS ONLY TYPED
 4856             /AFTER A RETURN FROM FIP, IT DOESN'T MATTER IF IT IS
 4857             /CLOBBERED, THEREFORE.
 4858             
 4859 07650 0306  FAILBY, "F;"A;"I;"L;"E;"D;" ;"B;"Y;" ;0
      07651 0301
      07652 0311
      07653 0314
      07654 0305
      07655 0304
      07656 0240
      07657 0302
      07660 0331
      07661 0240
      07662 0000
 4860 07663 0306  FM4400, "F;"I;"L;"E;" ;"I;"N;" ;"U;"S;"E;0
      07664 0311
      07665 0314
      07666 0305
      07667 0240
      07670 0311
      07671 0316
      07672 0240
      07673 0325
      07674 0323
      07675 0305
      07676 0000
 4861 07677 0304  FM5000, "D;"I;"R;"E;"C;"T;"O;"R;"Y;" ;"F;"U;"L;"L;0
      07700 0311
      07701 0322
      07702 0305
      07703 0303
      07704 0324
      07705 0317
      07706 0322
      07707 0331
      07710 0240
      07711 0306
      07712 0325
      07713 0314
      07714 0314
      07715 0000
 4862 07716 0302  FM6400, "B;"A;"D;" ;"F;"I;"L;"E;"N;"A;"M;"E;0
      07717 0301
      07720 0304
      07721 0240
      07722 0306
      07723 0311
      07724 0314
      07725 0305

      /TSS/8 CONFIGURATION FOR UWM                                      Page 127


      07726 0316
      07727 0301
      07730 0315
      07731 0305
      07732 0000
 4863 07733 0304  FM7400, "D;"I;"S;"C;" ;"F;"U;"L;"L;0
      07734 0311
      07735 0323
      07736 0303
      07737 0240
      07740 0306
      07741 0325
      07742 0314
      07743 0314
      07744 0000

      /TSS/8 CONFIGURATION FOR UWM                                      Page 128


 4864                     IFNZRO 7745-.&4000      <GLITCH>
 4865       7745          *7745
 4866             /
 4867             /SUPER-SHORT HAND-KEYABLE BOOTSTRAP FOR TSS/8!!
 4868             /KEYIN (IN FIELD 0):
 4869             /       7750 - 6603
 4870             /       7751 - 7600
 4871             /       7752 - 5352
 4872             /
 4873             /THEN LOAD ADDRESS 7750 AND START (OR 'CLEAR' & 'CONT').
 4874             /IF DISC COPY OF TSS/8 IS INTACT, SYSTEM WILL RESTART.
 4875             /
 4876             /BECAUSE OF THE PECULIAR OPERATION OF THIS BOOTSTRAP,
 4877             /A MORE COMPLETE EXPLANATION IS IN ORDER. THE KEYED-IN
 4878             /INSTRUCTIONS MERELY START A DISC-READ AND LOOP. THE
 4879             /DISC READ STARTS AT LOCATION ZERO ON THE DISC BECAUSE
 4880             /THE 'CLEAR' OR 'START' KEY WAS PRESSED, WHICH CLEARS THE
 4881             /CONTROLLER. THEREFORE, LOCATION ZERO IN 'SI' IS READ INTO
 4882             /CORE STARTING AT LOCATION 7601. ORDINARILY, 7750 & 7751
 4883             /CONTAIN THE WORD-COUNT & CORE-ADDRESS; HOWEVER, WHEN
 4884             /LOCATIONS 147 & 150 OF 'SI' ARE READ IN, THEY OVERLAY 7750 &
 4885             /7751 WITH THE POINTERS NECESSARY TO CONTINUE THE READ AND
 4886             /FILL THE REST OF CORE WITH 'SI'. NOTE THAT THE SECOND TIME
 4887             /7750 & 7751 ARE OVERLAYED, IT IS WITH THE CORRECT VALUES TO
 4888             /CAUSE THE LAST BIT OF 'SI' TO BE LOADED. WHEN THE 'JMP .'
 4889             /IS OVERLAYED AT 7752, IT IS WITH A 'JMP BOOT1' WHERE THE
 4890             /DISC COMPLETION IS AWAITED. WHEN THE DISC IS FINISHED,
 4891             /A NORMAL BOOTSTRAP SEQUENCE IS EXECUTED WHICH READS 'INIT'
 4892             /INTO THE APPROPRIATE FIELD AND STARTS IT.
 4893             /
 4894             /NOTE THAT WE SET THE DATA-BREAK CONTROL WORDS INDIRECTLY;
 4895             /THIS ALLOWS THIS BOOTSTRAP TO BE USED IF IT HAPPENS TO BE
 4896             /IN ANOTHER FIELD ALREADY.
 4897             /
 4898 07745 6622  BOOT1,  DFSC            /WAIT FOR TRANSFER TO COMPLETE
 4899 07746 5345          JMP .-1
 4900 07747 5353          JMP BOOT        /THEN GO LOAD 'INIT'
 4901             /
 4902 07750 7751          7751    /THESE MUST BE HERE BECAUSE THEY
 4903 07751 7751          7751    / OVERLAY CORE!!!
 4904 07752 5345          JMP BOOT1       /THIS OVERLAYS 'JMP .'
 4905             /
 4906 07753 6201  BOOT,   CDF
 4907                     IFNZRO CPU-2    <IOF>
 4908 07754 6007          IFZERO CPU-2    <CAF>
 4909 07755 7340          CLA CLL CMA     /SET UP TO READ 'INIT'
 4910 07756 3774          DCA I K7751
 4911 07757 3773          DCA I K7750     /SET (-) WORD-COUNT
 4912 07760 1372          TAD BTFLD
 4913             
 4914                     IFZERO RF08 <
 4915 07761 6615          DIML            /SET MEMORY FIELD
 4916 07762 7326          CLA CLL CML RTL
 4917 07763 6643          DXAL            /SET DISC TRACK #
 4918                     >
 4919                     IFZERO RF08-40 <
 4920                     DEAL

      /TSS/8 CONFIGURATION FOR UWM                                      Page 129


 4921                     CLA
 4922                     >
 4923 07764 6603          DMAR            / AND READ THE TRACK
 4924 07765 6622          DFSC
 4925 07766 5365          JMP .-1         /WAIT FOR COMPLETION
 4926 07767 6223          CIF CDF INFLD
 4927 07770 5771          JMP I .+1       /THEN ENTER 'INIT'
 4928 07771 4201          AUTOST
 4929             
 4930                     IFZERO RF08 <
 4931 07772 0020  BTFLD,  INFLD   /FIELD TO PUT 'INIT' INTO
 4932                     >
 4933                     IFZERO RF08-40 <
 4934             BTFLD,  200+INFLD       /'INIT' TRACK & IT'S FIELD
 4935                     >
 4936 07773 7750  K7750,  7750
 4937 07774 7751  K7751,  7751
 4938             
 4939             /////   $$$$$

      No detected errors
